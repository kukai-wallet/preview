{"version":3,"sources":["webpack:///beacon-sdk/dist/esm/MockWindow.js","webpack:///beacon-sdk/dist/esm/Serializer.js","webpack:///beacon-sdk/dist/esm/alert/Alert.js","webpack:///beacon-sdk/dist/esm/alert/Toast.js","webpack:///beacon-sdk/dist/esm/alert/alert-templates.js","webpack:///beacon-sdk/dist/esm/beacon-message-events.js","webpack:///beacon-sdk/dist/esm/clients/beacon-client/BeaconClient.js","webpack:///beacon-sdk/dist/esm/clients/client/Client.js","webpack:///beacon-sdk/dist/esm/clients/dapp-client/DAppClient.js","webpack:///beacon-sdk/dist/esm/clients/wallet-client/WalletClient.js","webpack:///beacon-sdk/dist/esm/constants.js","webpack:///beacon-sdk/dist/esm/errors/AbortedBeaconError.js","webpack:///beacon-sdk/dist/esm/errors/BeaconError.js","webpack:///beacon-sdk/dist/esm/errors/BroadcastBeaconError.js","webpack:///beacon-sdk/dist/esm/errors/NetworkNotSupportedBeaconError.js","webpack:///beacon-sdk/dist/esm/errors/NoAddressBeaconError.js","webpack:///beacon-sdk/dist/esm/errors/NoPrivateKeyBeaconError.js","webpack:///beacon-sdk/dist/esm/errors/NotGrantedBeaconError.js","webpack:///beacon-sdk/dist/esm/errors/ParametersInvalidBeaconError.js","webpack:///beacon-sdk/dist/esm/errors/TooManyOperationsBeaconError.js","webpack:///beacon-sdk/dist/esm/errors/TransactionInvalidBeaconError.js","webpack:///beacon-sdk/dist/esm/errors/UnknownBeaconError.js","webpack:///beacon-sdk/dist/esm/events.js","webpack:///beacon-sdk/dist/esm/index.js","webpack:///beacon-sdk/dist/esm/interceptors/IncomingRequestInterceptor.js","webpack:///beacon-sdk/dist/esm/interceptors/OutgoingResponseInterceptor.js","webpack:///beacon-sdk/dist/esm/managers/AccountManager.js","webpack:///beacon-sdk/dist/esm/managers/AppMetadataManager.js","webpack:///beacon-sdk/dist/esm/managers/PeerManager.js","webpack:///beacon-sdk/dist/esm/managers/PermissionManager.js","webpack:///beacon-sdk/dist/esm/managers/PermissionValidator.js","webpack:///beacon-sdk/dist/esm/managers/StorageManager.js","webpack:///beacon-sdk/dist/esm/matrix-client/MatrixClient.js","webpack:///beacon-sdk/dist/esm/matrix-client/MatrixClientEventEmitter.js","webpack:///beacon-sdk/dist/esm/matrix-client/MatrixClientStore.js","webpack:///beacon-sdk/dist/esm/matrix-client/MatrixHttpClient.js","webpack:///beacon-sdk/dist/esm/matrix-client/models/MatrixClientEvent.js","webpack:///beacon-sdk/dist/esm/matrix-client/models/MatrixMessage.js","webpack:///beacon-sdk/dist/esm/matrix-client/models/MatrixRoom.js","webpack:///beacon-sdk/dist/esm/matrix-client/services/MatrixEventService.js","webpack:///beacon-sdk/dist/esm/matrix-client/services/MatrixRoomService.js","webpack:///beacon-sdk/dist/esm/matrix-client/services/MatrixUserService.js","webpack:///beacon-sdk/dist/esm/matrix-client/utils/events.js","webpack:///beacon-sdk/dist/esm/storage/ChromeStorage.js","webpack:///beacon-sdk/dist/esm/storage/LocalStorage.js","webpack:///beacon-sdk/dist/esm/storage/Storage.js","webpack:///beacon-sdk/dist/esm/storage/getStorage.js","webpack:///beacon-sdk/dist/esm/transports/ChromeMessageTransport.js","webpack:///beacon-sdk/dist/esm/transports/P2PTransport.js","webpack:///beacon-sdk/dist/esm/transports/PostMessageTransport.js","webpack:///beacon-sdk/dist/esm/transports/Transport.js","webpack:///beacon-sdk/dist/esm/transports/clients/ChromeMessageClient.js","webpack:///beacon-sdk/dist/esm/transports/clients/CommunicationClient.js","webpack:///beacon-sdk/dist/esm/transports/clients/MessageBasedClient.js","webpack:///beacon-sdk/dist/esm/transports/clients/P2PCommunicationClient.js","webpack:///beacon-sdk/dist/esm/transports/clients/PostMessageClient.js","webpack:///beacon-sdk/dist/esm/types/BeaconErrorType.js","webpack:///beacon-sdk/dist/esm/types/ExtensionMessageTarget.js","webpack:///beacon-sdk/dist/esm/types/Origin.js","webpack:///beacon-sdk/dist/esm/types/beacon/BeaconMessageType.js","webpack:///beacon-sdk/dist/esm/types/beacon/NetworkType.js","webpack:///beacon-sdk/dist/esm/types/beacon/PermissionScope.js","webpack:///beacon-sdk/dist/esm/types/storage/StorageKey.js","webpack:///beacon-sdk/dist/esm/types/storage/StorageKeyReturnDefaults.js","webpack:///beacon-sdk/dist/esm/types/tezos/OperationTypes.js","webpack:///beacon-sdk/dist/esm/types/transport/TransportStatus.js","webpack:///beacon-sdk/dist/esm/types/transport/TransportType.js","webpack:///beacon-sdk/dist/esm/utils/Logger.js","webpack:///beacon-sdk/dist/esm/utils/assert-never.js","webpack:///beacon-sdk/dist/esm/utils/available-transports.js","webpack:///beacon-sdk/dist/esm/utils/block-explorer.js","webpack:///beacon-sdk/dist/esm/utils/crypto.js","webpack:///beacon-sdk/dist/esm/utils/exposed-promise.js","webpack:///beacon-sdk/dist/esm/utils/generate-uuid.js","webpack:///beacon-sdk/dist/esm/utils/get-account-identifier.js","webpack:///beacon-sdk/dist/esm/utils/get-tzip10-link.js","webpack:///beacon-sdk/dist/esm/utils/platform.js","webpack:///beacon-sdk/dist/esm/utils/qr.js","webpack:///beacon-sdk/dist/esm/utils/replace-in-template.js","webpack:///beacon-sdk/dist/esm/utils/tezblock-blockexplorer.js","webpack:///beacon-sdk/dist/esm/utils/utils.js","webpack:///(webpack)/buildin/global.js","webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/components/account-view/account-view.component.ts","webpack:///src/app/components/account-view/account-view.component.html","webpack:///src/app/components/accounts/accounts.component.ts","webpack:///src/app/components/accounts/accounts.component.html","webpack:///src/app/components/activate/activate.component.ts","webpack:///src/app/components/activate/activate.component.html","webpack:///src/app/components/agreement/agreement.component.ts","webpack:///src/app/components/agreement/agreement.component.html","webpack:///src/app/components/agreement/privacy-policy/privacy-policy.component.ts","webpack:///src/app/components/agreement/privacy-policy/privacy-policy.component.html","webpack:///src/app/components/agreement/terms-of-use/terms-of-use.component.ts","webpack:///src/app/components/agreement/terms-of-use/terms-of-use.component.html","webpack:///src/app/components/connect-ledger/connect-ledger.component.html","webpack:///src/app/components/connect-ledger/connect-ledger.component.ts","webpack:///src/app/components/delegate/delegate.component.html","webpack:///src/app/components/delegate/delegate.component.ts","webpack:///src/app/components/footer/footer.component.ts","webpack:///src/app/components/footer/footer.component.html","webpack:///src/app/components/header/header.component.ts","webpack:///src/app/components/header/header.component.html","webpack:///src/app/components/logged-in/logged-in.component.ts","webpack:///src/app/components/logged-in/logged-in.component.html","webpack:///src/app/components/messages/messages.component.ts","webpack:///src/app/components/messages/messages.component.html","webpack:///src/app/components/mnemonic-import/mnemonic-import.component.ts","webpack:///src/app/components/mnemonic-import/mnemonic-import.component.html","webpack:///src/app/components/new-implicit/new-implicit.component.html","webpack:///src/app/components/new-implicit/new-implicit.component.ts","webpack:///src/app/components/new-wallet/new-wallet.component.html","webpack:///src/app/components/new-wallet/new-wallet.component.ts","webpack:///src/app/components/permission-request/permission-request.component.ts","webpack:///src/app/components/permission-request/permission-request.component.html","webpack:///src/app/components/qr-scanner/qr-scanner.component.html","webpack:///src/app/components/qr-scanner/qr-scanner.component.ts","webpack:///src/app/components/receive/receive.component.ts","webpack:///src/app/components/receive/receive.component.html","webpack:///src/app/components/send/send.component.html","webpack:///src/app/components/send/send.component.ts","webpack:///src/app/components/settings/settings.component.ts","webpack:///src/app/components/settings/settings.component.html","webpack:///src/app/components/spinner/spinner.component.ts","webpack:///src/app/components/spinner/spinner.component.html","webpack:///src/app/components/start/start.component.ts","webpack:///src/app/components/start/start.component.html","webpack:///src/app/components/torus/torus.component.html","webpack:///src/app/components/torus/torus.component.ts","webpack:///src/app/components/uri-handler/uri-handler.component.ts","webpack:///src/app/components/uri-handler/uri-handler.component.html","webpack:///src/app/constants.ts","webpack:///src/app/interfaces.ts","webpack:///src/app/pipes/delegator-name.pipe.ts","webpack:///src/app/pipes/error-handling.pipe.ts","webpack:///src/app/pipes/time-ago.pipe.ts","webpack:///src/app/pipes/truncate.pipe.ts","webpack:///src/app/services/activity/activity.service.ts","webpack:///src/app/services/balance/balance.service.ts","webpack:///src/app/services/beacon/beacon.service.ts","webpack:///src/app/services/coordinator/coordinator.service.ts","webpack:///src/app/services/deeplink/deeplink.service.ts","webpack:///src/app/services/delegate/delegate.service.ts","webpack:///src/app/services/encryption/encryption.service.ts","webpack:///src/app/services/estimate/estimate.service.ts","webpack:///src/app/services/export/export.service.ts","webpack:///src/app/services/import/import.service.ts","webpack:///src/app/services/indexer/conseil/conseil.service.ts","webpack:///src/app/services/indexer/indexer.service.ts","webpack:///src/app/services/indexer/tzkt/tzkt.service.ts","webpack:///src/app/services/input-validation/input-validation.service.ts","webpack:///src/app/services/ledger/ledger.service.ts","webpack:///src/app/services/lookup/lookup.service.ts","webpack:///src/app/services/message/message.service.ts","webpack:///src/app/services/operation/operation.service.ts","webpack:///src/app/services/torus/torus.service.ts","webpack:///src/app/services/tzrate/tzrate.service.ts","webpack:///src/app/services/wallet/wallet.service.ts","webpack:///src/app/services/wallet/wallet.ts","webpack:///src/app/views/error/404.component.ts","webpack:///src/app/views/error/404.component.html","webpack:///src/app/views/error/500.component.ts","webpack:///src/app/views/error/500.component.html","webpack:///src/data/bakers-list.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts","webpack:///util (ignored)","webpack:///util (ignored)?264f","webpack:///util (ignored)?83cd","webpack:///crypto (ignored)?e5b4","webpack:///buffer (ignored)?75a6","webpack:///buffer (ignored)?d821","webpack:///buffer (ignored)?3694","webpack:///buffer (ignored)?ebc1","webpack:///buffer (ignored)?fa72","webpack:///fs (ignored)?ee27","webpack:///fs (ignored)?bc3b","webpack:///util (ignored)?8744","webpack:///buffer (ignored)","webpack:///crypto (ignored)","webpack:///crypto (ignored)?9177","webpack:///fs (ignored)","webpack:///src/methods/node.js (ignored)","webpack:///node.js (ignored)","webpack:///buffer (ignored)?a3f0"],"names":["cbs","_","undefined","myWindow","postMessage","message","_target","console","log","forEach","callbackElement","data","addEventListener","_name","eventCallback","push","removeEventListener","splice","indexOf","element","window","windowError","clearMockWindowState","length","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Serializer","str","JSON","stringify","Buffer","from","encoded","Error","parse","toString","document","timeout","formatBody","dataString","replace","formatAlert","id","body","title","type","buttons","pairingPayload","callToAction","buttonsHtml","map","button","index","style","text","allStyles","css","pair","alertContainer","container","html","join","start","end","error","substr","closeAlert","elm","getElementById","animationDuration","localTimeout","clearTimeout","className","setTimeout","wrapper","removeChild","closeAlerts","openAlertElements","querySelectorAll","alertIds","split","all","openAlert","alertConfig","timer","createElement","setAttribute","_b","_a","actionCallback","formattedBody","innerHTML","appendChild","buttonElement","closeButton","platform","mainText","iosList","androidList","desktopList","webList","showPlatform","platformSwitch","display","showQr","switchPlatform","getToastHTML","config","showDoneButton","closeToast","openToast","toastConfig","doneButton","alertTemplates","messageEvents","PermissionRequest","sent","PERMISSION_REQUEST_SENT","success","PERMISSION_REQUEST_SUCCESS","PERMISSION_REQUEST_ERROR","PermissionResponse","UNKNOWN","OperationRequest","OPERATION_REQUEST_SENT","OPERATION_REQUEST_SUCCESS","OPERATION_REQUEST_ERROR","OperationResponse","SignPayloadRequest","SIGN_REQUEST_SENT","SIGN_REQUEST_SUCCESS","SIGN_REQUEST_ERROR","SignPayloadResponse","BroadcastRequest","BROADCAST_REQUEST_SENT","BROADCAST_REQUEST_SUCCESS","BROADCAST_REQUEST_ERROR","BroadcastResponse","Disconnect","BeaconClient","_beaconId","events","_keyPair","name","storage","initSDK","removeBeaconEntriesFromStorage","set","BEACON_SDK_VERSION","loadOrCreateBeaconSecret","keyPair","publicKey","allKeys","Object","values","key","get","BEACON_SDK_SECRET_SEED","storageValue","promise","Client","rateLimit","rateLimitWindowInSeconds","requestCounter","_transport","_isConnected","eventHandlers","accountManager","matrixNodes","handleResponse","connectionInfo","getAccounts","accountIdentifier","getAccount","removeAccount","removeAllAccounts","now","Date","getTime","filter","date","isDapp","transport","status","RESOLVED","setTransport","newTransport","setBeaconTransport","setBeaconTransportTimeout","extension","postMessageAvailable","P2P","getPeers","peer","addPeer","connectionStatus","NOT_CONNECTED","connect","addListener","deserialize","deserializedMessage","CONNECTING","reconnect","isSettled","emit","ACTIVE_TRANSPORT_SET","logger","DAppClient","assign","openRequests","Map","_activeAccount","iconUrl","blockExplorer","ACTIVE_ACCOUNT","activeAccountIdentifier","setActiveAccount","storageError","openRequest","removePeer","senderId","version","relayServer","P2P_CHANNEL_CLOSED","_isDapp","_super","create","init","call","initResponse","account","ACTIVE_ACCOUNT_SET","beaconId","icon","_connect","removeAccountResult","getActiveAccount","activeAccount","removePeerResult","removeAccountsForPeers","peers","removeAllPeers","internalEvent","on","sendInternalError","permissions","scopes","includes","OPERATION_REQUEST","SIGN","input","getAppMetadata","network","MAINNET","request","appMetadata","makeRequest","requestError","handleRequestError","pubkey","pubKey","address","origin","threshold","accountInfo","connectedAt","addAccount","output","notifySuccess","connectionContext","payload","sourceAddress","signature","operationDetails","transactionHash","signedTransaction","errorMessage","INTERNAL_ERROR","peersToRemove","accounts","peerIdsToRemove","accountsToRemove","accountIdentifiersToRemove","removeAccounts","beaconError","errorType","errorCallback","NO_PRIVATE_KEY_FOUND_ERROR","operationRequest","emitError","warn","getError","response","requestInput","addRequestAndCheckIfRateLimited","LOCAL_RATE_LIMIT_REACHED","checkPermissions","NO_PERMISSIONS","exposed","addOpenRequest","serialize","send","WalletClient","pendingRequests","permissionManager","appMetadataManager","newMessageCallback","some","intercept","interceptorCallback","find","pendingRequest","respondToMessage","getAppMetadataList","removeAppMetadata","removeAllAppMetadata","getPermissions","getPermission","removePermission","removeAllPermissions","removePermissionsForPeers","permissionsToRemove","permission","permissionIdentifiersToRemove","permissionInfo","removePermissions","serializedMessage","SDK_VERSION","BEACON_VERSION","DEBUG","AbortedBeaconError","ABORTED_ERROR","BeaconError","description","BROADCAST_ERROR","NETWORK_NOT_SUPPORTED","NO_ADDRESS_ERROR","NOT_GRANTED_ERROR","PARAMETERS_INVALID_ERROR","TOO_MANY_OPERATIONS","TRANSACTION_INVALID_ERROR","UNKNOWN_ERROR","BroadcastBeaconError","NetworkNotSupportedBeaconError","NoAddressBeaconError","NoPrivateKeyBeaconError","NotGrantedBeaconError","ParametersInvalidBeaconError","TooManyOperationsBeaconError","TransactionInvalidBeaconError","UnknownBeaconError","serializer","BeaconEvent","showSentToast","toastError","showNoPermissionAlert","showErrorAlert","showRateLimitReached","showBeaconConnectedAlert","showChannelClosedAlert","showInternalErrorAlert","showQrCode","base58encoded","uri","showPermissionSuccessAlert","getAddressLink","link","open","showOperationSuccessAlert","getTransactionLink","showSignSuccessAlert","showBroadcastSuccessAlert","emptyHandler","eventType","defaultEventCallbacks","P2P_CHANNEL_CONNECT_SUCCESS","P2P_LISTEN_FOR_CHANNEL_OPEN","BeaconEventHandler","eventsToOverride","callbackMap","overrideDefaults","overrideError","event","listeners","listener","keys","untypedEvent","handler","IncomingRequestInterceptor","addAppMetadata","OutgoingResponseInterceptor","interceptorCallbackWrapper","msg","untypedMessage","website","addPermission","AccountManager","storageManager","ACCOUNTS","getAll","getOne","addOne","remove","accountIdentifiers","removeAll","hasPermission","bind","AppMetadataManager","APP_METADATA_LIST","appMetadataElement","senderIds","PeerManager","getPeer","peerInfo","publicKeys","PermissionManager","PERMISSION_LIST","PermissionValidator","filteredPermissions","fixArrayType","array","StorageManager","storageKey","predicate","entities","overwrite","i","filteredEntities","entity","MAX_POLLING_RETRIES","MatrixClient","store","eventEmitter","userService","roomService","eventService","onStateChanged","oldState","newState","stateChange","user","login","password","deviceId","update","accessToken","access_token","poll","pollingResponse","isRunning","syncToken","next_batch","pollingTimeout","pollingRetries","rooms","fromSync","removeListener","removeAllListeners","getRoom","members","requiresAuthorization","createRoom","invite","preset","is_direct","room_id","roomsOrIds","roomOrId","room","inviteToRoom","joinRoom","createTxnId","txnId","sendMessage","msgtype","interval","onSyncSuccess","onSyncError","sync","pollSync","continueSyncing","action","storedToken","timestamp","counter","txnNo","JOINED","INVITED","LEFT","httpClient","baseUrl","accountService","MatrixClientEventEmitter","arguments","eventEmitProviders","INVITE","isInvite","emitInvite","MESSAGE","isMessage","emitMessage","_oldState","_newState","emitIfEvent","object","provider","emitter","content","emitClientEvent","roomId","messages","reduce","flatten","toFlatten","concat","PRESERVED_FIELDS","MatrixClientStore","state","userId","onStateChangedListeners","waitReadyPromise","initFromStorage","stateUpdate","waitReady","setState","updateStorage","notifyListeners","subscribed","MATRIX_PRESERVED_STATE","preserved","toStore","requiresPreparation","toStoreCopy","updatedCachedFields","entries","Boolean","filteredState","prepareData","partialState","mergeRooms","oldRooms","_newRooms","newRooms","Array","isArray","merged","newRoom","merge","listenForAll","CLIENT_API_R0","MatrixHttpClient","endpoint","params","options","method","requestParams","headers","getHeaders","getParams","a","url","baseURL","apiUrl","_params","apiBase","endsWith","parts","apiParts","path","startsWith","MatrixClientEventType","MatrixMessageType","MatrixMessage","sender","MatrixRoomStatus","MatrixRoom","roomSync","creator","fromJoined","fromInvited","leave","fromLeft","previousState","member","joined","timeline","getMembersFromEvents","getMessagesFromEvents","invited","invite_state","left","getUniqueEvents","eventIds","uniqueEvents","eventId","event_id","MatrixEventService","cachedPromises","withCache","since","scheduleEvent","onSuccess","onError","sendEvent","scheduledEvent","put","promiseProvider","MatrixRoomService","post","user_id","MatrixUserService","identifier","device_id","isCreateEvent","isJoinEvent","isMessageEvent","isTextMessageEvent","TEXT","ChromeStorage","chrome","local","storageContent","runtime","LocalStorage","prefix","localStorage","getItem","getPrefixedKey","setItem","removeItem","Storage","getStorage","isSupported","ChromeMessageTransport","CHROME_MESSAGE","client","peerManager","TRANSPORT_POSTMESSAGE_PEERS","knownPeers","connectionPromises","listen","target","PAGE","newPeer","hasPeer","sendPairingResponse","peerToBeRemoved","unsubscribeFromEncryptedMessage","unsubscribeFromEncryptedMessages","listenForEncryptedMessage","sendResponse","WEBSITE","extras","onMessage","deserialized","notify","isAvailable","P2PTransport","listeningForChannelOpenings","TRANSPORT_P2P_PEERS","connectNewPeer","listenForChannelOpening","getHandshakeInfo","recipient","promises","PostMessageTransport","POST_MESSAGE","pairingResponse","context","EXTENSION","fn","location","Transport","CONNECTED","ChromeMessageClient","activeListeners","subscribeToMessages","senderPublicKey","messageCallback","has","callbackFunction","hasOwnProperty","encryptedMessage","decryptMessage","encryptedPayload","decrypted","decryptedMessage","recipientPublicKey","encryptMessage","tabs","query","pairingRequest","CommunicationClient","otherPublicKey","selfPrivateKey","kxSelfPrivateKey","kxSelfPublicKey","slice","kxOtherPublicKey","createCryptoBox","MessageBasedClient","debug","getPublicKey","clear","createCryptoBoxServer","privateKey","sharedRx","hexPayload","createCryptoBoxClient","sharedTx","KNOWN_RELAY_SERVERS","P2PCommunicationClient","replicationCount","clients","getRelayServer","publicKeyHash","nonce","hash","prevPromise","curr","prev","prevRelayServerHash","currRelayServerHash","getAbsoluteBigIntDifference","prevBigInt","currBigInt","isLessThan","loginRawDigest","Math","floor","rawSignature","getPublicKeyHash","subscribe","joinRooms","invitedRooms","isTextMessage","isSender","unsubscribe","recipientHash","getRelevantRoom","sendTextMessage","isChannelOpenMessage","splits","firstHash","secondHash","difference","minus","absoluteValue","joinedRooms","relevantRooms","roomElement","createTrustedPrivateRoom","getRoomById","args","PostMessageClient","BeaconErrorType","ExtensionMessageTarget","Origin","BeaconMessageType","NetworkType","PermissionScope","StorageKey","defaultValues","TezosOperationType","TransportStatus","TransportType","Logger","service","color","every","arg","_log","assertNever","empty","availableTransports","BlockExplorer","rpcUrls","toHex","getHexHash","getKeypairFromSeed","seed","encryptCryptoboxPayload","sharedKey","combinedPayload","decryptCryptoboxPayload","ciphertext","sealCryptobox","openCryptobox","getAddressFromPublicKey","prefixes","edpk","Uint8Array","sppk","p2pk","plainPublicKey","decoded","recipientString","ExposedPromiseStatus","notInitialized","ExposedPromise","_resolve","_reject","_status","PENDING","_promise","innerResolve","innerReject","_promiseResult","reason","_promiseError","REJECTED","isResolved","isRejected","generateGUID","buf","subbuf","getAccountIdentifier","rpcUrl","buffer","getTzip10Link","testUserAgent","win","expr","test","navigator","userAgent","matchMedia","matches","isMobile","isIpad","isIOS","isAndroid","isDesktop","getQrData","typeNumber","errorCorrectionLevel","qr","addData","make","createSvgTag","getModuleCount","black","white","whiteLine","blackLine","ascii","x","y","isDark","createDataURL","qrError","replaceInTemplate","placeholder","TezblockBlockExplorer","CARTHAGENET","DELPHINET","CUSTOM","getLinkForNetwork","transactionId","obj","g","Function","module","exports","webpackEmptyAsyncContext","req","code","routes","component","children","redirectTo","AppRoutingModule","forRoot","imports","AppComponent","walletService","coordinatorService","router","translate","CONSTANTS","setDefaultLang","languagePreference","browserLang","getBrowserLang","use","loadStoredWallet","wallet","startAll","evt","scrollTo","lang","language","stopAll","clearWallet","navigate","selector","templateUrl","styleUrls","DEFAULT_PERFECT_SCROLLBAR_CONFIG","suppressScrollX","HttpLoaderFactory","http","AppModule","loader","provide","useFactory","deps","declarations","providers","bootstrap","AccountViewComponent","route","messageService","timeAgoPipe","lookupService","activityService","trigger","snapshot","paramMap","addressExists","pipe","setInterval","transaction","destination","operationType","source","getCounterparty","copyToClipboard","instant","add","NET","BLOCK_EXPLORER_URL","$event","stopPropagation","AccountsComponent","wideAccounts","onResize","implicitAccounts","innerWidth","shortAddress","ActivateComponent","operationService","inputValidationService","formInvalid","checkInput","pkh","secret","activate","ans","opHash","res","addSuccess","addWarning","addError","err","activateFailed","AgreementComponent","displayAgreement","accepted","scrollBarWidth","offsetWidth","marginRight","overflowY","PrivacyPolicyComponent","TermsOfUseComponent","ConnectLedgerComponent","ledgerService","importService","activePanel","defaultPath","defaultText","pendingLedgerConfirmation","isHDDerivationPathCustom","derivationPath","startSpinner","getPublicAddress","pk","importFromPk","stopSpinner","validPublicKey","importWalletFromPk","originatedAccounts","setDefaultPath","getPk","DelegateComponent","modalService","exportService","modalOpen","activeView","recommendedFee","revealFee","pkhFee","ktFee","beaconMode","operationResponse","ledgerError","changes","isLedgerWallet","kind","openModal","delegate","toPkh","overflow","clearForm","checkReveal","inputElem","toPkhView","nativeElement","focus","closeModal","invalidInput","fee","storedFee","storedDelegate","getKeys","sendDelegation","pwd","broadCastLedgerTransaction","pwdValid","template1","modalRef1","show","template","ledgerSign","hide","modalRef2","modalRef3","getDelegate","Number","metadata","boost","requestLedgerSignature","op","unsignedOperation","signOperation","signedOp","signedOperation","broadcast","isRevealed","revealed","checkSource","plus","getImplicitAccount","downloadOperationData","FooterComponent","darkText","altFooter","HeaderComponent","settings","impAccs","displayName","verifier","logout","LoggedInComponent","MessagesComponent","torusService","subject","hostname","email","mailtoFormat","username","redditPmFormat","twitterId","twitterPmFormat","encodeURI","encodedBody","amount","getHostName","accountType","s","b","t","MnemonicImportComponent","showTacos","MIN_PWD_LENGTH","importOption","hdImport","pwdStrength","Downloaded","fileName","mnemonic","toLowerCase","trim","passphrase","mnemonics","keyPairFromAccountIndex","mnemonicToSeed","seedToKeyPair","validPwd","pwd1","pwd2","createEncryptedWallet","passwordStrengthDisplay","downloadWallet","importWalletFromObject","keyFile","typeCheckFile","pwdRequired","walletJson","walletType","encryptedSeed","iv","encryptedEntropy","importWalletFromJson","files","fileToUpload","item","validateFile","fileNotSupported","reader","FileReader","readAsText","onload","importPreCheck","ext","substring","lastIndexOf","NewImplicitComponent","cdRef","errorMsg","openPkhSpot","pwdView","incrementAccountIndex","activitiesCounter","balance","balanceXTZ","NewWalletComponent","userMnemonic","hideBlur","ekfDownloaded","generateSeed","createNewWallet","MNEMONIC","string","verify","wordsToVerify","mnemonicLength","random","sort","wordInput","shift","blur","storeWallet","PermissionRequestComponent","permissionResponse","selectedAccount","permissionRequest","reset","scope","QrScannerComponent","beaconService","scan","hasCamera","WORKER_PATH","qrScanner","videoplayer","handleQrCode","pairInfo","stop","ReceiveComponent","showReceiveFormat","btnOutline","dropdownItem","getQR","activeAddress","scaleFactor","light","canvas","zeroTxParams","gas","burn","SendComponent","estimateService","costPerByte","torusVerifier","torusPendingLookup","torusLookupAddress","torusLookupId","torusTwitterId","advancedForm","sendMax","defaultTransactionParams","parametersFormat","burnFee","isMultipleDestinations","toMultipleDestinationsString","toMultipleDestinations","showTransactions","simSemaphore","latestSimError","transactions","prevEquiClass","XTZrate","showBtn","div","parameters","activeAccountChange","amountInputView","preLoadData","clearFee","prepTransactions","checkBalance","sendTransaction","accountBalance","numberWithCommas","checkMaxAmount","max","maxToSend","maxAmount","times","finalCheck","gasLimit","storageLimit","toAddress","to","meta","alias","transfer","torusNotification","clearTorus","updateDefaultValues","micheline","invalidInputMultiple","invalidInputSingle","tx","gt","maxKt","maxTz","estimateFees","totalAmount","prevSimError","equiClass","callback","updateMaxAmount","estimate","txs","customLimits","numberOfTxs","txsLimit","reveal","verifierMapKeys","torusAccount","torusLookup","entrypoint","indent","newline","checkReceiverAndAmount","toMultipleDestinationsArray","validationError","singleSendDataArray","singleSendDataCheckresult","batchSpace","totalSent","totalFee","getTotalFee","getTotalBurn","mul","size","validateReceiverAddress","lookupPkh","emailNotify","redditNotify","twitterNotify","recipientKind","SettingsComponent","getImplicitAccounts","syncBeaconState","findIndex","impAcc","SpinnerComponent","StartComponent","deeplinkService","animationActive","queryParams","replaceState","TorusComponent","activeLogin","initTorus","loginTorus","userInfo","typeOfLogin","verifierId","UriHandlerComponent","connectApp","NETWORK","rejectOnNetwork","rejectOnSourceAddress","isSupportedOperationRequest","pairingString","popPairingJson","preNotifyPairing","isConnected","rejectOnTooManyOps","rejectOnPermission","invalidParameters","rejectOnParameters","rejectOnUnknown","rejectOnUserAbort","respond","approvePermissionRequest","Constants","delphinet","NAME","CSI","apiKey","NODE_URL","WalletType","PeriodKind","DelegatorNamePipe","identity","baker_name","ErrorHandlingPipe","ERROR_LIST","errorId","withObj","protocol","match","TimeAgoPipe","secTmp","secsTmp","mnTmp","mnsTmp","hrTmp","hrsTmp","dayTmp","daysTmp","monthTmp","monthsTmp","yearTmp","yearsTmp","delta","round","String","agoTmp","pure","TruncatePipe","endTrail","limit","trail","returnString","endTrailstring","ActivityService","indexerService","maxTransactions","getTransactonsCounter","getAllTransactions","upToDate","getOperations","oldActivities","activities","oldActivitiesCounter","promptNewActivities","activity","counterParty","check","newActivities","withLookup","BalanceService","tzrateService","getAccountBalance","getBalance","updateAccountBalance","newBalance","updateTotalBalance","updateFiatBalances","change","totalBalanceXTZ","BeaconService","correspondingResponseType","pairInfoJson","peersJson","newPublicKey","respondWithError","requestMessage","providedIn","State","CoordinatorService","balanceService","delegateService","errorHandlingPipe","scheduler","defaultDelayActivity","shortDelayActivity","defaultDelayPrice","startXTZ","tzrateInterval","getTzrate","scheduleData","UpToDate","stateCounter","updateAccountData","addUnconfirmedOperations","Wait","changeState","setDelay","updateTransactions","Updating","acc","latestActivity","age","clearInterval","time","handleDelegateResponse","block","unshift","delegation","DeeplinkService","pairingJson","extractPairingJson","b58cdecode","DelegateService","EncryptionService","plaintext","salt","encrypt_v2","chiphertext","decrypt_v1","decrypt_v2","aesCtr","ctr","encrypt","hex","fromBytes","toBytes","decrypt","salty","cipher","createCipher","byteStringBuffer","createBuffer","finish","mode","tag","chipher","decipher","createDecipher","pass","bumps","httpOptions","hardGasLimit","hardStorageLimit","EstimateService","revealGasLimit","queue","nodeURL","chainId","manager","getHeader","toPromise","getCounter","getManager","chain_id","retry","_estimate","extraGas","simulation","createTransactionObject","simulate","contents","limits","operation_result","getOpUsage","gasUsage","storageUsage","localForge","fop","bytes","averageGasLimit","averageStorageLimit","dtp","recommendFee","balance_updates","balanceUpdate","contract","consumed_gas","internal_operation_results","internalResult","minimalFee","feePerByte","feePerGasUnit","gasUnits","numberOfOperations","ceil","totalGasLimit","totalStorageLimit","operation","checkApplied","errHandler","fetch","json","ExportService","blob","Blob","filename","signed","ImportService","encryptionService","walletData","initStorage","addImplicitAccount","findContracts","verifierDetails","ledgerImport","torusImport","updateTwitterName","twitterLookup","getContractAddresses","addresses","KT","addOriginatedAccount","ConseilService","conseilServer","currentAddress","blankQuery","addFields","addPredicate","EQ","addOrdering","DESC","setLimit","executeEntityQuery","results","originated_contracts","childAddresses","block_level","sendQuery","IN","receiveQuery","sendResult","formatTx","receiveResult","block_hash","operation_group_hash","IndexerService","constants","selectedIndexerService","TzktService","originatedContract","lastActivity","hasInternals","newDelegate","contractBalance","ops","InputValidationService","validMnemonic","score","validAddress","loginType","redditAccount","twitterAccount","re","m","LedgerService","transportCheck","xtz","getAddress","hex2pk","toSign","LookupType","LookupService","records","pendingLookups","initCheck","lookups","lookupType","indexTop","torusKeyLookup","Verifiers","verifierMap","Google","Reddit","verifierArray","Twitter","noReveal","mark","record","entry","fill","j","MessageService","spinnerOn","spinnerText","defaultTime","seconds","OperationService","tz1","tz2","tz3","edsk","spsk","edsig","spsig","sig","o","B","TZ","microTez","feeHardCap","header","branch","opbytes","sopbytes","preApplyResult","final","opCheck","newPkh","actions","script","getManagerScript","gas_limit","storage_limit","public_key","currentFee","transactionOp","managerTransaction","getContractPkhTransaction","getContractKtTransaction","delegationOp","getContractDelegation","getContractUnDelegation","origination","localOpbytes","sk","applied","sign","sbytes","sig2edsig","decodeOpBytes","parsed","tz2address","decompress","torusReq","jsonrpc","pub_key_X","X","pub_key_Y","Y","PublicKey","errors","transform","statusText","forge","localForgedBytes","listings","operationLevel","operationHash","opHashes","opIndex","managerPubkey","manager_pubkey","opBytes","pk2pkh","buf2hex","sopBytes","hex2buf","hash2","mergebuf","b58cencode","pkDecoded","secretKey","keyFromPrivate","prefixVal","getPublic","getY","toArray","pad","getX","pubX","pubY","keyFromPublic","decodedPk","hexPk","secp256k1","compressed","uncompressed","uncompressPublicKey","xy","h","parseInt","byteArray","hexParts","paddedHex","prefixx","n","enc","wm","r","canonical","decodeContents","decodeActivateAccount","decodeReveal","decodeTransaction","decodeOrigination","decodeDelegation","decodeCommon","rest","zarithDecode","decodeContractId","count","argument","decodeString","amount2","zarithDecodeInt","kt","managerScript","storageDefinition","decodePkh","byte","typeTmp","sourceTmp","destinationTmp","amountTmp","managerTmp","balanceTmp","delegateTmp","tagNotSupportedTmp","feeTmp","prim","pkHex","annots","GOOGLE","REDDIT","TWITTER","AUTH_DOMAIN","TorusService","torus","nodeDetails","verifierMaps","testnet","clientId","caseSensitiveVerifierID","mainnet","_loginToConnectionMap","domain","proxy","torusdirectsdk","enableLogging","proxyContractAddress","skipSw","selectedVerifier","fetchNodeDetails","proxyAddress","getNodeDetails","torusNodeEndpoints","torusNodePub","torusIndexes","sanitizedVerifierId","toLocaleLowerCase","spPointsToPkh","referrerPolicy","jwtParams","login_hint","triggerLogin","loginDetails","spPrivKeyToKeyPair","TzrateService","price","tezos","usd","tot","balanceUSD","totalBalanceUSD","WalletService","storeKey","storageId","generateMnemonic","hdSeed","entropy","mnemonicToEntropy","seed2keyPair","encrypted","iv2","bumpIV","exportKeyStoreInit","HdWallet","FullWallet","IV","getTorusKeyPair","entropyToMnemonic","pkToPkh","implicitAccount","origAcc","localStorageId","getLocalStorageId","parsedWalletData","wd","deserializeStoredWallet","implicit","originated","Wallet","originatedAccount","LegacyWalletV1","encrypedSeed","LegacyWalletV2","LegacyWalletV3","TorusWallet","LedgerWallet","Account","ImplicitAccount","OriginatedAccount","ktAddress","managerPkh","managerPk","Activity","P404Component","P500Component","BAKERSLIST","image","environment","production","bootstrapModule"],"mappings":"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A;AAAA;AAAA;AAAA;AAAA;AAAA,WAAvB,EAAhB;AASH;;;;SAEL;;;;;;;;;;;;;;;;;;AC/UA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAA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","file":"main-es5.js","sourcesContent":["const cbs = [(_) => undefined];\r\n/**\r\n * A mock for postmessage if run in node.js environment\r\n */\r\nlet myWindow = {\r\n    postMessage: (message, _target) => {\r\n        console.log('GOT MOCK POST MESSAGE', message);\r\n        cbs.forEach((callbackElement) => {\r\n            callbackElement({ data: message });\r\n        });\r\n    },\r\n    addEventListener: (_name, eventCallback) => {\r\n        cbs.push(eventCallback);\r\n    },\r\n    removeEventListener: (_name, eventCallback) => {\r\n        cbs.splice(cbs.indexOf((element) => element === eventCallback), 1);\r\n    }\r\n};\r\ntry {\r\n    if (typeof window !== 'undefined') {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        myWindow = window;\r\n    }\r\n}\r\ncatch (windowError) {\r\n    console.log(`not defined: ${windowError}`);\r\n}\r\nconst clearMockWindowState = () => {\r\n    cbs.length = 0;\r\n};\r\nexport { myWindow, clearMockWindowState };\r\n//# sourceMappingURL=MockWindow.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as bs58check from 'bs58check';\r\n/**\r\n * The Serializer is used to serialize / deserialize JSON objects and encode them with bs58check\r\n */\r\nexport class Serializer {\r\n    /**\r\n     * Serialize and bs58check encode an object\r\n     *\r\n     * @param message JSON object to serialize\r\n     */\r\n    serialize(message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const str = JSON.stringify(message);\r\n            return bs58check.encode(Buffer.from(str));\r\n        });\r\n    }\r\n    /**\r\n     * Deserialize a bs58check encoded string\r\n     *\r\n     * @param encoded String to be deserialized\r\n     */\r\n    deserialize(encoded) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (typeof encoded !== 'string') {\r\n                throw new Error('Encoded payload needs to be a string');\r\n            }\r\n            return JSON.parse(bs58check.decode(encoded).toString());\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=Serializer.js.map","// Taken from https://github.com/WalletConnect/walletconnect-monorepo/blob/master/packages/qrcode-modal/src/browser.ts\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { generateGUID } from '../utils/generate-uuid';\r\nimport { isAndroid, isIOS } from '../utils/platform';\r\nimport { replaceInTemplate } from '../utils/replace-in-template';\r\nimport { alertTemplates } from './alert-templates';\r\nlet document;\r\nif (typeof window !== 'undefined' && typeof window.document !== 'undefined') {\r\n    document = window.document;\r\n}\r\nconst timeout = {};\r\nconst formatBody = (dataString) => {\r\n    if (typeof dataString === 'string') {\r\n        return dataString.replace('<svg', `<svg class=\"beacon-alert__image\"`);\r\n    }\r\n    return dataString;\r\n};\r\nconst formatAlert = (id, body, title, type, buttons, pairingPayload) => {\r\n    const callToAction = title;\r\n    const buttonsHtml = buttons.map((button, index) => `<button id=\"beacon-alert-${id}-${index}\" class=\"beacon-modal__button${button.style === 'outline' ? '--outline' : ''}\">${button.text}</button>`);\r\n    let allStyles = alertTemplates.default.css;\r\n    if (type === 'pair') {\r\n        allStyles += alertTemplates.pair.css;\r\n    }\r\n    let alertContainer = `<style>${allStyles}</style>${alertTemplates.container}`;\r\n    alertContainer = replaceInTemplate(alertContainer, 'main', type === 'pair' ? alertTemplates.pair.html : alertTemplates.default.html);\r\n    alertContainer = replaceInTemplate(alertContainer, 'callToAction', callToAction);\r\n    alertContainer = replaceInTemplate(alertContainer, 'buttons', buttonsHtml.join(' '));\r\n    alertContainer = replaceInTemplate(alertContainer, 'body', body);\r\n    alertContainer = replaceInTemplate(alertContainer, 'id', id);\r\n    alertContainer = replaceInTemplate(alertContainer, 'payload', pairingPayload !== null && pairingPayload !== void 0 ? pairingPayload : '');\r\n    if (alertContainer.indexOf('{{') >= 0) {\r\n        const start = alertContainer.indexOf('{{');\r\n        const end = alertContainer.indexOf('}}');\r\n        console.error('Not all placeholders replaced!', alertContainer.substr(start, end - start));\r\n        throw new Error('Not all placeholders replaced!');\r\n    }\r\n    return alertContainer;\r\n};\r\n/**\r\n * Close an alert by ID\r\n *\r\n * @param id ID of alert\r\n */\r\nconst closeAlert = (id) => new Promise((resolve) => {\r\n    const elm = document.getElementById(`beacon-alert-modal-${id}`);\r\n    if (elm) {\r\n        const animationDuration = 300;\r\n        const localTimeout = timeout[id];\r\n        if (localTimeout) {\r\n            clearTimeout(localTimeout);\r\n            timeout[id] = undefined;\r\n        }\r\n        elm.className = elm.className.replace('fadeIn', 'fadeOut');\r\n        window.setTimeout(() => {\r\n            const wrapper = document.getElementById(`beacon-alert-wrapper-${id}`);\r\n            if (wrapper) {\r\n                document.body.removeChild(wrapper);\r\n            }\r\n            resolve();\r\n        }, animationDuration);\r\n    }\r\n    else {\r\n        resolve();\r\n    }\r\n});\r\n/**\r\n * Close all alerts\r\n */\r\nconst closeAlerts = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    return new Promise((resolve) => __awaiter(void 0, void 0, void 0, function* () {\r\n        const openAlertElements = document.querySelectorAll('[id^=\"beacon-alert-wrapper-\"]');\r\n        if (openAlertElements.length > 0) {\r\n            const alertIds = [];\r\n            openAlertElements.forEach((element) => __awaiter(void 0, void 0, void 0, function* () {\r\n                alertIds.push(element.id.split('-')[3]);\r\n            }));\r\n            yield Promise.all(alertIds.map(closeAlert));\r\n            resolve();\r\n        }\r\n        else {\r\n            resolve();\r\n        }\r\n    }));\r\n});\r\n/**\r\n * Show an alert\r\n *\r\n * @param alertConfig The configuration of the alert\r\n */\r\n// eslint-disable-next-line complexity\r\nconst openAlert = (alertConfig) => __awaiter(void 0, void 0, void 0, function* () {\r\n    var _a, _b;\r\n    const body = alertConfig.body;\r\n    const title = alertConfig.title;\r\n    const timer = alertConfig.timer;\r\n    const pairingPayload = alertConfig.pairingPayload;\r\n    yield closeAlerts();\r\n    const id = (yield generateGUID()).split('-').join('');\r\n    const wrapper = document.createElement('div');\r\n    wrapper.setAttribute('id', `beacon-alert-wrapper-${id}`);\r\n    const buttons = [\r\n        ...((_b = (_a = alertConfig.buttons) === null || _a === void 0 ? void 0 : _a.map((button) => {\r\n            var _a, _b;\r\n            return ({\r\n                text: button.text,\r\n                // eslint-disable-next-line @typescript-eslint/unbound-method\r\n                actionCallback: (_a = button.actionCallback) !== null && _a !== void 0 ? _a : (() => Promise.resolve()),\r\n                style: (_b = button.style) !== null && _b !== void 0 ? _b : 'outline'\r\n            });\r\n        })) !== null && _b !== void 0 ? _b : [])\r\n    ];\r\n    const formattedBody = body ? formatBody(body) : '';\r\n    wrapper.innerHTML = formatAlert(id, formattedBody, title, pairingPayload ? 'pair' : 'default', buttons, pairingPayload);\r\n    if (timer) {\r\n        timeout[id] = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\r\n            yield closeAlert(id);\r\n        }), timer);\r\n    }\r\n    document.body.appendChild(wrapper);\r\n    buttons.forEach((button, index) => {\r\n        const buttonElement = document.getElementById(`beacon-alert-${id}-${index}`);\r\n        if (buttonElement) {\r\n            buttonElement.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\r\n                yield closeAlert(id);\r\n                if (button.actionCallback) {\r\n                    yield button.actionCallback();\r\n                }\r\n            }));\r\n        }\r\n    });\r\n    const closeButton = document.getElementById(`beacon-alert-${id}-close`);\r\n    if (closeButton) {\r\n        closeButton.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\r\n            yield closeAlert(id);\r\n        }));\r\n    }\r\n    const platform = isAndroid(window) ? 'android' : isIOS(window) ? 'ios' : 'desktop';\r\n    const mainText = document.getElementById(`beacon-main-text`);\r\n    const iosList = document.getElementById(`beacon-ios-list`);\r\n    const androidList = document.getElementById(`beacon-android-list`);\r\n    const desktopList = document.getElementById(`beacon-desktop-list`);\r\n    const webList = document.getElementById(`beacon-web-list`);\r\n    if (mainText && iosList && androidList && desktopList && webList) {\r\n        const showPlatform = (type) => {\r\n            const platformSwitch = document.getElementById(`beacon-switch`);\r\n            if (platformSwitch) {\r\n                platformSwitch.innerHTML =\r\n                    type === 'none' ? 'Pair Wallet on same device' : 'Pair Wallet on different device';\r\n            }\r\n            mainText.style.display = 'none';\r\n            iosList.style.display = 'none';\r\n            androidList.style.display = 'none';\r\n            desktopList.style.display = 'none';\r\n            webList.style.display = 'none';\r\n            switch (type) {\r\n                case 'ios':\r\n                    iosList.style.display = 'initial';\r\n                    break;\r\n                case 'android':\r\n                    androidList.style.display = 'initial';\r\n                    break;\r\n                case 'desktop':\r\n                    desktopList.style.display = 'initial';\r\n                    webList.style.display = 'initial';\r\n                    break;\r\n                default:\r\n                    mainText.style.display = 'initial';\r\n            }\r\n        };\r\n        let showQr = platform === 'desktop';\r\n        const switchPlatform = () => {\r\n            showPlatform(showQr ? 'none' : platform);\r\n            showQr = !showQr;\r\n        };\r\n        switchPlatform();\r\n        {\r\n            const platformSwitch = document.getElementById(`beacon-switch`);\r\n            if (platformSwitch) {\r\n                platformSwitch.addEventListener('click', switchPlatform);\r\n            }\r\n        }\r\n    }\r\n    return id;\r\n});\r\nexport { closeAlert, closeAlerts, openAlert };\r\n//# sourceMappingURL=Alert.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nlet document;\r\nif (typeof window !== 'undefined' && typeof window.document !== 'undefined') {\r\n    document = window.document;\r\n}\r\nlet timeout;\r\nconst getToastHTML = (config) => {\r\n    const text = config.body;\r\n    return `\r\n  <style>\r\n    :root {\r\n      --animation-duration: 300ms;\r\n    }\r\n    \r\n    @keyframes fadeIn {\r\n      from {\r\n        opacity: 0;\r\n      }\r\n      to {\r\n        opacity: 1;\r\n      }\r\n    }\r\n    \r\n    @keyframes fadeOut {\r\n      from {\r\n        opacity: 1;\r\n      }\r\n      to {\r\n        opacity: 0;\r\n      }\r\n    }\r\n    \r\n    .animated {\r\n      animation-duration: var(--animation-duration);\r\n      animation-fill-mode: both;\r\n    }\r\n    \r\n    .fadeIn {\r\n      animation-name: fadeIn;\r\n    }\r\n    \r\n    .fadeOut {\r\n      animation-name: fadeOut;\r\n    }\r\n\r\n    .beacon-toast__base {\r\n      position: absolute;\r\n      bottom: 16px;\r\n      right: 16px;\r\n      padding: 16px;\r\n      height: 64px;\r\n      z-index: 2147483000;\r\n      background: #fff;\r\n      margin: 0 auto;\r\n      border-radius: 4px;\r\n      overflow: hidden;\r\n      box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n\r\n    .beacon-toast__content {\r\n      padding: 0 0 0 16px;\r\n      font-family: Roboto, Helvetica, sans-serif;\r\n    }\r\n    .spinner .loader,\r\n    .spinner .loader:after {\r\n      border-radius: 50%;\r\n      width: 32px;\r\n      height: 32px;\r\n    }\r\n    .spinner .loader {\r\n      position: relative;\r\n      text-indent: -9999em;\r\n      border-top: 4px solid rgba(56,128,255, 0.2);\r\n      border-right: 4px solid rgba(56,128,255, 0.2);\r\n      border-bottom: 4px solid rgba(56,128,255, 0.2);\r\n      border-left: 4px solid #3880ff;\r\n      -webkit-transform: translateZ(0);\r\n      -ms-transform: translateZ(0);\r\n      transform: translateZ(0);\r\n      -webkit-animation: spinner 1.1s infinite linear;\r\n      animation: spinner 1.1s infinite linear;\r\n    }\r\n    @-webkit-keyframes spinner {\r\n      0% {\r\n        -webkit-transform: rotate(0deg);\r\n        transform: rotate(0deg);\r\n      }\r\n      100% {\r\n        -webkit-transform: rotate(360deg);\r\n        transform: rotate(360deg);\r\n      }\r\n    }\r\n    @keyframes spinner {\r\n      0% {\r\n        -webkit-transform: rotate(0deg);\r\n        transform: rotate(0deg);\r\n      }\r\n      100% {\r\n        -webkit-transform: rotate(360deg);\r\n        transform: rotate(360deg);\r\n      }\r\n    }\r\n  </style>\r\n  \r\n  <div id=\"beacon-toast\" class=\"beacon-toast__base animated fadeIn\">\r\n    <div class=\"load-container spinner\">\r\n      <div class=\"loader\">Loading...</div>\r\n    </div>\r\n    <div class=\"beacon-toast__content\">\r\n      <p>${text}</p>\r\n    </div>\r\n    ${config.showDoneButton ? '<div id=\"beacon-toast-button-done\"></div>' : ''}\r\n  </div>\r\n`;\r\n};\r\n/**\r\n * Close a toast\r\n */\r\nconst closeToast = () => new Promise((resolve) => {\r\n    const elm = document.getElementById('beacon-toast');\r\n    if (elm) {\r\n        const animationDuration = 300;\r\n        if (timeout) {\r\n            clearTimeout(timeout);\r\n            timeout = undefined;\r\n        }\r\n        elm.className = elm.className.replace('fadeIn', 'fadeOut');\r\n        window.setTimeout(() => {\r\n            const wrapper = document.getElementById('beacon-toast-wrapper');\r\n            if (wrapper) {\r\n                document.body.removeChild(wrapper);\r\n            }\r\n            resolve();\r\n        }, animationDuration);\r\n    }\r\n    else {\r\n        resolve();\r\n    }\r\n});\r\n/**\r\n * Create a new toast\r\n *\r\n * @param toastConfig Configuration of the toast\r\n */\r\nconst openToast = (toastConfig) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const timer = toastConfig.timer;\r\n    yield closeToast();\r\n    const wrapper = document.createElement('div');\r\n    wrapper.setAttribute('id', 'beacon-toast-wrapper');\r\n    wrapper.innerHTML = getToastHTML(toastConfig);\r\n    if (timer) {\r\n        timeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\r\n            yield closeToast();\r\n        }), timer);\r\n    }\r\n    document.body.appendChild(wrapper);\r\n    const doneButton = document.getElementById('beacon-toast-button-done');\r\n    if (doneButton) {\r\n        doneButton.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\r\n            yield closeToast();\r\n        }));\r\n    }\r\n});\r\nexport { closeToast, openToast };\r\n//# sourceMappingURL=Toast.js.map","export const alertTemplates = { \"container\": \"<div id=\\\"beacon-alert-modal-{{id}}\\\" class=\\\"beacon-alert__base animated fadeIn\\\">\\r\\n  <div class=\\\"beacon-modal__wrapper\\\">\\r\\n    <div class=\\\"beacon-modal__header\\\">\\r\\n      <svg\\r\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\r\\n        id=\\\"Guides\\\"\\r\\n        x=\\\"0\\\"\\r\\n        y=\\\"0\\\"\\r\\n        version=\\\"1.1\\\"\\r\\n        viewBox=\\\"0 0 179.2 43\\\"\\r\\n        xml:space=\\\"preserve\\\"\\r\\n        width=\\\"140\\\"\\r\\n        height=\\\"40\\\"\\r\\n      >\\r\\n        <style>\\r\\n          .st0 {\\r\\n            fill: #3880ff;\\r\\n          }\\r\\n          .st1 {\\r\\n            fill: #fff;\\r\\n          }\\r\\n        </style>\\r\\n        <path\\r\\n          d=\\\"M45 19v.9c0 .3-.2 7.5-3.4 13.2-3.3 5.6-9.4 9.3-9.7 9.5l-.8.4-1.3-.8-7.6-4.4c-.5-.3-.9-.6-1.4-.9-.4-.3-.7-.5-1.1-.8-.8-.7-1.5-1.4-2.1-2.2-.9-1.1-1.6-2.4-2.1-3.7-.9-2.3-1.3-4.8-1.2-7.5.8-.4 1.6-.6 2.4-.6h.6c-.2 2.4.1 4.6.8 6.6 1 2.8 2.9 5.1 5.5 6.6l7.4 4.3c.2-.1.4-.2.6-.4 1.9-1.3 5.3-4.1 7.3-7.6 2.2-3.9 2.8-8.9 3-10.8L38.8 19c.3-1 .4-2.1.5-3.2L45 19z\\\"\\r\\n          class=\\\"st0\\\"\\r\\n        />\\r\\n        <path\\r\\n          d=\\\"M36.3 4.1v10.3c0 .5 0 1.1-.1 1.6s-.1.9-.2 1.3c-.2 1-.5 2-.9 3-.5 1.3-1.3 2.6-2.2 3.7-1.5 1.9-3.5 3.6-5.9 4.8-.9-.6-1.6-1.3-2-2.4 2.1-1 3.9-2.3 5.2-4 1.9-2.3 3-5.1 3-8.1V5.9l-.6-.3c-2-1-6.1-2.6-10.1-2.6-4.5 0-9.1 2-10.9 2.9v3.6c-1 .3-2 .7-3 1.1V4.1l.8-.4C9.7 3.5 16 0 22.5 0s12.8 3.5 13.1 3.6l.7.5z\\\"\\r\\n          class=\\\"st0\\\"\\r\\n        />\\r\\n        <path\\r\\n          d=\\\"M10.5 16.5l-7.4 4.3v.7c.2 2.1.9 6.5 2.9 10 2.2 3.9 6.2 6.9 7.9 8l3.1-1.8c.8.7 1.6 1.4 2.5 2L13.8 43l-.8-.5c-.3-.2-6.4-3.9-9.7-9.5C.1 27.4 0 20.2 0 19.9V19l1.3-.8L9 13.9c.5-.3.9-.5 1.4-.7.4-.2.8-.4 1.3-.5 1-.4 2-.6 3-.7 1.4-.2 2.9-.2 4.3 0 2.4.3 4.8 1.2 7.1 2.7 0 1-.4 2-1 2.9-1.9-1.3-4-2.2-6-2.5-3.1-.6-6-.1-8.6 1.4z\\\"\\r\\n          class=\\\"st0\\\"\\r\\n        />\\r\\n        <g>\\r\\n          <path\\r\\n            d=\\\"M73.9 23c.9 1 1.3 2.3 1.3 3.7 0 1.9-.6 3.4-1.9 4.5-1.3 1.1-3.1 1.7-5.5 1.7h-8.6v-23h8.4c2.3 0 4.1.5 5.3 1.5 1.2 1 1.8 2.4 1.8 4.2 0 1.5-.4 2.7-1.2 3.6-.8.9-1.8 1.5-3.1 1.8 1.5.3 2.6 1 3.5 2zm-11.7-3h5c1.5 0 2.6-.3 3.4-1 .8-.7 1.2-1.6 1.2-2.8 0-1.2-.4-2.1-1.1-2.8-.8-.7-1.9-1-3.5-1h-4.8V20zm8.7 9.4c.9-.7 1.3-1.7 1.3-3s-.4-2.3-1.3-3c-.9-.7-2.1-1.1-3.7-1.1h-5v8.2h5c1.6-.1 2.8-.4 3.7-1.1zM95.3 24.6H81c.1 2.1.6 3.6 1.7 4.6s2.4 1.5 4 1.5c1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.7 1.8-2.9h3.2c-.2 1.2-.7 2.4-1.5 3.3-.8 1-1.7 1.7-2.9 2.3-1.2.5-2.6.8-4.1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 1.7 0 3.3.4 4.6 1.1 1.3.7 2.3 1.7 3 3 .7 1.2 1 2.6 1 4.1.1.7 0 1.2-.1 1.7zm-3.5-4.8c-.5-.9-1.2-1.6-2.1-2-.9-.4-1.8-.7-2.8-.7-1.6 0-3 .5-4.1 1.5-1.1 1-1.7 2.5-1.8 4.5h11.5c0-1.3-.2-2.4-.7-3.3zM111.2 16c1.2.9 2.1 2 2.5 3.5V15h3v18h-3v-4.6c-.5 1.5-1.3 2.6-2.5 3.5-1.2.9-2.7 1.3-4.4 1.3-1.6 0-3-.4-4.3-1.1-1.2-.7-2.2-1.8-2.9-3.2-.7-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.7-1.4 1.7-2.5 2.9-3.2 1.2-.7 2.7-1.1 4.3-1.1 1.7-.1 3.1.4 4.4 1.2zm-8 3.1c-1.1 1.2-1.7 2.8-1.7 4.8 0 2.1.5 3.7 1.7 4.8 1.1 1.2 2.6 1.8 4.4 1.8 1.2 0 2.2-.3 3.2-.8.9-.5 1.7-1.3 2.2-2.3.5-1 .8-2.1.8-3.5 0-1.3-.3-2.5-.8-3.5s-1.2-1.8-2.2-2.3c-.9-.5-2-.8-3.2-.8-1.9.1-3.3.7-4.4 1.8zM135 16.6c1.5 1.2 2.4 2.9 2.8 4.9h-3.1c-.2-1.3-.8-2.3-1.8-3-1-.7-2.2-1.1-3.6-1.1-1 0-2 .2-2.9.7-.9.5-1.6 1.2-2.1 2.2-.5 1-.8 2.2-.8 3.7s.3 2.7.8 3.7 1.2 1.7 2.1 2.2c.9.5 1.8.7 2.9.7 1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.8 1.8-3h3.1c-.3 2.1-1.3 3.7-2.8 4.9-1.5 1.2-3.4 1.8-5.7 1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 2.3-.1 4.2.6 5.7 1.8zM154.5 15.9c1.4.7 2.4 1.8 3.2 3.2.8 1.4 1.2 3 1.2 4.9 0 1.9-.4 3.5-1.2 4.9-.8 1.4-1.8 2.4-3.2 3.2-1.4.7-2.9 1.1-4.6 1.1-1.7 0-3.3-.4-4.6-1.1-1.4-.7-2.4-1.8-3.2-3.2-.8-1.4-1.2-3-1.2-4.9 0-1.9.4-3.5 1.2-4.9.8-1.4 1.9-2.5 3.2-3.2 1.4-.7 2.9-1.1 4.6-1.1 1.7-.1 3.2.3 4.6 1.1zm-7.6 2.2c-.9.5-1.6 1.2-2.2 2.2-.6 1-.8 2.2-.8 3.7 0 1.4.3 2.7.8 3.6.6 1 1.3 1.7 2.2 2.2.9.5 1.9.7 3 .7s2.1-.2 3-.7c.9-.5 1.6-1.2 2.2-2.2.6-1 .8-2.2.8-3.6 0-1.5-.3-2.7-.8-3.7-.6-1-1.3-1.7-2.2-2.2-.9-.5-1.9-.7-3-.7s-2.1.2-3 .7zM177.3 16.7c1.3 1.3 1.9 3.3 1.9 5.8v10.4h-3V22.8c0-1.8-.5-3.2-1.4-4.1-.9-1-2.2-1.4-3.7-1.4-1.6 0-2.9.5-3.9 1.6s-1.5 2.6-1.5 4.6V33h-3V15h3v4.3c.5-1.5 1.3-2.6 2.4-3.4 1.2-.8 2.5-1.2 4-1.2 2.2 0 3.9.6 5.2 2z\\\"\\r\\n            class=\\\"st1\\\"\\r\\n          />\\r\\n        </g>\\r\\n      </svg>\\r\\n      <div class=\\\"beacon-modal__close__wrapper\\\">\\r\\n        <div id=\\\"beacon-alert-{{id}}-close\\\" class=\\\"beacon-modal__close__icon\\\">\\r\\n          <div class=\\\"beacon-modal__close__line1\\\"></div>\\r\\n          <div class=\\\"beacon-modal__close__line2\\\"></div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"beacon-modal__base\\\">\\r\\n      <div class=\\\"beacon-modal__content\\\">\\r\\n        <div>\\r\\n          <p class=\\\"beacon-alert__title\\\">\\r\\n            {{callToAction}}\\r\\n          </p>\\r\\n\\r\\n          {{main}}\\r\\n\\r\\n          <div class=\\\"beacon-action__container\\\">\\r\\n            {{buttons}}\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\", \"default\": { \"html\": \"<div id=\\\"beacon-main-text\\\" class=\\\"beacon-alert__text\\\">\\r\\n  {{body}}\\r\\n</div>\\r\\n\", \"css\": \":root {\\r\\n  --animation-duration: 300ms;\\r\\n}\\r\\n\\r\\n@keyframes fadeIn {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n@keyframes fadeOut {\\r\\n  from {\\r\\n    opacity: 1;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 0;\\r\\n  }\\r\\n}\\r\\n\\r\\n.animated {\\r\\n  animation-duration: var(--animation-duration);\\r\\n  animation-fill-mode: both;\\r\\n}\\r\\n\\r\\n.fadeIn {\\r\\n  animation-name: fadeIn;\\r\\n}\\r\\n\\r\\n.fadeOut {\\r\\n  animation-name: fadeOut;\\r\\n}\\r\\n\\r\\n.beacon-modal__wrapper {\\r\\n  position: relative;\\r\\n  transform: translateY(-50%);\\r\\n  top: 50%;\\r\\n  display: inline-block;\\r\\n  z-index: 2147483000;\\r\\n  max-width: 500px;\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.beacon-modal__base,\\r\\n.beacon-modal__close__wrapper {\\r\\n  background: #fff;\\r\\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);\\r\\n}\\r\\n\\r\\n.beacon-modal__base {\\r\\n  margin: 0 auto;\\r\\n  border-radius: 32px;\\r\\n  overflow: hidden;\\r\\n}\\r\\n\\r\\n.beacon-modal__header {\\r\\n  padding: 16px 0;\\r\\n  width: 100%;\\r\\n  display: flex;\\r\\n  flex-direction: row;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.beacon-modal__headerLogo {\\r\\n  width: 100%;\\r\\n  max-width: 320px;\\r\\n  margin: 20px auto;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n.beacon-alert__text,\\r\\n.beacon-alert__title,\\r\\n.beacon-selection__name,\\r\\np,\\r\\nbutton {\\r\\n  font-family: Roboto, Helvetica, sans-serif;\\r\\n}\\r\\n\\r\\n.beacon-modal__close__wrapper {\\r\\n  position: absolute;\\r\\n  top: 20px;\\r\\n  right: 0;\\r\\n  z-index: 10000;\\r\\n  cursor: pointer;\\r\\n  border-radius: 100%;\\r\\n}\\r\\n\\r\\n.beacon-modal__close__icon {\\r\\n  width: 16px;\\r\\n  height: 16px;\\r\\n  position: relative;\\r\\n  top: 0;\\r\\n  right: 0;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  transform: rotate(45deg);\\r\\n  margin: 8px;\\r\\n}\\r\\n\\r\\n.beacon-modal__close__line1 {\\r\\n  position: absolute;\\r\\n  width: 90%;\\r\\n  border: 1px solid #000;\\r\\n}\\r\\n\\r\\n.beacon-modal__close__line2 {\\r\\n  position: absolute;\\r\\n  width: 90%;\\r\\n  border: 1px solid #000;\\r\\n  transform: rotate(90deg);\\r\\n}\\r\\n\\r\\n.beacon-alert__base {\\r\\n  position: fixed;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  z-index: 2147482999;\\r\\n  background-color: rgb(17 17 17 / 0.84);\\r\\n  text-align: center;\\r\\n  padding: 24px;\\r\\n}\\r\\n\\r\\n.beacon-alert__text,\\r\\n.beacon-alert__title {\\r\\n  text-align: center;\\r\\n  margin: 0 auto;\\r\\n  padding: 0 0 16px;\\r\\n}\\r\\n\\r\\n.margin__bottom {\\r\\n  margin-bottom: 16px;\\r\\n}\\r\\n\\r\\n.beacon-alert__title {\\r\\n  color: #7c828b;\\r\\n  font-size: 18px;\\r\\n}\\r\\n\\r\\n.beacon-alert__text {\\r\\n  color: #000;\\r\\n  font-size: 14px;\\r\\n}\\r\\n\\r\\n.beacon-modal__button,\\r\\n.beacon-modal__button--outline {\\r\\n  height: 36px;\\r\\n  font-size: 14px;\\r\\n  letter-spacing: 0.84px;\\r\\n  margin-bottom: 4px;\\r\\n  margin-inline-end: 2px;\\r\\n  margin-inline-start: 2px;\\r\\n  margin-left: 2px;\\r\\n  margin-right: 2px;\\r\\n  margin-top: 4px;\\r\\n  padding-inline-end: 15.4px;\\r\\n  padding-inline-start: 15.4px;\\r\\n  padding-left: 15.4px;\\r\\n  padding-right: 15.4px;\\r\\n  overflow-wrap: break-word;\\r\\n  pointer-events: auto;\\r\\n  text-align: center;\\r\\n  border: 2px solid #3880ff;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\n.beacon-modal__button {\\r\\n  background: #3880ff;\\r\\n  color: #fff;\\r\\n}\\r\\n\\r\\n.beacon-modal__button--outline {\\r\\n  background: #fff;\\r\\n  color: #3880ff;\\r\\n}\\r\\n\\r\\n.beacon-alert__image {\\r\\n  width: 300px;\\r\\n  height: 300px;\\r\\n  box-sizing: border-box;\\r\\n  box-shadow: 0 10px 20px 0 rgba(17, 17, 17, 0.12);\\r\\n  border: 1px solid rgba(17, 17, 17, 0.04);\\r\\n  border-radius: 16px;\\r\\n}\\r\\n\\r\\n.beacon-modal__content {\\r\\n  padding: 24px;\\r\\n}\\r\\n\\r\\n.beacon-action__container {\\r\\n  padding-top: 24px;\\r\\n}\\r\\n\\r\\na {\\r\\n  text-decoration: none;\\r\\n}\\r\\n\" }, \"pair\": { \"html\": \"<div id=\\\"beacon-main-text\\\" class=\\\"beacon-alert__text\\\">\\r\\n  {{body}}\\r\\n</div>\\r\\n\\r\\n<div id=\\\"beacon-ios-list\\\">\\r\\n  <div class=\\\"beacon-selection__container\\\">\\n      <a alt=\\\"Open in AirGap Wallet\\\" href=\\\"airgap-wallet://?type=tzip10&data={{payload}}\\\" target=\\\"_blank\\\" class=\\\"beacon-selection__list\\\">\\n        <div class=\\\"beacon-selection__name\\\">AirGap Wallet</div>\\n        <div>\\n          <img class=\\\"beacon-selection__img\\\" src=\\\"data:image/png;base64,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\\\"/>\\n        </div>\\n      </a>\\n      </div>\\r\\n</div>\\r\\n<div id=\\\"beacon-android-list\\\"><a href=\\\"tezos://?type=tzip10&data={{payload}}\\\" target=\\\"_blank\\\"><button class=\\\"beacon-modal__button\\\">Connect Wallet</button></a></div>\\r\\n<div id=\\\"beacon-desktop-list\\\">\\n      <a alt=\\\"Open in Galleon\\\" href=\\\"galleon://?type=tzip10&data={{payload}}\\\" target=\\\"_blank\\\" class=\\\"beacon-selection__list\\\">\\n        <div class=\\\"beacon-selection__name\\\">Galleon</div>\\n        <div>\\n          <img class=\\\"beacon-selection__img\\\" src=\\\"data:image/png;base64,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\\\"/>\\n        </div>\\n      </a>\\n      </div>\\r\\n<div id=\\\"beacon-web-list\\\">\\n      <a alt=\\\"Open in Kukai\\\" href=\\\"https://preview.kukai.app?type=tzip10&data={{payload}}\\\" target=\\\"_blank\\\" class=\\\"beacon-selection__list\\\">\\n        <div class=\\\"beacon-selection__name\\\">Kukai</div>\\n        <div>\\n          <img class=\\\"beacon-selection__img\\\" src=\\\"data:image/png;base64,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\\\"/>\\n        </div>\\n      </a>\\n      </div>\\r\\n\\r\\n<div>\\r\\n  <button id=\\\"beacon-switch\\\" class=\\\"beacon-modal__button--outline\\\"></button>\\r\\n</div>\\r\\n\", \"css\": \"#beacon-main-text {\\r\\n  display: initial;\\r\\n}\\r\\n.beacon-selection__container {\\r\\n  padding: 16px 16px 0;\\r\\n}\\r\\n.beacon-selection__list {\\r\\n  display: flex;\\r\\n  flex-direction: row;\\r\\n  justify-content: space-between;\\r\\n  text-decoration: none;\\r\\n  padding-bottom: 24px;\\r\\n  align-items: center;\\r\\n}\\r\\n.beacon-selection__name {\\r\\n  font-size: 1.5rem;\\r\\n  font-weight: 600;\\r\\n  color: #3b3d40;\\r\\n}\\r\\n.beacon-selection__img {\\r\\n  width: 48px;\\r\\n  height: 48px;\\r\\n  box-shadow: 0 4px 12px 0 rgba(17, 17, 17, 0.24);\\r\\n  border-radius: 16px;\\r\\n}\\r\\n\" } };\r\n//# sourceMappingURL=alert-templates.js.map","import { BeaconEvent } from './events';\r\nimport { BeaconMessageType } from '.';\r\nexport const messageEvents = {\r\n    [BeaconMessageType.PermissionRequest]: {\r\n        sent: BeaconEvent.PERMISSION_REQUEST_SENT,\r\n        success: BeaconEvent.PERMISSION_REQUEST_SUCCESS,\r\n        error: BeaconEvent.PERMISSION_REQUEST_ERROR\r\n    },\r\n    [BeaconMessageType.PermissionResponse]: {\r\n        sent: BeaconEvent.UNKNOWN,\r\n        success: BeaconEvent.UNKNOWN,\r\n        error: BeaconEvent.UNKNOWN\r\n    },\r\n    [BeaconMessageType.OperationRequest]: {\r\n        sent: BeaconEvent.OPERATION_REQUEST_SENT,\r\n        success: BeaconEvent.OPERATION_REQUEST_SUCCESS,\r\n        error: BeaconEvent.OPERATION_REQUEST_ERROR\r\n    },\r\n    [BeaconMessageType.OperationResponse]: {\r\n        sent: BeaconEvent.UNKNOWN,\r\n        success: BeaconEvent.UNKNOWN,\r\n        error: BeaconEvent.UNKNOWN\r\n    },\r\n    [BeaconMessageType.SignPayloadRequest]: {\r\n        sent: BeaconEvent.SIGN_REQUEST_SENT,\r\n        success: BeaconEvent.SIGN_REQUEST_SUCCESS,\r\n        error: BeaconEvent.SIGN_REQUEST_ERROR\r\n    },\r\n    [BeaconMessageType.SignPayloadResponse]: {\r\n        sent: BeaconEvent.UNKNOWN,\r\n        success: BeaconEvent.UNKNOWN,\r\n        error: BeaconEvent.UNKNOWN\r\n    },\r\n    [BeaconMessageType.BroadcastRequest]: {\r\n        sent: BeaconEvent.BROADCAST_REQUEST_SENT,\r\n        success: BeaconEvent.BROADCAST_REQUEST_SUCCESS,\r\n        error: BeaconEvent.BROADCAST_REQUEST_ERROR\r\n    },\r\n    [BeaconMessageType.BroadcastResponse]: {\r\n        sent: BeaconEvent.UNKNOWN,\r\n        success: BeaconEvent.UNKNOWN,\r\n        error: BeaconEvent.UNKNOWN\r\n    },\r\n    [BeaconMessageType.Disconnect]: {\r\n        sent: BeaconEvent.UNKNOWN,\r\n        success: BeaconEvent.UNKNOWN,\r\n        error: BeaconEvent.UNKNOWN\r\n    },\r\n    [BeaconMessageType.Error]: {\r\n        sent: BeaconEvent.UNKNOWN,\r\n        success: BeaconEvent.UNKNOWN,\r\n        error: BeaconEvent.UNKNOWN\r\n    }\r\n};\r\n//# sourceMappingURL=beacon-message-events.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { ExposedPromise } from '../../utils/exposed-promise';\r\nimport { generateGUID } from '../../utils/generate-uuid';\r\nimport { getKeypairFromSeed, toHex } from '../../utils/crypto';\r\nimport { StorageKey } from '../..';\r\nimport { BeaconEventHandler } from '../../events';\r\nimport { SDK_VERSION } from '../../constants';\r\n/**\r\n * The beacon client is an abstract client that handles everything that is shared between all other clients.\r\n * Specifically, it handles managing the beaconId and and the local keypair.\r\n */\r\nexport class BeaconClient {\r\n    constructor(config) {\r\n        /** The beaconId is a public key that is used to identify one specific application (dapp or wallet).\r\n         * This is used inside a message to specify the sender, for example.\r\n         */\r\n        this._beaconId = new ExposedPromise();\r\n        this.events = new BeaconEventHandler();\r\n        /**\r\n         * The local keypair that is used for the communication encryption\r\n         */\r\n        this._keyPair = new ExposedPromise();\r\n        if (!config.name) {\r\n            throw new Error('Name not set');\r\n        }\r\n        if (!config.storage) {\r\n            throw new Error('Storage not set');\r\n        }\r\n        this.name = config.name;\r\n        this.storage = config.storage;\r\n        this.initSDK().catch(console.error);\r\n    }\r\n    get beaconId() {\r\n        return this._beaconId.promise;\r\n    }\r\n    get keyPair() {\r\n        return this._keyPair.promise;\r\n    }\r\n    /**\r\n     * This resets the SDK. After using this method, this instance is no longer usable. You will have to instanciate a new client.\r\n     */\r\n    destroy() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.removeBeaconEntriesFromStorage();\r\n        });\r\n    }\r\n    /**\r\n     * This method initializes the SDK by setting some values in the storage and generating a keypair.\r\n     */\r\n    initSDK() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.storage.set(StorageKey.BEACON_SDK_VERSION, SDK_VERSION).catch(console.error);\r\n            this.loadOrCreateBeaconSecret().catch(console.error);\r\n            return this.keyPair.then((keyPair) => {\r\n                this._beaconId.resolve(toHex(keyPair.publicKey));\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Removes all beacon values from the storage.\r\n     */\r\n    removeBeaconEntriesFromStorage() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const allKeys = Object.values(StorageKey);\r\n            yield Promise.all(allKeys.map((key) => this.storage.delete(key)));\r\n        });\r\n    }\r\n    /**\r\n     * This method tries to load the seed from storage, if it doesn't exist, a new one will be created and persisted.\r\n     */\r\n    loadOrCreateBeaconSecret() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const storageValue = yield this.storage.get(StorageKey.BEACON_SDK_SECRET_SEED);\r\n            if (storageValue && typeof storageValue === 'string') {\r\n                this._keyPair.resolve(yield getKeypairFromSeed(storageValue));\r\n            }\r\n            else {\r\n                const key = yield generateGUID();\r\n                yield this.storage.set(StorageKey.BEACON_SDK_SECRET_SEED, key);\r\n                this._keyPair.resolve(yield getKeypairFromSeed(key));\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=BeaconClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { ExposedPromise, ExposedPromiseStatus } from '../../utils/exposed-promise';\r\nimport { Serializer, PostMessageTransport, P2PTransport, TransportType, TransportStatus } from '../..';\r\nimport { BeaconEventHandler, BeaconEvent } from '../../events';\r\nimport { availableTransports } from '../../utils/available-transports';\r\nimport { BeaconClient } from '../beacon-client/BeaconClient';\r\nimport { AccountManager } from '../../managers/AccountManager';\r\n/**\r\n * This abstract class handles the a big part of the logic that is shared between the dapp and wallet client.\r\n * For example, it selects and manages the transport and accounts.\r\n */\r\nexport class Client extends BeaconClient {\r\n    constructor(config) {\r\n        var _a;\r\n        super({ name: config.name, storage: config.storage });\r\n        /**\r\n         * How many requests can be sent after another\r\n         */\r\n        this.rateLimit = 2;\r\n        /**\r\n         * The time window in seconds in which the \"rateLimit\" is checked\r\n         */\r\n        this.rateLimitWindowInSeconds = 5;\r\n        /**\r\n         * Stores the times when requests have been made to determine if the rate limit has been reached\r\n         */\r\n        this.requestCounter = [];\r\n        this._transport = new ExposedPromise();\r\n        /**\r\n         * Returns whether or not the transport is successfully connected\r\n         */\r\n        this._isConnected = new ExposedPromise();\r\n        this.events = new BeaconEventHandler(config.eventHandlers);\r\n        this.accountManager = new AccountManager(config.storage);\r\n        this.matrixNodes = (_a = config.matrixNodes) !== null && _a !== void 0 ? _a : [];\r\n        this.handleResponse = (message, connectionInfo) => {\r\n            throw new Error(`not overwritten${JSON.stringify(message)} - ${JSON.stringify(connectionInfo)}`);\r\n        };\r\n    }\r\n    get transport() {\r\n        return this._transport.promise;\r\n    }\r\n    get isConnected() {\r\n        return this._isConnected.promise;\r\n    }\r\n    /**\r\n     * Returns whether or not the transaport is ready\r\n     */\r\n    get ready() {\r\n        return this.transport.then(() => undefined);\r\n    }\r\n    /**\r\n     * Return all locally known accounts\r\n     */\r\n    getAccounts() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.accountManager.getAccounts();\r\n        });\r\n    }\r\n    /**\r\n     * Return the account by ID\r\n     * @param accountIdentifier The ID of an account\r\n     */\r\n    getAccount(accountIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.accountManager.getAccount(accountIdentifier);\r\n        });\r\n    }\r\n    /**\r\n     * Remove the account by ID\r\n     * @param accountIdentifier The ID of an account\r\n     */\r\n    removeAccount(accountIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.accountManager.removeAccount(accountIdentifier);\r\n        });\r\n    }\r\n    /**\r\n     * Remove all locally stored accounts\r\n     */\r\n    removeAllAccounts() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.accountManager.removeAllAccounts();\r\n        });\r\n    }\r\n    /**\r\n     * Add a new request (current timestamp) to the pending requests, remove old ones and check if we are above the limit\r\n     */\r\n    addRequestAndCheckIfRateLimited() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const now = new Date().getTime();\r\n            this.requestCounter = this.requestCounter.filter((date) => date + this.rateLimitWindowInSeconds * 1000 > now);\r\n            this.requestCounter.push(now);\r\n            return this.requestCounter.length > this.rateLimit;\r\n        });\r\n    }\r\n    /**\r\n     * This method initializes the client. It will check if the connection should be established to a\r\n     * browser extension or if the P2P transport should be used.\r\n     *\r\n     * @param isDapp A boolean flag indicating if this is the DAppClient or WalletClient\r\n     * @param transport An optional transport that can be provided by the user\r\n     */\r\n    init(isDapp = true, transport) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._transport.status === ExposedPromiseStatus.RESOLVED) {\r\n                return (yield this.transport).type;\r\n            }\r\n            if (transport) {\r\n                yield this.setTransport(transport); // Let users define their own transport\r\n                return transport.type;\r\n            }\r\n            else {\r\n                return new Promise((resolve) => __awaiter(this, void 0, void 0, function* () {\r\n                    const keyPair = yield this.keyPair; // We wait for keypair here so the P2P Transport creation is not delayed and causing issues\r\n                    const setTransport = (newTransport) => __awaiter(this, void 0, void 0, function* () {\r\n                        yield this.setTransport(newTransport);\r\n                        resolve(newTransport.type);\r\n                    });\r\n                    const setBeaconTransport = () => __awaiter(this, void 0, void 0, function* () {\r\n                        const newTransport = new P2PTransport(this.name, keyPair, this.storage, this.events, this.matrixNodes, isDapp);\r\n                        return setTransport(newTransport);\r\n                    });\r\n                    const setBeaconTransportTimeout = window.setTimeout(setBeaconTransport, 200);\r\n                    return availableTransports.extension.then((postMessageAvailable) => __awaiter(this, void 0, void 0, function* () {\r\n                        if (setBeaconTransportTimeout) {\r\n                            window.clearTimeout(setBeaconTransportTimeout);\r\n                        }\r\n                        if (postMessageAvailable) {\r\n                            return setTransport(new PostMessageTransport(this.name, keyPair, this.storage, isDapp));\r\n                        }\r\n                        else {\r\n                            return setBeaconTransport();\r\n                        }\r\n                    }));\r\n                }));\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Return all known peers\r\n     */\r\n    getPeers() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if ((yield this.transport).type === TransportType.P2P) {\r\n                return (yield this.transport).getPeers(); // TODO: Also support other transports?\r\n            }\r\n            else {\r\n                return [];\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Add a new peer to the known peers\r\n     * @param peer The new peer to add\r\n     */\r\n    addPeer(peer) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if ((yield this.transport).type === TransportType.P2P) {\r\n                return (yield this.transport).addPeer(peer); // TODO: Also support other transports?\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * The method will attempt to initiate a connection using the active transport method.\r\n     * If the method is called multiple times while it is connecting (meaning the initial connect didn't finish),\r\n     * the transport will try to reconnect.\r\n     */\r\n    _connect() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const transport = yield this.transport;\r\n            if (transport.connectionStatus === TransportStatus.NOT_CONNECTED) {\r\n                yield transport.connect();\r\n                transport\r\n                    .addListener((message, connectionInfo) => __awaiter(this, void 0, void 0, function* () {\r\n                    if (typeof message === 'string') {\r\n                        const deserializedMessage = (yield new Serializer().deserialize(message));\r\n                        this.handleResponse(deserializedMessage, connectionInfo);\r\n                    }\r\n                }))\r\n                    .catch((error) => console.log(error));\r\n                this._isConnected.resolve(true);\r\n            }\r\n            else if (transport.connectionStatus === TransportStatus.CONNECTING) {\r\n                yield transport.reconnect();\r\n            }\r\n            else {\r\n                // NO-OP\r\n            }\r\n            return this._isConnected.promise;\r\n        });\r\n    }\r\n    /**\r\n     * A \"setter\" for when the transport needs to be changed.\r\n     */\r\n    setTransport(transport) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._transport.isSettled()) {\r\n                // If the promise has already been resolved we need to create a new one.\r\n                this._transport = ExposedPromise.resolve(transport);\r\n            }\r\n            else {\r\n                this._transport.resolve(transport);\r\n            }\r\n            yield this.events.emit(BeaconEvent.ACTIVE_TRANSPORT_SET, transport);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=Client.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { ExposedPromise } from '../../utils/exposed-promise';\r\nimport { Logger } from '../../utils/Logger';\r\nimport { generateGUID } from '../../utils/generate-uuid';\r\nimport { BeaconEvent } from '../../events';\r\nimport { BEACON_VERSION } from '../../constants';\r\nimport { getAddressFromPublicKey } from '../../utils/crypto';\r\nimport { Client, TransportType, StorageKey, BeaconMessageType, PermissionScope, NetworkType, Serializer, LocalStorage, BeaconError } from '../..';\r\nimport { messageEvents } from '../../beacon-message-events';\r\nimport { getAccountIdentifier } from '../../utils/get-account-identifier';\r\nimport { TezblockBlockExplorer } from '../../utils/tezblock-blockexplorer';\r\nimport { BeaconErrorType } from '../../types/BeaconErrorType';\r\nconst logger = new Logger('DAppClient');\r\n/**\r\n * The DAppClient has to be used in decentralized applications. It handles all the logic related to connecting to beacon-compatible\r\n * wallets and sending requests.\r\n */\r\nexport class DAppClient extends Client {\r\n    constructor(config) {\r\n        var _a;\r\n        super(Object.assign({ storage: config.storage ? config.storage : new LocalStorage() }, config));\r\n        /**\r\n         * A map of requests that are currently \"open\", meaning we have sent them to a wallet and are still awaiting a response.\r\n         */\r\n        this.openRequests = new Map();\r\n        /**\r\n         * The currently active account. For all requests that are associated to a specific request (operation request, signing request),\r\n         * the active account is used to determine the network and destination wallet\r\n         */\r\n        this._activeAccount = new ExposedPromise();\r\n        this.iconUrl = config.iconUrl;\r\n        this.blockExplorer = (_a = config.blockExplorer) !== null && _a !== void 0 ? _a : new TezblockBlockExplorer();\r\n        this.storage\r\n            .get(StorageKey.ACTIVE_ACCOUNT)\r\n            .then((activeAccountIdentifier) => __awaiter(this, void 0, void 0, function* () {\r\n            if (activeAccountIdentifier) {\r\n                yield this.setActiveAccount(yield this.accountManager.getAccount(activeAccountIdentifier));\r\n            }\r\n            else {\r\n                yield this.setActiveAccount(undefined);\r\n            }\r\n        }))\r\n            .catch((storageError) => __awaiter(this, void 0, void 0, function* () {\r\n            yield this.setActiveAccount(undefined);\r\n            console.error(storageError);\r\n        }));\r\n        this.handleResponse = (message, connectionInfo) => __awaiter(this, void 0, void 0, function* () {\r\n            const openRequest = this.openRequests.get(message.id);\r\n            if (openRequest) {\r\n                if (message.type === BeaconMessageType.Error) {\r\n                    openRequest.reject(message);\r\n                }\r\n                else {\r\n                    openRequest.resolve({ message, connectionInfo });\r\n                }\r\n                this.openRequests.delete(message.id);\r\n            }\r\n            else {\r\n                if (message.type === BeaconMessageType.Disconnect) {\r\n                    const transport = yield this.transport;\r\n                    if (transport.type === TransportType.P2P) {\r\n                        // TODO: Also handle postmessage transport\r\n                        yield transport.removePeer({\r\n                            name: '',\r\n                            publicKey: message.senderId,\r\n                            version: BEACON_VERSION,\r\n                            relayServer: ''\r\n                        });\r\n                        yield this.events.emit(BeaconEvent.P2P_CHANNEL_CLOSED);\r\n                    }\r\n                }\r\n                else {\r\n                    logger.error('handleResponse', 'no request found for id ', message.id);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Returns the status if the transport is connected\r\n     */\r\n    get isConnected() {\r\n        return this._isConnected.promise;\r\n    }\r\n    init(_isDapp, transport) {\r\n        const _super = Object.create(null, {\r\n            init: { get: () => super.init }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const initResponse = yield _super.init.call(this, true, transport);\r\n            return initResponse;\r\n        });\r\n    }\r\n    /**\r\n     * Returns the active account\r\n     */\r\n    getActiveAccount() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this._activeAccount.promise;\r\n        });\r\n    }\r\n    /**\r\n     * Sets the active account\r\n     *\r\n     * @param account The account that will be set as the active account\r\n     */\r\n    setActiveAccount(account) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._activeAccount.isSettled()) {\r\n                // If the promise has already been resolved we need to create a new one.\r\n                this._activeAccount = ExposedPromise.resolve(account);\r\n            }\r\n            else {\r\n                this._activeAccount.resolve(account);\r\n            }\r\n            yield this.storage.set(StorageKey.ACTIVE_ACCOUNT, account ? account.accountIdentifier : undefined);\r\n            yield this.events.emit(BeaconEvent.ACTIVE_ACCOUNT_SET, account);\r\n            return;\r\n        });\r\n    }\r\n    /**\r\n     * Returns the metadata of this DApp\r\n     */\r\n    getAppMetadata() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return {\r\n                senderId: yield this.beaconId,\r\n                name: this.name,\r\n                icon: this.iconUrl\r\n            };\r\n        });\r\n    }\r\n    /**\r\n     * The method will attempt to initiate a connection using the active transport method.\r\n     * If the method is called multiple times while it is connecting (meaning the initial connect didn't finish),\r\n     * the transport will try to reconnect.\r\n     */\r\n    connect() {\r\n        const _super = Object.create(null, {\r\n            _connect: { get: () => super._connect }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return _super._connect.call(this);\r\n        });\r\n    }\r\n    /**\r\n     * Will remove the account from the local storage and set a new active account if necessary.\r\n     *\r\n     * @param accountIdentifier ID of the account\r\n     */\r\n    removeAccount(accountIdentifier) {\r\n        const _super = Object.create(null, {\r\n            removeAccount: { get: () => super.removeAccount }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const removeAccountResult = _super.removeAccount.call(this, accountIdentifier);\r\n            const activeAccount = yield this.getActiveAccount();\r\n            if (activeAccount && activeAccount.accountIdentifier === accountIdentifier) {\r\n                yield this.setActiveAccount(undefined);\r\n            }\r\n            return removeAccountResult;\r\n        });\r\n    }\r\n    /**\r\n     * Remove all accounts and set active account to undefined\r\n     */\r\n    removeAllAccounts() {\r\n        const _super = Object.create(null, {\r\n            removeAllAccounts: { get: () => super.removeAllAccounts }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield _super.removeAllAccounts.call(this);\r\n            yield this.setActiveAccount(undefined);\r\n        });\r\n    }\r\n    /**\r\n     * Removes a peer and all the accounts that have been connected through that peer\r\n     *\r\n     * @param peer Peer to be removed\r\n     */\r\n    removePeer(peer) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if ((yield this.transport).type === TransportType.P2P) {\r\n                // TODO: Allow for other transport types?\r\n                const removePeerResult = (yield this.transport).removePeer(peer);\r\n                yield this.removeAccountsForPeers([peer]);\r\n                return removePeerResult;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Remove all peers and all accounts that have been connected through those peers\r\n     */\r\n    removeAllPeers() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if ((yield this.transport).type === TransportType.P2P) {\r\n                // TODO: Allow for other transport types?\r\n                const peers = yield (yield this.transport).getPeers();\r\n                const removePeerResult = (yield this.transport).removeAllPeers();\r\n                yield this.removeAccountsForPeers(peers);\r\n                return removePeerResult;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Allows the user to subscribe to specific events that are fired in the SDK\r\n     *\r\n     * @param internalEvent The event to subscribe to\r\n     * @param eventCallback The callback that will be called when the event occurs\r\n     */\r\n    subscribeToEvent(internalEvent, eventCallback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.events.on(internalEvent, eventCallback);\r\n        });\r\n    }\r\n    /**\r\n     * Check if we have permissions to send the specific message type to the active account.\r\n     * If no active account is set, only permission requests are allowed.\r\n     *\r\n     * @param type The type of the message\r\n     */\r\n    checkPermissions(type) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (type === BeaconMessageType.PermissionRequest) {\r\n                return true;\r\n            }\r\n            const activeAccount = yield this.getActiveAccount();\r\n            if (!activeAccount) {\r\n                throw yield this.sendInternalError('No active account set!');\r\n            }\r\n            const permissions = activeAccount.scopes;\r\n            switch (type) {\r\n                case BeaconMessageType.OperationRequest:\r\n                    return permissions.includes(PermissionScope.OPERATION_REQUEST);\r\n                case BeaconMessageType.SignPayloadRequest:\r\n                    return permissions.includes(PermissionScope.SIGN);\r\n                case BeaconMessageType.BroadcastRequest:\r\n                    return true;\r\n                default:\r\n                    return false;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Send a permission request to the DApp. This should be done as the first step. The wallet will respond\r\n     * with an publicKey and permissions that were given. The account returned will be set as the \"activeAccount\"\r\n     * and will be used for the following requests.\r\n     *\r\n     * @param input The message details we need to prepare the PermissionRequest message.\r\n     */\r\n    requestPermissions(input) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const request = {\r\n                appMetadata: yield this.getAppMetadata(),\r\n                type: BeaconMessageType.PermissionRequest,\r\n                network: input && input.network ? input.network : { type: NetworkType.MAINNET },\r\n                scopes: input && input.scopes\r\n                    ? input.scopes\r\n                    : [PermissionScope.OPERATION_REQUEST, PermissionScope.SIGN]\r\n            };\r\n            const { message, connectionInfo } = yield this.makeRequest(request).catch((requestError) => __awaiter(this, void 0, void 0, function* () {\r\n                throw this.handleRequestError(request, requestError);\r\n            }));\r\n            // TODO: Migration code. Remove sometime after 1.0.0 release.\r\n            const publicKey = message.publicKey || message.pubkey || message.pubKey;\r\n            const address = yield getAddressFromPublicKey(publicKey);\r\n            const accountInfo = {\r\n                accountIdentifier: yield getAccountIdentifier(address, message.network),\r\n                senderId: message.senderId,\r\n                origin: {\r\n                    type: connectionInfo.origin,\r\n                    id: connectionInfo.id\r\n                },\r\n                address,\r\n                publicKey,\r\n                network: message.network,\r\n                scopes: message.scopes,\r\n                threshold: message.threshold,\r\n                connectedAt: new Date().getTime()\r\n            };\r\n            yield this.accountManager.addAccount(accountInfo);\r\n            yield this.setActiveAccount(accountInfo);\r\n            const { senderId, network, scopes, threshold } = message;\r\n            const output = {\r\n                senderId,\r\n                address,\r\n                network,\r\n                scopes,\r\n                publicKey,\r\n                threshold\r\n            }; // TODO: Should we return the account info here?\r\n            yield this.notifySuccess(request, {\r\n                account: accountInfo,\r\n                output,\r\n                blockExplorer: this.blockExplorer,\r\n                connectionContext: connectionInfo\r\n            });\r\n            return output;\r\n        });\r\n    }\r\n    /**\r\n     * This method will send a \"SignPayloadRequest\" to the wallet. This method is meant to be used to sign\r\n     * arbitrary data (eg. a string). It will return the signature in the format of \"edsig...\"\r\n     *\r\n     * @param input The message details we need to prepare the SignPayloadRequest message.\r\n     */\r\n    requestSignPayload(input) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!input.payload) {\r\n                throw yield this.sendInternalError('Payload must be provided');\r\n            }\r\n            const activeAccount = yield this.getActiveAccount();\r\n            if (!activeAccount) {\r\n                throw yield this.sendInternalError('No active account!');\r\n            }\r\n            const request = {\r\n                type: BeaconMessageType.SignPayloadRequest,\r\n                payload: input.payload,\r\n                sourceAddress: input.sourceAddress || activeAccount.address\r\n            };\r\n            const { message, connectionInfo } = yield this.makeRequest(request).catch((requestError) => __awaiter(this, void 0, void 0, function* () {\r\n                throw this.handleRequestError(request, requestError);\r\n            }));\r\n            const { senderId, signature } = message;\r\n            const output = { senderId, signature };\r\n            yield this.notifySuccess(request, {\r\n                account: activeAccount,\r\n                output,\r\n                connectionContext: connectionInfo\r\n            });\r\n            return output;\r\n        });\r\n    }\r\n    /**\r\n     * This method sends an OperationRequest to the wallet. This method should be used for all kinds of operations,\r\n     * eg. transaction or delegation. Not all properties have to be provided. Data like \"counter\" and fees will be\r\n     * fetched and calculated by the wallet (but they can still be provided if required).\r\n     *\r\n     * @param input The message details we need to prepare the OperationRequest message.\r\n     */\r\n    requestOperation(input) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!input.operationDetails) {\r\n                throw yield this.sendInternalError('Operation details must be provided');\r\n            }\r\n            const activeAccount = yield this.getActiveAccount();\r\n            if (!activeAccount) {\r\n                throw yield this.sendInternalError('No active account!');\r\n            }\r\n            const request = {\r\n                type: BeaconMessageType.OperationRequest,\r\n                network: activeAccount.network || { type: NetworkType.MAINNET },\r\n                operationDetails: input.operationDetails,\r\n                sourceAddress: activeAccount.address || ''\r\n            };\r\n            const { message, connectionInfo } = yield this.makeRequest(request).catch((requestError) => __awaiter(this, void 0, void 0, function* () {\r\n                throw this.handleRequestError(request, requestError);\r\n            }));\r\n            const { senderId, transactionHash } = message;\r\n            const output = { senderId, transactionHash };\r\n            yield this.notifySuccess(request, {\r\n                account: activeAccount,\r\n                output,\r\n                blockExplorer: this.blockExplorer,\r\n                connectionContext: connectionInfo\r\n            });\r\n            return { senderId, transactionHash };\r\n        });\r\n    }\r\n    /**\r\n     * Sends a \"BroadcastRequest\" to the wallet. This method can be used to inject an already signed transaction\r\n     * to the network.\r\n     *\r\n     * @param input The message details we need to prepare the BroadcastRequest message.\r\n     */\r\n    requestBroadcast(input) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!input.signedTransaction) {\r\n                throw yield this.sendInternalError('Signed transaction must be provided');\r\n            }\r\n            const network = input.network || { type: NetworkType.MAINNET };\r\n            const request = {\r\n                type: BeaconMessageType.BroadcastRequest,\r\n                network,\r\n                signedTransaction: input.signedTransaction\r\n            };\r\n            const { message, connectionInfo } = yield this.makeRequest(request).catch((requestError) => __awaiter(this, void 0, void 0, function* () {\r\n                throw this.handleRequestError(request, requestError);\r\n            }));\r\n            const { senderId, transactionHash } = message;\r\n            const output = { senderId, transactionHash };\r\n            yield this.notifySuccess(request, {\r\n                network,\r\n                output,\r\n                blockExplorer: this.blockExplorer,\r\n                connectionContext: connectionInfo\r\n            });\r\n            return { senderId, transactionHash };\r\n        });\r\n    }\r\n    /**\r\n     * This method will emit an internal error message.\r\n     *\r\n     * @param errorMessage The error message to send.\r\n     */\r\n    sendInternalError(errorMessage) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.events.emit(BeaconEvent.INTERNAL_ERROR, errorMessage);\r\n            throw new Error(errorMessage);\r\n        });\r\n    }\r\n    /**\r\n     * This method will remove all accounts associated with a specific peer.\r\n     *\r\n     * @param peersToRemove An array of peers for which accounts should be removed\r\n     */\r\n    removeAccountsForPeers(peersToRemove) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const accounts = yield this.accountManager.getAccounts();\r\n            const peerIdsToRemove = peersToRemove.map((peer) => peer.publicKey);\r\n            // Remove all accounts with origin of the specified peer\r\n            const accountsToRemove = accounts.filter((account) => peerIdsToRemove.includes(account.origin.id));\r\n            const accountIdentifiersToRemove = accountsToRemove.map((accountInfo) => accountInfo.accountIdentifier);\r\n            yield this.accountManager.removeAccounts(accountIdentifiersToRemove);\r\n            // Check if one of the accounts that was removed was the active account and if yes, set it to undefined\r\n            const activeAccount = yield this.getActiveAccount();\r\n            if (activeAccount) {\r\n                if (accountIdentifiersToRemove.includes(activeAccount.accountIdentifier)) {\r\n                    yield this.setActiveAccount(undefined);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * This message handles errors that we receive from the wallet.\r\n     *\r\n     * @param request The request we sent\r\n     * @param beaconError The error we received\r\n     */\r\n    handleRequestError(request, beaconError) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (beaconError.errorType) {\r\n                let errorCallback = () => Promise.resolve();\r\n                if (beaconError.errorType === BeaconErrorType.NO_PRIVATE_KEY_FOUND_ERROR) {\r\n                    errorCallback = () => __awaiter(this, void 0, void 0, function* () {\r\n                        const operationRequest = request;\r\n                        // if the account we requested is not available, we remove it locally\r\n                        let accountInfo;\r\n                        if (operationRequest.sourceAddress && operationRequest.network) {\r\n                            const accountIdentifier = yield getAccountIdentifier(operationRequest.sourceAddress, operationRequest.network);\r\n                            accountInfo = yield this.getAccount(accountIdentifier);\r\n                            if (accountInfo) {\r\n                                yield this.removeAccount(accountInfo.accountIdentifier);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                this.events\r\n                    .emit(messageEvents[request.type].error, beaconError, [\r\n                    { text: 'Remove account', actionCallback: errorCallback }\r\n                ])\r\n                    .catch((emitError) => console.warn(emitError));\r\n                throw BeaconError.getError(beaconError.errorType);\r\n            }\r\n            console.error('requestError', beaconError);\r\n            throw beaconError;\r\n        });\r\n    }\r\n    /**\r\n     * This message will send an event when we receive a successful response to one of the requests we sent.\r\n     *\r\n     * @param request The request we sent\r\n     * @param response The response we received\r\n     */\r\n    notifySuccess(request, response) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.events\r\n                .emit(messageEvents[request.type].success, response)\r\n                .catch((emitError) => console.warn(emitError));\r\n        });\r\n    }\r\n    /**\r\n     * This method handles sending of requests to the DApp. It makes sure that the DAppClient is initialized and connected\r\n     * to the transport. After that rate limits and permissions will be checked, an ID is attached and the request is sent\r\n     * to the DApp over the transport.\r\n     *\r\n     * @param requestInput The BeaconMessage to be sent to the wallet\r\n     * @param account The account that the message will be sent to\r\n     */\r\n    makeRequest(requestInput, account) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('makeRequest');\r\n            yield this.init();\r\n            logger.log('makeRequest', 'after init');\r\n            yield this.connect();\r\n            logger.log('makeRequest', 'after connecting');\r\n            if (yield this.addRequestAndCheckIfRateLimited()) {\r\n                this.events\r\n                    .emit(BeaconEvent.LOCAL_RATE_LIMIT_REACHED)\r\n                    .catch((emitError) => console.warn(emitError));\r\n                throw new Error('rate limit reached');\r\n            }\r\n            if (!(yield this.checkPermissions(requestInput.type))) {\r\n                this.events.emit(BeaconEvent.NO_PERMISSIONS).catch((emitError) => console.warn(emitError));\r\n                throw new Error('No permissions to send this request to wallet!');\r\n            }\r\n            if (!this.beaconId) {\r\n                throw yield this.sendInternalError('BeaconID not defined');\r\n            }\r\n            const request = Object.assign({ id: yield generateGUID(), version: BEACON_VERSION, senderId: yield this.beaconId }, requestInput);\r\n            const exposed = new ExposedPromise();\r\n            this.addOpenRequest(request.id, exposed);\r\n            const payload = yield new Serializer().serialize(request);\r\n            let origin;\r\n            if (account) {\r\n                origin = account.senderId;\r\n            }\r\n            yield (yield this.transport).send(payload, origin);\r\n            this.events\r\n                .emit(messageEvents[requestInput.type].sent)\r\n                .catch((emitError) => console.warn(emitError));\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            return exposed.promise; // TODO: fix type\r\n        });\r\n    }\r\n    /**\r\n     * Adds a requests to the \"openRequests\" set so we know what messages have already been answered/handled.\r\n     *\r\n     * @param id The ID of the message\r\n     * @param promise A promise that resolves once the response for that specific message is received\r\n     */\r\n    addOpenRequest(id, promise) {\r\n        logger.log('addOpenRequest', this.name, `adding request ${id} and waiting for answer`);\r\n        this.openRequests.set(id, promise);\r\n    }\r\n}\r\n//# sourceMappingURL=DAppClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { Serializer, Client, LocalStorage, TransportType } from '../..';\r\nimport { PermissionManager } from '../../managers/PermissionManager';\r\nimport { AppMetadataManager } from '../../managers/AppMetadataManager';\r\nimport { IncomingRequestInterceptor } from '../../interceptors/IncomingRequestInterceptor';\r\nimport { OutgoingResponseInterceptor } from '../../interceptors/OutgoingResponseInterceptor';\r\n/**\r\n * The WalletClient has to be used in the wallet. It handles all the logic related to connecting to beacon-compatible\r\n * dapps and handling/responding to requests.\r\n */\r\nexport class WalletClient extends Client {\r\n    constructor(config) {\r\n        super(Object.assign({ storage: new LocalStorage() }, config));\r\n        /**\r\n         * This array stores pending requests, meaning requests we received and have not yet handled / sent a response.\r\n         */\r\n        this.pendingRequests = [];\r\n        this.permissionManager = new PermissionManager(new LocalStorage());\r\n        this.appMetadataManager = new AppMetadataManager(new LocalStorage());\r\n    }\r\n    init() {\r\n        const _super = Object.create(null, {\r\n            init: { get: () => super.init }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return _super.init.call(this, false);\r\n        });\r\n    }\r\n    /**\r\n     * This method initiates a connection to the P2P network and registers a callback that will be called\r\n     * whenever a message is received.\r\n     *\r\n     * @param newMessageCallback The callback that will be invoked for every message the transport receives.\r\n     */\r\n    connect(newMessageCallback) {\r\n        const _super = Object.create(null, {\r\n            _connect: { get: () => super._connect }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.handleResponse = (message, connectionInfo) => __awaiter(this, void 0, void 0, function* () {\r\n                if (!this.pendingRequests.some((request) => request.id === message.id)) {\r\n                    this.pendingRequests.push(message);\r\n                    yield IncomingRequestInterceptor.intercept({\r\n                        message,\r\n                        connectionInfo,\r\n                        appMetadataManager: this.appMetadataManager,\r\n                        interceptorCallback: newMessageCallback\r\n                    });\r\n                }\r\n            });\r\n            return _super._connect.call(this);\r\n        });\r\n    }\r\n    /**\r\n     * This method sends a response for a specific request back to the DApp\r\n     *\r\n     * @param message The BeaconResponseMessage that will be sent back to the DApp\r\n     */\r\n    respond(message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const request = this.pendingRequests.find((pendingRequest) => pendingRequest.id === message.id);\r\n            if (!request) {\r\n                throw new Error('No matching request found!');\r\n            }\r\n            this.pendingRequests = this.pendingRequests.filter((pendingRequest) => pendingRequest.id !== message.id);\r\n            yield OutgoingResponseInterceptor.intercept({\r\n                senderId: yield this.beaconId,\r\n                request,\r\n                message,\r\n                permissionManager: this.permissionManager,\r\n                appMetadataManager: this.appMetadataManager,\r\n                interceptorCallback: (response) => __awaiter(this, void 0, void 0, function* () {\r\n                    yield this.respondToMessage(response);\r\n                })\r\n            });\r\n        });\r\n    }\r\n    getAppMetadataList() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.appMetadataManager.getAppMetadataList();\r\n        });\r\n    }\r\n    getAppMetadata(senderId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.appMetadataManager.getAppMetadata(senderId);\r\n        });\r\n    }\r\n    removeAppMetadata(senderId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.appMetadataManager.removeAppMetadata(senderId);\r\n        });\r\n    }\r\n    removeAllAppMetadata() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.appMetadataManager.removeAllAppMetadata();\r\n        });\r\n    }\r\n    getPermissions() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.permissionManager.getPermissions();\r\n        });\r\n    }\r\n    getPermission(accountIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.permissionManager.getPermission(accountIdentifier);\r\n        });\r\n    }\r\n    removePermission(accountIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.permissionManager.removePermission(accountIdentifier);\r\n        });\r\n    }\r\n    removeAllPermissions() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.permissionManager.removeAllPermissions();\r\n        });\r\n    }\r\n    removePeer(peer) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if ((yield this.transport).type === TransportType.P2P) {\r\n                const removePeerResult = (yield this.transport).removePeer(peer);\r\n                yield this.removePermissionsForPeers([peer]);\r\n                return removePeerResult;\r\n            }\r\n        });\r\n    }\r\n    removeAllPeers() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if ((yield this.transport).type === TransportType.P2P) {\r\n                const peers = yield (yield this.transport).getPeers();\r\n                const removePeerResult = (yield this.transport).removeAllPeers();\r\n                yield this.removePermissionsForPeers(peers);\r\n                return removePeerResult;\r\n            }\r\n        });\r\n    }\r\n    removePermissionsForPeers(peersToRemove) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const permissions = yield this.permissionManager.getPermissions();\r\n            const peerIdsToRemove = peersToRemove.map((peer) => peer.publicKey);\r\n            // Remove all permissions with origin of the specified peer\r\n            const permissionsToRemove = permissions.filter((permission) => peerIdsToRemove.includes(permission.appMetadata.senderId));\r\n            const permissionIdentifiersToRemove = permissionsToRemove.map((permissionInfo) => permissionInfo.accountIdentifier);\r\n            yield this.permissionManager.removePermissions(permissionIdentifiersToRemove);\r\n        });\r\n    }\r\n    /**\r\n     * An internal method to send a BeaconMessage to the DApp\r\n     *\r\n     * @param message Send a message back to the DApp\r\n     */\r\n    respondToMessage(message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const serializedMessage = yield new Serializer().serialize(message);\r\n            yield (yield this.transport).send(serializedMessage);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=WalletClient.js.map","export const SDK_VERSION = '2.0.0-beta.11';\r\nexport const BEACON_VERSION = '2';\r\nexport const DEBUG = false;\r\n//# sourceMappingURL=constants.js.map","import { BeaconError, BeaconErrorType } from '..';\r\nexport class AbortedBeaconError extends BeaconError {\r\n    constructor() {\r\n        super(BeaconErrorType.ABORTED_ERROR, 'The action was aborted by the user.');\r\n        this.name = 'UnknownBeaconError';\r\n        this.title = 'Error';\r\n    }\r\n}\r\n//# sourceMappingURL=AbortedBeaconError.js.map","import { assertNever } from '../utils/assert-never';\r\nimport { AbortedBeaconError, BeaconErrorType, UnknownBeaconError, NetworkNotSupportedBeaconError, NoAddressBeaconError, NoPrivateKeyBeaconError, NotGrantedBeaconError, ParametersInvalidBeaconError, TooManyOperationsBeaconError, TransactionInvalidBeaconError } from '..';\r\nexport class BeaconError {\r\n    constructor(errorType, message) {\r\n        this.name = 'BeaconError';\r\n        this.title = 'Error'; // Visible in the UI\r\n        this.message = `[${errorType}]:${message}`;\r\n        this.description = message;\r\n    }\r\n    static getError(errorType) {\r\n        switch (errorType) {\r\n            case BeaconErrorType.BROADCAST_ERROR:\r\n                return new NetworkNotSupportedBeaconError();\r\n            case BeaconErrorType.NETWORK_NOT_SUPPORTED:\r\n                return new NetworkNotSupportedBeaconError();\r\n            case BeaconErrorType.NO_ADDRESS_ERROR:\r\n                return new NoAddressBeaconError();\r\n            case BeaconErrorType.NO_PRIVATE_KEY_FOUND_ERROR:\r\n                return new NoPrivateKeyBeaconError();\r\n            case BeaconErrorType.NOT_GRANTED_ERROR:\r\n                return new NotGrantedBeaconError();\r\n            case BeaconErrorType.PARAMETERS_INVALID_ERROR:\r\n                return new ParametersInvalidBeaconError();\r\n            case BeaconErrorType.TOO_MANY_OPERATIONS:\r\n                return new TooManyOperationsBeaconError();\r\n            case BeaconErrorType.TRANSACTION_INVALID_ERROR:\r\n                return new TransactionInvalidBeaconError();\r\n            case BeaconErrorType.ABORTED_ERROR:\r\n                return new AbortedBeaconError();\r\n            case BeaconErrorType.UNKNOWN_ERROR:\r\n                return new UnknownBeaconError();\r\n            default:\r\n                assertNever(errorType);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=BeaconError.js.map","import { BeaconError, BeaconErrorType } from '..';\r\nexport class BroadcastBeaconError extends BeaconError {\r\n    constructor() {\r\n        super(BeaconErrorType.BROADCAST_ERROR, 'The transaction could not be broadcast to the network. Please try again.');\r\n        this.name = 'BroadcastBeaconError';\r\n        this.title = 'Broadcast Error';\r\n    }\r\n}\r\n//# sourceMappingURL=BroadcastBeaconError.js.map","import { BeaconError, BeaconErrorType } from '..';\r\nexport class NetworkNotSupportedBeaconError extends BeaconError {\r\n    constructor() {\r\n        super(BeaconErrorType.NETWORK_NOT_SUPPORTED, 'The wallet does not support this network. Please select another one.');\r\n        this.name = 'NetworkNotSupportedBeaconError';\r\n        this.title = 'Network Error';\r\n    }\r\n}\r\n//# sourceMappingURL=NetworkNotSupportedBeaconError.js.map","import { BeaconError, BeaconErrorType } from '..';\r\nexport class NoAddressBeaconError extends BeaconError {\r\n    constructor() {\r\n        super(BeaconErrorType.NO_ADDRESS_ERROR, 'The wallet does not have an account set up. Please make sure to set up your wallet and try again.');\r\n        this.name = 'NoAddressBeaconError';\r\n        this.title = 'No Address';\r\n    }\r\n}\r\n//# sourceMappingURL=NoAddressBeaconError.js.map","import { BeaconError, BeaconErrorType } from '..';\r\nexport class NoPrivateKeyBeaconError extends BeaconError {\r\n    constructor() {\r\n        super(BeaconErrorType.NO_PRIVATE_KEY_FOUND_ERROR, 'The account you are trying to interact with is not available. Please make sure to add the account to your wallet and try again.');\r\n        this.name = 'NoPrivateKeyBeaconError';\r\n        this.title = 'Account Not Found';\r\n    }\r\n}\r\n//# sourceMappingURL=NoPrivateKeyBeaconError.js.map","import { BeaconError, BeaconErrorType } from '..';\r\nexport class NotGrantedBeaconError extends BeaconError {\r\n    constructor() {\r\n        super(BeaconErrorType.NOT_GRANTED_ERROR, 'You do not have the necessary permissions to perform this action. Please initiate another permission request and give the necessary permissions.');\r\n        this.name = 'NotGrantedBeaconError';\r\n        this.title = 'Permission Not Granted';\r\n    }\r\n}\r\n//# sourceMappingURL=NotGrantedBeaconError.js.map","import { BeaconError, BeaconErrorType } from '..';\r\nexport class ParametersInvalidBeaconError extends BeaconError {\r\n    constructor() {\r\n        super(BeaconErrorType.PARAMETERS_INVALID_ERROR, 'Some of the parameters you provided are invalid and the request could not be completed. Please check your inputs and try again.');\r\n        this.name = 'ParametersInvalidBeaconError';\r\n        this.title = 'Parameters Invalid';\r\n    }\r\n}\r\n//# sourceMappingURL=ParametersInvalidBeaconError.js.map","import { BeaconError, BeaconErrorType } from '..';\r\nexport class TooManyOperationsBeaconError extends BeaconError {\r\n    constructor() {\r\n        super(BeaconErrorType.TOO_MANY_OPERATIONS, 'The request contains too many transactions. Please include fewer operations and try again.');\r\n        this.name = 'TooManyOperationsBeaconError';\r\n        this.title = 'Too Many Operations';\r\n    }\r\n}\r\n//# sourceMappingURL=TooManyOperationsBeaconError.js.map","import { BeaconError, BeaconErrorType } from '..';\r\nexport class TransactionInvalidBeaconError extends BeaconError {\r\n    constructor() {\r\n        super(BeaconErrorType.TRANSACTION_INVALID_ERROR, 'The transaction is invalid and the node did not accept it.');\r\n        this.name = 'TransactionInvalidBeaconError';\r\n        this.title = 'Transaction Invalid';\r\n    }\r\n}\r\n//# sourceMappingURL=TransactionInvalidBeaconError.js.map","import { BeaconError, BeaconErrorType } from '..';\r\nexport class UnknownBeaconError extends BeaconError {\r\n    constructor() {\r\n        super(BeaconErrorType.UNKNOWN_ERROR, 'An unknown error occured. Please try again or report it to a developer.');\r\n        this.name = 'UnknownBeaconError';\r\n        this.title = 'Error';\r\n    }\r\n}\r\n//# sourceMappingURL=UnknownBeaconError.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { getTzip10Link } from './utils/get-tzip10-link';\r\nimport { openToast } from './alert/Toast';\r\nimport { openAlert } from './alert/Alert';\r\nimport { getQrData } from './utils/qr';\r\nimport { Logger } from './utils/Logger';\r\nimport { BeaconError } from './errors/BeaconError';\r\nimport { Serializer } from './Serializer';\r\nimport { UnknownBeaconError } from '.';\r\nconst logger = new Logger('BeaconEvents');\r\nconst serializer = new Serializer();\r\n/**\r\n * The different events that can be emitted by the beacon-sdk\r\n */\r\nexport var BeaconEvent;\r\n(function (BeaconEvent) {\r\n    BeaconEvent[\"PERMISSION_REQUEST_SENT\"] = \"PERMISSION_REQUEST_SENT\";\r\n    BeaconEvent[\"PERMISSION_REQUEST_SUCCESS\"] = \"PERMISSION_REQUEST_SUCCESS\";\r\n    BeaconEvent[\"PERMISSION_REQUEST_ERROR\"] = \"PERMISSION_REQUEST_ERROR\";\r\n    BeaconEvent[\"OPERATION_REQUEST_SENT\"] = \"OPERATION_REQUEST_SENT\";\r\n    BeaconEvent[\"OPERATION_REQUEST_SUCCESS\"] = \"OPERATION_REQUEST_SUCCESS\";\r\n    BeaconEvent[\"OPERATION_REQUEST_ERROR\"] = \"OPERATION_REQUEST_ERROR\";\r\n    BeaconEvent[\"SIGN_REQUEST_SENT\"] = \"SIGN_REQUEST_SENT\";\r\n    BeaconEvent[\"SIGN_REQUEST_SUCCESS\"] = \"SIGN_REQUEST_SUCCESS\";\r\n    BeaconEvent[\"SIGN_REQUEST_ERROR\"] = \"SIGN_REQUEST_ERROR\";\r\n    BeaconEvent[\"BROADCAST_REQUEST_SENT\"] = \"BROADCAST_REQUEST_SENT\";\r\n    BeaconEvent[\"BROADCAST_REQUEST_SUCCESS\"] = \"BROADCAST_REQUEST_SUCCESS\";\r\n    BeaconEvent[\"BROADCAST_REQUEST_ERROR\"] = \"BROADCAST_REQUEST_ERROR\";\r\n    BeaconEvent[\"LOCAL_RATE_LIMIT_REACHED\"] = \"LOCAL_RATE_LIMIT_REACHED\";\r\n    BeaconEvent[\"NO_PERMISSIONS\"] = \"NO_PERMISSIONS\";\r\n    BeaconEvent[\"ACTIVE_ACCOUNT_SET\"] = \"ACTIVE_ACCOUNT_SET\";\r\n    BeaconEvent[\"ACTIVE_TRANSPORT_SET\"] = \"ACTIVE_TRANSPORT_SET\";\r\n    BeaconEvent[\"P2P_CHANNEL_CONNECT_SUCCESS\"] = \"P2P_CHANNEL_CONNECT_SUCCESS\";\r\n    BeaconEvent[\"P2P_LISTEN_FOR_CHANNEL_OPEN\"] = \"P2P_LISTEN_FOR_CHANNEL_OPEN\";\r\n    BeaconEvent[\"P2P_CHANNEL_CLOSED\"] = \"P2P_CHANNEL_CLOSED\";\r\n    BeaconEvent[\"INTERNAL_ERROR\"] = \"INTERNAL_ERROR\";\r\n    BeaconEvent[\"UNKNOWN\"] = \"UNKNOWN\";\r\n})(BeaconEvent || (BeaconEvent = {}));\r\n/**\r\n * Show a \"Request sent\" toast\r\n */\r\nconst showSentToast = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    openToast({ body: 'Request sent', timer: 3000 }).catch((toastError) => console.error(toastError));\r\n});\r\n/**\r\n * Show a \"No Permission\" alert\r\n */\r\nconst showNoPermissionAlert = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    yield openAlert({\r\n        title: 'No Permission',\r\n        body: 'Please allow the wallet to handle this type of request.'\r\n    });\r\n});\r\n/**\r\n * Show an error alert\r\n *\r\n * @param beaconError The beacon error\r\n */\r\nconst showErrorAlert = (beaconError, buttons) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const error = beaconError.errorType\r\n        ? BeaconError.getError(beaconError.errorType)\r\n        : new UnknownBeaconError();\r\n    yield openAlert({\r\n        title: error.title,\r\n        body: error.description,\r\n        buttons\r\n    });\r\n});\r\n/**\r\n * Show a rate limit reached toast\r\n */\r\nconst showRateLimitReached = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    openToast({\r\n        body: 'Rate limit reached. Please slow down',\r\n        timer: 3000\r\n    }).catch((toastError) => console.error(toastError));\r\n});\r\n/**\r\n * Show a \"connection successful\" alert for 1.5 seconds\r\n */\r\nconst showBeaconConnectedAlert = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    yield openAlert({\r\n        title: 'Success',\r\n        body: 'A wallet has been paired over the beacon network.',\r\n        buttons: [{ text: 'Done', style: 'outline' }],\r\n        timer: 1500\r\n    });\r\n});\r\n/**\r\n * Show a \"channel closed\" alert for 1.5 seconds\r\n */\r\nconst showChannelClosedAlert = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    yield openAlert({\r\n        title: 'Channel closed',\r\n        body: `Your peer has closed the connection.`,\r\n        buttons: [{ text: 'Done', style: 'outline' }],\r\n        timer: 1500\r\n    });\r\n});\r\nconst showInternalErrorAlert = (data) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const alertConfig = {\r\n        title: 'Internal Error',\r\n        body: `${data}`,\r\n        buttons: [{ text: 'Done', style: 'outline' }]\r\n    };\r\n    yield openAlert(alertConfig);\r\n});\r\n/**\r\n * Show a connect alert with QR code\r\n *\r\n * @param data The data that is emitted by the P2P_LISTEN_FOR_CHANNEL_OPEN event\r\n */\r\nconst showQrCode = (data) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const dataString = JSON.stringify(data);\r\n    console.log(dataString); // TODO: Remove after \"copy to clipboard\" has been added.\r\n    const base58encoded = yield serializer.serialize(data);\r\n    console.log(base58encoded); // TODO: Remove after \"copy to clipboard\" has been added.\r\n    const uri = getTzip10Link('tezos://', base58encoded);\r\n    const alertConfig = {\r\n        title: 'Pair with Wallet',\r\n        body: `${getQrData(uri, 'svg')}<p>Don't know what to do with this QR code? <a href=\"https://docs.walletbeacon.io/supported-wallets.html\" target=\"_blank\">Learn more</a>.</p>`,\r\n        pairingPayload: base58encoded\r\n    };\r\n    yield openAlert(alertConfig);\r\n});\r\n/**\r\n * Show a \"Permission Granted\" alert\r\n *\r\n * @param data The data that is emitted by the PERMISSION_REQUEST_SUCCESS event\r\n */\r\nconst showPermissionSuccessAlert = (data) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const { account, output, blockExplorer } = data;\r\n    const alertConfig = {\r\n        title: 'Permission Granted',\r\n        body: `We received permissions for the address <strong>${output.address}</strong>\r\n    <br>\r\n    <br>\r\n    Network: <strong>${output.network.type}</strong>\r\n    <br>\r\n    Permissions: <strong>${output.scopes}</strong>`,\r\n        buttons: [\r\n            {\r\n                text: 'Open Blockexplorer',\r\n                actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\r\n                    const link = yield blockExplorer.getAddressLink(output.address, account.network);\r\n                    window.open(link, '_blank');\r\n                })\r\n            },\r\n            { text: 'Done', style: 'solid' }\r\n        ]\r\n    };\r\n    yield openAlert(alertConfig);\r\n});\r\n/**\r\n * Show an \"Operation Broadcasted\" alert\r\n *\r\n * @param data The data that is emitted by the OPERATION_REQUEST_SUCCESS event\r\n */\r\nconst showOperationSuccessAlert = (data) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const { account, output, blockExplorer } = data;\r\n    const alertConfig = {\r\n        title: 'Operation Broadcasted',\r\n        body: `The transaction has successfully been broadcasted to the network with the following hash. <strong>${output.transactionHash}</strong>`,\r\n        buttons: [\r\n            {\r\n                text: 'Open Blockexplorer',\r\n                actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\r\n                    const link = yield blockExplorer.getTransactionLink(output.transactionHash, account.network);\r\n                    window.open(link, '_blank');\r\n                })\r\n            },\r\n            { text: 'Done', style: 'solid' }\r\n        ]\r\n    };\r\n    yield openAlert(alertConfig);\r\n});\r\n/**\r\n * Show a \"Transaction Signed\" alert\r\n *\r\n * @param data The data that is emitted by the SIGN_REQUEST_SUCCESS event\r\n */\r\nconst showSignSuccessAlert = (data) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const output = data.output;\r\n    const alertConfig = {\r\n        title: 'Payload signed',\r\n        body: `The payload has successfully been signed.\r\n    <br>\r\n    Signature: <strong>${output.signature}</strong>`,\r\n        buttons: [{ text: 'Done', style: 'solid' }]\r\n    };\r\n    yield openAlert(alertConfig);\r\n});\r\n/**\r\n * Show a \"Broadcasted\" alert\r\n *\r\n * @param data The data that is emitted by the BROADCAST_REQUEST_SUCCESS event\r\n */\r\nconst showBroadcastSuccessAlert = (data) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const { network, output, blockExplorer } = data;\r\n    const alertConfig = {\r\n        title: 'Broadcasted',\r\n        body: `The transaction has successfully been broadcasted to the network with the following hash. <strong>${output.transactionHash}</strong>`,\r\n        buttons: [\r\n            {\r\n                text: 'Open Blockexplorer',\r\n                actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\r\n                    const link = yield blockExplorer.getTransactionLink(output.transactionHash, network);\r\n                    window.open(link, '_blank');\r\n                })\r\n            },\r\n            { text: 'Done', style: 'solid' }\r\n        ]\r\n    };\r\n    yield openAlert(alertConfig);\r\n});\r\nconst emptyHandler = (eventType) => (data) => __awaiter(void 0, void 0, void 0, function* () {\r\n    logger.log('emptyHandler', eventType, data);\r\n});\r\n/**\r\n * The default event handlers\r\n */\r\nexport const defaultEventCallbacks = {\r\n    [BeaconEvent.PERMISSION_REQUEST_SENT]: showSentToast,\r\n    [BeaconEvent.PERMISSION_REQUEST_SUCCESS]: showPermissionSuccessAlert,\r\n    [BeaconEvent.PERMISSION_REQUEST_ERROR]: showErrorAlert,\r\n    [BeaconEvent.OPERATION_REQUEST_SENT]: showSentToast,\r\n    [BeaconEvent.OPERATION_REQUEST_SUCCESS]: showOperationSuccessAlert,\r\n    [BeaconEvent.OPERATION_REQUEST_ERROR]: showErrorAlert,\r\n    [BeaconEvent.SIGN_REQUEST_SENT]: showSentToast,\r\n    [BeaconEvent.SIGN_REQUEST_SUCCESS]: showSignSuccessAlert,\r\n    [BeaconEvent.SIGN_REQUEST_ERROR]: showErrorAlert,\r\n    [BeaconEvent.BROADCAST_REQUEST_SENT]: showSentToast,\r\n    [BeaconEvent.BROADCAST_REQUEST_SUCCESS]: showBroadcastSuccessAlert,\r\n    [BeaconEvent.BROADCAST_REQUEST_ERROR]: showErrorAlert,\r\n    [BeaconEvent.LOCAL_RATE_LIMIT_REACHED]: showRateLimitReached,\r\n    [BeaconEvent.NO_PERMISSIONS]: showNoPermissionAlert,\r\n    [BeaconEvent.ACTIVE_ACCOUNT_SET]: emptyHandler(BeaconEvent.ACTIVE_ACCOUNT_SET),\r\n    [BeaconEvent.ACTIVE_TRANSPORT_SET]: emptyHandler(BeaconEvent.ACTIVE_TRANSPORT_SET),\r\n    [BeaconEvent.P2P_CHANNEL_CONNECT_SUCCESS]: showBeaconConnectedAlert,\r\n    [BeaconEvent.P2P_LISTEN_FOR_CHANNEL_OPEN]: showQrCode,\r\n    [BeaconEvent.P2P_CHANNEL_CLOSED]: showChannelClosedAlert,\r\n    [BeaconEvent.INTERNAL_ERROR]: showInternalErrorAlert,\r\n    [BeaconEvent.UNKNOWN]: emptyHandler(BeaconEvent.UNKNOWN)\r\n};\r\n/**\r\n * Handles beacon events\r\n */\r\nexport class BeaconEventHandler {\r\n    constructor(eventsToOverride = {}) {\r\n        this.callbackMap = {\r\n            [BeaconEvent.PERMISSION_REQUEST_SENT]: [defaultEventCallbacks.PERMISSION_REQUEST_SENT],\r\n            [BeaconEvent.PERMISSION_REQUEST_SUCCESS]: [defaultEventCallbacks.PERMISSION_REQUEST_SUCCESS],\r\n            [BeaconEvent.PERMISSION_REQUEST_ERROR]: [defaultEventCallbacks.PERMISSION_REQUEST_ERROR],\r\n            [BeaconEvent.OPERATION_REQUEST_SENT]: [defaultEventCallbacks.OPERATION_REQUEST_SENT],\r\n            [BeaconEvent.OPERATION_REQUEST_SUCCESS]: [defaultEventCallbacks.OPERATION_REQUEST_SUCCESS],\r\n            [BeaconEvent.OPERATION_REQUEST_ERROR]: [defaultEventCallbacks.OPERATION_REQUEST_ERROR],\r\n            [BeaconEvent.SIGN_REQUEST_SENT]: [defaultEventCallbacks.SIGN_REQUEST_SENT],\r\n            [BeaconEvent.SIGN_REQUEST_SUCCESS]: [defaultEventCallbacks.SIGN_REQUEST_SUCCESS],\r\n            [BeaconEvent.SIGN_REQUEST_ERROR]: [defaultEventCallbacks.SIGN_REQUEST_ERROR],\r\n            [BeaconEvent.BROADCAST_REQUEST_SENT]: [defaultEventCallbacks.BROADCAST_REQUEST_SENT],\r\n            [BeaconEvent.BROADCAST_REQUEST_SUCCESS]: [defaultEventCallbacks.BROADCAST_REQUEST_SUCCESS],\r\n            [BeaconEvent.BROADCAST_REQUEST_ERROR]: [defaultEventCallbacks.BROADCAST_REQUEST_ERROR],\r\n            [BeaconEvent.LOCAL_RATE_LIMIT_REACHED]: [defaultEventCallbacks.LOCAL_RATE_LIMIT_REACHED],\r\n            [BeaconEvent.NO_PERMISSIONS]: [defaultEventCallbacks.NO_PERMISSIONS],\r\n            [BeaconEvent.ACTIVE_ACCOUNT_SET]: [defaultEventCallbacks.ACTIVE_ACCOUNT_SET],\r\n            [BeaconEvent.ACTIVE_TRANSPORT_SET]: [defaultEventCallbacks.ACTIVE_TRANSPORT_SET],\r\n            [BeaconEvent.P2P_CHANNEL_CONNECT_SUCCESS]: [defaultEventCallbacks.P2P_CHANNEL_CONNECT_SUCCESS],\r\n            [BeaconEvent.P2P_LISTEN_FOR_CHANNEL_OPEN]: [defaultEventCallbacks.P2P_LISTEN_FOR_CHANNEL_OPEN],\r\n            [BeaconEvent.P2P_CHANNEL_CLOSED]: [defaultEventCallbacks.P2P_CHANNEL_CLOSED],\r\n            [BeaconEvent.INTERNAL_ERROR]: [defaultEventCallbacks.INTERNAL_ERROR],\r\n            [BeaconEvent.UNKNOWN]: [defaultEventCallbacks.UNKNOWN]\r\n        };\r\n        this.overrideDefaults(eventsToOverride).catch((overrideError) => {\r\n            logger.error('constructor', overrideError);\r\n        });\r\n    }\r\n    /**\r\n     * A method to subscribe to a specific beacon event and register a callback\r\n     *\r\n     * @param event The event being emitted\r\n     * @param eventCallback The callback that will be invoked\r\n     */\r\n    on(event, eventCallback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const listeners = this.callbackMap[event] || [];\r\n            listeners.push(eventCallback);\r\n            this.callbackMap[event] = listeners;\r\n        });\r\n    }\r\n    /**\r\n     * Emit a beacon event\r\n     *\r\n     * @param event The event being emitted\r\n     * @param data The data to be emit\r\n     */\r\n    emit(event, data, eventCallback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const listeners = this.callbackMap[event];\r\n            if (listeners && listeners.length > 0) {\r\n                listeners.forEach((listener) => __awaiter(this, void 0, void 0, function* () {\r\n                    try {\r\n                        yield listener(data, eventCallback);\r\n                    }\r\n                    catch (listenerError) {\r\n                        logger.error(`error handling event ${event}`, listenerError);\r\n                    }\r\n                }));\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Override beacon event default callbacks. This can be used to disable default alert/toast behaviour\r\n     *\r\n     * @param eventsToOverride An object with the events to override\r\n     */\r\n    overrideDefaults(eventsToOverride) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            Object.keys(eventsToOverride).forEach((untypedEvent) => {\r\n                const eventType = untypedEvent;\r\n                const event = eventsToOverride[eventType];\r\n                if (event) {\r\n                    this.callbackMap[eventType] = [event.handler];\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=events.js.map","import { P2PCommunicationClient } from './transports/clients/P2PCommunicationClient';\r\nimport { BeaconMessageType } from './types/beacon/BeaconMessageType';\r\nimport { PermissionScope } from './types/beacon/PermissionScope';\r\nimport { NetworkType } from './types/beacon/NetworkType';\r\nimport { TezosOperationType } from './types/tezos/OperationTypes';\r\nimport { Origin } from './types/Origin';\r\nimport { ExtensionMessageTarget } from './types/ExtensionMessageTarget';\r\nimport { Client } from './clients/client/Client';\r\nimport { WalletClient } from './clients/wallet-client/WalletClient';\r\nimport { DAppClient } from './clients/dapp-client/DAppClient';\r\nimport { BeaconError } from './errors/BeaconError';\r\nimport { BeaconErrorType } from './types/BeaconErrorType';\r\nimport { BroadcastBeaconError } from './errors/BroadcastBeaconError';\r\nimport { NetworkNotSupportedBeaconError } from './errors/NetworkNotSupportedBeaconError';\r\nimport { NoAddressBeaconError } from './errors/NoAddressBeaconError';\r\nimport { NoPrivateKeyBeaconError } from './errors/NoPrivateKeyBeaconError';\r\nimport { NotGrantedBeaconError } from './errors/NotGrantedBeaconError';\r\nimport { ParametersInvalidBeaconError } from './errors/ParametersInvalidBeaconError';\r\nimport { TooManyOperationsBeaconError } from './errors/TooManyOperationsBeaconError';\r\nimport { TransactionInvalidBeaconError } from './errors/TransactionInvalidBeaconError';\r\nimport { UnknownBeaconError } from './errors/UnknownBeaconError';\r\nimport { TransportStatus } from './types/transport/TransportStatus';\r\nimport { TransportType } from './types/transport/TransportType';\r\nimport { PostMessageTransport } from './transports/PostMessageTransport';\r\nimport { Transport } from './transports/Transport';\r\nimport { P2PTransport } from './transports/P2PTransport';\r\nimport { ChromeMessageTransport } from './transports/ChromeMessageTransport';\r\nimport { Storage } from './storage/Storage';\r\nimport { StorageKey } from './types/storage/StorageKey';\r\nimport { ChromeStorage } from './storage/ChromeStorage';\r\nimport { LocalStorage } from './storage/LocalStorage';\r\nimport { getStorage } from './storage/getStorage';\r\nimport { Serializer } from './Serializer';\r\nimport { SDK_VERSION, BEACON_VERSION } from './constants';\r\nimport { AccountManager } from './managers/AccountManager';\r\nimport { AppMetadataManager } from './managers/AppMetadataManager';\r\nimport { PermissionManager } from './managers/PermissionManager';\r\nimport { BeaconEvent, BeaconEventHandler, defaultEventCallbacks } from './events';\r\nimport { getAddressFromPublicKey } from './utils/crypto';\r\nimport { BeaconClient } from './clients/beacon-client/BeaconClient';\r\nimport { getAccountIdentifier } from './utils/get-account-identifier';\r\nimport { AbortedBeaconError } from './errors/AbortedBeaconError';\r\nimport { availableTransports } from './utils/available-transports';\r\n// Tezos\r\nexport { TezosOperationType };\r\n// Clients\r\nexport { BeaconClient, Client, DAppClient, WalletClient, P2PCommunicationClient };\r\n// Beacon\r\nexport { NetworkType, BeaconMessageType, PermissionScope, Origin, ExtensionMessageTarget };\r\n// Errors\r\nexport { BeaconError, BeaconErrorType, AbortedBeaconError, BroadcastBeaconError, NetworkNotSupportedBeaconError, NoAddressBeaconError, NoPrivateKeyBeaconError, NotGrantedBeaconError, ParametersInvalidBeaconError, TooManyOperationsBeaconError, TransactionInvalidBeaconError, UnknownBeaconError };\r\n// Transport\r\nexport { TransportStatus, TransportType, Transport, PostMessageTransport, P2PTransport, ChromeMessageTransport };\r\n// Events\r\nexport { BeaconEvent, BeaconEventHandler, defaultEventCallbacks };\r\n// Storage\r\nexport { Storage, StorageKey, ChromeStorage, LocalStorage, getStorage };\r\n// Managers\r\nexport { AccountManager, AppMetadataManager, PermissionManager };\r\n// Constants\r\nexport { SDK_VERSION, BEACON_VERSION };\r\n// Utils\r\nexport { getAccountIdentifier, getAddressFromPublicKey };\r\n// Others\r\nexport { Serializer, availableTransports };\r\n//# sourceMappingURL=index.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { BeaconMessageType } from '..';\r\n/**\r\n * The IncomingRequestInterceptor is used in the WalletClient to intercept an incoming request and enrich it with data, like app metadata.\r\n */\r\nexport class IncomingRequestInterceptor {\r\n    /**\r\n     * The method that is called during the interception\r\n     *\r\n     * @param config\r\n     */\r\n    static intercept(config) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const { message, connectionInfo, appMetadataManager, interceptorCallback } = config;\r\n            // TODO: Remove v1 compatibility in later version\r\n            if (message.beaconId && !message.senderId) {\r\n                message.senderId = message.beaconId;\r\n                delete message.beaconId;\r\n            }\r\n            switch (message.type) {\r\n                case BeaconMessageType.PermissionRequest:\r\n                    {\r\n                        // TODO: Remove v1 compatibility in later version\r\n                        if (message.appMetadata.beaconId && !message.appMetadata.senderId) {\r\n                            message.appMetadata.senderId = message.appMetadata.beaconId;\r\n                            delete message.appMetadata.beaconId;\r\n                        }\r\n                        yield appMetadataManager.addAppMetadata(message.appMetadata);\r\n                        const request = message;\r\n                        interceptorCallback(request, connectionInfo);\r\n                    }\r\n                    break;\r\n                case BeaconMessageType.OperationRequest:\r\n                    {\r\n                        const appMetadata = yield IncomingRequestInterceptor.getAppMetadata(appMetadataManager, message.senderId);\r\n                        const request = Object.assign({ appMetadata }, message);\r\n                        interceptorCallback(request, connectionInfo);\r\n                    }\r\n                    break;\r\n                case BeaconMessageType.SignPayloadRequest:\r\n                    {\r\n                        const appMetadata = yield IncomingRequestInterceptor.getAppMetadata(appMetadataManager, message.senderId);\r\n                        const request = Object.assign({ appMetadata }, message);\r\n                        interceptorCallback(request, connectionInfo);\r\n                    }\r\n                    break;\r\n                case BeaconMessageType.BroadcastRequest:\r\n                    {\r\n                        const appMetadata = yield IncomingRequestInterceptor.getAppMetadata(appMetadataManager, message.senderId);\r\n                        const request = Object.assign({ appMetadata }, message);\r\n                        interceptorCallback(request, connectionInfo);\r\n                    }\r\n                    break;\r\n                default:\r\n                    console.log('Message not handled');\r\n            }\r\n        });\r\n    }\r\n    static getAppMetadata(appMetadataManager, senderId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const appMetadata = yield appMetadataManager.getAppMetadata(senderId);\r\n            if (!appMetadata) {\r\n                throw new Error('AppMetadata not found');\r\n            }\r\n            return appMetadata;\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=IncomingRequestInterceptor.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { BeaconMessageType } from '..';\r\nimport { BEACON_VERSION } from '../constants';\r\nimport { getAddressFromPublicKey } from '../utils/crypto';\r\nimport { getAccountIdentifier } from '../utils/get-account-identifier';\r\n/**\r\n * The OutgoingResponseInterceptor is used in the WalletClient to intercept an outgoing response and enrich it with data.\r\n */\r\nexport class OutgoingResponseInterceptor {\r\n    static intercept(config) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const { senderId, request, message, permissionManager, appMetadataManager, interceptorCallback } = config;\r\n            // TODO: Remove v1 compatibility in later version\r\n            const interceptorCallbackWrapper = (msg) => {\r\n                const untypedMessage = msg;\r\n                untypedMessage.beaconId = msg.senderId;\r\n                interceptorCallback(msg);\r\n            };\r\n            switch (message.type) {\r\n                case BeaconMessageType.Error: {\r\n                    const response = {\r\n                        type: message.type,\r\n                        version: BEACON_VERSION,\r\n                        senderId,\r\n                        id: message.id,\r\n                        errorType: message.errorType\r\n                    };\r\n                    interceptorCallbackWrapper(response);\r\n                    break;\r\n                }\r\n                case BeaconMessageType.PermissionResponse: {\r\n                    const response = Object.assign({ senderId, version: BEACON_VERSION }, message);\r\n                    // TODO: Migration code. Remove sometime after 1.0.0 release.\r\n                    const publicKey = response.publicKey || response.pubkey || response.pubKey;\r\n                    const address = yield getAddressFromPublicKey(publicKey);\r\n                    const appMetadata = yield appMetadataManager.getAppMetadata(request.senderId);\r\n                    if (!appMetadata) {\r\n                        throw new Error('AppMetadata not found');\r\n                    }\r\n                    const permission = {\r\n                        accountIdentifier: yield getAccountIdentifier(address, response.network),\r\n                        senderId: request.senderId,\r\n                        appMetadata,\r\n                        website: '',\r\n                        address,\r\n                        publicKey,\r\n                        network: response.network,\r\n                        scopes: response.scopes,\r\n                        connectedAt: new Date().getTime()\r\n                    };\r\n                    permissionManager.addPermission(permission).catch(console.error);\r\n                    interceptorCallbackWrapper(response);\r\n                    break;\r\n                }\r\n                case BeaconMessageType.OperationResponse:\r\n                    {\r\n                        const response = Object.assign({ senderId, version: BEACON_VERSION }, message);\r\n                        interceptorCallbackWrapper(response);\r\n                    }\r\n                    break;\r\n                case BeaconMessageType.SignPayloadResponse:\r\n                    {\r\n                        const response = Object.assign({ senderId, version: BEACON_VERSION }, message);\r\n                        interceptorCallbackWrapper(response);\r\n                    }\r\n                    break;\r\n                case BeaconMessageType.BroadcastResponse:\r\n                    {\r\n                        const response = Object.assign({ senderId, version: BEACON_VERSION }, message);\r\n                        interceptorCallbackWrapper(response);\r\n                    }\r\n                    break;\r\n                default:\r\n                    console.log('Message not handled');\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=OutgoingResponseInterceptor.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { StorageKey } from '..';\r\nimport { StorageManager } from './StorageManager';\r\nimport { PermissionValidator } from './PermissionValidator';\r\n/**\r\n * The AccountManager provides CRUD functionality for account entities and persists them to the provided storage.\r\n */\r\nexport class AccountManager {\r\n    constructor(storage) {\r\n        this.storageManager = new StorageManager(storage, StorageKey.ACCOUNTS);\r\n    }\r\n    getAccounts() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.getAll();\r\n        });\r\n    }\r\n    getAccount(accountIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.getOne((account) => account.accountIdentifier === accountIdentifier);\r\n        });\r\n    }\r\n    addAccount(accountInfo) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.addOne(accountInfo, (account) => account.accountIdentifier === accountInfo.accountIdentifier);\r\n        });\r\n    }\r\n    removeAccount(accountIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.remove((account) => account.accountIdentifier === accountIdentifier);\r\n        });\r\n    }\r\n    removeAccounts(accountIdentifiers) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.remove((account) => accountIdentifiers.includes(account.accountIdentifier));\r\n        });\r\n    }\r\n    removeAllAccounts() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.removeAll();\r\n        });\r\n    }\r\n    hasPermission(message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return PermissionValidator.hasPermission(message, this.getAccount.bind(this), this.getAccounts.bind(this));\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=AccountManager.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { StorageKey } from '..';\r\nimport { StorageManager } from './StorageManager';\r\n/**\r\n * The AppMetadataManager provides CRUD functionality for app-metadata entities and persists them to the provided storage.\r\n */\r\nexport class AppMetadataManager {\r\n    constructor(storage) {\r\n        this.storageManager = new StorageManager(storage, StorageKey.APP_METADATA_LIST);\r\n    }\r\n    getAppMetadataList() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.getAll();\r\n        });\r\n    }\r\n    getAppMetadata(senderId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.getOne((appMetadata) => appMetadata.senderId === senderId);\r\n        });\r\n    }\r\n    addAppMetadata(appMetadata) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.addOne(appMetadata, (appMetadataElement) => appMetadataElement.senderId === appMetadata.senderId);\r\n        });\r\n    }\r\n    removeAppMetadata(senderId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.remove((appMetadata) => appMetadata.senderId === senderId);\r\n        });\r\n    }\r\n    removeAppMetadatas(senderIds) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.remove((appMetadata) => senderIds.includes(appMetadata.senderId));\r\n        });\r\n    }\r\n    removeAllAppMetadata() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.removeAll();\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=AppMetadataManager.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { StorageManager } from './StorageManager';\r\n/**\r\n * The PeerManager provides CRUD functionality for peer entities and persists them to the provided storage.\r\n */\r\nexport class PeerManager {\r\n    constructor(storage, key) {\r\n        this.storageManager = new StorageManager(storage, key);\r\n    }\r\n    hasPeer(publicKey) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return (yield this.getPeer(publicKey)) ? true : false;\r\n        });\r\n    }\r\n    getPeers() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.getAll();\r\n        });\r\n    }\r\n    getPeer(publicKey) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.getOne((peer) => peer.publicKey === publicKey);\r\n        });\r\n    }\r\n    addPeer(peerInfo) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.addOne(peerInfo, (peer) => peer.publicKey === peerInfo.publicKey);\r\n        });\r\n    }\r\n    removePeer(publicKey) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.remove((peer) => peer.publicKey === publicKey);\r\n        });\r\n    }\r\n    removePeers(publicKeys) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.remove((peer) => publicKeys.includes(peer.publicKey));\r\n        });\r\n    }\r\n    removeAllPeers() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.removeAll();\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=PeerManager.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { StorageKey } from '..';\r\nimport { StorageManager } from './StorageManager';\r\nimport { PermissionValidator } from './PermissionValidator';\r\n/**\r\n * The PermissionManager provides CRUD functionality for permission entities and persists them to the provided storage.\r\n */\r\nexport class PermissionManager {\r\n    constructor(storage) {\r\n        this.storageManager = new StorageManager(storage, StorageKey.PERMISSION_LIST);\r\n    }\r\n    getPermissions() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.getAll();\r\n        });\r\n    }\r\n    getPermission(accountIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.getOne((permission) => permission.accountIdentifier === accountIdentifier);\r\n        });\r\n    }\r\n    addPermission(permissionInfo) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.addOne(permissionInfo, (permission) => permission.accountIdentifier === permissionInfo.accountIdentifier);\r\n        });\r\n    }\r\n    removePermission(accountIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.remove((permissionInfo) => permissionInfo.accountIdentifier === accountIdentifier);\r\n        });\r\n    }\r\n    removePermissions(accountIdentifiers) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.remove((permission) => accountIdentifiers.includes(permission.accountIdentifier));\r\n        });\r\n    }\r\n    removeAllPermissions() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storageManager.removeAll();\r\n        });\r\n    }\r\n    hasPermission(message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return PermissionValidator.hasPermission(message, this.getPermission.bind(this), this.getPermissions.bind(this));\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=PermissionManager.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { BeaconMessageType, PermissionScope } from '..';\r\nimport { getAccountIdentifier } from '../utils/get-account-identifier';\r\n/**\r\n * The PermissionValidator is used to check if permissions for a certain message type have been given\r\n */\r\nexport class PermissionValidator {\r\n    /**\r\n     * Check if permissions were given for a certain message type.\r\n     *\r\n     * PermissionRequest and BroadcastRequest will always return true.\r\n     *\r\n     * @param message Beacon Message\r\n     */\r\n    static hasPermission(message, getOne, getAll) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            switch (message.type) {\r\n                case BeaconMessageType.PermissionRequest:\r\n                case BeaconMessageType.BroadcastRequest: {\r\n                    return true;\r\n                }\r\n                case BeaconMessageType.OperationRequest: {\r\n                    const accountIdentifier = yield getAccountIdentifier(message.sourceAddress, message.network);\r\n                    const permission = yield getOne(accountIdentifier);\r\n                    if (!permission) {\r\n                        return false;\r\n                    }\r\n                    return permission.scopes.includes(PermissionScope.OPERATION_REQUEST);\r\n                }\r\n                case BeaconMessageType.SignPayloadRequest: {\r\n                    const permissions = yield getAll();\r\n                    const filteredPermissions = permissions.filter((permission) => permission.address === message.sourceAddress);\r\n                    if (filteredPermissions.length === 0) {\r\n                        return false;\r\n                    }\r\n                    return filteredPermissions.some((permission) => permission.scopes.includes(PermissionScope.SIGN));\r\n                }\r\n                default:\r\n                    throw new Error('Message not handled');\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=PermissionValidator.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n/* eslint-disable prefer-arrow/prefer-arrow-functions */\r\nfunction fixArrayType(array) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return array;\r\n}\r\n/* eslint-enable prefer-arrow/prefer-arrow-functions */\r\n/**\r\n * The StorageManager provides CRUD functionality for specific entities and persists them to the provided storage.\r\n */\r\nexport class StorageManager {\r\n    constructor(storage, storageKey) {\r\n        this.storage = storage;\r\n        this.storageKey = storageKey;\r\n    }\r\n    getAll() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storage.get(this.storageKey);\r\n        });\r\n    }\r\n    getOne(predicate) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const entities = yield this.storage.get(this.storageKey);\r\n            return fixArrayType(entities).find(predicate);\r\n        });\r\n    }\r\n    addOne(element, predicate, overwrite = true) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const entities = yield this.storage.get(this.storageKey);\r\n            if (!fixArrayType(entities).some(predicate)) {\r\n                fixArrayType(entities).push(element);\r\n            }\r\n            else if (overwrite) {\r\n                for (let i = 0; i < entities.length; i++) {\r\n                    if (predicate(fixArrayType(entities)[i])) {\r\n                        entities[i] = element;\r\n                    }\r\n                }\r\n            }\r\n            return this.storage.set(this.storageKey, entities);\r\n        });\r\n    }\r\n    remove(predicate) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const entities = yield this.storage.get(this.storageKey);\r\n            const filteredEntities = fixArrayType(entities).filter((entity) => !predicate(entity));\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            return this.storage.set(this.storageKey, filteredEntities);\r\n        });\r\n    }\r\n    removeAll() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.storage.delete(this.storageKey);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=StorageManager.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { MatrixClientStore } from './MatrixClientStore';\r\nimport { MatrixHttpClient } from './MatrixHttpClient';\r\nimport { MatrixRoom, MatrixRoomStatus } from './models/MatrixRoom';\r\nimport { MatrixRoomService } from './services/MatrixRoomService';\r\nimport { MatrixUserService } from './services/MatrixUserService';\r\nimport { MatrixEventService } from './services/MatrixEventService';\r\nimport { MatrixClientEventEmitter } from './MatrixClientEventEmitter';\r\nconst MAX_POLLING_RETRIES = 3;\r\n/**\r\n * The matrix client used to connect to the matrix network\r\n */\r\nexport class MatrixClient {\r\n    constructor(store, eventEmitter, userService, roomService, eventService) {\r\n        this.store = store;\r\n        this.eventEmitter = eventEmitter;\r\n        this.userService = userService;\r\n        this.roomService = roomService;\r\n        this.eventService = eventService;\r\n        this.store.onStateChanged((oldState, newState, stateChange) => {\r\n            this.eventEmitter.onStateChanged(oldState, newState, stateChange);\r\n        }, 'rooms');\r\n    }\r\n    /**\r\n     * Create a matrix client based on the options provided\r\n     *\r\n     * @param config\r\n     */\r\n    static create(config) {\r\n        const store = new MatrixClientStore(config.storage);\r\n        const eventEmitter = new MatrixClientEventEmitter();\r\n        const httpClient = new MatrixHttpClient(config.baseUrl);\r\n        const accountService = new MatrixUserService(httpClient);\r\n        const roomService = new MatrixRoomService(httpClient);\r\n        const eventService = new MatrixEventService(httpClient);\r\n        return new MatrixClient(store, eventEmitter, accountService, roomService, eventService);\r\n    }\r\n    /**\r\n     * Return all the rooms we are currently part of\r\n     */\r\n    get joinedRooms() {\r\n        return Object.values(this.store.get('rooms')).filter((room) => room.status === MatrixRoomStatus.JOINED);\r\n    }\r\n    /**\r\n     * Return all the rooms to which we have received invitations\r\n     */\r\n    get invitedRooms() {\r\n        return Object.values(this.store.get('rooms')).filter((room) => room.status === MatrixRoomStatus.INVITED);\r\n    }\r\n    /**\r\n     * Return all the rooms that we left\r\n     */\r\n    get leftRooms() {\r\n        return Object.values(this.store.get('rooms')).filter((room) => room.status === MatrixRoomStatus.LEFT);\r\n    }\r\n    /**\r\n     * Initiate the connection to the matrix node and log in\r\n     *\r\n     * @param user\r\n     */\r\n    start(user) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const response = yield this.userService.login(user.id, user.password, user.deviceId);\r\n            yield this.store.update({\r\n                accessToken: response.access_token\r\n            });\r\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\r\n                yield this.poll(0, (pollingResponse) => __awaiter(this, void 0, void 0, function* () {\r\n                    if (!this.store.get('isRunning')) {\r\n                        resolve();\r\n                    }\r\n                    yield this.store.update({\r\n                        isRunning: true,\r\n                        syncToken: pollingResponse.next_batch,\r\n                        pollingTimeout: 30000,\r\n                        pollingRetries: 0,\r\n                        rooms: MatrixRoom.fromSync(pollingResponse.rooms)\r\n                    });\r\n                }), (error) => __awaiter(this, void 0, void 0, function* () {\r\n                    if (!this.store.get('isRunning')) {\r\n                        reject(error);\r\n                    }\r\n                    yield this.store.update({\r\n                        isRunning: false,\r\n                        pollingRetries: this.store.get('pollingRetries') + 1\r\n                    });\r\n                }));\r\n            }));\r\n        });\r\n    }\r\n    /**\r\n     * Subscribe to new matrix events\r\n     *\r\n     * @param event\r\n     * @param listener\r\n     */\r\n    subscribe(event, listener) {\r\n        this.eventEmitter.on(event, listener);\r\n    }\r\n    /**\r\n     * Unsubscribe from matrix events\r\n     *\r\n     * @param event\r\n     * @param listener\r\n     */\r\n    unsubscribe(event, listener) {\r\n        if (listener) {\r\n            this.eventEmitter.removeListener(event, listener);\r\n        }\r\n        else {\r\n            this.eventEmitter.removeAllListeners(event);\r\n        }\r\n    }\r\n    getRoomById(id) {\r\n        return this.store.getRoom(id);\r\n    }\r\n    /**\r\n     * Create a private room with the supplied members\r\n     *\r\n     * @param members Members that will be in the room\r\n     */\r\n    createTrustedPrivateRoom(...members) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.requiresAuthorization('createRoom', (accessToken) => __awaiter(this, void 0, void 0, function* () {\r\n                const response = yield this.roomService.createRoom(accessToken, {\r\n                    invite: members,\r\n                    preset: 'trusted_private_chat',\r\n                    is_direct: true\r\n                });\r\n                return response.room_id;\r\n            }));\r\n        });\r\n    }\r\n    /**\r\n     * Invite user to rooms\r\n     *\r\n     * @param user The user to be invited\r\n     * @param roomsOrIds The rooms the user will be invited to\r\n     */\r\n    inviteToRooms(user, ...roomsOrIds) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.requiresAuthorization('invite', (accessToken) => Promise.all(roomsOrIds.map((roomOrId) => {\r\n                const room = this.store.getRoom(roomOrId);\r\n                this.roomService\r\n                    .inviteToRoom(accessToken, user, room)\r\n                    .catch((error) => console.warn(error));\r\n            })));\r\n        });\r\n    }\r\n    /**\r\n     * Join rooms\r\n     *\r\n     * @param roomsOrIds\r\n     */\r\n    joinRooms(...roomsOrIds) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.requiresAuthorization('join', (accessToken) => Promise.all(roomsOrIds.map((roomOrId) => {\r\n                const room = this.store.getRoom(roomOrId);\r\n                return this.roomService.joinRoom(accessToken, room).catch((error) => console.warn(error));\r\n            })));\r\n        });\r\n    }\r\n    /**\r\n     * Send a text message\r\n     *\r\n     * @param roomOrId\r\n     * @param message\r\n     */\r\n    sendTextMessage(roomOrId, message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                yield this.requiresAuthorization('send', (accessToken) => __awaiter(this, void 0, void 0, function* () {\r\n                    const room = this.store.getRoom(roomOrId);\r\n                    const txnId = yield this.createTxnId();\r\n                    return this.eventService.sendMessage(accessToken, room, {\r\n                        msgtype: 'm.text',\r\n                        body: message\r\n                    }, txnId);\r\n                }));\r\n            }\r\n            catch (error) {\r\n                console.error(error);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Poll the server to get the latest data and get notified of changes\r\n     *\r\n     * @param interval\r\n     * @param onSyncSuccess\r\n     * @param onSyncError\r\n     */\r\n    poll(interval, onSyncSuccess, onSyncError) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const store = this.store;\r\n            const sync = this.sync.bind(this);\r\n            const pollSync = (resolve, reject) => __awaiter(this, void 0, void 0, function* () {\r\n                let continueSyncing = false;\r\n                try {\r\n                    const response = yield sync();\r\n                    onSyncSuccess(response);\r\n                    continueSyncing = true;\r\n                }\r\n                catch (error) {\r\n                    onSyncError(error);\r\n                    continueSyncing = store.get('pollingRetries') < MAX_POLLING_RETRIES;\r\n                    // console.warn('Could not sync:', error)\r\n                    if (continueSyncing) {\r\n                        console.log('Retry syncing...');\r\n                    }\r\n                }\r\n                finally {\r\n                    if (continueSyncing) {\r\n                        setTimeout(() => __awaiter(this, void 0, void 0, function* () {\r\n                            yield pollSync(resolve, reject);\r\n                        }), interval);\r\n                    }\r\n                    else {\r\n                        reject(new Error(`Max polling retries exeeded: ${MAX_POLLING_RETRIES}`));\r\n                    }\r\n                }\r\n            });\r\n            return new Promise(pollSync);\r\n        });\r\n    }\r\n    /**\r\n     * Get state from server\r\n     */\r\n    sync() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.requiresAuthorization('sync', (accessToken) => __awaiter(this, void 0, void 0, function* () {\r\n                return this.eventService.sync(accessToken, {\r\n                    pollingTimeout: this.store.get('pollingTimeout'),\r\n                    syncToken: this.store.get('syncToken')\r\n                });\r\n            }));\r\n        });\r\n    }\r\n    /**\r\n     * A helper method that makes sure an access token is provided\r\n     *\r\n     * @param name\r\n     * @param action\r\n     */\r\n    requiresAuthorization(name, action) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const storedToken = this.store.get('accessToken');\r\n            if (!storedToken) {\r\n                return Promise.reject(`${name} requires authorization but no access token has been provided.`);\r\n            }\r\n            return action(storedToken);\r\n        });\r\n    }\r\n    /**\r\n     * Create a transaction ID\r\n     */\r\n    createTxnId() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const timestamp = new Date().getTime();\r\n            const counter = this.store.get('txnNo');\r\n            yield this.store.update({\r\n                txnNo: counter + 1\r\n            });\r\n            return `m${timestamp}.${counter}`;\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=MatrixClient.js.map","import { EventEmitter } from 'events';\r\nimport { keys } from '../utils/utils';\r\nimport { MatrixRoomStatus } from './models/MatrixRoom';\r\nimport { MatrixClientEventType } from './models/MatrixClientEvent';\r\nexport class MatrixClientEventEmitter extends EventEmitter {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.eventEmitProviders = new Map([\r\n            [MatrixClientEventType.INVITE, () => [this.isInvite, this.emitInvite.bind(this)]],\r\n            [MatrixClientEventType.MESSAGE, () => [this.isMessage, this.emitMessage.bind(this)]]\r\n        ]);\r\n    }\r\n    /**\r\n     * This method is called every time the state is changed\r\n     *\r\n     * @param _oldState\r\n     * @param _newState\r\n     * @param stateChange\r\n     */\r\n    onStateChanged(_oldState, _newState, stateChange) {\r\n        for (const event of keys(MatrixClientEventType)) {\r\n            this.emitIfEvent(MatrixClientEventType[event], stateChange);\r\n        }\r\n    }\r\n    /**\r\n     * Emit the message if we have listeners registered for that type\r\n     *\r\n     * @param eventType\r\n     * @param object\r\n     */\r\n    emitIfEvent(eventType, object) {\r\n        const provider = this.eventEmitProviders.get(eventType);\r\n        if (provider) {\r\n            const [predicate, emitter] = provider();\r\n            if (predicate(object)) {\r\n                emitter(eventType, object);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Emit a client event\r\n     *\r\n     * @param eventType\r\n     * @param content\r\n     */\r\n    emitClientEvent(eventType, content) {\r\n        this.emit(eventType, {\r\n            type: eventType,\r\n            content\r\n        });\r\n    }\r\n    /**\r\n     * Check if event is an invite\r\n     *\r\n     * @param stateChange\r\n     */\r\n    isInvite(stateChange) {\r\n        return stateChange.rooms\r\n            ? stateChange.rooms.some((room) => room.status === MatrixRoomStatus.INVITED)\r\n            : false;\r\n    }\r\n    /**\r\n     * Emit an invite\r\n     *\r\n     * @param eventType\r\n     * @param stateChange\r\n     */\r\n    emitInvite(eventType, stateChange) {\r\n        stateChange.rooms\r\n            .filter((room) => room.status === MatrixRoomStatus.INVITED)\r\n            .map((room) => room.id)\r\n            .forEach((id) => {\r\n            this.emitClientEvent(eventType, {\r\n                roomId: id\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Check if event is a message\r\n     *\r\n     * @param stateChange\r\n     */\r\n    isMessage(stateChange) {\r\n        return stateChange.rooms ? stateChange.rooms.some((room) => room.messages.length > 0) : false;\r\n    }\r\n    /**\r\n     * Emit an event to all rooms\r\n     *\r\n     * @param eventType\r\n     * @param stateChange\r\n     */\r\n    emitMessage(eventType, stateChange) {\r\n        stateChange.rooms\r\n            .filter((room) => room.messages.length > 0)\r\n            .map((room) => room.messages.map((message) => [room.id, message]))\r\n            .reduce((flatten, toFlatten) => flatten.concat(toFlatten), [])\r\n            .forEach(([roomId, message]) => {\r\n            this.emitClientEvent(eventType, {\r\n                roomId,\r\n                message\r\n            });\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=MatrixClientEventEmitter.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { keys } from '../utils/utils';\r\nimport { MatrixRoom, MatrixRoomStatus } from './models/MatrixRoom';\r\nimport { StorageKey } from '..';\r\nconst PRESERVED_FIELDS = ['syncToken', 'rooms'];\r\n/**\r\n * The class managing the local state of matrix\r\n */\r\nexport class MatrixClientStore {\r\n    constructor(storage) {\r\n        this.storage = storage;\r\n        /**\r\n         * The state of the matrix client\r\n         */\r\n        this.state = {\r\n            isRunning: false,\r\n            userId: undefined,\r\n            deviceId: undefined,\r\n            txnNo: 0,\r\n            accessToken: undefined,\r\n            syncToken: undefined,\r\n            pollingTimeout: undefined,\r\n            pollingRetries: 0,\r\n            rooms: {}\r\n        };\r\n        /**\r\n         * Listeners that will be called when the state changes\r\n         */\r\n        this.onStateChangedListeners = new Map();\r\n        /**\r\n         * A promise that resolves once the client is ready\r\n         */\r\n        this.waitReadyPromise = new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                yield this.initFromStorage();\r\n                resolve();\r\n            }\r\n            catch (error) {\r\n                reject(error);\r\n            }\r\n        }));\r\n    }\r\n    /**\r\n     * Get an item from the state\r\n     *\r\n     * @param key\r\n     */\r\n    get(key) {\r\n        return this.state[key];\r\n    }\r\n    /**\r\n     * Get the room from an ID or room instance\r\n     *\r\n     * @param roomOrId\r\n     */\r\n    getRoom(roomOrId) {\r\n        const room = MatrixRoom.from(roomOrId, MatrixRoomStatus.UNKNOWN);\r\n        return this.state.rooms[room.id] || room;\r\n    }\r\n    /**\r\n     * Update the state with a partial state\r\n     *\r\n     * @param stateUpdate\r\n     */\r\n    update(stateUpdate) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.waitReady();\r\n            const oldState = Object.assign({}, this.state);\r\n            this.setState(stateUpdate);\r\n            this.updateStorage(stateUpdate);\r\n            this.notifyListeners(oldState, this.state, stateUpdate);\r\n        });\r\n    }\r\n    /**\r\n     * Register listeners that are called once the state has changed\r\n     *\r\n     * @param listener\r\n     * @param subscribed\r\n     */\r\n    onStateChanged(listener, ...subscribed) {\r\n        if (subscribed.length > 0) {\r\n            subscribed.forEach((key) => {\r\n                this.onStateChangedListeners.set(key, listener);\r\n            });\r\n        }\r\n        else {\r\n            this.onStateChangedListeners.set('all', listener);\r\n        }\r\n    }\r\n    /**\r\n     * A promise that resolves once the client is ready\r\n     */\r\n    waitReady() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.waitReadyPromise;\r\n        });\r\n    }\r\n    /**\r\n     * Read state from storage\r\n     */\r\n    initFromStorage() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const preserved = yield this.storage.get(StorageKey.MATRIX_PRESERVED_STATE);\r\n            this.setState(preserved);\r\n        });\r\n    }\r\n    /**\r\n     * Prepare data before persisting it in storage\r\n     *\r\n     * @param toStore\r\n     */\r\n    prepareData(toStore) {\r\n        const requiresPreparation = ['rooms'];\r\n        const toStoreCopy = requiresPreparation.some((key) => toStore[key] !== undefined)\r\n            ? JSON.parse(JSON.stringify(toStore))\r\n            : toStore;\r\n        // there is no need for saving messages in a persistent storage\r\n        Object.values(toStoreCopy.rooms || {}).forEach((room) => {\r\n            room.messages = [];\r\n        });\r\n        return toStoreCopy;\r\n    }\r\n    /**\r\n     * Persist state in storage\r\n     *\r\n     * @param stateUpdate\r\n     */\r\n    updateStorage(stateUpdate) {\r\n        const updatedCachedFields = Object.entries(stateUpdate).filter(([key, value]) => PRESERVED_FIELDS.includes(key) && Boolean(value));\r\n        if (updatedCachedFields.length > 0) {\r\n            const filteredState = {};\r\n            PRESERVED_FIELDS.forEach((key) => {\r\n                filteredState[key] = this.state[key];\r\n            });\r\n            this.storage.set(StorageKey.MATRIX_PRESERVED_STATE, this.prepareData(filteredState));\r\n        }\r\n    }\r\n    /**\r\n     * Set the state\r\n     *\r\n     * @param partialState\r\n     */\r\n    setState(partialState) {\r\n        this.state = {\r\n            isRunning: partialState.isRunning || this.state.isRunning,\r\n            userId: partialState.userId || this.state.userId,\r\n            deviceId: partialState.deviceId || this.state.deviceId,\r\n            txnNo: partialState.txnNo || this.state.txnNo,\r\n            accessToken: partialState.accessToken || this.state.accessToken,\r\n            syncToken: partialState.syncToken || this.state.syncToken,\r\n            pollingTimeout: partialState.pollingTimeout || this.state.pollingTimeout,\r\n            pollingRetries: partialState.pollingRetries || this.state.pollingRetries,\r\n            rooms: this.mergeRooms(this.state.rooms, partialState.rooms)\r\n        };\r\n    }\r\n    /**\r\n     * Merge room records and eliminate duplicates\r\n     *\r\n     * @param oldRooms\r\n     * @param _newRooms\r\n     */\r\n    mergeRooms(oldRooms, _newRooms) {\r\n        if (!_newRooms) {\r\n            return oldRooms;\r\n        }\r\n        const newRooms = Array.isArray(_newRooms) ? _newRooms : Object.values(_newRooms);\r\n        const merged = Object.assign({}, oldRooms);\r\n        newRooms.forEach((newRoom) => {\r\n            merged[newRoom.id] = MatrixRoom.merge(newRoom, oldRooms[newRoom.id]);\r\n        });\r\n        return merged;\r\n    }\r\n    /**\r\n     * Notify listeners of state changes\r\n     *\r\n     * @param oldState\r\n     * @param newState\r\n     * @param stateChange\r\n     */\r\n    notifyListeners(oldState, newState, stateChange) {\r\n        const listenForAll = this.onStateChangedListeners.get('all');\r\n        if (listenForAll) {\r\n            listenForAll(oldState, newState, stateChange);\r\n        }\r\n        keys(stateChange)\r\n            .filter((key) => stateChange[key] !== undefined)\r\n            .forEach((key) => {\r\n            const listener = this.onStateChangedListeners.get(key);\r\n            if (listener) {\r\n                listener(oldState, newState, stateChange);\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=MatrixClientStore.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport axios from 'axios';\r\nimport { keys } from '../utils/utils';\r\nconst CLIENT_API_R0 = '/_matrix/client/r0';\r\n/**\r\n * Handling the HTTP connection to the matrix synapse node\r\n */\r\nexport class MatrixHttpClient {\r\n    constructor(baseUrl) {\r\n        this.baseUrl = baseUrl;\r\n    }\r\n    /**\r\n     * Get data from the synapse node\r\n     *\r\n     * @param endpoint\r\n     * @param params\r\n     * @param options\r\n     */\r\n    get(endpoint, params, options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.send('GET', endpoint, options, params);\r\n        });\r\n    }\r\n    /**\r\n     * Post data to the synapse node\r\n     *\r\n     * @param endpoint\r\n     * @param body\r\n     * @param options\r\n     * @param params\r\n     */\r\n    post(endpoint, body, options, params) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.send('POST', endpoint, options, params, body);\r\n        });\r\n    }\r\n    /**\r\n     * Put data to the synapse node\r\n     *\r\n     * @param endpoint\r\n     * @param body\r\n     * @param options\r\n     * @param params\r\n     */\r\n    put(endpoint, body, options, params) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.send('PUT', endpoint, options, params, body);\r\n        });\r\n    }\r\n    /**\r\n     * Send a request to the synapse node\r\n     *\r\n     * @param method\r\n     * @param endpoint\r\n     * @param config\r\n     * @param requestParams\r\n     * @param data\r\n     */\r\n    send(method, endpoint, config, requestParams, data) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const headers = config ? this.getHeaders(config) : undefined;\r\n            const params = requestParams ? this.getParams(requestParams) : undefined;\r\n            const response = yield axios.request({\r\n                method,\r\n                url: endpoint,\r\n                baseURL: this.apiUrl(CLIENT_API_R0),\r\n                headers,\r\n                data,\r\n                params\r\n            });\r\n            return response.data;\r\n        });\r\n    }\r\n    /**\r\n     * Get the headers based on the options object\r\n     *\r\n     * @param options\r\n     */\r\n    getHeaders(options) {\r\n        const headers = {};\r\n        const entries = [];\r\n        if (options.accessToken) {\r\n            entries.push(['Authorization', `Bearer ${options.accessToken}`]);\r\n        }\r\n        if (entries.length === 0) {\r\n            return undefined;\r\n        }\r\n        for (const [key, value] of entries) {\r\n            headers[key] = value;\r\n        }\r\n        return headers;\r\n    }\r\n    /**\r\n     * Get parameters\r\n     *\r\n     * @param _params\r\n     */\r\n    getParams(_params) {\r\n        if (!_params) {\r\n            return undefined;\r\n        }\r\n        const params = Object.assign(_params, {});\r\n        keys(params).forEach((key) => params[key] === undefined && delete params[key]);\r\n        return params;\r\n    }\r\n    /**\r\n     * Construct API URL\r\n     */\r\n    apiUrl(...parts) {\r\n        const apiBase = this.baseUrl.endsWith('/')\r\n            ? this.baseUrl.substr(0, this.baseUrl.length - 1)\r\n            : this.baseUrl;\r\n        const apiParts = parts.map((path) => (path.startsWith('/') ? path.substr(1) : path));\r\n        return [apiBase, ...apiParts].join('/');\r\n    }\r\n}\r\n//# sourceMappingURL=MatrixHttpClient.js.map","export var MatrixClientEventType;\r\n(function (MatrixClientEventType) {\r\n    MatrixClientEventType[\"INVITE\"] = \"invite\";\r\n    MatrixClientEventType[\"MESSAGE\"] = \"message\";\r\n})(MatrixClientEventType || (MatrixClientEventType = {}));\r\n//# sourceMappingURL=MatrixClientEvent.js.map","import { isTextMessageEvent } from '../utils/events';\r\nexport var MatrixMessageType;\r\n(function (MatrixMessageType) {\r\n    MatrixMessageType[\"TEXT\"] = \"m.text\";\r\n})(MatrixMessageType || (MatrixMessageType = {}));\r\nexport class MatrixMessage {\r\n    constructor(type, sender, content) {\r\n        this.type = type;\r\n        this.sender = sender;\r\n        this.content = content;\r\n    }\r\n    /**\r\n     * Construct a message from a message event\r\n     *\r\n     * @param event\r\n     */\r\n    static from(event) {\r\n        if (isTextMessageEvent(event)) {\r\n            return new MatrixMessage(event.content.msgtype, event.sender, event.content.body);\r\n        }\r\n        // for now only text messages are supported\r\n        return undefined;\r\n    }\r\n}\r\n//# sourceMappingURL=MatrixMessage.js.map","import { isCreateEvent, isJoinEvent, isMessageEvent } from '../utils/events';\r\nimport { MatrixMessage } from './MatrixMessage';\r\nexport var MatrixRoomStatus;\r\n(function (MatrixRoomStatus) {\r\n    MatrixRoomStatus[MatrixRoomStatus[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\r\n    MatrixRoomStatus[MatrixRoomStatus[\"JOINED\"] = 1] = \"JOINED\";\r\n    MatrixRoomStatus[MatrixRoomStatus[\"INVITED\"] = 2] = \"INVITED\";\r\n    MatrixRoomStatus[MatrixRoomStatus[\"LEFT\"] = 3] = \"LEFT\";\r\n})(MatrixRoomStatus || (MatrixRoomStatus = {}));\r\nexport class MatrixRoom {\r\n    constructor(id, status = MatrixRoomStatus.UNKNOWN, members = [], messages = []) {\r\n        this.id = id;\r\n        this.status = status;\r\n        this.members = members;\r\n        this.messages = messages;\r\n    }\r\n    /**\r\n     * Reconstruct rooms from a sync response\r\n     *\r\n     * @param roomSync\r\n     */\r\n    static fromSync(roomSync) {\r\n        function create(rooms, creator) {\r\n            return Object.entries(rooms).map(([id, room]) => creator(id, room));\r\n        }\r\n        return [\r\n            ...create(roomSync.join, MatrixRoom.fromJoined),\r\n            ...create(roomSync.invite, MatrixRoom.fromInvited),\r\n            ...create(roomSync.leave, MatrixRoom.fromLeft)\r\n        ];\r\n    }\r\n    /**\r\n     * Reconstruct a room from an ID or object\r\n     *\r\n     * @param roomOrId\r\n     * @param status\r\n     */\r\n    static from(roomOrId, status) {\r\n        return roomOrId instanceof MatrixRoom\r\n            ? status\r\n                ? new MatrixRoom(roomOrId.id, status, roomOrId.members, roomOrId.messages)\r\n                : roomOrId\r\n            : new MatrixRoom(roomOrId, status || MatrixRoomStatus.UNKNOWN);\r\n    }\r\n    /**\r\n     * Merge new and old state and remove duplicates\r\n     *\r\n     * @param newState\r\n     * @param previousState\r\n     */\r\n    static merge(newState, previousState) {\r\n        if (!previousState || previousState.id !== newState.id) {\r\n            return MatrixRoom.from(newState);\r\n        }\r\n        return new MatrixRoom(newState.id, newState.status, [...previousState.members, ...newState.members].filter((member, index, array) => array.indexOf(member) === index), [...previousState.messages, ...newState.messages]);\r\n    }\r\n    /**\r\n     * Create a room from a join\r\n     *\r\n     * @param id\r\n     * @param joined\r\n     */\r\n    static fromJoined(id, joined) {\r\n        const events = [...joined.state.events, ...joined.timeline.events];\r\n        const members = MatrixRoom.getMembersFromEvents(events);\r\n        const messages = MatrixRoom.getMessagesFromEvents(events);\r\n        return new MatrixRoom(id, MatrixRoomStatus.JOINED, members, messages);\r\n    }\r\n    /**\r\n     * Create a room from an invite\r\n     *\r\n     * @param id\r\n     * @param invited\r\n     */\r\n    static fromInvited(id, invited) {\r\n        const members = MatrixRoom.getMembersFromEvents(invited.invite_state.events);\r\n        return new MatrixRoom(id, MatrixRoomStatus.INVITED, members);\r\n    }\r\n    /**\r\n     * Create a room from a leave\r\n     *\r\n     * @param id\r\n     * @param left\r\n     */\r\n    static fromLeft(id, left) {\r\n        const events = [...left.state.events, ...left.timeline.events];\r\n        const members = MatrixRoom.getMembersFromEvents(events);\r\n        const messages = MatrixRoom.getMessagesFromEvents(events);\r\n        return new MatrixRoom(id, MatrixRoomStatus.LEFT, members, messages);\r\n    }\r\n    /**\r\n     * Extract members from an event\r\n     *\r\n     * @param events\r\n     */\r\n    static getMembersFromEvents(events) {\r\n        return MatrixRoom.getUniqueEvents(events.filter((event) => isCreateEvent(event) || isJoinEvent(event)))\r\n            .map((event) => event.sender)\r\n            .filter((member, index, array) => array.indexOf(member) === index);\r\n    }\r\n    /**\r\n     * Extract messages from an event\r\n     *\r\n     * @param events\r\n     */\r\n    static getMessagesFromEvents(events) {\r\n        return MatrixRoom.getUniqueEvents(events.filter(isMessageEvent))\r\n            .map((event) => MatrixMessage.from(event))\r\n            .filter(Boolean);\r\n    }\r\n    /**\r\n     * Get unique events and remove duplicates\r\n     *\r\n     * @param events\r\n     */\r\n    static getUniqueEvents(events) {\r\n        const eventIds = {};\r\n        const uniqueEvents = [];\r\n        events.forEach((event, index) => {\r\n            const eventId = event.event_id;\r\n            if (eventId === undefined || !(eventId in eventIds)) {\r\n                if (eventId !== undefined) {\r\n                    eventIds[eventId] = index;\r\n                }\r\n                uniqueEvents.push(event);\r\n            }\r\n        });\r\n        return uniqueEvents;\r\n    }\r\n}\r\n//# sourceMappingURL=MatrixRoom.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { MatrixRoomStatus } from '../models/MatrixRoom';\r\n/**\r\n * A service to help with matrix event management\r\n */\r\nexport class MatrixEventService {\r\n    constructor(httpClient) {\r\n        this.httpClient = httpClient;\r\n        this.cachedPromises = new Map();\r\n    }\r\n    /**\r\n     * Get the latest state from the matrix node\r\n     *\r\n     * @param accessToken\r\n     * @param options\r\n     */\r\n    sync(accessToken, options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.withCache('sync', () => this.httpClient.get('/sync', {\r\n                timeout: options ? options.pollingTimeout : undefined,\r\n                since: options ? options.syncToken : undefined\r\n            }, { accessToken }));\r\n        });\r\n    }\r\n    /**\r\n     * Send a message to a room\r\n     *\r\n     * @param accessToken\r\n     * @param room\r\n     * @param content\r\n     * @param txnId\r\n     */\r\n    sendMessage(accessToken, room, content, txnId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve, reject) => this.scheduleEvent({\r\n                accessToken,\r\n                room,\r\n                type: 'm.room.message',\r\n                content,\r\n                txnId,\r\n                onSuccess: resolve,\r\n                onError: reject\r\n            }));\r\n        });\r\n    }\r\n    /**\r\n     * Schedules an event to be sent to the node\r\n     *\r\n     * @param event\r\n     */\r\n    scheduleEvent(event) {\r\n        // TODO: actual scheduling\r\n        this.sendEvent(event);\r\n    }\r\n    /**\r\n     * Send an event to the matrix node\r\n     *\r\n     * @param scheduledEvent\r\n     */\r\n    sendEvent(scheduledEvent) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const { room, type, txnId, content, accessToken } = scheduledEvent;\r\n            if (room.status !== MatrixRoomStatus.JOINED && room.status !== MatrixRoomStatus.UNKNOWN) {\r\n                return Promise.reject(`User is not a member of room ${room.id}.`);\r\n            }\r\n            try {\r\n                const response = yield this.httpClient.put(`/rooms/${room.id}/send/${type}/${txnId}`, content, { accessToken });\r\n                scheduledEvent.onSuccess(response);\r\n            }\r\n            catch (error) {\r\n                scheduledEvent.onError(error);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Check the cache when interacting with the Matrix node, if there is an already ongoing call for the specified key, return its promise instead of duplicating the call.\r\n     *\r\n     * @param key\r\n     * @param promiseProvider\r\n     */\r\n    withCache(key, promiseProvider) {\r\n        let promise = this.cachedPromises.get(key);\r\n        if (!promise) {\r\n            promise = promiseProvider().finally(() => {\r\n                this.cachedPromises.delete(key);\r\n            });\r\n            this.cachedPromises.set(key, promise);\r\n        }\r\n        return promise;\r\n    }\r\n}\r\n//# sourceMappingURL=MatrixEventService.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { MatrixRoomStatus } from '../models/MatrixRoom';\r\n/**\r\n * A service to help with matrix room management\r\n */\r\nexport class MatrixRoomService {\r\n    constructor(httpClient) {\r\n        this.httpClient = httpClient;\r\n    }\r\n    /**\r\n     * Create a room\r\n     *\r\n     * @param accessToken\r\n     * @param config\r\n     */\r\n    createRoom(accessToken, config = {}) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.httpClient.post('/createRoom', config, { accessToken });\r\n        });\r\n    }\r\n    /**\r\n     * Invite a user to a room\r\n     *\r\n     * @param accessToken\r\n     * @param user\r\n     * @param room\r\n     */\r\n    inviteToRoom(accessToken, user, room) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (room.status !== MatrixRoomStatus.JOINED && room.status !== MatrixRoomStatus.UNKNOWN) {\r\n                return Promise.reject(`User is not a member of room ${room.id}.`);\r\n            }\r\n            return this.httpClient.post(`/rooms/${room.id}/invite`, { user_id: user }, { accessToken });\r\n        });\r\n    }\r\n    /**\r\n     * Join a specific room\r\n     *\r\n     * @param accessToken\r\n     * @param room\r\n     */\r\n    joinRoom(accessToken, room) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (room.status === MatrixRoomStatus.JOINED) {\r\n                return Promise.resolve({ room_id: room.id });\r\n            }\r\n            return this.httpClient.post(`/rooms/${room.id}/join`, {}, { accessToken });\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=MatrixRoomService.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nexport class MatrixUserService {\r\n    constructor(httpClient) {\r\n        this.httpClient = httpClient;\r\n    }\r\n    /**\r\n     * Log in to the matrix node with username and password\r\n     *\r\n     * @param user\r\n     * @param password\r\n     * @param deviceId\r\n     */\r\n    login(user, password, deviceId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.httpClient.post('/login', {\r\n                type: 'm.login.password',\r\n                identifier: {\r\n                    type: 'm.id.user',\r\n                    user\r\n                },\r\n                password,\r\n                device_id: deviceId\r\n            });\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=MatrixUserService.js.map","import { MatrixMessageType } from '../models/MatrixMessage';\r\n/**\r\n * Check if an event is a create event\r\n *\r\n * @param event MatrixStateEvent\r\n */\r\nexport const isCreateEvent = (event) => event.type === 'm.room.create' && event.content instanceof Object && 'creator' in event.content;\r\n/**\r\n * Check if an event is a join event\r\n *\r\n * @param event MatrixStateEvent\r\n */\r\nexport const isJoinEvent = (event) => event.type === 'm.room.member' &&\r\n    event.content instanceof Object &&\r\n    'membership' in event.content &&\r\n    // eslint-disable-next-line dot-notation\r\n    event.content['membership'] === 'join';\r\n/**\r\n * Check if an event is a message event\r\n *\r\n * @param event MatrixStateEvent\r\n */\r\nexport const isMessageEvent = (event) => event.type === 'm.room.message';\r\n/**\r\n * Check if an event is a text message event\r\n *\r\n * @param event MatrixStateEvent\r\n */\r\nexport const isTextMessageEvent = (event) => isMessageEvent(event) &&\r\n    event.content instanceof Object &&\r\n    'msgtype' in event.content &&\r\n    // eslint-disable-next-line dot-notation\r\n    event.content['msgtype'] === MatrixMessageType.TEXT;\r\n//# sourceMappingURL=events.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { defaultValues } from '../types/storage/StorageKeyReturnDefaults';\r\nexport class ChromeStorage {\r\n    static isSupported() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return (typeof window !== 'undefined' &&\r\n                typeof chrome !== 'undefined' &&\r\n                Boolean(chrome) &&\r\n                Boolean(chrome.runtime) &&\r\n                Boolean(chrome.runtime.id));\r\n        });\r\n    }\r\n    get(key) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                chrome.storage.local.get(null, (storageContent) => {\r\n                    if (storageContent[key]) {\r\n                        resolve(storageContent[key]);\r\n                    }\r\n                    else {\r\n                        if (typeof defaultValues[key] === 'object') {\r\n                            resolve(JSON.parse(JSON.stringify(defaultValues[key])));\r\n                        }\r\n                        else {\r\n                            resolve(defaultValues[key]);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n    set(key, value) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                chrome.storage.local.set({ [key]: value }, () => {\r\n                    resolve();\r\n                });\r\n            });\r\n        });\r\n    }\r\n    delete(key) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                chrome.storage.local.set({ [key]: undefined }, () => {\r\n                    resolve();\r\n                });\r\n            });\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=ChromeStorage.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { defaultValues } from '../types/storage/StorageKeyReturnDefaults';\r\nexport class LocalStorage {\r\n    constructor(prefix) {\r\n        this.prefix = prefix;\r\n    }\r\n    static isSupported() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return Promise.resolve(Boolean(typeof window !== 'undefined') && Boolean(window.localStorage));\r\n        });\r\n    }\r\n    get(key) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const value = localStorage.getItem(this.getPrefixedKey(key));\r\n            if (!value) {\r\n                if (typeof defaultValues[key] === 'object') {\r\n                    return JSON.parse(JSON.stringify(defaultValues[key]));\r\n                }\r\n                else {\r\n                    return defaultValues[key];\r\n                }\r\n            }\r\n            else {\r\n                try {\r\n                    return JSON.parse(value);\r\n                }\r\n                catch (jsonParseError) {\r\n                    return value; // TODO: Validate storage\r\n                }\r\n            }\r\n        });\r\n    }\r\n    set(key, value) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (typeof value === 'string') {\r\n                return localStorage.setItem(this.getPrefixedKey(key), value);\r\n            }\r\n            else {\r\n                return localStorage.setItem(this.getPrefixedKey(key), JSON.stringify(value));\r\n            }\r\n        });\r\n    }\r\n    delete(key) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return Promise.resolve(localStorage.removeItem(this.getPrefixedKey(key)));\r\n        });\r\n    }\r\n    getPrefixedKey(key) {\r\n        return this.prefix ? `${this.prefix}-${key}` : key;\r\n    }\r\n}\r\n//# sourceMappingURL=LocalStorage.js.map","/**\r\n * The storage used in the SDK\r\n */\r\nexport class Storage {\r\n    /**\r\n     * Returns a promise that resolves to true if the storage option is available on this platform.\r\n     */\r\n    static isSupported() {\r\n        return Promise.resolve(false);\r\n    }\r\n}\r\n//# sourceMappingURL=Storage.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { Logger } from '../utils/Logger';\r\nimport { ChromeStorage, LocalStorage } from '..';\r\nconst logger = new Logger('STORAGE');\r\n/**\r\n * Get a supported storage on this platform\r\n */\r\nexport const getStorage = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    if (yield ChromeStorage.isSupported()) {\r\n        logger.log('getStorage', 'USING CHROME STORAGE');\r\n        return new ChromeStorage();\r\n    }\r\n    else if (yield LocalStorage.isSupported()) {\r\n        logger.log('getStorage', 'USING LOCAL STORAGE');\r\n        return new LocalStorage();\r\n    }\r\n    else {\r\n        throw new Error('no storage type supported');\r\n    }\r\n});\r\n//# sourceMappingURL=getStorage.js.map","// eslint-disable-next-line spaced-comment\r\n/// <reference types=\"chrome\"/>\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { Logger } from '../utils/Logger';\r\nimport { ExtensionMessageTarget, Transport, TransportType, Origin, StorageKey, Serializer } from '..';\r\nimport { PeerManager } from '../managers/PeerManager';\r\nimport { TransportStatus } from '../types/transport/TransportStatus';\r\nimport { ChromeMessageClient } from './clients/ChromeMessageClient';\r\nconst logger = new Logger('ChromeMessageTransport');\r\nexport class ChromeMessageTransport extends Transport {\r\n    constructor(name, keyPair, storage) {\r\n        super(name);\r\n        this.type = TransportType.CHROME_MESSAGE;\r\n        this.keyPair = keyPair;\r\n        this.client = new ChromeMessageClient(this.name, this.keyPair, false);\r\n        this.peerManager = new PeerManager(storage, StorageKey.TRANSPORT_POSTMESSAGE_PEERS);\r\n        this.init().catch((error) => console.error(error));\r\n        this.connect().catch((error) => console.error(error));\r\n    }\r\n    static isAvailable() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const isAvailable = Boolean(window.chrome && chrome.runtime && chrome.runtime.id);\r\n            return Promise.resolve(isAvailable);\r\n        });\r\n    }\r\n    connect() {\r\n        const _super = Object.create(null, {\r\n            connect: { get: () => super.connect }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('connect');\r\n            this._isConnected = TransportStatus.CONNECTING;\r\n            const knownPeers = yield this.peerManager.getPeers();\r\n            if (knownPeers.length > 0) {\r\n                logger.log('connect', `connecting to ${knownPeers.length} peers`);\r\n                const connectionPromises = knownPeers.map((peer) => __awaiter(this, void 0, void 0, function* () { return this.listen(peer.publicKey); }));\r\n                yield Promise.all(connectionPromises);\r\n            }\r\n            yield _super.connect.call(this);\r\n        });\r\n    }\r\n    send(payload) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const message = {\r\n                target: ExtensionMessageTarget.PAGE,\r\n                payload\r\n            };\r\n            chrome.runtime.sendMessage(message, (data) => {\r\n                logger.log('send', 'got response', data);\r\n            });\r\n        });\r\n    }\r\n    sendToTabs(publicKey, payload) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.client.sendMessage(publicKey, payload);\r\n        });\r\n    }\r\n    getPeers() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.peerManager.getPeers();\r\n        });\r\n    }\r\n    addPeer(newPeer) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!(yield this.peerManager.hasPeer(newPeer.publicKey))) {\r\n                logger.log('addPeer', newPeer);\r\n                yield this.peerManager.addPeer(newPeer);\r\n                yield this.listen(newPeer.publicKey);\r\n            }\r\n            else {\r\n                logger.log('addPeer', 'peer already added, skipping', newPeer);\r\n            }\r\n            yield this.client.sendPairingResponse(newPeer);\r\n        });\r\n    }\r\n    removePeer(peerToBeRemoved) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('removePeer', peerToBeRemoved);\r\n            yield this.peerManager.removePeer(peerToBeRemoved.publicKey);\r\n            if (this.client) {\r\n                yield this.client.unsubscribeFromEncryptedMessage(peerToBeRemoved.publicKey);\r\n            }\r\n        });\r\n    }\r\n    removeAllPeers() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('removeAllPeers');\r\n            yield this.peerManager.removeAllPeers();\r\n            yield this.client.unsubscribeFromEncryptedMessages();\r\n        });\r\n    }\r\n    listen(publicKey) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.client\r\n                .listenForEncryptedMessage(publicKey, (message, sender, sendResponse) => __awaiter(this, void 0, void 0, function* () {\r\n                const connectionContext = {\r\n                    origin: Origin.WEBSITE,\r\n                    id: sender.url ? sender.url : '',\r\n                    extras: { sender, sendResponse }\r\n                };\r\n                this.notifyListeners(message, connectionContext).catch((error) => {\r\n                    throw error;\r\n                });\r\n            }))\r\n                .catch((error) => {\r\n                throw error;\r\n            });\r\n        });\r\n    }\r\n    init() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\r\n                logger.log('init', 'receiving chrome message', message, sender);\r\n                if (message && message.payload && typeof message.payload === 'string') {\r\n                    // Handling PairingRequest and connect peer\r\n                    new Serializer()\r\n                        .deserialize(message.payload)\r\n                        .then((deserialized) => {\r\n                        // TODO: Add check if it's a peer\r\n                        if (deserialized.publicKey) {\r\n                            this.addPeer(deserialized).catch(console.error);\r\n                        }\r\n                        else {\r\n                            // V1 does not support encryption, so we handle the message directly\r\n                            if (deserialized.version === '1') {\r\n                                this.notify(message, sender, sendResponse).catch((error) => {\r\n                                    throw error;\r\n                                });\r\n                            }\r\n                        }\r\n                    })\r\n                        .catch(undefined);\r\n                }\r\n                else if (message && message.payload) {\r\n                    // Most likely an internal, unencrypted message\r\n                    this.notify(message, sender, sendResponse).catch((error) => {\r\n                        throw error;\r\n                    });\r\n                }\r\n                // return true from the event listener to indicate you wish to send a response asynchronously\r\n                // (this will keep the message channel open to the other end until sendResponse is called).\r\n                // return true\r\n            });\r\n        });\r\n    }\r\n    notify(message, sender, sendResponse) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const connectionContext = {\r\n                origin: Origin.WEBSITE,\r\n                id: sender.url ? sender.url : '',\r\n                extras: { sender, sendResponse }\r\n            };\r\n            this.notifyListeners(message, connectionContext).catch((error) => {\r\n                throw error;\r\n            });\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=ChromeMessageTransport.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { Logger } from '../utils/Logger';\r\nimport { StorageKey, TransportStatus, Transport, TransportType, P2PCommunicationClient, Origin } from '..';\r\nimport { BeaconEvent } from '../events';\r\nimport { PeerManager } from '../managers/PeerManager';\r\nconst logger = new Logger('P2PTransport');\r\nexport class P2PTransport extends Transport {\r\n    constructor(name, keyPair, storage, events, matrixNodes, isDapp) {\r\n        super(name);\r\n        this.type = TransportType.P2P;\r\n        this.isDapp = true;\r\n        // Make sure we only listen once\r\n        this.listeningForChannelOpenings = false;\r\n        this.events = events;\r\n        this.isDapp = isDapp;\r\n        this.client = new P2PCommunicationClient(this.name, keyPair, 1, storage, matrixNodes, false);\r\n        this.peerManager = new PeerManager(storage, StorageKey.TRANSPORT_P2P_PEERS);\r\n    }\r\n    static isAvailable() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return Promise.resolve(true);\r\n        });\r\n    }\r\n    connect() {\r\n        const _super = Object.create(null, {\r\n            connect: { get: () => super.connect }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('connect');\r\n            this._isConnected = TransportStatus.CONNECTING;\r\n            yield this.client.start();\r\n            const knownPeers = yield this.peerManager.getPeers();\r\n            if (knownPeers.length > 0) {\r\n                logger.log('connect', `connecting to ${knownPeers.length} peers`);\r\n                const connectionPromises = knownPeers.map((peer) => __awaiter(this, void 0, void 0, function* () { return this.listen(peer.publicKey); }));\r\n                yield Promise.all(connectionPromises);\r\n            }\r\n            else {\r\n                if (this.isDapp) {\r\n                    yield this.connectNewPeer();\r\n                }\r\n            }\r\n            yield _super.connect.call(this);\r\n        });\r\n    }\r\n    reconnect() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.isDapp) {\r\n                yield this.connectNewPeer();\r\n            }\r\n        });\r\n    }\r\n    connectNewPeer() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('connectNewPeer');\r\n            return new Promise((resolve) => __awaiter(this, void 0, void 0, function* () {\r\n                if (!this.listeningForChannelOpenings) {\r\n                    yield this.client.listenForChannelOpening((peer) => __awaiter(this, void 0, void 0, function* () {\r\n                        logger.log('connectNewPeer', `new publicKey`, peer.publicKey);\r\n                        yield this.addPeer(peer);\r\n                        this.events\r\n                            .emit(BeaconEvent.P2P_CHANNEL_CONNECT_SUCCESS, peer)\r\n                            .catch((emitError) => console.warn(emitError));\r\n                        resolve();\r\n                    }));\r\n                    this.listeningForChannelOpenings = true;\r\n                }\r\n                this.events\r\n                    .emit(BeaconEvent.P2P_LISTEN_FOR_CHANNEL_OPEN, yield this.client.getHandshakeInfo())\r\n                    .catch((emitError) => console.warn(emitError));\r\n            }));\r\n        });\r\n    }\r\n    getPeers() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.peerManager.getPeers();\r\n        });\r\n    }\r\n    addPeer(newPeer) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!(yield this.peerManager.hasPeer(newPeer.publicKey))) {\r\n                logger.log('addPeer', newPeer);\r\n                yield this.peerManager.addPeer(newPeer);\r\n                yield this.listen(newPeer.publicKey); // TODO: Prevent channels from being opened multiple times\r\n            }\r\n            else {\r\n                logger.log('addPeer', 'peer already added, skipping', newPeer);\r\n            }\r\n            yield this.client.sendPairingResponse(newPeer); // TODO: Should we have a confirmation here?\r\n        });\r\n    }\r\n    removePeer(peerToBeRemoved) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('removePeer', peerToBeRemoved);\r\n            yield this.peerManager.removePeer(peerToBeRemoved.publicKey);\r\n            if (this.client) {\r\n                yield this.client.unsubscribeFromEncryptedMessage(peerToBeRemoved.publicKey);\r\n            }\r\n        });\r\n    }\r\n    removeAllPeers() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('removeAllPeers');\r\n            yield this.peerManager.removeAllPeers();\r\n            yield this.client.unsubscribeFromEncryptedMessages();\r\n        });\r\n    }\r\n    send(message, recipient) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const knownPeers = yield this.peerManager.getPeers();\r\n            if (recipient) {\r\n                if (!knownPeers.some((peer) => peer.publicKey === recipient)) {\r\n                    throw new Error('Recipient unknown');\r\n                }\r\n                return this.client.sendMessage(recipient, message);\r\n            }\r\n            else {\r\n                // A broadcast request has to be sent everywhere.\r\n                const promises = knownPeers.map((peer) => this.client.sendMessage(peer.publicKey, message));\r\n                return (yield Promise.all(promises))[0];\r\n            }\r\n        });\r\n    }\r\n    listen(publicKey) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.client\r\n                .listenForEncryptedMessage(publicKey, (message) => {\r\n                const connectionContext = {\r\n                    origin: Origin.P2P,\r\n                    id: publicKey\r\n                };\r\n                this.notifyListeners(message, connectionContext).catch((error) => {\r\n                    throw error;\r\n                });\r\n            })\r\n                .catch((error) => {\r\n                throw error;\r\n            });\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=P2PTransport.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { myWindow } from '../MockWindow';\r\nimport { ExtensionMessageTarget, TransportType, TransportStatus, StorageKey } from '..';\r\nimport { Origin } from '../types/Origin';\r\nimport { PeerManager } from '../managers/PeerManager';\r\nimport { Logger } from '../utils/Logger';\r\nimport { Transport } from './Transport';\r\nimport { PostMessageClient } from './clients/PostMessageClient';\r\nconst logger = new Logger('PostMessageTransport');\r\nexport class PostMessageTransport extends Transport {\r\n    constructor(name, keyPair, storage, isDapp) {\r\n        super(name);\r\n        this.type = TransportType.POST_MESSAGE;\r\n        /**\r\n         * A flag indicating whether\r\n         */\r\n        this.isDapp = true;\r\n        // Make sure we only listen once\r\n        this.listeningForChannelOpenings = false;\r\n        this.isDapp = isDapp;\r\n        this.client = new PostMessageClient(this.name, keyPair, false);\r\n        this.peerManager = new PeerManager(storage, StorageKey.TRANSPORT_POSTMESSAGE_PEERS);\r\n    }\r\n    static isAvailable() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                const fn = (event) => {\r\n                    const data = event.data;\r\n                    if (data && data.payload === 'pong') {\r\n                        resolve(true);\r\n                        myWindow.removeEventListener('message', fn);\r\n                    }\r\n                };\r\n                myWindow.addEventListener('message', fn);\r\n                const message = {\r\n                    target: ExtensionMessageTarget.EXTENSION,\r\n                    payload: 'ping'\r\n                };\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                myWindow.postMessage(message, window.location.origin);\r\n            });\r\n        });\r\n    }\r\n    connect() {\r\n        const _super = Object.create(null, {\r\n            connect: { get: () => super.connect }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('connect');\r\n            this._isConnected = TransportStatus.CONNECTING;\r\n            const knownPeers = yield this.peerManager.getPeers();\r\n            if (knownPeers.length > 0) {\r\n                logger.log('connect', `connecting to ${knownPeers.length} peers`);\r\n                const connectionPromises = knownPeers.map((peer) => __awaiter(this, void 0, void 0, function* () { return this.listen(peer.publicKey); }));\r\n                yield Promise.all(connectionPromises);\r\n            }\r\n            else {\r\n                if (this.isDapp) {\r\n                    yield this.connectNewPeer();\r\n                }\r\n            }\r\n            yield _super.connect.call(this);\r\n        });\r\n    }\r\n    reconnect() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.isDapp) {\r\n                yield this.connectNewPeer();\r\n            }\r\n        });\r\n    }\r\n    connectNewPeer() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('connectNewPeer');\r\n            return new Promise((resolve) => __awaiter(this, void 0, void 0, function* () {\r\n                if (!this.listeningForChannelOpenings) {\r\n                    yield this.client.listenForChannelOpening((pairingResponse) => __awaiter(this, void 0, void 0, function* () {\r\n                        logger.log('connectNewPeer', `received PairingResponse`, pairingResponse);\r\n                        yield this.addPeer(pairingResponse);\r\n                        resolve();\r\n                    }));\r\n                    this.listeningForChannelOpenings = true;\r\n                }\r\n            }));\r\n        });\r\n    }\r\n    getPeers() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.peerManager.getPeers();\r\n        });\r\n    }\r\n    addPeer(newPeer) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!(yield this.peerManager.hasPeer(newPeer.publicKey))) {\r\n                logger.log('addPeer', newPeer);\r\n                yield this.peerManager.addPeer(newPeer);\r\n                yield this.listen(newPeer.publicKey);\r\n            }\r\n            else {\r\n                logger.log('addPeer', 'peer already added, skipping', newPeer);\r\n            }\r\n        });\r\n    }\r\n    removePeer(peerToBeRemoved) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('removePeer', peerToBeRemoved);\r\n            yield this.peerManager.removePeer(peerToBeRemoved.publicKey);\r\n            yield this.client.unsubscribeFromEncryptedMessage(peerToBeRemoved.publicKey);\r\n        });\r\n    }\r\n    removeAllPeers() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('removeAllPeers');\r\n            yield this.peerManager.removeAllPeers();\r\n            yield this.client.unsubscribeFromEncryptedMessages();\r\n        });\r\n    }\r\n    send(message, recipient) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('send', recipient, message);\r\n            if (recipient) {\r\n                yield this.client.sendMessage(recipient, message);\r\n            }\r\n            else {\r\n                const peers = yield this.peerManager.getPeers();\r\n                yield Promise.all(peers.map((peer) => this.client.sendMessage(peer.publicKey, message).catch(console.error)));\r\n            }\r\n        });\r\n    }\r\n    listen(publicKey) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('listen', publicKey);\r\n            yield this.client\r\n                .listenForEncryptedMessage(publicKey, (message, context) => {\r\n                const connectionContext = {\r\n                    origin: Origin.EXTENSION,\r\n                    id: context.id\r\n                };\r\n                this.notifyListeners(message, connectionContext).catch((error) => {\r\n                    throw error;\r\n                });\r\n            })\r\n                .catch((error) => {\r\n                throw error;\r\n            });\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=PostMessageTransport.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { Logger } from '../utils/Logger';\r\nimport { TransportType, TransportStatus } from '..';\r\nconst logger = new Logger('Transport');\r\nexport class Transport {\r\n    constructor(name) {\r\n        /**\r\n         * The type of the transport\r\n         */\r\n        this.type = TransportType.POST_MESSAGE;\r\n        /**\r\n         * The status of the transport\r\n         */\r\n        this._isConnected = TransportStatus.NOT_CONNECTED;\r\n        /**\r\n         * The listeners that will be notified when new messages are coming in\r\n         */\r\n        this.listeners = [];\r\n        this.name = name;\r\n    }\r\n    /**\r\n     * Return the status of the connection\r\n     */\r\n    get connectionStatus() {\r\n        return this._isConnected;\r\n    }\r\n    /**\r\n     * Returns a promise that resolves to true if the transport is available, false if it is not\r\n     */\r\n    static isAvailable() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return Promise.resolve(false);\r\n        });\r\n    }\r\n    /**\r\n     * Connect the transport\r\n     */\r\n    connect() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('connect');\r\n            this._isConnected = TransportStatus.CONNECTED;\r\n            return;\r\n        });\r\n    }\r\n    /**\r\n     * Reconnect the transport\r\n     *\r\n     * This method will be called if we tried to connect, but it didn't work\r\n     */\r\n    reconnect() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('reconnect');\r\n            return;\r\n        });\r\n    }\r\n    /**\r\n     * Send a message through the transport\r\n     *\r\n     * @param message The message to send\r\n     * @param recipient The recipient of the message\r\n     */\r\n    send(message, recipient) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('send', message, recipient);\r\n            return;\r\n        });\r\n    }\r\n    /**\r\n     * Add a listener to be called when a new message is received\r\n     *\r\n     * @param listener The listener that will be registered\r\n     */\r\n    addListener(listener) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('addListener');\r\n            this.listeners.push(listener);\r\n            return;\r\n        });\r\n    }\r\n    /**\r\n     * Remove a listener\r\n     *\r\n     * @param listener\r\n     */\r\n    removeListener(listener) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('removeListener');\r\n            this.listeners = this.listeners.filter((element) => element !== listener);\r\n            return;\r\n        });\r\n    }\r\n    /**\r\n     * Notify the listeners when a new message comes in\r\n     *\r\n     * @param message Message\r\n     * @param connectionInfo Context info about the connection\r\n     */\r\n    notifyListeners(message, connectionInfo) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logger.log('notifyListeners');\r\n            if (this.listeners.length === 0) {\r\n                logger.warn('notifyListeners', '0 listeners notified!', this);\r\n            }\r\n            else {\r\n                logger.log(`Notifying ${this.listeners.length} listeners`, this);\r\n            }\r\n            this.listeners.forEach((listener) => {\r\n                listener(message, connectionInfo);\r\n            });\r\n            return;\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=Transport.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { ExtensionMessageTarget } from '../..';\r\nimport { sealCryptobox } from '../../utils/crypto';\r\nimport { MessageBasedClient } from './MessageBasedClient';\r\nexport class ChromeMessageClient extends MessageBasedClient {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.activeListeners = new Map();\r\n    }\r\n    init() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.subscribeToMessages().catch(console.error);\r\n        });\r\n    }\r\n    listenForEncryptedMessage(senderPublicKey, messageCallback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.activeListeners.has(senderPublicKey)) {\r\n                return;\r\n            }\r\n            const callbackFunction = (message, sender, sendResponse) => __awaiter(this, void 0, void 0, function* () {\r\n                if (message.hasOwnProperty('encryptedPayload')) {\r\n                    const encryptedMessage = message;\r\n                    try {\r\n                        const decrypted = yield this.decryptMessage(senderPublicKey, encryptedMessage.encryptedPayload);\r\n                        const decryptedMessage = {\r\n                            payload: decrypted,\r\n                            target: encryptedMessage.target,\r\n                            sender: encryptedMessage.sender\r\n                        };\r\n                        messageCallback(decryptedMessage, sender, sendResponse);\r\n                    }\r\n                    catch (decryptionError) {\r\n                        /* NO-OP. We try to decode every message, but some might not be addressed to us. */\r\n                    }\r\n                }\r\n            });\r\n            this.activeListeners.set(senderPublicKey, callbackFunction);\r\n        });\r\n    }\r\n    sendMessage(recipientPublicKey, message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let msg = {\r\n                target: ExtensionMessageTarget.PAGE,\r\n                payload: message\r\n            };\r\n            // If no recipient public key is provided, we respond with an unencrypted message\r\n            if (recipientPublicKey) {\r\n                const payload = yield this.encryptMessage(recipientPublicKey, message);\r\n                msg = {\r\n                    target: ExtensionMessageTarget.PAGE,\r\n                    encryptedPayload: payload\r\n                };\r\n            }\r\n            chrome.tabs.query({}, (tabs) => {\r\n                // TODO: Find way to have direct communication with tab\r\n                tabs.forEach(({ id }) => {\r\n                    if (id) {\r\n                        chrome.tabs.sendMessage(id, msg);\r\n                    }\r\n                }); // Send message to all tabs\r\n            });\r\n        });\r\n    }\r\n    sendPairingResponse(pairingRequest) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const encryptedMessage = yield sealCryptobox(JSON.stringify(yield this.getHandshakeInfo()), Buffer.from(pairingRequest.publicKey, 'hex'));\r\n            const message = {\r\n                target: ExtensionMessageTarget.PAGE,\r\n                payload: encryptedMessage\r\n            };\r\n            chrome.tabs.query({}, (tabs) => {\r\n                // TODO: Find way to have direct communication with tab\r\n                tabs.forEach(({ id }) => {\r\n                    if (id) {\r\n                        chrome.tabs.sendMessage(id, message);\r\n                    }\r\n                }); // Send message to all tabs\r\n            });\r\n        });\r\n    }\r\n    subscribeToMessages() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\r\n                this.activeListeners.forEach((listener) => {\r\n                    listener(message, sender, sendResponse);\r\n                });\r\n                // return true from the event listener to indicate you wish to send a response asynchronously\r\n                // (this will keep the message channel open to the other end until sendResponse is called).\r\n                return true;\r\n            });\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=ChromeMessageClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as sodium from 'libsodium-wrappers';\r\nimport { toHex, getHexHash } from '../../utils/crypto';\r\nexport class CommunicationClient {\r\n    constructor(keyPair) {\r\n        this.keyPair = keyPair;\r\n    }\r\n    /**\r\n     * Get the public key\r\n     */\r\n    getPublicKey() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return toHex(this.keyPair.publicKey);\r\n        });\r\n    }\r\n    /**\r\n     * get the public key hash\r\n     */\r\n    getPublicKeyHash() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return getHexHash(this.keyPair.publicKey);\r\n        });\r\n    }\r\n    /**\r\n     * Create a cryptobox shared key\r\n     *\r\n     * @param otherPublicKey\r\n     * @param selfPrivateKey\r\n     */\r\n    createCryptoBox(otherPublicKey, selfPrivateKey) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // TODO: Don't calculate it every time?\r\n            const kxSelfPrivateKey = sodium.crypto_sign_ed25519_sk_to_curve25519(Buffer.from(selfPrivateKey)); // Secret bytes to scalar bytes\r\n            const kxSelfPublicKey = sodium.crypto_sign_ed25519_pk_to_curve25519(Buffer.from(selfPrivateKey).slice(32, 64)); // Secret bytes to scalar bytes\r\n            const kxOtherPublicKey = sodium.crypto_sign_ed25519_pk_to_curve25519(Buffer.from(otherPublicKey, 'hex')); // Secret bytes to scalar bytes\r\n            return [\r\n                Buffer.from(kxSelfPublicKey),\r\n                Buffer.from(kxSelfPrivateKey),\r\n                Buffer.from(kxOtherPublicKey)\r\n            ];\r\n        });\r\n    }\r\n    /**\r\n     * Create a cryptobox server\r\n     *\r\n     * @param otherPublicKey\r\n     * @param selfPrivateKey\r\n     */\r\n    createCryptoBoxServer(otherPublicKey, selfPrivateKey) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const keys = yield this.createCryptoBox(otherPublicKey, selfPrivateKey);\r\n            return sodium.crypto_kx_server_session_keys(...keys);\r\n        });\r\n    }\r\n    /**\r\n     * Create a cryptobox client\r\n     *\r\n     * @param otherPublicKey\r\n     * @param selfPrivateKey\r\n     */\r\n    createCryptoBoxClient(otherPublicKey, selfPrivateKey) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const keys = yield this.createCryptoBox(otherPublicKey, selfPrivateKey);\r\n            return sodium.crypto_kx_client_session_keys(...keys);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=CommunicationClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as sodium from 'libsodium-wrappers';\r\nimport { BEACON_VERSION } from '../../constants';\r\nimport { decryptCryptoboxPayload, encryptCryptoboxPayload } from '../../utils/crypto';\r\nimport { CommunicationClient } from './CommunicationClient';\r\nexport class MessageBasedClient extends CommunicationClient {\r\n    constructor(name, keyPair, debug = true) {\r\n        super(keyPair);\r\n        this.name = name;\r\n        this.debug = debug;\r\n        /**\r\n         * The listeners that will be notified of new messages\r\n         */\r\n        this.activeListeners = new Map();\r\n        this.init().catch(console.error);\r\n    }\r\n    /**\r\n     * start the client and make sure all dependencies are ready\r\n     */\r\n    start() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield sodium.ready;\r\n        });\r\n    }\r\n    /**\r\n     * Get the handshake information. This will be shared with the peer during the connection setup\r\n     */\r\n    getHandshakeInfo() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return {\r\n                name: this.name,\r\n                version: BEACON_VERSION,\r\n                publicKey: yield this.getPublicKey()\r\n            };\r\n        });\r\n    }\r\n    /**\r\n     * Unsubscribe from encrypted messages from a specific peer\r\n     *\r\n     * @param senderPublicKey\r\n     */\r\n    unsubscribeFromEncryptedMessage(senderPublicKey) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const listener = this.activeListeners.get(senderPublicKey);\r\n            if (!listener) {\r\n                return;\r\n            }\r\n            this.activeListeners.delete(senderPublicKey);\r\n        });\r\n    }\r\n    /**\r\n     * Unsubscribe from all encrypted messages\r\n     */\r\n    unsubscribeFromEncryptedMessages() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.activeListeners.clear();\r\n        });\r\n    }\r\n    /**\r\n     * Decrypt a message from a specific peer\r\n     *\r\n     * @param senderPublicKey\r\n     * @param payload\r\n     */\r\n    decryptMessage(senderPublicKey, payload) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const { sharedRx } = yield this.createCryptoBoxServer(senderPublicKey, this.keyPair.privateKey);\r\n            const hexPayload = Buffer.from(payload, 'hex');\r\n            if (hexPayload.length >=\r\n                sodium.crypto_secretbox_NONCEBYTES + sodium.crypto_secretbox_MACBYTES) {\r\n                try {\r\n                    return yield decryptCryptoboxPayload(hexPayload, sharedRx);\r\n                }\r\n                catch (decryptionError) {\r\n                    /* NO-OP. We try to decode every message, but some might not be addressed to us. */\r\n                }\r\n            }\r\n            throw new Error('Could not decrypt message');\r\n        });\r\n    }\r\n    /**\r\n     * Encrypt a message for a specific publicKey (receiver)\r\n     *\r\n     * @param recipientPublicKey\r\n     * @param message\r\n     */\r\n    encryptMessage(recipientPublicKey, message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const { sharedTx } = yield this.createCryptoBoxClient(recipientPublicKey, this.keyPair.privateKey);\r\n            return encryptCryptoboxPayload(message, sharedTx);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=MessageBasedClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as sodium from 'libsodium-wrappers';\r\nimport BigNumber from 'bignumber.js';\r\nimport { getHexHash, toHex, sealCryptobox, recipientString, openCryptobox, encryptCryptoboxPayload, decryptCryptoboxPayload } from '../../utils/crypto';\r\nimport { MatrixClient } from '../../matrix-client/MatrixClient';\r\nimport { MatrixClientEventType } from '../../matrix-client/models/MatrixClientEvent';\r\nimport { MatrixMessageType } from '../../matrix-client/models/MatrixMessage';\r\nimport { BEACON_VERSION } from '../../constants';\r\nimport { CommunicationClient } from './CommunicationClient';\r\nconst KNOWN_RELAY_SERVERS = [\r\n    'matrix.papers.tech'\r\n    // 'matrix.tez.ie',\r\n    // 'matrix-dev.papers.tech',\r\n    // \"matrix.stove-labs.com\",\r\n    // \"yadayada.cryptonomic-infra.tech\"\r\n];\r\nexport class P2PCommunicationClient extends CommunicationClient {\r\n    constructor(name, keyPair, replicationCount, storage, matrixNodes, debug = false) {\r\n        super(keyPair);\r\n        this.name = name;\r\n        this.replicationCount = replicationCount;\r\n        this.storage = storage;\r\n        this.debug = debug;\r\n        this.clients = [];\r\n        this.activeListeners = new Map();\r\n        this.KNOWN_RELAY_SERVERS = matrixNodes.length > 0 ? matrixNodes : KNOWN_RELAY_SERVERS;\r\n    }\r\n    getHandshakeInfo() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return {\r\n                name: this.name,\r\n                version: BEACON_VERSION,\r\n                publicKey: yield this.getPublicKey(),\r\n                relayServer: yield this.getRelayServer()\r\n            };\r\n        });\r\n    }\r\n    getRelayServer(publicKeyHash, nonce = '') {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const hash = publicKeyHash || (yield getHexHash(this.keyPair.publicKey));\r\n            return this.KNOWN_RELAY_SERVERS.reduce((prevPromise, curr) => __awaiter(this, void 0, void 0, function* () {\r\n                const prev = yield prevPromise;\r\n                const prevRelayServerHash = yield getHexHash(prev + nonce);\r\n                const currRelayServerHash = yield getHexHash(curr + nonce);\r\n                const prevBigInt = yield this.getAbsoluteBigIntDifference(hash, prevRelayServerHash);\r\n                const currBigInt = yield this.getAbsoluteBigIntDifference(hash, currRelayServerHash);\r\n                return prevBigInt.isLessThan(currBigInt) ? prev : curr;\r\n            }), Promise.resolve(this.KNOWN_RELAY_SERVERS[0]));\r\n        });\r\n    }\r\n    start() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.log('starting client');\r\n            yield sodium.ready;\r\n            const loginRawDigest = sodium.crypto_generichash(32, sodium.from_string(`login:${Math.floor(Date.now() / 1000 / (5 * 60))}`));\r\n            const rawSignature = sodium.crypto_sign_detached(loginRawDigest, this.keyPair.privateKey);\r\n            yield this.log(`connecting to ${this.replicationCount} servers`);\r\n            for (let i = 0; i < this.replicationCount; i++) {\r\n                // TODO: Parallel\r\n                const client = MatrixClient.create({\r\n                    baseUrl: `https://${yield this.getRelayServer(yield this.getPublicKeyHash(), i.toString())}`,\r\n                    storage: this.storage\r\n                });\r\n                client.subscribe(MatrixClientEventType.INVITE, (event) => __awaiter(this, void 0, void 0, function* () {\r\n                    yield client.joinRooms(event.content.roomId);\r\n                }));\r\n                yield this.log('login', yield this.getPublicKeyHash(), 'on', yield this.getRelayServer(yield this.getPublicKeyHash(), i.toString()));\r\n                yield client\r\n                    .start({\r\n                    id: yield this.getPublicKeyHash(),\r\n                    password: `ed:${toHex(rawSignature)}:${yield this.getPublicKey()}`,\r\n                    deviceId: toHex(this.keyPair.publicKey)\r\n                })\r\n                    .catch((error) => this.log(error));\r\n                yield client.joinRooms(...client.invitedRooms).catch((error) => this.log(error));\r\n                this.clients.push(client);\r\n            }\r\n        });\r\n    }\r\n    listenForEncryptedMessage(senderPublicKey, messageCallback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.activeListeners.has(senderPublicKey)) {\r\n                return;\r\n            }\r\n            const { sharedRx } = yield this.createCryptoBoxServer(senderPublicKey, this.keyPair.privateKey);\r\n            const callbackFunction = (event) => __awaiter(this, void 0, void 0, function* () {\r\n                if (this.isTextMessage(event.content) && (yield this.isSender(event, senderPublicKey))) {\r\n                    let payload;\r\n                    try {\r\n                        payload = Buffer.from(event.content.message.content, 'hex');\r\n                        // content can be non-hex if it's a connection open request\r\n                    }\r\n                    catch (_a) {\r\n                        /* */\r\n                    }\r\n                    if (payload &&\r\n                        payload.length >= sodium.crypto_secretbox_NONCEBYTES + sodium.crypto_secretbox_MACBYTES) {\r\n                        try {\r\n                            messageCallback(yield decryptCryptoboxPayload(payload, sharedRx));\r\n                        }\r\n                        catch (decryptionError) {\r\n                            /* NO-OP. We try to decode every message, but some might not be addressed to us. */\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            this.activeListeners.set(senderPublicKey, callbackFunction);\r\n            for (const client of this.clients) {\r\n                client.subscribe(MatrixClientEventType.MESSAGE, callbackFunction);\r\n            }\r\n        });\r\n    }\r\n    unsubscribeFromEncryptedMessage(senderPublicKey) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const listener = this.activeListeners.get(senderPublicKey);\r\n            if (!listener) {\r\n                return;\r\n            }\r\n            for (const client of this.clients) {\r\n                client.unsubscribe(MatrixClientEventType.MESSAGE, listener);\r\n            }\r\n            this.activeListeners.delete(senderPublicKey);\r\n        });\r\n    }\r\n    unsubscribeFromEncryptedMessages() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            for (const client of this.clients) {\r\n                client.unsubscribe(MatrixClientEventType.MESSAGE);\r\n            }\r\n            this.activeListeners.clear();\r\n        });\r\n    }\r\n    sendMessage(recipientPublicKey, message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const { sharedTx } = yield this.createCryptoBoxClient(recipientPublicKey, this.keyPair.privateKey);\r\n            for (let i = 0; i < this.replicationCount; i++) {\r\n                const recipientHash = yield getHexHash(Buffer.from(recipientPublicKey, 'hex'));\r\n                const recipient = recipientString(recipientHash, yield this.getRelayServer(recipientHash, i.toString()));\r\n                for (const client of this.clients) {\r\n                    const room = yield this.getRelevantRoom(client, recipient);\r\n                    client\r\n                        .sendTextMessage(room.id, yield encryptCryptoboxPayload(message, sharedTx))\r\n                        .catch((error) => this.log(error));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    listenForChannelOpening(messageCallback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            for (const client of this.clients) {\r\n                client.subscribe(MatrixClientEventType.MESSAGE, (event) => __awaiter(this, void 0, void 0, function* () {\r\n                    yield this.log('channel opening', event);\r\n                    if (this.isTextMessage(event.content) && (yield this.isChannelOpenMessage(event.content))) {\r\n                        yield this.log('new channel open event!');\r\n                        const splits = event.content.message.content.split(':');\r\n                        const payload = Buffer.from(splits[splits.length - 1], 'hex');\r\n                        if (payload.length >=\r\n                            sodium.crypto_secretbox_NONCEBYTES + sodium.crypto_secretbox_MACBYTES) {\r\n                            try {\r\n                                messageCallback(JSON.parse(yield openCryptobox(payload, this.keyPair.publicKey, this.keyPair.privateKey)));\r\n                            }\r\n                            catch (decryptionError) {\r\n                                /* NO-OP. We try to decode every message, but some might not be addressed to us. */\r\n                            }\r\n                        }\r\n                    }\r\n                }));\r\n            }\r\n        });\r\n    }\r\n    sendPairingResponse(pairingRequest) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.log('open channel');\r\n            const recipientHash = yield getHexHash(Buffer.from(pairingRequest.publicKey, 'hex'));\r\n            const recipient = recipientString(recipientHash, pairingRequest.relayServer);\r\n            yield this.log(`currently there are ${this.clients.length} clients open`);\r\n            for (const client of this.clients) {\r\n                const room = yield this.getRelevantRoom(client, recipient);\r\n                // TODO: remove v1 backwards-compatibility\r\n                const message = typeof pairingRequest.version === 'undefined'\r\n                    ? yield this.getPublicKey() // v1\r\n                    : JSON.stringify(yield this.getHandshakeInfo()); // v2\r\n                const encryptedMessage = yield sealCryptobox(message, Buffer.from(pairingRequest.publicKey, 'hex'));\r\n                client\r\n                    .sendTextMessage(room.id, ['@channel-open', recipient, encryptedMessage].join(':'))\r\n                    .catch((error) => this.log(error));\r\n            }\r\n        });\r\n    }\r\n    isTextMessage(content) {\r\n        return content.message.type === MatrixMessageType.TEXT;\r\n    }\r\n    isChannelOpenMessage(content) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return content.message.content.startsWith(`@channel-open:@${yield getHexHash(Buffer.from(yield this.getPublicKey(), 'hex'))}`);\r\n        });\r\n    }\r\n    isSender(event, senderPublicKey) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return event.content.message.sender.startsWith(`@${yield getHexHash(Buffer.from(senderPublicKey, 'hex'))}`);\r\n        });\r\n    }\r\n    getAbsoluteBigIntDifference(firstHash, secondHash) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const difference = new BigNumber(`0x${firstHash}`).minus(`0x${secondHash}`);\r\n            return difference.absoluteValue();\r\n        });\r\n    }\r\n    getRelevantRoom(client, recipient) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const joinedRooms = client.joinedRooms;\r\n            const relevantRooms = joinedRooms.filter((roomElement) => roomElement.members.some((member) => member === recipient));\r\n            let room;\r\n            if (relevantRooms.length === 0) {\r\n                yield this.log(`no relevant rooms found`);\r\n                const roomId = yield client.createTrustedPrivateRoom(recipient);\r\n                room = client.getRoomById(roomId);\r\n            }\r\n            else {\r\n                room = relevantRooms[0];\r\n                yield this.log(`channel already open, reusing room ${room.id}`);\r\n            }\r\n            return room;\r\n        });\r\n    }\r\n    log(...args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.debug) {\r\n                console.log(`--- [P2PCommunicationClient]:${this.name}: `, ...args);\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=P2PCommunicationClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as sodium from 'libsodium-wrappers';\r\nimport { myWindow } from '../../MockWindow';\r\nimport { ExtensionMessageTarget, Origin, Serializer } from '../..';\r\nimport { openCryptobox } from '../../utils/crypto';\r\nimport { MessageBasedClient } from './MessageBasedClient';\r\nexport class PostMessageClient extends MessageBasedClient {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.activeListeners = new Map();\r\n    }\r\n    init() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.subscribeToMessages().catch(console.error);\r\n        });\r\n    }\r\n    listenForEncryptedMessage(senderPublicKey, messageCallback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.activeListeners.has(senderPublicKey)) {\r\n                return;\r\n            }\r\n            const callbackFunction = (message, context) => __awaiter(this, void 0, void 0, function* () {\r\n                try {\r\n                    messageCallback(yield this.decryptMessage(senderPublicKey, message.encryptedPayload), context);\r\n                }\r\n                catch (decryptionError) {\r\n                    /* NO-OP. We try to decode every message, but some might not be addressed to us. */\r\n                }\r\n            });\r\n            this.activeListeners.set(senderPublicKey, callbackFunction);\r\n        });\r\n    }\r\n    sendMessage(recipientPublicKey, message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const payload = yield this.encryptMessage(recipientPublicKey, message);\r\n            const msg = {\r\n                target: ExtensionMessageTarget.EXTENSION,\r\n                encryptedPayload: payload\r\n            };\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            myWindow.postMessage(msg, window.location.origin);\r\n        });\r\n    }\r\n    listenForChannelOpening(messageCallback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const fn = (event) => __awaiter(this, void 0, void 0, function* () {\r\n                var _a;\r\n                const data = (_a = event === null || event === void 0 ? void 0 : event.data) === null || _a === void 0 ? void 0 : _a.message;\r\n                if (data &&\r\n                    data.target === ExtensionMessageTarget.PAGE &&\r\n                    (yield this.isChannelOpenMessage(data))) {\r\n                    const payload = Buffer.from(data.payload, 'hex');\r\n                    if (payload.length >=\r\n                        sodium.crypto_secretbox_NONCEBYTES + sodium.crypto_secretbox_MACBYTES) {\r\n                        try {\r\n                            const decrypted = yield openCryptobox(payload, this.keyPair.publicKey, this.keyPair.privateKey);\r\n                            messageCallback(JSON.parse(decrypted));\r\n                            myWindow.removeEventListener('message', fn);\r\n                        }\r\n                        catch (decryptionError) {\r\n                            /* NO-OP. We try to decode every message, but some might not be addressed to us. */\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            myWindow.addEventListener('message', fn);\r\n            const message = {\r\n                target: ExtensionMessageTarget.EXTENSION,\r\n                payload: yield new Serializer().serialize(yield this.getHandshakeInfo())\r\n            };\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            myWindow.postMessage(message, window.location.origin);\r\n        });\r\n    }\r\n    isChannelOpenMessage(message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return typeof message === 'object' && message.hasOwnProperty('payload');\r\n        });\r\n    }\r\n    subscribeToMessages() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            myWindow.addEventListener('message', (message) => {\r\n                if (typeof message === 'object' && message) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    const data = message.data;\r\n                    if (data.message && data.message.target === ExtensionMessageTarget.PAGE) {\r\n                        this.activeListeners.forEach((listener) => {\r\n                            listener(data.message, {\r\n                                origin: Origin.EXTENSION,\r\n                                id: data.sender.id || ''\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=PostMessageClient.js.map","export var BeaconErrorType;\r\n(function (BeaconErrorType) {\r\n    BeaconErrorType[\"BROADCAST_ERROR\"] = \"BROADCAST_ERROR\";\r\n    BeaconErrorType[\"NETWORK_NOT_SUPPORTED\"] = \"NETWORK_NOT_SUPPORTED\";\r\n    BeaconErrorType[\"NO_ADDRESS_ERROR\"] = \"NO_ADDRESS_ERROR\";\r\n    BeaconErrorType[\"NO_PRIVATE_KEY_FOUND_ERROR\"] = \"NO_PRIVATE_KEY_FOUND_ERROR\";\r\n    BeaconErrorType[\"NOT_GRANTED_ERROR\"] = \"NOT_GRANTED_ERROR\";\r\n    BeaconErrorType[\"PARAMETERS_INVALID_ERROR\"] = \"PARAMETERS_INVALID_ERROR\";\r\n    BeaconErrorType[\"TOO_MANY_OPERATIONS\"] = \"TOO_MANY_OPERATIONS\";\r\n    BeaconErrorType[\"TRANSACTION_INVALID_ERROR\"] = \"TRANSACTION_INVALID_ERROR\";\r\n    BeaconErrorType[\"ABORTED_ERROR\"] = \"ABORTED_ERROR\";\r\n    BeaconErrorType[\"UNKNOWN_ERROR\"] = \"UNKNOWN_ERROR\"; // Used as a wildcard if an unexpected error occured.\r\n})(BeaconErrorType || (BeaconErrorType = {}));\r\n//# sourceMappingURL=BeaconErrorType.js.map","export var ExtensionMessageTarget;\r\n(function (ExtensionMessageTarget) {\r\n    ExtensionMessageTarget[\"BACKGROUND\"] = \"toBackground\";\r\n    ExtensionMessageTarget[\"PAGE\"] = \"toPage\";\r\n    ExtensionMessageTarget[\"EXTENSION\"] = \"toExtension\";\r\n})(ExtensionMessageTarget || (ExtensionMessageTarget = {}));\r\n//# sourceMappingURL=ExtensionMessageTarget.js.map","export var Origin;\r\n(function (Origin) {\r\n    Origin[\"WEBSITE\"] = \"website\";\r\n    Origin[\"EXTENSION\"] = \"extension\";\r\n    Origin[\"P2P\"] = \"p2p\";\r\n})(Origin || (Origin = {}));\r\n//# sourceMappingURL=Origin.js.map","export var BeaconMessageType;\r\n(function (BeaconMessageType) {\r\n    BeaconMessageType[\"PermissionRequest\"] = \"permission_request\";\r\n    BeaconMessageType[\"SignPayloadRequest\"] = \"sign_payload_request\";\r\n    BeaconMessageType[\"OperationRequest\"] = \"operation_request\";\r\n    BeaconMessageType[\"BroadcastRequest\"] = \"broadcast_request\";\r\n    BeaconMessageType[\"PermissionResponse\"] = \"permission_response\";\r\n    BeaconMessageType[\"SignPayloadResponse\"] = \"sign_payload_response\";\r\n    BeaconMessageType[\"OperationResponse\"] = \"operation_response\";\r\n    BeaconMessageType[\"BroadcastResponse\"] = \"broadcast_response\";\r\n    BeaconMessageType[\"Disconnect\"] = \"disconnect\";\r\n    BeaconMessageType[\"Error\"] = \"error\";\r\n})(BeaconMessageType || (BeaconMessageType = {}));\r\n//# sourceMappingURL=BeaconMessageType.js.map","export var NetworkType;\r\n(function (NetworkType) {\r\n    NetworkType[\"MAINNET\"] = \"mainnet\";\r\n    NetworkType[\"CARTHAGENET\"] = \"carthagenet\";\r\n    NetworkType[\"DELPHINET\"] = \"delphinet\";\r\n    NetworkType[\"CUSTOM\"] = \"custom\";\r\n})(NetworkType || (NetworkType = {}));\r\n//# sourceMappingURL=NetworkType.js.map","export var PermissionScope;\r\n(function (PermissionScope) {\r\n    PermissionScope[\"SIGN\"] = \"sign\";\r\n    PermissionScope[\"OPERATION_REQUEST\"] = \"operation_request\";\r\n    PermissionScope[\"THRESHOLD\"] = \"threshold\"; // Allows the DApp to sign transactions below a certain threshold. This is currently not fully defined and unused\r\n})(PermissionScope || (PermissionScope = {}));\r\n//# sourceMappingURL=PermissionScope.js.map","export var StorageKey;\r\n(function (StorageKey) {\r\n    StorageKey[\"TRANSPORT_P2P_PEERS\"] = \"beacon:communication-peers\";\r\n    StorageKey[\"TRANSPORT_POSTMESSAGE_PEERS\"] = \"beacon:postmessage-peers\";\r\n    StorageKey[\"ACCOUNTS\"] = \"beacon:accounts\";\r\n    StorageKey[\"ACTIVE_ACCOUNT\"] = \"beacon:active-account\";\r\n    StorageKey[\"BEACON_SDK_SECRET_SEED\"] = \"beacon:sdk-secret-seed\";\r\n    StorageKey[\"APP_METADATA_LIST\"] = \"beacon:app-metadata-list\";\r\n    StorageKey[\"PERMISSION_LIST\"] = \"beacon:permissions\";\r\n    StorageKey[\"BEACON_SDK_VERSION\"] = \"beacon:sdk_version\";\r\n    StorageKey[\"MATRIX_PRESERVED_STATE\"] = \"beacon:sdk-matrix-preserved-state\";\r\n})(StorageKey || (StorageKey = {}));\r\n//# sourceMappingURL=StorageKey.js.map","import { StorageKey } from '../..';\r\nexport const defaultValues = {\r\n    [StorageKey.TRANSPORT_P2P_PEERS]: [],\r\n    [StorageKey.TRANSPORT_POSTMESSAGE_PEERS]: [],\r\n    [StorageKey.ACCOUNTS]: [],\r\n    [StorageKey.ACTIVE_ACCOUNT]: undefined,\r\n    [StorageKey.BEACON_SDK_SECRET_SEED]: undefined,\r\n    [StorageKey.APP_METADATA_LIST]: [],\r\n    [StorageKey.PERMISSION_LIST]: [],\r\n    [StorageKey.BEACON_SDK_VERSION]: undefined,\r\n    [StorageKey.MATRIX_PRESERVED_STATE]: {}\r\n};\r\n//# sourceMappingURL=StorageKeyReturnDefaults.js.map","export var TezosOperationType;\r\n(function (TezosOperationType) {\r\n    TezosOperationType[\"ENDORSEMENT\"] = \"endorsement\";\r\n    TezosOperationType[\"SEED_NONCE_REVELATION\"] = \"seed_nonce_revelation\";\r\n    TezosOperationType[\"DOUBLE_ENDORSEMENT_EVIDENCE\"] = \"double_endorsement_evidence\";\r\n    TezosOperationType[\"DOUBLE_BAKING_EVIDENCE\"] = \"double_baking_evidence\";\r\n    TezosOperationType[\"ACTIVATE_ACCOUNT\"] = \"activate_account\";\r\n    TezosOperationType[\"PROPOSALS\"] = \"proposals\";\r\n    TezosOperationType[\"BALLOT\"] = \"ballot\";\r\n    TezosOperationType[\"REVEAL\"] = \"reveal\";\r\n    TezosOperationType[\"TRANSACTION\"] = \"transaction\";\r\n    TezosOperationType[\"ORIGINATION\"] = \"origination\";\r\n    TezosOperationType[\"DELEGATION\"] = \"delegation\";\r\n})(TezosOperationType || (TezosOperationType = {}));\r\n//# sourceMappingURL=OperationTypes.js.map","export var TransportStatus;\r\n(function (TransportStatus) {\r\n    TransportStatus[\"NOT_CONNECTED\"] = \"NOT_CONNECTED\";\r\n    TransportStatus[\"CONNECTING\"] = \"CONNECTING\";\r\n    TransportStatus[\"CONNECTED\"] = \"CONNECTED\";\r\n})(TransportStatus || (TransportStatus = {}));\r\n//# sourceMappingURL=TransportStatus.js.map","export var TransportType;\r\n(function (TransportType) {\r\n    TransportType[\"CHROME_MESSAGE\"] = \"chrome_message\";\r\n    TransportType[\"POST_MESSAGE\"] = \"post_message\";\r\n    TransportType[\"LEDGER\"] = \"ledger\";\r\n    TransportType[\"P2P\"] = \"p2p\";\r\n})(TransportType || (TransportType = {}));\r\n//# sourceMappingURL=TransportType.js.map","/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { DEBUG } from '../constants';\r\n/**\r\n * The logger that is used internally\r\n */\r\nexport class Logger {\r\n    constructor(service, debug = DEBUG) {\r\n        this.name = service;\r\n        this.debug = debug;\r\n    }\r\n    _log(color, method, args) {\r\n        if (!this.debug) {\r\n            return;\r\n        }\r\n        const origin = `%c[${this.name}](${method})`;\r\n        const css = `background: #${color}`;\r\n        if (args.length === 0) {\r\n            console.log(origin, css);\r\n        }\r\n        else if (args.every((arg) => typeof arg === 'string')) {\r\n            console.log(`${origin}:`, css, ...args);\r\n        }\r\n        else {\r\n            console.log(`${origin}:`, css, ...args);\r\n        }\r\n    }\r\n    log(method, ...args) {\r\n        this._log('d3ffcf', method, args);\r\n    }\r\n    warn(method, ...args) {\r\n        this._log('fff4cf', method, args);\r\n    }\r\n    error(method, ...args) {\r\n        this._log('ffcfcf', method, args);\r\n    }\r\n}\r\n//# sourceMappingURL=Logger.js.map","/* eslint-disable prefer-arrow/prefer-arrow-functions */\r\n/**\r\n * A helper function to make sure if/elses and switch/cases are exhaustive\r\n *\r\n * @param empty The data that has to be empty\r\n */\r\nexport function assertNever(empty) {\r\n    return empty;\r\n}\r\n/* eslint-enable prefer-arrow/prefer-arrow-functions */\r\n//# sourceMappingURL=assert-never.js.map","import { PostMessageTransport } from '../transports/PostMessageTransport';\r\n/**\r\n * An object with promises to indicate whether or not that transport is available.\r\n */\r\nexport const availableTransports = {\r\n    extension: PostMessageTransport.isAvailable()\r\n};\r\n//# sourceMappingURL=available-transports.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nexport class BlockExplorer {\r\n    constructor(rpcUrls) {\r\n        this.rpcUrls = rpcUrls;\r\n    }\r\n    getLinkForNetwork(network) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.rpcUrls[network.type];\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=block-explorer.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as bs58check from 'bs58check';\r\nimport * as sodium from 'libsodium-wrappers';\r\n/* eslint-disable prefer-arrow/prefer-arrow-functions */\r\n/**\r\n * Convert a value to hex\r\n *\r\n * @param value\r\n */\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function toHex(value) {\r\n    return Buffer.from(value).toString('hex');\r\n}\r\n/**\r\n * Get the hex hash of a value\r\n *\r\n * @param key\r\n */\r\nexport function getHexHash(key) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        yield sodium.ready;\r\n        return toHex(sodium.crypto_generichash(32, key));\r\n    });\r\n}\r\n/**\r\n * Get a keypair from a seed\r\n *\r\n * @param seed\r\n */\r\nexport function getKeypairFromSeed(seed) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        yield sodium.ready;\r\n        return sodium.crypto_sign_seed_keypair(sodium.crypto_generichash(32, sodium.from_string(seed)));\r\n    });\r\n}\r\n/**\r\n * Encrypt a message with a shared key\r\n *\r\n * @param message\r\n * @param sharedKey\r\n */\r\nexport function encryptCryptoboxPayload(message, sharedKey) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        yield sodium.ready;\r\n        const nonce = Buffer.from(sodium.randombytes_buf(sodium.crypto_secretbox_NONCEBYTES));\r\n        const combinedPayload = Buffer.concat([\r\n            nonce,\r\n            Buffer.from(sodium.crypto_secretbox_easy(Buffer.from(message, 'utf8'), nonce, sharedKey))\r\n        ]);\r\n        return toHex(combinedPayload);\r\n    });\r\n}\r\n/**\r\n * Decrypt a message with a shared key\r\n *\r\n * @param payload\r\n * @param sharedKey\r\n */\r\nexport function decryptCryptoboxPayload(payload, sharedKey) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        yield sodium.ready;\r\n        const nonce = payload.slice(0, sodium.crypto_secretbox_NONCEBYTES);\r\n        const ciphertext = payload.slice(sodium.crypto_secretbox_NONCEBYTES);\r\n        return Buffer.from(sodium.crypto_secretbox_open_easy(ciphertext, nonce, sharedKey)).toString('utf8');\r\n    });\r\n}\r\n/**\r\n * Encrypt a message with a public key\r\n *\r\n * @param payload\r\n * @param publicKey\r\n */\r\nexport function sealCryptobox(payload, publicKey) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        yield sodium.ready;\r\n        const kxSelfPublicKey = sodium.crypto_sign_ed25519_pk_to_curve25519(Buffer.from(publicKey)); // Secret bytes to scalar bytes\r\n        const encryptedMessage = sodium.crypto_box_seal(payload, kxSelfPublicKey);\r\n        return toHex(encryptedMessage);\r\n    });\r\n}\r\n/**\r\n * Decrypt a message with public + private key\r\n *\r\n * @param encryptedPayload\r\n * @param publicKey\r\n * @param privateKey\r\n */\r\nexport function openCryptobox(encryptedPayload, publicKey, privateKey) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        yield sodium.ready;\r\n        const kxSelfPrivateKey = sodium.crypto_sign_ed25519_sk_to_curve25519(Buffer.from(privateKey)); // Secret bytes to scalar bytes\r\n        const kxSelfPublicKey = sodium.crypto_sign_ed25519_pk_to_curve25519(Buffer.from(publicKey)); // Secret bytes to scalar bytes\r\n        const decryptedMessage = sodium.crypto_box_seal_open(encryptedPayload, kxSelfPublicKey, kxSelfPrivateKey);\r\n        return Buffer.from(decryptedMessage).toString();\r\n    });\r\n}\r\n/**\r\n * Get an address from the public key\r\n *\r\n * @param publicKey\r\n */\r\nexport function getAddressFromPublicKey(publicKey) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        yield sodium.ready;\r\n        const prefixes = {\r\n            edpk: {\r\n                length: 54,\r\n                prefix: Buffer.from(new Uint8Array([6, 161, 159]))\r\n            },\r\n            sppk: {\r\n                length: 55,\r\n                prefix: Buffer.from(new Uint8Array([6, 161, 161]))\r\n            },\r\n            p2pk: {\r\n                length: 55,\r\n                prefix: Buffer.from(new Uint8Array([6, 161, 164]))\r\n            }\r\n        };\r\n        let prefix;\r\n        let plainPublicKey;\r\n        if (publicKey.length === 64) {\r\n            prefix = prefixes.edpk.prefix;\r\n            plainPublicKey = publicKey;\r\n        }\r\n        else {\r\n            Object.entries(prefixes).forEach(([key, value]) => {\r\n                if (publicKey.startsWith(key) && publicKey.length === value.length) {\r\n                    prefix = value.prefix;\r\n                    const decoded = bs58check.decode(publicKey);\r\n                    plainPublicKey = decoded.slice(key.length, decoded.length).toString('hex');\r\n                }\r\n            });\r\n        }\r\n        if (!prefix || !plainPublicKey) {\r\n            throw new Error(`invalid publicKey: ${publicKey}`);\r\n        }\r\n        const payload = sodium.crypto_generichash(20, Buffer.from(plainPublicKey, 'hex'));\r\n        return bs58check.encode(Buffer.concat([prefix, Buffer.from(payload)]));\r\n    });\r\n}\r\n/**\r\n * Get the recipient string used in the matrix message\r\n *\r\n * @param recipientHash\r\n * @param relayServer\r\n */\r\nexport function recipientString(recipientHash, relayServer) {\r\n    return `@${recipientHash}:${relayServer}`;\r\n}\r\n/* eslint-enable prefer-arrow/prefer-arrow-functions */\r\n//# sourceMappingURL=crypto.js.map","export var ExposedPromiseStatus;\r\n(function (ExposedPromiseStatus) {\r\n    ExposedPromiseStatus[\"PENDING\"] = \"pending\";\r\n    ExposedPromiseStatus[\"RESOLVED\"] = \"resolved\";\r\n    ExposedPromiseStatus[\"REJECTED\"] = \"rejected\";\r\n})(ExposedPromiseStatus || (ExposedPromiseStatus = {}));\r\nconst notInitialized = () => {\r\n    throw new Error('ExposedPromise not initialized yet.');\r\n};\r\n/**\r\n * Exposed promise allow you to create a promise and then resolve it later, from the outside\r\n */\r\nexport class ExposedPromise {\r\n    constructor() {\r\n        this._resolve = notInitialized;\r\n        this._reject = notInitialized;\r\n        this._status = ExposedPromiseStatus.PENDING;\r\n        this._promise = new Promise((innerResolve, innerReject) => {\r\n            this._resolve = (value) => {\r\n                if (this.isSettled()) {\r\n                    return;\r\n                }\r\n                this._promiseResult = value;\r\n                innerResolve(value);\r\n                this._status = ExposedPromiseStatus.RESOLVED;\r\n                return;\r\n            };\r\n            this._reject = (reason) => {\r\n                if (this.isSettled()) {\r\n                    return;\r\n                }\r\n                this._promiseError = reason;\r\n                innerReject(reason);\r\n                this._status = ExposedPromiseStatus.REJECTED;\r\n                return;\r\n            };\r\n        });\r\n    }\r\n    get promise() {\r\n        return this._promise;\r\n    }\r\n    get resolve() {\r\n        return this._resolve;\r\n    }\r\n    get reject() {\r\n        return this._reject;\r\n    }\r\n    get status() {\r\n        return this._status;\r\n    }\r\n    get promiseResult() {\r\n        return this._promiseResult;\r\n    }\r\n    get promiseError() {\r\n        return this._promiseError;\r\n    }\r\n    static resolve(value) {\r\n        const promise = new ExposedPromise();\r\n        promise.resolve(value);\r\n        return promise;\r\n    }\r\n    static reject(reason) {\r\n        const promise = new ExposedPromise();\r\n        promise.reject(reason);\r\n        return promise;\r\n    }\r\n    isPending() {\r\n        return this.status === ExposedPromiseStatus.PENDING;\r\n    }\r\n    isResolved() {\r\n        return this.status === ExposedPromiseStatus.RESOLVED;\r\n    }\r\n    isRejected() {\r\n        return this.status === ExposedPromiseStatus.REJECTED;\r\n    }\r\n    isSettled() {\r\n        return this.isResolved() || this.isRejected();\r\n    }\r\n}\r\n//# sourceMappingURL=exposed-promise.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n/* eslint-disable prefer-arrow/prefer-arrow-functions */\r\nimport * as sodium from 'libsodium-wrappers';\r\n/**\r\n * Generate a random GUID\r\n */\r\nexport function generateGUID() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        yield sodium.ready;\r\n        const buf = sodium.randombytes_buf(16);\r\n        return [buf.slice(0, 4), buf.slice(4, 6), buf.slice(6, 8), buf.slice(8, 10), buf.slice(10, 16)]\r\n            .map(function (subbuf) {\r\n            return Buffer.from(subbuf).toString('hex');\r\n        })\r\n            .join('-');\r\n    });\r\n}\r\n/* eslint-enable prefer-arrow/prefer-arrow-functions */\r\n//# sourceMappingURL=generate-uuid.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as sodium from 'libsodium-wrappers';\r\nimport * as bs58check from 'bs58check';\r\n/**\r\n * Generate a deterministic account identifier based on an address and a network\r\n *\r\n * @param address\r\n * @param network\r\n */\r\nexport const getAccountIdentifier = (address, network) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const data = [address, network.type];\r\n    if (network.name) {\r\n        data.push(`name:${network.name}`);\r\n    }\r\n    if (network.rpcUrl) {\r\n        data.push(`rpc:${network.rpcUrl}`);\r\n    }\r\n    yield sodium.ready;\r\n    const buffer = Buffer.from(sodium.crypto_generichash(10, data.join('-')));\r\n    return bs58check.encode(buffer);\r\n});\r\n//# sourceMappingURL=get-account-identifier.js.map","export const getTzip10Link = (url, payload) => `${url}?type=tzip10&data=${payload}`;\r\n//# sourceMappingURL=get-tzip10-link.js.map","// Helper functions from https://github.com/ionic-team/ionic-framework/blob/master/core/src/utils/platform.ts\r\nexport const testUserAgent = (win, expr) => expr.test(win.navigator.userAgent);\r\nconst matchMedia = (win, query) => win.matchMedia(query).matches;\r\nexport const isMobile = (win) => matchMedia(win, '(any-pointer:coarse)');\r\n// const isCordova = (win: any): boolean => Boolean(win.cordova || win.phonegap || win.PhoneGap)\r\n// const isCapacitorNative = (win: any): boolean => {\r\n//   const capacitor = win.Capacitor\r\n//   return Boolean(capacitor && capacitor.isNative)\r\n// }\r\n// const isHybrid = (win: Window): boolean => isCordova(win) || isCapacitorNative(win)\r\n// const isMobileWeb = (win: Window): boolean => isMobile(win) && !isHybrid(win)\r\nconst isIpad = (win) => {\r\n    // iOS 12 and below\r\n    if (testUserAgent(win, /iPad/i)) {\r\n        return true;\r\n    }\r\n    // iOS 13+\r\n    if (testUserAgent(win, /Macintosh/i) && isMobile(win)) {\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\nexport const isIOS = (win) => testUserAgent(win, /iPhone|iPod/i) || isIpad(win);\r\nexport const isAndroid = (win) => testUserAgent(win, /android|sink/i);\r\nexport const isDesktop = (win) => !isMobile(win);\r\n//# sourceMappingURL=platform.js.map","import * as qrcode from 'qrcode-generator';\r\n/**\r\n * Convert data to a QR code\r\n *\r\n * @param payload The data to be encoded as a QR code\r\n * @param type How the QR code will be encoded\r\n */\r\nexport const getQrData = (payload, type) => {\r\n    const typeNumber = 0;\r\n    const errorCorrectionLevel = 'L';\r\n    const qr = qrcode(typeNumber, errorCorrectionLevel);\r\n    try {\r\n        qr.addData(payload);\r\n        qr.make();\r\n        if (type === 'svg') {\r\n            return qr.createSvgTag();\r\n        }\r\n        else if (type === 'ascii') {\r\n            const length = qr.getModuleCount();\r\n            const black = '\\x1B[40m  \\x1B[0m';\r\n            const white = '\\x1B[47m  \\x1B[0m';\r\n            const whiteLine = new Array(length + 3).join(white);\r\n            const blackLine = new Array(length + 3).join(black);\r\n            let ascii = '';\r\n            ascii += `${blackLine}\\n`;\r\n            ascii += `${whiteLine}\\n`;\r\n            for (let x = 0; x < length; x++) {\r\n                ascii += white;\r\n                for (let y = 0; y < length; y++) {\r\n                    ascii += qr.isDark(x, y) ? black : white;\r\n                }\r\n                ascii += `${white}\\n`;\r\n            }\r\n            ascii += whiteLine;\r\n            ascii += blackLine;\r\n            return ascii;\r\n        }\r\n        else {\r\n            return qr.createDataURL();\r\n        }\r\n    }\r\n    catch (qrError) {\r\n        console.error('error', qrError);\r\n        throw qrError;\r\n    }\r\n};\r\n//# sourceMappingURL=qr.js.map","export const replaceInTemplate = (text, placeholder, value) => text.split(`{{${placeholder}}}`).join(value);\r\n//# sourceMappingURL=replace-in-template.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { NetworkType } from '..';\r\nimport { BlockExplorer } from './block-explorer';\r\nexport class TezblockBlockExplorer extends BlockExplorer {\r\n    constructor(rpcUrls = {\r\n        [NetworkType.MAINNET]: 'https://tezblock.io',\r\n        [NetworkType.CARTHAGENET]: 'https://carthagenet.tezblock.io',\r\n        [NetworkType.DELPHINET]: 'https://delphinet.tezblock.io',\r\n        [NetworkType.CUSTOM]: 'https://delphinet.tezblock.io'\r\n    }) {\r\n        super(rpcUrls);\r\n        this.rpcUrls = rpcUrls;\r\n    }\r\n    getAddressLink(address, network) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const blockExplorer = yield this.getLinkForNetwork(network);\r\n            return `${blockExplorer}/account/${address}`;\r\n        });\r\n    }\r\n    getTransactionLink(transactionId, network) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const blockExplorer = yield this.getLinkForNetwork(network);\r\n            return `${blockExplorer}/transaction/${transactionId}`;\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=tezblock-blockexplorer.js.map","/* eslint-disable prefer-arrow/prefer-arrow-functions */\r\n/**\r\n * A helper function to improve typings of object keys\r\n *\r\n * @param obj Object\r\n */\r\nexport function keys(obj) {\r\n    return Object.keys(obj);\r\n}\r\n//# sourceMappingURL=utils.js.map","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { StartComponent } from './components/start/start.component';\r\nimport { NewWalletComponent } from './components/new-wallet/new-wallet.component';\r\nimport { MnemonicImportComponent } from './components/mnemonic-import/mnemonic-import.component';\r\nimport { ActivateComponent } from './components/activate/activate.component';\r\nimport { ConnectLedgerComponent } from './components/connect-ledger/connect-ledger.component';\r\nimport { AccountsComponent } from './components/accounts/accounts.component';\r\nimport { P404Component } from './views/error/404.component';\r\nimport { P500Component } from './views/error/500.component';\r\nimport { AccountViewComponent } from './components/account-view/account-view.component';\r\nimport { PrivacyPolicyComponent } from './components/agreement/privacy-policy/privacy-policy.component';\r\nimport { TermsOfUseComponent } from './components/agreement/terms-of-use/terms-of-use.component';\r\nimport { TorusComponent } from './components/torus/torus.component';\r\nimport { UriHandlerComponent } from './components/uri-handler/uri-handler.component';\r\nimport { LoggedInComponent } from './components/logged-in/logged-in.component';\r\nimport { SettingsComponent } from './components/settings/settings.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: StartComponent },\r\n  { path: 'new-wallet', component: NewWalletComponent },\r\n  { path: 'import', component: MnemonicImportComponent },\r\n  { path: 'activate', component: ActivateComponent },\r\n  { path: '', component: LoggedInComponent,\r\n    children: [\r\n      { path: 'accounts/:uri', component: AccountsComponent },\r\n      { path: 'accounts', component: AccountsComponent },\r\n      { path: 'account/:address', component: AccountViewComponent },\r\n      { path: 'account', redirectTo: 'accounts'},\r\n      { path: 'settings', component: SettingsComponent },\r\n    ] },\r\n  { path: 'connect-ledger', component: ConnectLedgerComponent },\r\n  { path: 'direct-auth', component: TorusComponent },\r\n  { path: 'accounts', component: AccountsComponent },\r\n  { path: 'account/:address', component: AccountViewComponent },\r\n  { path: 'privacy-policy', component: PrivacyPolicyComponent },\r\n  { path: 'terms-of-use', component: TermsOfUseComponent },\r\n  { path: 'serviceworker', component: TermsOfUseComponent },\r\n  { path: '404', component: P404Component, data: { title: 'Page 404' } },\r\n  { path: '500', component: P500Component, data: { title: 'Page 500' } },\r\n  { path: '**', redirectTo: '404'},\r\n];\r\n\r\n@NgModule({\r\n  imports: [ RouterModule.forRoot(routes) ],\r\n  exports: [ RouterModule ]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router, NavigationEnd } from '@angular/router';\r\n\r\nimport { WalletService } from './services/wallet/wallet.service';\r\nimport { CoordinatorService } from './services/coordinator/coordinator.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Constants } from './constants';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n  // // tslint:disable-next-line\r\n  // selector: 'body',\r\n  // template: '<router-outlet></router-outlet>'\r\n})\r\nexport class AppComponent implements OnInit {\r\n\r\n  CONSTANTS = new Constants();\r\n  constructor(\r\n    private walletService: WalletService,\r\n    private coordinatorService: CoordinatorService,\r\n    private router: Router,\r\n    public translate: TranslateService\r\n  ) {\r\n\r\n      // this language will be used as a fallback when a translation isn't found in the current language\r\n      translate.setDefaultLang('en');\r\n\r\n      // the lang to use, if the lang isn't available, it will use the current loader to get them\r\n      const languagePreference = window.localStorage.getItem('languagePreference');\r\n      const browserLang = translate.getBrowserLang();\r\n      translate.use('en');\r\n      /*if (languagePreference) {\r\n        translate.use(languagePreference.match(/en|fr|ru|jp|kor|por/) ? languagePreference : 'en');\r\n      } else {\r\n        translate.use(browserLang.match(/en|fr|ru|jp|kor|por/) ? browserLang : 'en');\r\n      }*/\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.walletService.loadStoredWallet();\r\n    if (this.walletService.wallet) {\r\n      this.coordinatorService.startAll();\r\n      //this.router.navigate(['/accounts']);\r\n    }\r\n    this.router.events.subscribe((evt) => {\r\n      if (!(evt instanceof NavigationEnd)) {\r\n        return;\r\n      }\r\n      window.scrollTo(0, 0);\r\n    });\r\n  }\r\n\r\n  returnLanguage(lang: string) {\r\n\r\n    // this.translate.use(lang);\r\n    // console.log('lang ', lang);\r\n\r\n    const map: Map<string, string> = new Map([\r\n        ['en', 'English'],\r\n        ['cn', ''],\r\n        ['es', 'Espaol'],\r\n        ['fr', 'Franais'],\r\n        ['ru', 'P'],\r\n        ['jp', ''],\r\n        ['kor', ''],\r\n        ['por', 'Portugus'],\r\n        ['swe', 'Svenska']\r\n    ]);\r\n\r\n    const language = map.get(lang);\r\n\r\n    return language;\r\n  }\r\n  setLanguage(lang) {\r\n    window.localStorage.setItem('languagePreference', lang);\r\n    this.translate.use(lang);\r\n  }\r\n\r\n  logout() {\r\n    this.coordinatorService.stopAll();\r\n    this.walletService.clearWallet();\r\n    this.router.navigate(['']);\r\n  }\r\n}\r\n","<router-outlet></router-outlet>\r\n<app-messages></app-messages>\r\n<app-spinner></app-spinner>\r\n<app-agreement></app-agreement>\r\n<app-footer></app-footer>","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { LocationStrategy, HashLocationStrategy } from '@angular/common';\r\nimport { HttpClientModule, HttpClient } from '@angular/common/http';\r\nimport { AppRoutingModule } from './app-routing.module';\r\n\r\n// From Angular Material\r\nimport { MatSortModule } from '@angular/material/sort';\r\nimport { MatTabsModule } from '@angular/material/tabs';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\n\r\n// For translation\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nimport {TranslateHttpLoader} from '@ngx-translate/http-loader';\r\n\r\n// External libraries\r\nimport { ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\r\nimport { ModalModule, AlertModule, ProgressbarModule, ButtonsModule, BsDropdownModule, TabsModule } from 'ngx-bootstrap';\r\nimport { CollapseModule } from 'ngx-bootstrap/collapse';\r\nimport { AppComponent } from './app.component';\r\n\r\nimport { PerfectScrollbarModule } from 'ngx-perfect-scrollbar';\r\nimport { PERFECT_SCROLLBAR_CONFIG } from 'ngx-perfect-scrollbar';\r\nimport { PerfectScrollbarConfigInterface } from 'ngx-perfect-scrollbar';\r\n\r\n\r\nconst DEFAULT_PERFECT_SCROLLBAR_CONFIG: PerfectScrollbarConfigInterface = {\r\n  suppressScrollX: true\r\n};\r\n\r\n// Services\r\nimport { MessageService } from './services/message/message.service';\r\nimport { WalletService } from './services/wallet/wallet.service';\r\nimport { ActivityService } from './services/activity/activity.service';\r\nimport { BalanceService } from './services/balance/balance.service';\r\nimport { EncryptionService } from './services/encryption/encryption.service';\r\nimport { ImportService } from './services/import/import.service';\r\nimport { TzrateService } from './services/tzrate/tzrate.service';\r\nimport { ExportService } from './services/export/export.service';\r\nimport { DelegateService } from './services/delegate/delegate.service';\r\nimport { InputValidationService } from './services/input-validation/input-validation.service';\r\nimport { LedgerService } from './services/ledger/ledger.service';\r\nimport { EstimateService } from './services/estimate/estimate.service';\r\nimport { BeaconService } from './services/beacon/beacon.service';\r\n\r\n// View components\r\nimport { StartComponent } from './components/start/start.component';\r\nimport { SendComponent } from './components/send/send.component';\r\nimport { NewWalletComponent } from './components/new-wallet/new-wallet.component';\r\nimport { ReceiveComponent } from './components/receive/receive.component';\r\nimport { DelegateComponent } from './components/delegate/delegate.component';\r\nimport { PositioningService } from 'ngx-bootstrap/positioning';\r\nimport { MnemonicImportComponent } from './components/mnemonic-import/mnemonic-import.component';\r\nimport { CoordinatorService } from './services/coordinator/coordinator.service';\r\nimport { OperationService } from './services/operation/operation.service';\r\nimport { ActivateComponent } from './components/activate/activate.component';\r\nimport { MessagesComponent } from './components/messages/messages.component';\r\nimport { HeaderComponent } from './components/header/header.component';\r\nimport { P404Component } from './views/error/404.component';\r\nimport { P500Component } from './views/error/500.component';\r\n\r\n// Pipes\r\nimport { ErrorHandlingPipe } from './pipes/error-handling.pipe';\r\nimport { DelegatorNamePipe } from './pipes/delegator-name.pipe';\r\nimport { TruncatePipe } from './pipes/truncate.pipe';\r\nimport { TimeAgoPipe } from './pipes/time-ago.pipe';\r\nimport { ConnectLedgerComponent } from './components/connect-ledger/connect-ledger.component';\r\nimport { FooterComponent } from './components/footer/footer.component';\r\nimport { AccountsComponent } from './components/accounts/accounts.component';\r\nimport { AccountViewComponent } from './components/account-view/account-view.component';\r\nimport { NewImplicitComponent } from './components/new-implicit/new-implicit.component';\r\nimport { SpinnerComponent } from './components/spinner/spinner.component';\r\nimport { AgreementComponent } from './components/agreement/agreement.component';\r\nimport { TermsOfUseComponent } from './components/agreement/terms-of-use/terms-of-use.component';\r\nimport { PrivacyPolicyComponent } from './components/agreement/privacy-policy/privacy-policy.component';\r\nimport { TorusComponent } from './components/torus/torus.component';\r\nimport { TorusService } from './services/torus/torus.service';\r\nimport { UriHandlerComponent } from './components/uri-handler/uri-handler.component';\r\nimport { PermissionRequestComponent } from './components/permission-request/permission-request.component';\r\nimport { LoggedInComponent } from './components/logged-in/logged-in.component';\r\nimport { SettingsComponent } from './components/settings/settings.component';\r\nimport { QrScannerComponent } from './components/qr-scanner/qr-scanner.component';\r\n\r\n// AoT requires an exported function for factories\r\nexport function HttpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http, './assets/i18n/', '.json');\r\n}\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n\r\n    // View components\r\n    NewWalletComponent,\r\n    StartComponent,\r\n    SendComponent,\r\n    ReceiveComponent,\r\n    DelegateComponent,\r\n    MnemonicImportComponent,\r\n    ActivateComponent,\r\n    MessagesComponent,\r\n    HeaderComponent,\r\n    P404Component,\r\n    P500Component,\r\n\r\n    // Pipes\r\n    ErrorHandlingPipe,\r\n    DelegatorNamePipe,\r\n    TruncatePipe,\r\n    TimeAgoPipe,\r\n    ConnectLedgerComponent,\r\n    FooterComponent,\r\n    AccountsComponent,\r\n    AccountViewComponent,\r\n    NewImplicitComponent,\r\n    SpinnerComponent,\r\n    AgreementComponent,\r\n    TermsOfUseComponent,\r\n    PrivacyPolicyComponent,\r\n    TorusComponent,\r\n    UriHandlerComponent,\r\n    PermissionRequestComponent,\r\n    LoggedInComponent,\r\n    SettingsComponent,\r\n    QrScannerComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    MatTabsModule,\r\n    MatSortModule,\r\n    FormsModule,\r\n    AppRoutingModule,\r\n    HttpClientModule,\r\n    CollapseModule.forRoot(),\r\n    ModalModule.forRoot(),\r\n    AlertModule.forRoot(),\r\n    PerfectScrollbarModule,\r\n    ProgressbarModule.forRoot(),\r\n    ButtonsModule.forRoot(),\r\n    BsDropdownModule.forRoot(),\r\n    TabsModule.forRoot(),\r\n    TranslateModule.forRoot({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: HttpLoaderFactory,\r\n        deps: [HttpClient]\r\n      }\r\n    })  // lazy loading will need TranslateModule.forChild() in the lazy loaded modules\r\n  ],\r\n  providers: [\r\n    // Services\r\n    MessageService,\r\n    WalletService,\r\n    ActivityService,\r\n    EncryptionService,\r\n    BalanceService,\r\n    ImportService,\r\n    ComponentLoaderFactory,\r\n    PositioningService,\r\n    TzrateService,\r\n    CoordinatorService,\r\n    OperationService,\r\n    ExportService,\r\n    DelegateService,\r\n    InputValidationService,\r\n    LedgerService,\r\n    EstimateService,\r\n    BeaconService,\r\n\r\n    // Pipes\r\n    ErrorHandlingPipe,\r\n    DelegatorNamePipe,\r\n    TruncatePipe,\r\n    TimeAgoPipe\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router, NavigationEnd } from '@angular/router';\r\nimport { Account } from '../../services/wallet/wallet';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { TimeAgoPipe } from '../../pipes/time-ago.pipe';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport * as copy from 'copy-to-clipboard';\r\nimport { filter } from 'rxjs/internal/operators/filter';\r\nimport { CoordinatorService } from '../../services/coordinator/coordinator.service';\r\nimport { Constants } from '../../constants';\r\nimport { LookupService } from '../../services/lookup/lookup.service';\r\nimport { ActivityService } from '../../services/activity/activity.service';\r\n\r\n@Component({\r\n  selector: 'app-account-view',\r\n  templateUrl: './account-view.component.html',\r\n  styleUrls: ['./account-view.component.scss'],\r\n})\r\nexport class AccountViewComponent implements OnInit {\r\n  account: Account;\r\n  CONSTANTS = new Constants();\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private walletService: WalletService,\r\n    public translate: TranslateService,\r\n    public messageService: MessageService,\r\n    public timeAgoPipe: TimeAgoPipe,\r\n    private router: Router,\r\n    private coordinatorService: CoordinatorService,\r\n    private lookupService: LookupService,\r\n    private activityService: ActivityService\r\n  ) {}\r\n    trigger = true;\r\n    @Input() activity: any;\r\n  ngOnInit(): void {\r\n    if (!this.walletService.wallet) {\r\n      this.router.navigate(['']);\r\n    } else {\r\n      this.coordinatorService.startAll();\r\n      let address = this.route.snapshot.paramMap.get('address');\r\n      if (this.walletService.addressExists(address)) {\r\n        this.account = this.walletService.wallet.getAccount(address);\r\n      }\r\n      this.router.events\r\n        .pipe(filter((evt) => evt instanceof NavigationEnd))\r\n        .subscribe(() => {\r\n          address = this.route.snapshot.paramMap.get('address');\r\n          if (this.walletService.wallet && this.walletService.addressExists(address)) {\r\n            this.account = this.walletService.wallet.getAccount(address);\r\n          }\r\n        });\r\n        setInterval(() => this.trigger = !this.trigger, 10 * 1000);\r\n    }\r\n  }\r\n  getType(transaction: any): string {\r\n    if (transaction.type !== 'transaction') {\r\n      if (transaction.type === 'delegation') {\r\n        if (transaction.destination) {\r\n          return 'delegated';\r\n        } else {\r\n          return 'undelegated';\r\n        }\r\n      } else {\r\n        return transaction.type;\r\n      }\r\n    } else {\r\n      let operationType = '';\r\n      if (transaction.source === this.account.address) {\r\n        operationType = 'sent';\r\n      } else {\r\n        operationType = 'received';\r\n      }\r\n      return operationType;\r\n    }\r\n  }\r\n\r\n  getCounterparty(transaction: any): string {\r\n    return this.activityService.getCounterparty(transaction, this.account);\r\n  }\r\n  copy(account: Account) {\r\n    copy(account.address);\r\n    const copyToClipboard = this.translate.instant(\r\n      'OVERVIEWCOMPONENT.COPIEDTOCLIPBOARD'\r\n    );\r\n    this.messageService.add(account.address + ' ' + copyToClipboard, 5);\r\n  }\r\n  explorerURL(hash: string) {\r\n    const baseURL = this.CONSTANTS.NET.BLOCK_EXPLORER_URL;\r\n    return `${baseURL}/${hash}`;\r\n  }\r\n}\r\n\r\n","<app-header [activeAccount]=\"account\"></app-header>\r\n<div id=\"wrapper\" *ngIf=\"account\">\r\n  <div class=\"left-container\">\r\n    <div class=\"main-container small\">\r\n      <div class=\"top-container\">\r\n        <H1>Account Information</H1>\r\n      </div>\r\n      <div id=\"account-container\">\r\n        <div class=\"mid-container\">\r\n          <div class=\"address-container\">\r\n            <H2 style=\"margin-top: 0\">Address</H2>\r\n            <div class=\"icons\">\r\n              <img class=\"copy-icon\" src=\"../../../assets/img/copy-icon.svg\" (click)=\"copy(account)\">\r\n              <app-receive [activeAddress]=\"account.address\"></app-receive>\r\n            </div>\r\n          </div>\r\n          <span style=\"width: auto; font-size: 0.8125rem\">{{ account.address }}</span>\r\n          <H2>Balance</H2>\r\n          <div style=\"margin-top: 0\"><span>{{ account.balanceXTZ / 1000000 | number: \"1.0-6\" }} tez</span><span\r\n              class=\"mark\"></span><span class=\"grey\"\r\n              style=\"font-size: 0.75rem\">{{ account.balanceUSD | number: \"1.0-0\" }} USD</span></div>\r\n          <H2>Delegate</H2>\r\n          <app-delegate [activeAccount]=\"account\"></app-delegate>\r\n        </div>\r\n        <div class=\"bottom-container\">\r\n          <app-send [activeAccount]=\"account\"></app-send>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"main-container large\">\r\n    <div class=\"top-container\">\r\n      <H1 style=\"float:left\">Recent Activity</H1>\r\n      <a class=\"view-all\" href=\"{{ explorerURL(account.address) }}\" target=\"_blank\">View in explorer</a>\r\n    </div>\r\n    <div id=\"operations-container\" *ngIf=\"this.translate.store.translations.en\">\r\n      <ng-container *ngIf=\"!account.activities.length\">\r\n        <div class=\"line\"><span>No transactions yet</span></div>\r\n      </ng-container>\r\n      <ng-container *ngFor=\"let activity of account.activities | slice:0:5\">\r\n        <ng-container [ngSwitch]=\"getType(activity)\">\r\n          <ng-template #CounterpartyRef let-myactivity>\r\n            <span class=\"grey truncate-overflow\">\r\n              <ng-container *ngIf=\"myactivity.name; else elseBlock\">\r\n                <ng-container [ngSwitch]=\"myactivity.lookupType\">\r\n                  <img *ngSwitchCase=\"2\" height=\"12\" src=\"../../../assets/img/google-logo.svg\">\r\n                  <img *ngSwitchCase=\"3\" height=\"12\" src=\"../../../assets/img/reddit-logo.svg\">\r\n                  <img *ngSwitchCase=\"4\" height=\"12\" src=\"../../../assets/img/twitter-logo.svg\">\r\n                </ng-container>\r\n                &nbsp;{{ myactivity.name }}</ng-container>\r\n              <ng-template #elseBlock>{{ myactivity.address }}</ng-template>\r\n            </span>\r\n          </ng-template>\r\n          <div *ngSwitchCase=\"'sent'\" class=\"sent\">\r\n            <img src=\"../../../assets/img/sent.svg\">\r\n            <div>\r\n              <div class=\"line\"><span class=\"red\">Sent {{ activity.amount / 1000000 | number:'1.0-6' }} tez</span><a\r\n                  href=\"{{ explorerURL(activity.hash) }}\" target=\"_blank\">\r\n                  <ng-container *ngIf=\"activity.status > 0\">{{ activity.timestamp | timeAgo:trigger }}</ng-container>\r\n                  <ng-container *ngIf=\"activity.status === 0\">Unconfirmed</ng-container>\r\n                </a></div>\r\n              <div class=\"line\"><span class=\"grey\">To </span>\r\n              <ng-template [ngTemplateOutlet]=\"CounterpartyRef\" [ngTemplateOutletContext]=\"{ $implicit: getCounterparty(activity) }\"></ng-template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div *ngSwitchCase=\"'received'\" class=\"received\">\r\n            <img src=\"../../../assets/img/received.svg\">\r\n            <div>\r\n              <div class=\"line\"><span class=\"green\">Received {{ activity.amount / 1000000 | number:'1.0-6' }}\r\n                  tez</span><a href=\"{{ explorerURL(activity.hash) }}\" target=\"_blank\">\r\n                  <ng-container *ngIf=\"activity.status > 0\">{{ activity.timestamp | timeAgo:trigger }}</ng-container>\r\n                  <ng-container *ngIf=\"activity.status === 0\">Unconfirmed</ng-container>\r\n                </a></div>\r\n              <div class=\"line\"><span class=\"grey\">From </span>\r\n                <ng-template [ngTemplateOutlet]=\"CounterpartyRef\" [ngTemplateOutletContext]=\"{ $implicit: getCounterparty(activity) }\"></ng-template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div *ngSwitchCase=\"'delegated'\" class=\"delegated\">\r\n            <img src=\"../../../assets/img/delegated.svg\">\r\n            <div>\r\n              <div class=\"line\"><span class=\"blue\">Delegated</span><a href=\"{{ explorerURL(activity.hash) }}\"\r\n                  target=\"_blank\">\r\n                  <ng-container *ngIf=\"activity.status > 0\">{{ activity.timestamp | timeAgo:trigger }}</ng-container>\r\n                  <ng-container *ngIf=\"activity.status === 0\">Unconfirmed</ng-container>\r\n                </a></div>\r\n              <div class=\"line\"><span class=\"grey\">To </span>\r\n                <ng-template [ngTemplateOutlet]=\"CounterpartyRef\" [ngTemplateOutletContext]=\"{ $implicit: getCounterparty(activity) }\"></ng-template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div *ngSwitchCase=\"'undelegated'\" class=\"delegated\">\r\n            <img src=\"../../../assets/img/delegated.svg\">\r\n            <div>\r\n              <div class=\"line\"><span class=\"blue\">Undelegated</span><a href=\"{{ explorerURL(activity.hash) }}\"\r\n                  target=\"_blank\">\r\n                  <ng-container *ngIf=\"activity.status > 0\">{{ activity.timestamp | timeAgo:trigger }}</ng-container>\r\n                  <ng-container *ngIf=\"activity.status === 0\">Unconfirmed</ng-container>\r\n                </a></div>\r\n              <div class=\"line\"><span class=\"grey\">To </span>\r\n                <ng-template [ngTemplateOutlet]=\"CounterpartyRef\" [ngTemplateOutletContext]=\"{ $implicit: getCounterparty(activity) }\"></ng-template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div *ngSwitchDefault>\r\n            <div style=\"padding-left: 0.75rem\">\r\n              <div class=\"line\"><span class=\"black\">{{ getType(activity) | titlecase }}</span><a\r\n                  href=\"{{ explorerURL(activity.hash) }}\" target=\"_blank\">\r\n                  <ng-container *ngIf=\"activity.status > 0\">{{ activity.timestamp | timeAgo:trigger }}</ng-container>\r\n                  <ng-container *ngIf=\"activity.status === 0\">Unconfirmed</ng-container>\r\n                </a></div>\r\n              <div class=\"line\"><span class=\"grey\">Counterparty </span>\r\n                <ng-template [ngTemplateOutlet]=\"CounterpartyRef\" [ngTemplateOutletContext]=\"{ $implicit: getCounterparty(activity) }\"></ng-template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n      </ng-container>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit, HostListener, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport * as copy from 'copy-to-clipboard';\r\nimport { TranslateService } from '@ngx-translate/core'; // Multiple instances created ?\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { CoordinatorService } from '../../services/coordinator/coordinator.service';\r\nimport {\r\n  ImplicitAccount,\r\n  OriginatedAccount,\r\n  Account,\r\n  HdWallet,\r\n} from '../../services/wallet/wallet';\r\n\r\n@Component({\r\n  selector: 'app-accounts',\r\n  templateUrl: './accounts.component.html',\r\n  styleUrls: ['./accounts.component.scss']\r\n})\r\nexport class AccountsComponent implements OnInit {\r\n  wideAccounts = false;\r\n  implicitAccounts: ImplicitAccount[];\r\n  constructor(\r\n    public walletService: WalletService,\r\n    private router: Router,\r\n    private translate: TranslateService,\r\n    private messageService: MessageService,\r\n    private coordinatorService: CoordinatorService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (!this.walletService.wallet) {\r\n      this.router.navigate(['']);\r\n    } else {\r\n      this.onResize();\r\n      this.coordinatorService.startAll();\r\n      this.implicitAccounts = this.walletService.wallet.implicitAccounts;\r\n    }\r\n  }\r\n  copy(account: Account) {\r\n    copy(account.address);\r\n    const copyToClipboard = this.translate.instant(\r\n      'OVERVIEWCOMPONENT.COPIEDTOCLIPBOARD'\r\n    );\r\n    this.messageService.add(account.address + ' ' + copyToClipboard, 5);\r\n  }\r\n  select(account: Account) {\r\n    console.log('Selected: ' + account.address);\r\n    this.router.navigate(['account', account.address]);\r\n  }\r\n  @HostListener('window:resize')\r\n  onResize() {\r\n    this.wideAccounts = (window.innerWidth > 640);\r\n  }\r\n  formatAddress(account: Account) {\r\n    if (this.wideAccounts) {\r\n      return account.address;\r\n    } else {\r\n      return account.shortAddress();\r\n    }\r\n  }\r\n}\r\n","<app-header></app-header>\r\n<div id=\"wrapper\" *ngIf=\"walletService.wallet\">\r\n    <div class=\"main-container\">\r\n        <div id=\"top-container\">\r\n            <span id=\"title\">Accounts</span>\r\n            <app-new-implicit></app-new-implicit>\r\n        </div>\r\n        <div id=\"accounts-container\">\r\n            <ng-container *ngFor=\"let impAcc of implicitAccounts\">\r\n                <div class=\"account-container account-row\" (click)=\"select(impAcc)\">\r\n                    <div>\r\n                        <img class=\"account-icon\" src=\"../../../assets/img/account-icon.svg\">\r\n                        <span class=\"account-address\">{{ formatAddress(impAcc) }}</span>\r\n                        <img class=\"copy-icon\" src=\"../../../assets/img/copy-icon.svg\" (click)=\"$event.stopPropagation() ; copy(impAcc)\">\r\n                    </div>\r\n                    <div class=\"value-container\">\r\n                        <div class=\"values\">\r\n                            <span class=\"account-xtz\">{{ impAcc.balanceXTZ / 1000000 | number: \"1.0-6\"}} tez</span>\r\n                            <span *ngIf=\"impAcc.balanceXTZ\" class=\"account-usd\">{{ impAcc.balanceUSD | number: \"1.0-0\" }} USD</span>\r\n                        </div>\r\n                        <div>\r\n                        <!-- Todo: Add menu\r\n                            <img class=\"menu-icon\" src=\"../../../assets/img/menu-icon.svg\" (click)=\"$event.stopPropagation()\">\r\n                        -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"seperator\"></div>\r\n                <ng-container *ngFor=\"let origAcc of impAcc.originatedAccounts\">\r\n                    <div class=\"account-container account-row\" (click)=\"select(origAcc)\">\r\n                        <div>\r\n                            <img class=\"account-icon\" src=\"../../../assets/img/account-icon.svg\">\r\n                            <span class=\"account-address\">{{ formatAddress(origAcc) }}</span>\r\n                            <img class=\"copy-icon\" src=\"../../../assets/img/copy-icon.svg\" (click)=\"$event.stopPropagation() ; copy(origAcc)\">\r\n                        </div>\r\n                        <div class=\"value-container\">\r\n                            <div class=\"values\">\r\n                                <span class=\"account-xtz\">{{ origAcc.balanceXTZ / 1000000 | number: \"1.0-6\"}} tez</span>\r\n                                <span *ngIf=\"origAcc.balanceXTZ\" class=\"account-usd\">{{ origAcc.balanceUSD | number: \"1.0-0\" }} USD</span>\r\n                            </div>\r\n                            <div>\r\n                            <!--\r\n                                <img class=\"menu-icon\" src=\"../../../assets/img/menu-icon.svg\" (click)=\"$event.stopPropagation()\">  \r\n                            -->\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"seperator\"></div>\r\n                </ng-container>\r\n            </ng-container>\r\n            <div class=\"account-container value-total\">\r\n                <div class=\"value-container\">\r\n                    <div class=\"values\">\r\n                        <span class=\"account-xtz\">{{ walletService.wallet.totalBalanceXTZ / 1000000 | number: \"1.0-6\"}} tez</span>\r\n                        <span class=\"account-usd\">{{ walletService.wallet.totalBalanceUSD | number: \"1.0-0\" }} USD</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div *ngIf=\"!walletService.wallet\">Need to be logged in to view this page</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { OperationService } from '../../services/operation/operation.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n@Component({\r\n  selector: 'app-activate',\r\n  templateUrl: './activate.component.html',\r\n  styleUrls: ['./activate.component.scss']\r\n})\r\nexport class ActivateComponent implements OnInit {\r\n  pkh: string;\r\n  secret: string;\r\n  formInvalid = '';\r\n  constructor(\r\n    private messageService: MessageService,\r\n    private operationService: OperationService,\r\n    private inputValidationService: InputValidationService,\r\n    private translate: TranslateService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  activate() {\r\n    this.formInvalid = this.checkInput();\r\n    if (!this.formInvalid) {\r\n      const pkh = this.pkh;\r\n      const secret = this.secret;\r\n      this.pkh = '';\r\n      this.secret = '';\r\n      this.operationService.activate(pkh, secret).subscribe(\r\n        (ans: any) => {\r\n          if (ans.success) {\r\n            if (ans.payload.opHash) {\r\n              this.translate.get('ACTIVATECOMPONENT.ACTIVATESUCCESS').subscribe(\r\n                (res: string) => this.messageService.addSuccess(res)  // 'Activation successfully broadcasted to the blockchain!'\r\n              );\r\n            } else {\r\n              this.translate.get('ACTIVATECOMPONENT.RETRIEVEFAIL').subscribe(\r\n                (res: string) => this.messageService.addWarning(res)  // Could not retrieve an operation hash\r\n              );\r\n            }\r\n          } else {\r\n            let errorMessage = '';\r\n            if (typeof ans.payload.msg === 'string') {\r\n              errorMessage = 'NodeError ' + ans.payload.msg;\r\n            } else {\r\n              errorMessage = 'NodeError ' + JSON.stringify(ans.payload.msg);\r\n            }\r\n            this.messageService.addError(errorMessage);\r\n            console.log(JSON.stringify(ans.payload.msg));\r\n          }\r\n        },\r\n        err => {\r\n          this.translate.get('ACTIVATECOMPONENT.ACTIVATEFAIL').subscribe(\r\n            (res: string) => {\r\n              let errorMessage = '';\r\n              const activateFailed = res;\r\n              if (typeof err.payload.msg === 'string') {\r\n                errorMessage = activateFailed + ' ' + err.payload.msg;\r\n              } else {\r\n                errorMessage = activateFailed;\r\n              }\r\n              this.messageService.addError(errorMessage);\r\n            }  // 'Failed to activate wallet!'\r\n          );\r\n          console.log(JSON.stringify(err));\r\n        }\r\n      );\r\n    }\r\n  }\r\n  checkInput(): string {\r\n    if (!this.inputValidationService.address(this.pkh)) {\r\n      return 'Invalid public key hash!';\r\n    } else if (!this.inputValidationService.code(this.secret)) {\r\n      return 'Invalid activation code!';\r\n    }\r\n    return '';\r\n  }\r\n}\r\n","<div class=\"kukai-card\">\r\n    <H1>\r\n        Activate your ICO wallet\r\n    </H1>\r\n    <p class=\"description\">Wallets created during the fundraiser need to be activated. No private key is required for the activation process.</p>\r\n    <div class=\"grey-card\">\r\n      <small class=\"\">Your public key hash</small>\r\n      <input type=\"text\" class=\"text\" [(ngModel)]=\"pkh\" [placeholder]=\"'tz1...'\">\r\n      <small class=\"\">Your activation code</small>\r\n      <input type=\"text\" class=\"text\" [(ngModel)]=\"secret\" [placeholder]=\"'Code'\">\r\n      <div class=\"buttons\"><a routerLink=\"/import\"><button class=\"button back\">Back</button></a><button class=\"button next\" (click)=\"activate()\">Activate</button></div>\r\n      <span *ngIf=\"formInvalid\" class=\"text-danger\">\r\n          {{ formInvalid }}\r\n      </span>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Location } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-agreement',\r\n  templateUrl: './agreement.component.html',\r\n  styleUrls: ['./agreement.component.scss']\r\n})\r\nexport class AgreementComponent implements OnInit {\r\n  displayAgreement = false;\r\n  key = 'accepted-terms';\r\n  constructor(\r\n    private location: Location\r\n    ) { }\r\n  ngOnInit(): void {\r\n    // localStorage.removeItem(this.key);\r\n    const accepted = localStorage.getItem(this.key);\r\n    const path = this.location.path();\r\n    if (!accepted && path !== '/terms-of-use' && path !== '/privacy-policy') {\r\n      this.displayAgreement = true;\r\n      const scrollBarWidth = window.innerWidth - document.body.offsetWidth;\r\n      document.body.style.marginRight = scrollBarWidth.toString();\r\n      document.body.style.overflowY = 'hidden';\r\n    }\r\n  }\r\n  accept() {\r\n    localStorage.setItem(this.key, '1');\r\n    this.displayAgreement = false;\r\n    document.body.style.marginRight = '';\r\n    document.body.style.overflowY = '';\r\n  }\r\n  reject() {\r\n    document.body.style.marginRight = '';\r\n    document.body.style.overflowY = '';\r\n    window.open('', '_self');\r\n  }\r\n}\r\n","<div *ngIf=\"displayAgreement\" class=\"agreement-wrapper fade-in\">\r\n  <div class=\"agreement-body\">\r\n    <div class=\"agreement-footer fade-in\">\r\n      <p>By Accessing, Continuing to Use & Browse this Website including its Services provided therein (Kukai Wallet), you agree that you have read and reviewed our <a href=\"./terms-of-use\" target=\"_blank\">Terms of Use</a> and <a href=\"./privacy-policy\" target=\"_blank\">Privacy Policy</a>.</p>\r\n      <div><div class=\"accept\">\r\n        <button (click)=\"accept()\">Accept</button>\r\n        <p>I have reviewed the Terms of Use and Privacy Policy, I hereby Accept and Agree to the Terms of Use and Privacy Policy.</p>\r\n      </div>\r\n      <div>\r\n        <a href=\"about:blank\"><button>Decline</button></a>\r\n        <p>I have reviewed the Terms of Use and Privacy Policy, I hereby DO NOT Accept and Agree to the Terms of Use and Privacy Policy.</p>\r\n      </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-privacy-policy',\r\n  templateUrl: './privacy-policy.component.html',\r\n  styleUrls: ['./privacy-policy.component.scss']\r\n})\r\nexport class PrivacyPolicyComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"legal\">\r\n  <H1>Privacy Policy</H1>\r\n  <H5>Introduction</H5>\r\n  <p>Kukai Wallet (hereinafter Kukai we our us) is committed to ensuring the privacy of all our users. We take\r\n    our duty to process your personal data very seriously. This policy represents our commitment to your right to\r\n    privacy, giving you a clear explanation about how we use your information and your rights over that information. We\r\n    strive to be complaint with any data or privacy laws and regulations such as the California Consumer Privacy Act\r\n    (CCPA) and General Data Protection and Regulation (GDPR).</p>\r\n\r\n  <p>It's possible to use https://kukai.app/ (hereinafter website) without submitting any personal information. </p>\r\n\r\n  <H5>Scope of Privacy Policy</H5>\r\n  <p>This privacy policy applies only to your use of our website. Our website and Services may contain links to other\r\n    websites posted by members via images, content such as videos, links to other websites which are not hosted by us.\r\n    Please note that we have no control over how your data is collected, stored, or used by other websites or service\r\n    providers and we advise you to check the privacy policies of any such website(s) before providing any data to them.\r\n  </p>\r\n\r\n  <p>What types of information do we collect and how?\r\n  <p>The type and amount of information we receive and store depends on how you use the website and Services. We do not\r\n    store any information as all data is localized on the Users computer or device. You can access the website and\r\n    Services without telling us who you are and without revealing any personal information.</p>\r\n\r\n  <p>Data protection laws require us to have a legal justification to process your personal information. We do not\r\n    collect any personally identifiable data from Users, nor do we store or maintain any of such data. All data is\r\n    localized on the Users computer or device.</p>\r\n\r\n  <H5>Sharing of data</H5>\r\n  <p>In some circumstances your information may be shared with us by third parties, but only where you have specifically\r\n    consented.</p>\r\n\r\n  <p>We never sell user information to anyone.</p>\r\n\r\n  <H6>In order to operate the site, the following data sharing occurs:</H6>\r\n\r\n  <p>Our tech-related service providers may necessarily have access to user data, and could collect/store data beyond\r\n    what Kukai Wallet itself does. Third Party Service providers may or may not include, and are not limited to:\r\n    CoinGecko, Nautilus Cloud, and Tezos Giga Node. Please refer to their respective privacy policies and data\r\n    collection policies.</p>\r\n\r\n  <H5>Other sharing</H5>\r\n  <p>We may also share your personal information with your permission, or if we are legally required to disclose your\r\n    information in circumstances where this cannot be reasonably resisted.</p>\r\n\r\n  <H5>Legal obligation</H5>\r\n  <p>We will process your personal information to fulfil any legal obligations placed upon us, through a lawfully valid\r\n    legal order by a court of competent jurisdiction.</p>\r\n\r\n  <H5>Jurisdiction</H5>\r\n  <p>Our website and Services provided is under U.S. jurisdiction and is subject to U.S. subpoenas, wiretap orders,\r\n    preservation orders (which would negate the above retention rules), and similar. Furthermore, our service\r\n    providers could also be subject to similar orders without our knowledge.</p>\r\n\r\n  <H5>Security</H5>\r\n  <p>We take appropriate security measures to ensure that we keep your limited information secure, accurate and up\r\n    to date. However the transmission of information over the Internet is never completely secure, so while we do\r\n    our best to protect personal information, we cannot guarantee the security of information transmitted to our\r\n    website.</p>\r\n\r\n  <H5>Hosting and processing arrangements</H5>\r\n  <p>Our website is hosted by third party service providers and therefore any personal details you submit through\r\n    them may be processed by that third party service provider. Please see the above for the third party service\r\n    providers.</p>\r\n\r\n  <H5>Retention Period For Data</H5>\r\n  <p>All User data is localized and retained by the Users computer or device. We do not retain any User\r\n    information.</p>\r\n\r\n  <H5>Complaints</H5>\r\n  <p>If you wish to lodge a complaint about our handling of your personal data please get in touch with us on the\r\n    details above with the details of your complaint; we aim to respond to all complaints within 14 working days.\r\n    All legal requests will be reviewed by our legal department and appropriate action will be taken. If you have a\r\n    legal request, please contact legal@kukai.app</p>\r\n\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-terms-of-use',\r\n  templateUrl: './terms-of-use.component.html',\r\n  styleUrls: ['./terms-of-use.component.scss']\r\n})\r\nexport class TermsOfUseComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"legal\">\r\n  <H1>TERMS OF USE</H1>\r\n  <p><i>Last Updated: June 30, 2020</i></p>\r\n  <p>IMPORTANT NOTICE: THIS AGREEMENT IS SUBJECT TO BINDING ARBITRATION AND A WAIVER OF CLASS ACTION RIGHTS AS DETAILED\r\n    IN SECTION 13. PLEASE READ THE AGREEMENT CAREFULLY.</p>\r\n\r\n  <H4>1. Acceptance of terms</H4>\r\n  <p>Kukai Wallet (hereinafter Kukai, we, us, or our) provides a platform for managing Tezos accounts, and\r\n    allowing ordinary websites and applications to interact with the blockchain network, while keeping the user in\r\n    control over what transactions they approve, through our website located at https://kukai.app/ (the Site), which\r\n    includes text, images, audio, code and other materials (collectively, the Content) and all of the features, and\r\n    services provided. The Site and any other features, tools, materials, or other services offered from time to time by\r\n    Kukai Wallet are referred to here as the Services. Please read these Terms of Use (the Terms) carefully before\r\n    using the Services. By using or otherwise accessing the Services, or clicking to accept or agree to these Terms\r\n    where that option is made available, you (1) accept and agree to these Terms, (2) consent to the collection, use,\r\n    disclosure and other handling of information as described in our Privacy Policy and (3) agree to any additional\r\n    terms, rules and conditions of participation issued by Kukai Wallet from time to time. If you do not agree to any of\r\n    the Terms, then you may not access or use the Content or Services.</p>\r\n\r\n  <H4>2. Modification of Terms of Use</H4>\r\n  <p>Except for Section 13, providing for arbitration and waiver of class action rights, Kukai Wallet reserves the\r\n    right, at its sole discretion, to modify or replace the Terms at any time without notice. We will always try to\r\n    provide advance notice, however, we reserve the right to modify or replace the Terms at our discretion. The most\r\n    current version of these Terms will be posted on our Site. You shall be responsible for reviewing and becoming\r\n    familiar with any such modifications. Use of the Services by you after any modification to the Terms constitutes\r\n    your acceptance of the Terms as modified.</p>\r\n\r\n  <H4>3. Eligibility</H4>\r\n  <p>You hereby represent and warrant that you are fully able and competent to enter into the terms, conditions,\r\n    obligations, affirmations, representations and warranties set forth in these Terms and to abide by and comply with\r\n    these Terms.</p>\r\n\r\n  <p>Kukai Wallet is a global platform and by accessing the Content or Services, you are representing and warranting\r\n    that you are of the legal age of majority in your jurisdiction as is required to access such Services and Content\r\n    and enter into arrangements as provided by the Services. You further represent that you are otherwise legally\r\n    permitted to use the service in your jurisdiction including owning cryptographic tokens of value, and interacting\r\n    with the Services or Content in any way. You further represent you are responsible for ensuring compliance with the\r\n    laws of your jurisdiction and acknowledge that Kukai Wallet is not liable for your compliance with such laws.</p>\r\n\r\n  <p>In addition, you represent to us that you and your financial institutions, or any party that owns or controls you\r\n    or your financial institutions, are (1) not subject to sanctions or otherwise designated on any list of prohibited\r\n    or restricted parties, including but not limited to the lists maintained by the United Nations Security Council, the\r\n    U.S. Government (e.g., the Specially Designated Nationals List and Foreign Sanctions Evaders List of the U.S.\r\n    Department of Treasury and the Entity List of the U.S. Department of Commerce), the European Union or its Member\r\n    States, or other applicable government authority and (2) not located in any country to which the United States has\r\n    embargoed goods or has otherwise applied any sanctions.</p>\r\n\r\n  <H4>4. Account Password and Security</H4>\r\n  <p>When setting up an account within Kukai Wallet, you will be responsible for keeping your own account secrets, which\r\n    may be a word seed phrase, an account file, or other locally stored secret information. Kukai Wallet encrypts this\r\n    information locally with a password you provide, that we never send to our servers. You agree to (a) never use the\r\n    same password for Kukai Wallet that you have ever used outside of this service, (b) keep your secret information and\r\n    password confidential and do not share them with anyone else and (c) immediately notify Kukai Wallet of any\r\n    unauthorized use of your account or breach of security. Kukai Wallet cannot and will not be liable for any loss or\r\n    damage arising from your failure to comply with this section.\r\n\r\n  <H4>5. DISCLAIMERS- RISKS</H4>\r\n\r\n  <H5>5.1. Warranty Disclaimer</H5>\r\n  <p>You expressly understand and agree that your use of the Services is at your sole risk. The Services (including the\r\n    Site and the Content) are provided on an as is and as available basis, without warranties of any kind, either\r\n    express or implied, including, without limitation, implied warranties of merchantability, fitness for a particular\r\n    purpose or non-infringement. You acknowledge that Kukai Wallet has no control over, and no duty to take any action\r\n    regarding: which users gain access to or use the Services; what effects the Content may have on you; how you may\r\n    interpret or use the Content; or what actions you may take as a result of having been exposed to the Content. You\r\n    release Kukai Wallet from any and all liability for you having acquired or not acquired Content through the\r\n    Services. Kukai Wallet makes no representations concerning any Content contained in or accessed through the\r\n    Services, and Kukai Wallet will not be responsible or liable for the accuracy, copyright compliance, legality or\r\n    decency of material contained in or accessed through the Services.</p>\r\n\r\n  <p>We do not represent or warrant that access to the Services will be continuous, uninterrupted, timely or secure. You\r\n    acknowledge and accept that the Services (a) may contain bugs, errors and defects, (b) may function improperly or be\r\n    subject to periods of downtime and unavailability, (c) may result in total or partial loss or corruption of data and\r\n    (d) may be modified at any time, including through the release of subsequent versions, all with or without notice to\r\n    you.</p>\r\n\r\n  <p>You acknowledge that Kukai Wallet is not responsible for transferring, safeguarding, or maintaining your private\r\n    keys or any digital currency associated therewith. If you lose, mishandle or have stolen associated digital currency\r\n    private keys, you acknowledge that you may not be able to recover associated digital currency, and that Kukai Wallet\r\n    is not responsible for such loss. You acknowledge that Kukai Wallet is not responsible for any loss, damage or\r\n    liability arising from your failure to comply with the terms hereunder.</p>\r\n\r\n  <H5>5.2 Sophistication and Risk of Cryptographic Systems</H5>\r\n  <p>By utilizing the Services or interacting with the Content or platform in any way, you represent that you understand\r\n    the inherent risks associated with cryptographic systems; and warrant that you have an understanding of the usage\r\n    and intricacies of the native cryptographic token Tezos (xtz), smart contract based tokens, and blockchain-based\r\n    software systems.</p>\r\n\r\n  <H5>5.3 Risk of Regulatory Actions in One or More Jurisdictions</H5>\r\n  <p>Kukai Wallet and any supported cryptographic token and blockchain could be impacted by one or more regulatory\r\n    inquiries or regulatory action, which could impede or limit the ability of Kukai Wallet to continue to develop, or\r\n    which could impede or limit your ability to access or use the Services or the underlying blockchain network.</p>\r\n\r\n  <H5>5.4 Risk of Weaknesses or Exploits in the Field of Cryptography</H5>\r\n  <p>You acknowledge and understand that Cryptography is a progressing field. Advances in code cracking or technical\r\n    advances such as the development of quantum computers may present risks to cryptocurrencies and Services of Content,\r\n    which could result in the theft or loss of your cryptographic tokens or property. To the extent possible, Kukai\r\n    Wallet intends to update the protocol underlying Services to account for any advances in cryptography and to\r\n    incorporate additional security measures, but does not guarantee or otherwise represent full security of the system.\r\n    By using the Services or accessing Content, you acknowledge these inherent risks.</p>\r\n\r\n  <H5>5.5 Volatility of Cryptocurrencies</H5>\r\n  <p>You understand that Tezos and other blockchain technologies and associated cryptographic tokens are highly volatile\r\n    due to many factors including but not limited to adoption, speculation, technology and security risks. You also\r\n    acknowledge that the cost of transacting on such technologies is variable and may increase at any time causing\r\n    impact to any activities taking place on the blockchain network. You acknowledge these risks and agree that Kukai\r\n    Wallet cannot be held liable for such fluctuations or increased costs.</p>\r\n\r\n  <H5>5.6 Application Security</H5>\r\n  <p>You further acknowledge that blockchain applications are code subject to flaws and acknowledge that you are solely\r\n    responsible for evaluating any code provided by the Services or Content and the trustworthiness of any third-party\r\n    websites, products, smart-contracts, or Content you access or use through the Services. You further expressly\r\n    acknowledge and represent that blockchain applications can be written maliciously or negligently, that Kukai Wallet\r\n    cannot be held liable for your interaction with such applications and that such applications may cause the loss of\r\n    property or even identity. This warning and others later provided by Kukai Wallet in no way evidence or represent an\r\n    on-going duty to alert you to all of the potential risks of utilizing the Services or Content. The code to Kukai\r\n    Wallet can be found at: https://github.com/kukai-wallet/kukai.</p>\r\n\r\n  <H4>6. Indemnity</H4>\r\n  <p>You agree to release and to indemnify, defend and hold harmless Kukai Wallet and its principles, subsidiaries,\r\n    affiliates and agencies, as well as the officers, directors, employees, shareholders and representatives of any of\r\n    the foregoing entities, from and against any and all losses, liabilities, expenses, damages, costs (including\r\n    attorneys fees and court costs) claims or actions of any kind whatsoever arising or resulting from your use of the\r\n    Services, your violation of these Terms, and any of your acts or omissions that implicate publicity rights,\r\n    defamation or invasion of privacy, and privacy laws. Kukai Wallet reserves the right, at its own expense, to assume\r\n    exclusive defense and control of any matter otherwise subject to indemnification by you and, in such case, you agree\r\n    to cooperate with Kukai Wallet in the defense of such matter.</p>\r\n\r\n  <H4>7. Limitation on Liability</H4>\r\n  <p>YOU ACKNOWLEDGE AND AGREE THAT YOU ASSUME FULL RESPONSIBILITY FOR YOUR USE OF THE SITE AND THE SERVICES. YOU\r\n    ACKNOWLEDGE AND AGREE THAT ANY INFORMATION YOU SEND OR RECEIVE DURING YOUR USE OF THE SITE AND THE SERVICES MAY NOT\r\n    BE SECURE AND MAY BE INTERCEPTED OR LATER ACQUIRED BY UNAUTHORIZED PARTIES. YOU ACKNOWLEDGE AND AGREE THAT YOUR USE\r\n    OF THE SITE AND THE SERVICES IS AT YOUR OWN RISK. RECOGNIZING SUCH, YOU UNDERSTAND AND AGREE THAT, TO THE FULLEST\r\n    EXTENT PERMITTED BY APPLICABLE LAW, NEITHER KUKAI WALLET NOR ITS SUPPLIERS OR LICENSORS WILL BE LIABLE TO YOU FOR\r\n    ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, PUNITIVE, EXEMPLARY OR OTHER DAMAGES OF ANY KIND,\r\n    INCLUDING WITHOUT LIMITATION DAMAGES FOR LOSS OF PROFITS, GOODWILL, USE, DATA OR OTHER TANGIBLE OR INTANGIBLE LOSSES\r\n    OR ANY OTHER DAMAGES BASED ON CONTRACT, TORT, STRICT LIABILITY OR ANY OTHER THEORY (EVEN IF KUKAI WALLET HAD BEEN\r\n    ADVISED OF THE POSSIBILITY OF SUCH DAMAGES), RESULTING FROM THE SITE OR SERVICES; THE USE OR THE INABILITY TO USE\r\n    THE SITE OR THE SERVICES; UNAUTHORIZED ACCESS TO OR ALTERATION OF YOUR TRANSMISSIONS OR DATA; STATEMENTS OR CONDUCT\r\n    OF ANY THIRD PARTY ON THE SITE OR THE SERVICES; ANY ACTIONS WE TAKE OR FAIL TO TAKE AS A RESULT OF COMMUNICATIONS\r\n    YOU SEND TO US; HUMAN ERRORS; TECHNICAL MALFUNCTIONS; FAILURES, INCLUDING PUBLIC UTILITY OR TELEPHONE OUTAGES;\r\n    OMISSIONS, INTERRUPTIONS, LATENCY, DELETIONS OR DEFECTS OF ANY DEVICE OR NETWORK, PROVIDERS, OR SOFTWARE (INCLUDING,\r\n    BUT NOT LIMITED TO, THOSE THAT DO NOT PERMIT PARTICIPATION IN THE SERVICES); ANY INJURY OR DAMAGE TO COMPUTER\r\n    EQUIPMENT; INABILITY TO FULLY ACCESS THE SITE OR THE SERVICES OR ANY OTHER WEBSITE; THEFT, TAMPERING, DESTRUCTION,\r\n    OR UNAUTHORIZED ACCESS TO, IMAGES OR OTHER CONTENT OF ANY KIND; DATA THAT IS PROCESSED LATE OR INCORRECTLY OR IS\r\n    INCOMPLETE OR LOST; TYPOGRAPHICAL, PRINTING OR OTHER ERRORS, OR ANY COMBINATION THEREOF; OR ANY OTHER MATTER\r\n    RELATING TO THE SITE OR ANY OTHER ASPECT OF THE SERVICES.</p>\r\n\r\n  <p>SOME JURISDICTIONS DO NOT ALLOW THE EXCLUSION OF CERTAIN WARRANTIES OR THE LIMITATION OR EXCLUSION OF LIABILITY FOR\r\n    INCIDENTAL OR CONSEQUENTIAL DAMAGES. ACCORDINGLY, SOME OF THE ABOVE LIMITATIONS MAY NOT APPLY TO YOU.</p>\r\n\r\n  <H4>8. Intellectual Property</H4>\r\n  <H5>8.1 Our Proprietary Rights</H5>\r\n  <p>All title, ownership and intellectual property rights in and to the Services are owned by Kukai Wallet or its\r\n    licensors. You acknowledge and agree that the Services contains proprietary and confidential information that is\r\n    protected by applicable intellectual property and other laws. Except as expressly authorized by Kukai Wallet, you\r\n    agree not to copy, modify, rent, lease, loan, sell, distribute, perform, display or create derivative works based on\r\n    the Site, or the Services, in whole or in part.</p>\r\n\r\n  <H5>8.2 Limited License</H5>\r\n  <p>We grant you limited, non-exclusive, revocable permission to make use of the Site, and the Services (collectively\r\n    referred to as, Access). This Access shall remain in effect until and unless terminated by you or us. You promise\r\n    and agree that you will not redistribute or transfer the Services.</p>\r\n\r\n  <p>The Kukai Wallet software application, including without limitation the Site, and the Services, are not sold or\r\n    transferred to you, and Kukai Wallet and its licensors retain ownership of all copies of the software applications\r\n    even after installation on your personal computers, mobile handsets, tablets, wearable devices, speakers and/or\r\n    other devices (Devices).</p>\r\n\r\n  <p>All Kukai Wallet trademarks, service marks, trade names, logos, domain names, and any other features of the Kukai\r\n    Wallet brand (Kukai Wallet Brand Features) are the sole property of Kukai Wallet or its licensors. The Terms do\r\n    not grant you any rights to use any Kukai Wallet Brand Features whether for commercial or non-commercial use.</p>\r\n\r\n  <p>You agree to abide by our user guidelines and not to use the Services or any part thereof in any manner not\r\n    expressly permitted by the Terms. Except for the rights expressly granted to you in the Terms, Kukai Wallet grants\r\n    no right, title, or interest to you in the Site or the Services.</p>\r\n\r\n  <p>Third party software (for example, open source software libraries) included in the Services are made available to\r\n    you under the relevant third party software librarys license terms.</p>\r\n\r\n  <p>Notwithstanding anything herein to the contrary, nothing in the Terms entitles you to copy, modify, fork, merge,\r\n    combine with another program or create a derivative work of the Services, including without limitation the Site.</p>\r\n\r\n  <H4>9. Links</H4>\r\n  <p>The Services provide, or third parties may provide, links to other World Wide Web or accessible sites, applications\r\n    or resources. Because Kukai Wallet has no control over such sites, applications and resources, you acknowledge and\r\n    agree that Kukai Wallet is not responsible for the availability of such external sites, applications or resources,\r\n    and does not endorse and is not responsible or liable for any content, advertising, products or other materials on\r\n    or available from such sites or resources. You further acknowledge and agree that Kukai Wallet shall not be\r\n    responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in\r\n    connection with use of or reliance on any such content, goods or services available on or through any such site or\r\n    resource.</p>\r\n\r\n  <H4>10. Termination and Suspension</H4>\r\n  <p>Kukai Wallet may terminate or suspend all or part of the Services and your Kukai Wallet access immediately, without\r\n    prior notice or liability, if you breach any of the terms or conditions of the Terms. Upon termination of your\r\n    access, your right to use the Services will immediately cease.</p>\r\n\r\n  <p>The following provisions of the Terms survive any termination of these Terms: INDEMNITY; WARRANTY DISCLAIMERS;\r\n    LIMITATION ON LIABILITY; OUR PROPRIETARY RIGHTS; LINKS; TERMINATION; NO THIRD PARTY BENEFICIARIES; BINDING\r\n    ARBITRATION AND CLASS ACTION WAIVER; GENERAL INFORMATION.</p>\r\n\r\n  <H4>11. No Third Party Beneficiaries</H4>\r\n  <p>You agree that, except as otherwise expressly provided in these Terms, there shall be no third party beneficiaries\r\n    to the Terms.</p>\r\n\r\n  <H4>12. Notice and Procedure For Making Claims of Copyright Infringement</H4>\r\n  <p>If you believe that your copyright or the copyright of a person on whose behalf you are authorized to act has been\r\n    infringed, please provide Kukai Wallets Copyright Agent a written Notice containing the following information:</p>\r\n\r\n  <p>- an electronic or physical signature of the person authorized to act on behalf of the owner of the copyright or\r\n    other intellectual property interest;\r\n    <BR>- a description of the copyrighted work or other intellectual property that you claim has been infringed;\r\n    <BR>- a description of where the material that you claim is infringing is located on the Services;\r\n    your address, telephone number, and email address;\r\n    <BR>- a statement by you that you have a good faith belief that the disputed use is not authorized by the copyright\r\n    owner, its agent, or the law;\r\n    <BR>- a statement by you, made under penalty of perjury, that the above information in your Notice is accurate and\r\n    that you are the copyright or intellectual property owner or authorized to act on the copyright or intellectual\r\n    property owners behalf.</p>\r\n\r\n  <p>Kukai Wallets Copyright Agent can be reached at:</p>\r\n\r\n  <p>Email: legal@kukai.app</p>\r\n\r\n  <H4>13. Binding Arbitration and Class Action Waiver</H4>\r\n\r\n  <p>PLEASE READ THIS SECTION CAREFULLY  IT MAY SIGNIFICANTLY AFFECT YOUR LEGAL RIGHTS, INCLUDING YOUR RIGHT TO FILE A\r\n    LAWSUIT IN COURT</p>\r\n\r\n  <H5>13.1 Initial Dispute Resolution</H5>\r\n\r\n  <p>The parties shall use their best efforts to engage directly to settle any dispute, claim, question, or disagreement\r\n    and engage in good faith negotiations which shall be a condition to either party initiating a lawsuit or\r\n    arbitration.</p>\r\n\r\n  <H5>13.2 Binding Arbitration</H5>\r\n\r\n  <p>If the parties do not reach an agreed upon solution within a period of 30 days from the time informal dispute\r\n    resolution under the Initial Dispute Resolution provision begins, then either party may initiate arbitration as the\r\n    sole means to resolve all claims, subject to the terms set forth below. Specifically, all claims arising out of or\r\n    relating to these Terms (including their formation, performance and breach), the parties relationship with each\r\n    other and/or your use of the Services shall be finally settled by binding arbitration administered by the American\r\n    Arbitration Association in accordance with the provisions of its Commercial Arbitration Rules and the supplementary\r\n    procedures for consumer related disputes of the American Arbitration Association (the AAA), excluding any rules or\r\n    procedures governing or permitting class actions.</p>\r\n\r\n  <p>The arbitrator, and not any federal, state or local court or agency, shall have exclusive authority to resolve all\r\n    disputes arising out of or relating to the interpretation, applicability, enforceability or formation of these\r\n    Terms, including, but not limited to any claim that all or any part of these Terms are void or voidable, or whether\r\n    a claim is subject to arbitration. The arbitrator shall be empowered to grant whatever relief would be available in\r\n    a court under law or in equity. The arbitrators award shall be written, and binding on the parties and may be\r\n    entered as a judgment in any court of competent jurisdiction.</p>\r\n\r\n  <p>The parties understand that, absent this mandatory provision, they would have the right to sue in court and have a\r\n    jury trial. They further understand that, in some instances, the costs of arbitration could exceed the costs of\r\n    litigation and the right to discovery may be more limited in arbitration than in court.</p>\r\n\r\n  <H5>13.3 Location</H5>\r\n\r\n  <p>Binding arbitration shall take place in Louisiana. You agree to submit to the personal jurisdiction of any federal\r\n    or state court in Orleans Parish, Louisiana, in order to compel arbitration, to stay proceedings pending\r\n    arbitration, or to confirm, modify, vacate or enter judgment on the award entered by the arbitrator.</p>\r\n\r\n  <H5>13.4 Class Action Waiver</H5>\r\n\r\n  <p>The parties further agree that any arbitration shall be conducted in their individual capacities only and not as a\r\n    class action or other representative action, and the parties expressly waive their right to file a class action or\r\n    seek relief on a class basis. YOU AND KUKAI WALLET AGREE THAT EACH MAY BRING CLAIMS AGAINST THE OTHER ONLY IN YOUR\r\n    OR ITS INDIVIDUAL CAPACITY, AND NOT AS A PLAINTIFF OR CLASS MEMBER IN ANY PURPORTED CLASS OR REPRESENTATIVE\r\n    PROCEEDING. If any court or arbitrator determines that the class action waiver set forth in this paragraph is void\r\n    or unenforceable for any reason or that an arbitration can proceed on a class basis, then the arbitration provision\r\n    set forth above shall be deemed null and void in its entirety and the parties shall be deemed to have not agreed to\r\n    arbitrate disputes.</p>\r\n\r\n  <H5>13.5 Exception - Litigation of Intellectual Property and Small Claims Court Claims</H5>\r\n\r\n  <p>Notwithstanding the parties decision to resolve all disputes through arbitration, either party may bring an action\r\n    in state or federal court to protect its intellectual property rights (intellectual property rights means patents,\r\n    copyrights, moral rights, trademarks, and trade secrets, but not privacy or publicity rights). Either party may also\r\n    seek relief in a small claims court for disputes or claims within the scope of that courts jurisdiction.</p>\r\n\r\n  <H5>13.6 Choice of Law</H5>\r\n\r\n  <p>The Terms and the relationship between you and Kukai Wallet shall be governed by the laws of the State of Louisiana\r\n    without regard to conflict of law provisions.</p>\r\n\r\n  <H4>14. GENERAL INFORMATION</H4>\r\n\r\n  <H5>14.1 Entire Agreement</H5>\r\n\r\n  <p>These Terms (and any additional terms, rules and conditions of participation that Kukai Wallet may post on the\r\n    Services) constitute the entire agreement between you and Kukai Wallet with respect to the Services and supersedes\r\n    any prior agreements, oral or written, between you and Kukai Wallet. In the event of a conflict between these Terms\r\n    and the additional terms, rules and conditions of participation, the latter will prevail over the Terms to the\r\n    extent of the conflict.</p>\r\n\r\n  <H5>14.2 Waiver and Severability of Terms</H5>\r\n\r\n  <p>The failure of Kukai Wallet to exercise or enforce any right or provision of the Terms shall not constitute a\r\n    waiver of such right or provision. If any provision of the Terms is found by an arbitrator or court of competent\r\n    jurisdiction to be invalid, the parties nevertheless agree that the arbitrator or court should endeavor to give\r\n    effect to the parties intentions as reflected in the provision, and the other provisions of the Terms remain in\r\n    full force and effect.</p>\r\n\r\n  <H5>14.3 Statute of Limitations</H5>\r\n\r\n  <p>You agree that regardless of any statute or law to the contrary, any claim or cause of action arising out of or\r\n    related to the use of the Services or the Terms must be filed within one (1) year after such claim or cause of\r\n    action arose or be forever barred.</p>\r\n\r\n  <H5>14.4 Section Titles</H5>\r\n\r\n  <p>The section titles in the Terms are for convenience only and have no legal or contractual effect.</p>\r\n\r\n  <H5>14.5 Communications</H5>\r\n\r\n  <p>Users with questions, complaints or claims with respect to the Services may contact us using the relevant contact\r\n    information set forth above or email us at: contact@kukai.app</p>\r\n</div>","<div class=\"kukai-card\">\r\n    <H1>Connect with your Ledger Nano S</H1>\r\n    <div class=\"grey-card\">\r\n      <p class=\"description bold\">Keep the private keys safely on your Ledger device and use Kukai to access the Tezos\r\n          blockchain.</p>\r\n      <p class=\"description\">You need to open the Tezos Wallet app on your Ledger device and set the derivation path.</p>\r\n      <input type=\"text\" class=\"text\" [disabled]=\"!isHDDerivationPathCustom\" [(ngModel)]=\"path\"\r\n          value=\"'44\\'/1729\\'/0\\'/0\\''\">\r\n      <small>Use custom HD derivation path</small>\r\n      <div class=\"switch-container\">\r\n          <label class=\"switch\">\r\n              <input type=\"checkbox\" [(ngModel)]=\"isHDDerivationPathCustom\" (click)=\"setDefaultPath()\">\r\n              <span class=\"slider round\"></span>\r\n          </label><span class=\"switch-desc\">\r\n              <ng-container *ngIf=\"!isHDDerivationPathCustom\">Off</ng-container>\r\n              <ng-container *ngIf=\"isHDDerivationPathCustom\">On</ng-container>\r\n          </span>\r\n      </div>\r\n      <div class=\"buttons\">\r\n          <a routerLink=\"/\"><button class=\"button back\">Back</button></a>\r\n          <button class=\"button next\" (click)=\"getPk()\">Connect</button>\r\n      </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Constants } from '../../constants';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { LedgerService } from '../../services/ledger/ledger.service';\r\nimport { ImportService } from '../../services/import/import.service';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { utils } from '@tezos-core-tools/crypto-utils';\r\n\r\n@Component({\r\n  selector: 'app-connect-ledger',\r\n  templateUrl: './connect-ledger.component.html',\r\n  styleUrls: ['./connect-ledger.component.scss']\r\n})\r\nexport class ConnectLedgerComponent implements OnInit {\r\n  activePanel = 0;\r\n  CONSTANTS = new Constants();\r\n  defaultPath = '44\\'/1729\\'/0\\'/0\\'';\r\n  defaultText = 'Default derivation path';\r\n  path: string;\r\n  pendingLedgerConfirmation = false;\r\n  isHDDerivationPathCustom = false;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private ledgerService: LedgerService,\r\n    private importService: ImportService,\r\n    private messageService: MessageService,\r\n    private inputValidationService: InputValidationService,\r\n    private walletService: WalletService\r\n    ) { }\r\n\r\n  ngOnInit() {\r\n    this.path = this.defaultText;\r\n  }\r\n  async getPk() {\r\n    const path: string = this.path.replace(this.defaultText, this.defaultPath);\r\n    if (this.inputValidationService.derivationPath(path)) {\r\n      this.pendingLedgerConfirmation = true;\r\n      try {\r\n        this.messageService.startSpinner('Waiting for Ledger confirmation...');\r\n        const pk = await this.ledgerService.getPublicAddress(path);\r\n        console.log('getPK => ' + pk);\r\n        await this.importFromPk(pk, path);\r\n      } catch (e) {\r\n        throw(e);\r\n      } finally {\r\n        this.pendingLedgerConfirmation = false;\r\n        this.messageService.stopSpinner();\r\n      }\r\n    } else {\r\n      this.messageService.addWarning('Invalid derivation path');\r\n    }\r\n  }\r\n  async importFromPk(pk: string, path: string) {\r\n    if (utils.validPublicKey(pk)) {\r\n      if (await this.importService.importWalletFromPk(pk, path)) {\r\n        if (this.walletService.wallet.implicitAccounts.length === 1 && this.walletService.wallet.implicitAccounts[0].originatedAccounts.length === 0) {\r\n          this.router.navigate([`/account/${this.walletService.wallet.implicitAccounts[0].address}`]);\r\n        } else {\r\n          this.router.navigate(['/accounts']);\r\n        }\r\n      } else {\r\n        this.messageService.addError('Failed to import Ledger wallet');\r\n      }\r\n    } else {\r\n      this.messageService.addError('Not a valid public key');\r\n    }\r\n  }\r\n  setDefaultPath() {\r\n    if (this.isHDDerivationPathCustom) {\r\n      this.path = this.defaultText;\r\n    } else {\r\n      this.path = this.defaultPath;\r\n    }\r\n  }\r\n}\r\n","<div class=\"outside-container\" *ngIf=\"!beaconMode\">\r\n  <span *ngIf=\"!activeAccount.delegate\">No delegate set <span (click)=\"openModal()\">(Choose a baker)</span></span>\r\n  <span *ngIf=\"activeAccount.delegate\">{{ activeAccount.delegate }} <span (click)=\"openModal()\">(Change&nbsp;baker)</span></span>\r\n</div>\r\n<!-- The Modal -->\r\n<div *ngIf=\"modalOpen\" id=\"myModal\" class=\"kukai-modal\" [class.top]=\"beaconMode\">\r\n  <!-- Modal content -->\r\n  <div class=\"km-content\">\r\n    <div class=\"x\" (click)=\"closeModalAction()\"><img src=\"../../../assets/img/x.svg\"></div>\r\n    <div class=\"km-header\">\r\n      <H1>Delegate (Choose a baker)</H1>\r\n    </div>\r\n    <!-- Prepare delegation -->\r\n    <div class=\"km-body\" *ngIf=\"activeView === 0\">\r\n      <div class=\"group\">\r\n        <label>Current Account Address</label>\r\n        <p>{{ activeAccount.address }}</p>\r\n      </div>\r\n      <div class=\"group\">\r\n        <label>Delegate to Baker Address</label>\r\n        <input #toPkhInput type=\"text\" class=\"text\" [(ngModel)]=\"toPkh\" [disabled]=\"beaconMode\">\r\n      </div>\r\n      <div class=\"group\">\r\n        <label>Fee (tez)</label>\r\n        <input type=\"text\" class=\"text\" [(ngModel)]=\"fee\" placeholder={{this.recommendedFee.toString()}}>\r\n      </div>\r\n      <span *ngIf=\"formInvalid\" class=\"danger no-margin\">\r\n        {{ formInvalid }}\r\n      </span>\r\n      <button class=\"blue\" (click)=\"openModal2()\">Preview</button>\r\n    </div>\r\n    <!-- Confirm transaction -->\r\n    <div class=\"km-body\" *ngIf=\"activeView === 1\">\r\n      <p class=\"preview\">\r\n        Current Account Address  {{ activeAccount.address }}\r\n      </p>\r\n      <p *ngIf=\"getDelegate()\" class=\"preview\">\r\n        Delegate to Baker Address  {{ getDelegate() | delegatorName }}\r\n      </p>\r\n      <p *ngIf=\"!getDelegate()\" class=\"preview\">\r\n        Withdraw delegation\r\n      </p>\r\n      <p class=\"preview\">\r\n        Fee  {{ getFee() | number:'1.0-6' }} tez\r\n      </p>\r\n      <div class=\"row-group\" style=\"margin: 1.25rem 0 1.5rem;\">\r\n        <input *ngIf=\"!walletService.isLedgerWallet() && !walletService.isTorusWallet()\" [(ngModel)]=\"password\" placeholder=\"Password\" autocomplete=\"current-password\" class=\"text password\" type=\"password\" (input)=\"this.pwdValid = ''\" (change)=\"this.pwdValid = ''\">\r\n        <button *ngIf=\"walletService.isLedgerWallet() && ledgerError; else elseBlock\" class=\"retry\" (click)=\"ledgerSign()\">Sign with Ledger</button>\r\n        <ng-template #elseBlock>\r\n          <button class=\"blue confirm\" (click)=\"inject()\" [disabled]=\"walletService.isLedgerWallet() && (!sendResponse || !sendResponse.payload || !sendResponse.payload.signedOperation)\">\r\n            {{ walletService.isLedgerWallet() ? 'Broadcast' : 'Confirm'}}</button>\r\n        </ng-template>\r\n      </div>\r\n      <span *ngIf=\"this.pwdValid\" class=\"danger margin\">{{ this.pwdValid }}</span>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, TemplateRef, OnInit, Input, ViewChild, ElementRef, Output, EventEmitter, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\n\r\nimport { KeyPair } from '../../interfaces';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { CoordinatorService } from '../../services/coordinator/coordinator.service';\r\nimport { OperationService } from '../../services/operation/operation.service';\r\nimport { ExportService } from '../../services/export/export.service';\r\nimport { DelegatorNamePipe } from '../../pipes/delegator-name.pipe';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { LedgerService } from '../../services/ledger/ledger.service';\r\nimport { Constants } from '../../constants';\r\nimport { LedgerWallet, Account, ImplicitAccount, OriginatedAccount, TorusWallet } from '../../services/wallet/wallet';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport Big from 'big.js';\r\n\r\n@Component({\r\n  selector: 'app-delegate',\r\n  templateUrl: './delegate.component.html',\r\n  styleUrls: ['./delegate.component.scss']\r\n})\r\nexport class DelegateComponent implements OnInit, OnChanges {\r\n  modalOpen = false;\r\n  activeView = 0;\r\n  recommendedFee = 0.0004;\r\n  revealFee = 0;\r\n  pkhFee = 0.0004;\r\n  ktFee = 0.0008;\r\n  @ViewChild('toPkhInput') toPkhView: ElementRef;\r\n  @Input() beaconMode = false;\r\n  @Input() operationRequest: any;\r\n  @Output() operationResponse = new EventEmitter();\r\n  CONSTANTS = new Constants();\r\n  @Input() activeAccount: Account;\r\n  implicitAccounts;\r\n  toPkh: string;\r\n  storedDelegate: string;\r\n  fee: string;\r\n  storedFee: string;\r\n  password: string;\r\n  pwdValid: string;\r\n  formInvalid = '';\r\n  sendResponse: any;\r\n  ledgerError = '';\r\n  modalRef1: BsModalRef;\r\n  modalRef2: BsModalRef;\r\n  modalRef3: BsModalRef;\r\n\r\n  constructor(\r\n    private modalService: BsModalService,\r\n    private walletService: WalletService,\r\n    private operationService: OperationService,\r\n    private coordinatorService: CoordinatorService,\r\n    private exportService: ExportService,\r\n    private inputValidationService: InputValidationService,\r\n    private ledgerService: LedgerService,\r\n    private messageService: MessageService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.walletService.wallet) {\r\n      this.init();\r\n    }\r\n  }\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    console.log(changes);\r\n    if (this.operationRequest && !this.walletService.isLedgerWallet()) {\r\n      if (this.operationRequest.operationDetails[0].kind === 'delegation') {\r\n        this.openModal();\r\n        if (this.operationRequest.operationDetails[0].delegate) {\r\n          this.toPkh = this.operationRequest.operationDetails[0].delegate;\r\n        } else {\r\n          console.warn('No delegate');\r\n        }\r\n      } else {\r\n        console.log('Not a delegation');\r\n      }\r\n    } else {\r\n      this.operationResponse.emit(null);\r\n    }\r\n  }\r\n  init() {\r\n    this.implicitAccounts = this.walletService.wallet.implicitAccounts;\r\n  }\r\n  openModal() {\r\n    if (this.walletService.wallet) {\r\n      // hide body scrollbar\r\n      const scrollBarWidth = window.innerWidth - document.body.offsetWidth;\r\n      document.body.style.marginRight = scrollBarWidth.toString();\r\n      document.body.style.overflow = 'hidden';\r\n      this.clearForm();\r\n      this.checkReveal();\r\n      this.modalOpen = true;\r\n      if (window.innerWidth > 1300) {\r\n        setTimeout(() => {\r\n          const inputElem = <HTMLInputElement>this.toPkhView.nativeElement;\r\n          inputElem.focus();\r\n        }, 100);\r\n      }\r\n    }\r\n  }\r\n  closeModalAction() {\r\n    this.operationResponse.emit(null);\r\n    this.closeModal();\r\n  }\r\n  closeModal() {\r\n    // restore body scrollbar\r\n    document.body.style.marginRight = '';\r\n    document.body.style.overflow = '';\r\n    this.modalOpen = false;\r\n    this.activeView = 0;\r\n    this.clearForm();\r\n    this.ledgerError = '';\r\n    this.messageService.stopSpinner();\r\n  }\r\n  async openModal2() {\r\n    this.formInvalid = this.invalidInput();\r\n    if (!this.formInvalid) {\r\n      if (!this.fee) { this.fee = this.recommendedFee.toString(); }\r\n      this.storedFee = this.fee;\r\n      this.storedDelegate = this.toPkh;\r\n      this.activeView = 1;\r\n      if (this.walletService.isLedgerWallet()) {\r\n        const keys = await this.walletService.getKeys('');\r\n        this.sendDelegation(keys);\r\n      }\r\n    }\r\n  }\r\n  async inject() {\r\n    const pwd = this.password;\r\n    this.password = '';\r\n    this.messageService.startSpinner('Signing operation...');\r\n    let keys;\r\n    try {\r\n      keys = await this.walletService.getKeys(pwd, this.activeAccount.pkh);\r\n    } catch {\r\n      this.messageService.stopSpinner();\r\n    }\r\n    if (this.walletService.isLedgerWallet()) {\r\n      this.broadCastLedgerTransaction();\r\n      this.sendResponse = null;\r\n    } else {\r\n      if (keys) {\r\n        this.pwdValid = '';\r\n        this.messageService.startSpinner('Sending operation...');\r\n        this.sendDelegation(keys);\r\n        this.closeModal();\r\n      } else {\r\n        this.messageService.stopSpinner();\r\n        if (this.walletService.wallet instanceof TorusWallet) {\r\n          this.pwdValid = `Authorization failed`;\r\n        } else {\r\n          this.pwdValid = 'Wrong password!';\r\n        }\r\n      }\r\n    }\r\n  }\r\n  open1(template1: TemplateRef<any>) {\r\n    if (this.walletService.wallet) {\r\n      this.clearForm();\r\n      this.checkReveal();\r\n      this.modalRef1 = this.modalService.show(template1, { class: 'first' });\r\n    }\r\n  }\r\n  async open2(template: TemplateRef<any>) {\r\n    this.formInvalid = this.invalidInput();\r\n    if (!this.formInvalid) {\r\n      if (!this.fee) { this.fee = this.recommendedFee.toString(); }\r\n      this.storedFee = this.fee;\r\n      this.storedDelegate = this.toPkh;\r\n      if (this.walletService.isLedgerWallet()) {\r\n        await this.ledgerSign();\r\n      }\r\n    }\r\n  }\r\n  async ledgerSign() {\r\n    this.ledgerError = '';\r\n    const keys = await this.walletService.getKeys('');\r\n    if (keys) {\r\n      this.sendDelegation(keys);\r\n    }\r\n  }\r\n\r\n  close1() {\r\n    this.modalRef1.hide();\r\n    this.modalRef1 = null;\r\n  }\r\n\r\n  close2() {\r\n    this.modalRef2.hide();\r\n    this.modalRef2 = null;\r\n  }\r\n\r\n  close3() {\r\n    this.modalRef3.hide();\r\n    this.modalRef3 = null;\r\n  }\r\n\r\n  async sendDelegation(keys: KeyPair) {\r\n    let fee = this.storedFee;\r\n    this.fee = '';\r\n    if (!fee) {\r\n      fee = '0';\r\n    }\r\n    this.operationService.delegate(this.activeAccount.address, this.getDelegate(), Number(fee), keys).subscribe(\r\n      async (ans: any) => {\r\n        this.sendResponse = ans;\r\n        console.log(JSON.stringify(ans));\r\n        if (ans.success === true) {\r\n          if (ans.payload.opHash) {\r\n            this.operationResponse.emit(ans.payload.opHash);\r\n            const metadata = { delegate: this.getDelegate(), opHash: ans.payload.opHash };\r\n            this.coordinatorService.boost(this.activeAccount.address, metadata);\r\n          } else if (this.walletService.isLedgerWallet()) {\r\n            this.requestLedgerSignature();\r\n          }\r\n        } else {\r\n          this.messageService.stopSpinner();\r\n          console.log('Delegation error id ', ans.payload.msg);\r\n          this.messageService.addError(ans.payload.msg, 0);\r\n          if (this.walletService.isLedgerWallet) {\r\n            this.closeModal();\r\n          }\r\n        }\r\n      },\r\n      err => {\r\n        console.log('Error Message ', JSON.stringify(err));\r\n        this.ledgerError = 'Failed to create operation';\r\n      }\r\n    );\r\n  }\r\n  async requestLedgerSignature() {\r\n    if (this.walletService.wallet instanceof LedgerWallet) {\r\n      const op = this.sendResponse.payload.unsignedOperation;\r\n      this.messageService.startSpinner('Waiting for Ledger signature');\r\n      let signature;\r\n      try {\r\n        signature = await this.ledgerService.signOperation(op, this.walletService.wallet.implicitAccounts[0].derivationPath);\r\n      } finally {\r\n        this.messageService.stopSpinner();\r\n      }\r\n      if (signature) {\r\n        const signedOp = op + signature;\r\n        this.sendResponse.payload.signedOperation = signedOp;\r\n        console.log(this.sendResponse);\r\n      } else {\r\n        this.ledgerError = 'Failed to sign operation';\r\n      }\r\n    }\r\n  }\r\n  async broadCastLedgerTransaction() {\r\n    this.messageService.startSpinner('Broadcasting operation');\r\n    this.operationService.broadcast(this.sendResponse.payload.signedOperation).subscribe(\r\n      ((ans: any) => {\r\n        this.sendResponse = ans;\r\n        if (ans.success && this.activeAccount.address) {\r\n          const metadata = { delegate: this.getDelegate(), opHash: ans.payload.opHash };\r\n          this.coordinatorService.boost(this.activeAccount.address, metadata);\r\n        } else {\r\n          this.messageService.addError(this.sendResponse.payload.msg, 0);\r\n        }\r\n        this.closeModal();\r\n        console.log('ans: ' + JSON.stringify(ans));\r\n      }),\r\n      (error => {\r\n        this.messageService.stopSpinner();\r\n        this.messageService.addError(error, 0);\r\n      })\r\n    );\r\n  }\r\n  checkReveal() {\r\n    console.log('check reveal ' + this.activeAccount.pkh);\r\n    this.operationService.isRevealed(this.activeAccount.pkh)\r\n      .subscribe((revealed: boolean) => {\r\n        if (!revealed) {\r\n          this.revealFee = 0.0002;\r\n        } else {\r\n          this.revealFee = 0;\r\n        }\r\n        this.checkSource();\r\n      });\r\n  }\r\n  checkSource() {\r\n    if (this.activeAccount instanceof ImplicitAccount) {\r\n      this.recommendedFee = Number(new Big(this.revealFee).plus(this.pkhFee));\r\n    } else if (this.activeAccount instanceof OriginatedAccount) {\r\n      this.recommendedFee = Number(new Big(this.revealFee).plus(this.ktFee));\r\n    }\r\n  }\r\n  getFee() {\r\n    if (this.fee) {\r\n      return this.fee;\r\n    }\r\n    return this.storedFee;\r\n  }\r\n  getDelegate() {\r\n    if (this.toPkh) {\r\n      return this.toPkh;\r\n    }\r\n    return this.storedDelegate;\r\n  }\r\n  clearForm() {\r\n    this.toPkh = '';\r\n    this.fee = '';\r\n    this.password = '';\r\n    this.pwdValid = '';\r\n    this.formInvalid = '';\r\n    this.sendResponse = '';\r\n    this.ledgerError = '';\r\n  }\r\n  invalidInput(): string {\r\n    if ((!this.inputValidationService.address(this.toPkh) &&\r\n      this.toPkh !== '') || (\r\n        this.toPkh.length > 1 && this.toPkh.slice(0, 2) !== 'tz') || (\r\n        this.walletService.wallet.getImplicitAccount(this.toPkh))) {\r\n      return 'invalid delegate address';\r\n    } else if (!this.inputValidationService.fee(this.fee)) {\r\n      return 'invalid fee';\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n  download() {\r\n    this.exportService.downloadOperationData(this.sendResponse.payload.unsignedOperation, false);\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Location } from '@angular/common';\r\nimport { Router, Event, NavigationEnd } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-footer',\r\n  templateUrl: './footer.component.html',\r\n  styleUrls: ['./footer.component.scss']\r\n})\r\nexport class FooterComponent implements OnInit {\r\n  darkText = false;\r\n  constructor(\r\n    private location: Location,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    let path = this.location.path();\r\n    const altFooter = ['/terms-of-use', '/privacy-policy', '/settings'];\r\n    if (altFooter.includes(path)) {\r\n      this.darkText = true;\r\n    }\r\n    this.router.events.subscribe((event: Event) => {\r\n      if (event instanceof NavigationEnd) {\r\n        path = this.location.path();\r\n        if (altFooter.includes(path)) {\r\n          this.darkText = true;\r\n        } else {\r\n          this.darkText = false;\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"foot-container\" [class.dark]=\"darkText\">\r\n  <div id=\"follow\">\r\n    <span>follow kukai on</span>\r\n    <a href=\"https://github.com/kukai-wallet/kukai\" target=\"_blank\"><img src=\"../../../assets/img/logo-github.svg\"></a>\r\n    <a id=\"tg\" href=\"https://t.me/KukaiWallet\" target=\"_blank\"><img src=\"../../../assets/img/logo-telegram.svg\"></a>\r\n    <a href=\"https://twitter.com/KukaiWallet/\" target=\"_blank\"><img src=\"../../../assets/img/logo-twitter.svg\"></a>\r\n</div>\r\n<div class=\"links\">\r\n<a href=\"./terms-of-use\" target=\"_blank\">Terms of Use</a>\r\n<a href=\"./privacy-policy\" target=\"_blank\">Privacy Policy</a>\r\n<a target=\"_blank\" href=\"mailto:contact@kukai.app\">Contact</a>\r\n<a style=\"margin: 0 1rem 1rem auto;\" href=\"https://docs.kukai.app\" target=\"_blank\"><img src=\"../../../assets/img/docs.svg\"></a>\r\n</div>\r\n</div>","import { Component, OnInit, Input, ChangeDetectorRef } from '@angular/core';\r\nimport { Router, NavigationEnd } from '@angular/router';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { CoordinatorService } from '../../services/coordinator/coordinator.service';\r\nimport { Account, TorusWallet } from '../../services/wallet/wallet';\r\nimport { LookupService } from '../../services/lookup/lookup.service';\r\nimport { MessageService } from '../../services/message/message.service';\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.scss']\r\n})\r\nexport class HeaderComponent implements OnInit {\r\n  @Input() activeAccount: Account;\r\n  @Input() settings = false;\r\n  impAccs: Account[];\r\n  constructor(\r\n    private router: Router,\r\n    public walletService: WalletService,\r\n    public lookupService: LookupService,\r\n    private coordinatorService: CoordinatorService,\r\n    private messageService: MessageService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (this.walletService.wallet) {\r\n      this.impAccs = this.walletService.wallet.implicitAccounts;\r\n    }\r\n  }\r\n  logout() {\r\n    this.coordinatorService.stopAll();\r\n    this.messageService.clear();\r\n    this.walletService.clearWallet();\r\n    this.lookupService.clear();\r\n    this.router.navigate(['']);\r\n  }\r\n  getUsername() {\r\n    if (this.walletService.wallet instanceof TorusWallet) {\r\n      return this.walletService.wallet.displayName();\r\n    }\r\n    return '';\r\n  }\r\n  getVerifier() {\r\n    if (this.walletService.wallet instanceof TorusWallet) {\r\n      return this.walletService.wallet.verifier;\r\n    }\r\n    return '';\r\n  }\r\n}\r\n","<div id=\"top-container\">\r\n  <a routerLink=\"/accounts\" class=\"logo\">\r\n    <img *ngIf=\"!settings\" id=\"logo\" src=\"../../../assets/img/kukai-logo.svg\">\r\n    <img *ngIf=\"settings\" id=\"logo\" src=\"../../../assets/img/kukai-logo2.svg\">\r\n  </a>\r\n  <div class=\"middle\">\r\n    <ng-container *ngIf=\"!activeAccount\">\r\n      <ng-container *ngIf=\"settings\">\r\n        <a class=\"accounts light\" routerLink=\"/accounts\">\r\n          Accounts\r\n        </a>\r\n        <img src=\"../../../assets/img/slash2.svg\">\r\n        <span>Settings</span>\r\n      </ng-container>\r\n      <ng-container *ngIf=\"!settings\">\r\n        <a class=\"accounts solo\" routerLink=\"/accounts\">\r\n          Accounts\r\n        </a>\r\n      </ng-container>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"activeAccount\">\r\n      <a class=\"accounts\" routerLink=\"/accounts\">\r\n        Accounts\r\n      </a>\r\n      <img src=\"../../../assets/img/slash.svg\">\r\n      <div class=\"dropdown\">\r\n        <div class=\"dropbtn\"><span>{{ activeAccount.shortAddress() }}</span><img\r\n            src=\"../../../assets/img/chevron-down.svg\"></div>\r\n        <div class=\"dropdown-content\">\r\n          <ng-container *ngFor=\"let impAcc of impAccs\">\r\n            <a routerLink=\"/account/{{impAcc.address}}\" [class.selected]=\"impAcc.address === activeAccount.address\">\r\n              {{ impAcc.shortAddress() }}\r\n            </a>\r\n            <ng-container *ngFor=\"let origAcc of impAcc.originatedAccounts\">\r\n              <a routerLink=\"/account/{{origAcc.address}}\" [class.selected]=\"origAcc.address === activeAccount.address\">\r\n                {{ origAcc.shortAddress() }}\r\n              </a>\r\n            </ng-container>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n  <div class=\"dropdown right\">\r\n    <div id=\"menu\" class=\"dropbtn\">\r\n      <img src=\"../../../assets/img/user.svg\">\r\n    </div>\r\n    <div class=\"dropdown-content right\">\r\n      <a routerLink=\"/settings\">Settings</a>\r\n      <a (click)=\"logout()\">Logout</a>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div id=\"header-list\" [class.invert]=\"settings\">\r\n  <ng-container *ngIf=\"getVerifier()\"><img class=\"verifier-logo\"\r\n      src=\"../../../assets/img/{{ getVerifier() }}-logo.svg\">&nbsp;</ng-container>{{ getUsername() }}\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-logged-in',\r\n  templateUrl: './logged-in.component.html',\r\n  styleUrls: ['./logged-in.component.scss']\r\n})\r\nexport class LoggedInComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div><app-uri-handler></app-uri-handler></div>\r\n<router-outlet></router-outlet>","import { Component, OnInit } from '@angular/core';\r\nimport { Location } from '@angular/common';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { TorusService } from '../../services/torus/torus.service';\r\n\r\n@Component({\r\n  selector: 'app-messages',\r\n  templateUrl: './messages.component.html',\r\n  styleUrls: ['./messages.component.scss']\r\n})\r\nexport class MessagesComponent implements OnInit {\r\n  constructor(\r\n    public messageService: MessageService,\r\n    private location: Location,\r\n    public torusService: TorusService\r\n    ) { }\r\n  readonly subject = 'Sent you Tezos tokens';\r\n  ngOnInit() {\r\n  }\r\n  removeMessage(index: number) {\r\n    this.messageService.messages.splice(index, 1);\r\n  }\r\n  getHostName() {\r\n    return location.hostname;\r\n  }\r\n  notifyFormat(message: any) {\r\n    if (message.email) {\r\n      return this.mailtoFormat(message);\r\n    } else if (message.username) {\r\n      return this.redditPmFormat(message);\r\n    } else if (message.twitterId) {\r\n      return this.twitterPmFormat(message);\r\n    } else {\r\n      throw new Error('Invalid message');\r\n    }\r\n  }\r\n  mailtoFormat(message: any): string {\r\n    const subject = encodeURI(this.subject);\r\n    const body = this.encodedBody(message.amount, 'Google', `https://${this.getHostName()}/direct-auth\\n\\n`);\r\n    return `mailto:${message.email}?subject=${subject}&body=${body}`;\r\n  }\r\n  redditPmFormat(message: any) {\r\n    // https://www.reddit.com/message/compose?to=USERNAME&subject=SUBJECT&message=MESSAGE\r\n    const subject = encodeURI(this.subject);\r\n    const body = this.encodedBody(`${message.amount}`, 'Reddit', `[kukai.app](https://${this.getHostName()}/direct-auth)`);\r\n    return `https://www.reddit.com/message/compose?to=${message.username}&subject=${subject}&message=${body}`;\r\n  }\r\n  twitterPmFormat(message: any) {\r\n    // https://twitter.com/messages/compose?recipient_id=USER_ID&text=MESSAGE\r\n    const body = this.encodedBody(message.amount, 'Twitter', `https://${this.getHostName()}/direct-auth`);\r\n    return `https://twitter.com/messages/compose?recipient_id=${message.twitterId}&text=${body}`;\r\n  }\r\n  encodedBody(amount: string, accountType: string, url: string): string {\r\n    const s = (accountType === 'Reddit') ? '  ' : '';\r\n    const b = (accountType === 'Reddit') ? '**' : '';\r\n    const t = (accountType === 'Twitter') ? 'Tezos ' : '';\r\n    return encodeURI(`Hi,${s}\\nI sent you ${b}${amount} tez${b} using the Kukai wallet.\\n\\nYou can access your ${t}wallet with your ${accountType} account at: ${url}`);\r\n  }\r\n  getAlias(message: any) {\r\n    return message.email ? message.email :\r\n      message.username ? message.username :\r\n      message.handler ? message.handler :\r\n      'recipient';\r\n  }\r\n}\r\n","<div class='msg-container'>\r\n  <div *ngFor=\"let message of messageService.messages ; let i = index\">\r\n    <alert *ngIf=\"!message.timeout\" [type]=\"message.type\">\r\n      <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"removeMessage(i)\">\r\n        <span aria-hidden=\"true\">&times;</span>\r\n      </button>\r\n      <span *ngIf=\"!message.email && !message.username && !message.twitterId && message.msg\">{{ message.msg }}</span>\r\n      <span *ngIf=\"message.email || message.username || message.twitterId\">Click <a target=\"_blank\" href=\"{{ notifyFormat(message) }}\">here to notify</a> {{ getAlias(message) }} via {{ message.msg }}: <b>{{ message.amount }} tez</b> sent</span>\r\n    </alert>\r\n    <alert *ngIf=\"message.timeout\" [type]=\"message.type\" [dismissOnTimeout]=\"message.timeout\">\r\n      <span *ngIf=\"message.msg\">{{ message.msg }}</span></alert>\r\n  </div>\r\n</div>","import { Component, OnInit, HostBinding } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Constants } from '../../constants';\r\nimport { TranslateService } from '@ngx-translate/core'; // Multiple instances created ?\r\n\r\nimport { ImportService } from '../../services/import/import.service';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { ExportService } from '../../services/export/export.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { utils, hd } from '@tezos-core-tools/crypto-utils';\r\n\r\n@Component({\r\n  selector: 'app-mnemonic-import-wallet',\r\n  templateUrl: './mnemonic-import.component.html',\r\n  styleUrls: ['./mnemonic-import.component.scss']\r\n})\r\nexport class MnemonicImportComponent implements OnInit {\r\n  CONSTANTS = new Constants();\r\n  @HostBinding('class.tacos') showTacos = false;\r\n  MIN_PWD_LENGTH = 9;\r\n  mnemonic: string;\r\n  email: string;\r\n  password: string;\r\n  passphrase: string;\r\n  pkh: string;\r\n  importOption = 0;\r\n  activePanel = 0;\r\n  hdImport = false;\r\n  wallet: any;\r\n  walletJson: string;\r\n  pwd = '';\r\n  pwd1: string;\r\n  pwd2: string;\r\n  pwdStrength = '';\r\n  Downloaded = false;\r\n  fileName = '';\r\n  showWrongFileUploadMsg: false;\r\n\r\n  constructor(\r\n    private translate: TranslateService,\r\n    private importService: ImportService,\r\n    private router: Router,\r\n    private messageService: MessageService,\r\n    private walletService: WalletService,\r\n    private exportService: ExportService,\r\n    private inputValidationService: InputValidationService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  retrieve() {\r\n    if (this.mnemonic) {\r\n      this.mnemonic = this.mnemonic.toLowerCase().replace(/(\\r\\n|\\n|\\r)/gm, ' ').trim();\r\n    }\r\n    if (this.importOption === 2) {\r\n      this.passphrase = this.email + this.password;\r\n    }\r\n    if (!this.inputValidationService.mnemonics(this.mnemonic)) {\r\n      this.translate\r\n        .get('MNEMONICIMPORTCOMPONENT.INVALIDMNEMONIC')\r\n        .subscribe((res: string) => this.messageService.addWarning(res, 10));\r\n    } else if (\r\n      this.importOption === 2 &&\r\n      !this.inputValidationService.email(this.email)\r\n    ) {\r\n      this.translate.get('MNEMONICIMPORTCOMPONENT.INVALIDEMAIL').subscribe(\r\n        (res: string) => this.messageService.addWarning(res, 10) // 'Invalid email!'\r\n      );\r\n    } else if (this.importOption === 2 && !this.password) {\r\n      this.translate.get('MNEMONICIMPORTCOMPONENT.INVALIDPASSWORD').subscribe(\r\n        (res: string) => this.messageService.addWarning(res, 10) // 'Invalid password!'\r\n      );\r\n    } else if (!this.inputValidationService.passphrase(this.passphrase)) {\r\n      this.translate.get('MNEMONICIMPORTCOMPONENT.INVALIDPASSPHRASE').subscribe(\r\n        (res: string) => this.messageService.addWarning(res, 10) // 'Invalid passphrase!'\r\n      );\r\n    } else if (this.pkh && !this.inputValidationService.address(this.pkh)) {\r\n      this.translate.get('MNEMONICIMPORTCOMPONENT.INVALIDPKH').subscribe(\r\n        (res: string) => this.messageService.addWarning(res, 10) // 'Invalid public key hash!'\r\n      );\r\n    } else {\r\n      let pkh = '';\r\n      if (this.pkh) {\r\n        if (this.importOption === 1 && this.hdImport) {\r\n          pkh = hd.keyPairFromAccountIndex(\r\n            utils.mnemonicToSeed(this.mnemonic, this.passphrase, true),\r\n            0\r\n          ).pkh;\r\n        } else {\r\n          pkh = utils.seedToKeyPair(\r\n            utils.mnemonicToSeed(this.mnemonic, this.passphrase, false)\r\n          ).pkh;\r\n        }\r\n      }\r\n      if (this.pkh && pkh !== this.pkh) {\r\n        if (this.importOption === 2) {\r\n          this.translate\r\n            .get('MNEMONICIMPORTCOMPONENT.INVALIDEMAILPASSWORD')\r\n            .subscribe((res: string) => this.messageService.addWarning(res, 5));\r\n        } else {\r\n          this.translate\r\n            .get('MNEMONICIMPORTCOMPONENT.INVALIDPASSPHRASE')\r\n            .subscribe((res: string) => this.messageService.addWarning(res, 5));\r\n        }\r\n      } else {\r\n        this.activePanel++;\r\n      }\r\n    }\r\n  }\r\n  async setPwd() {\r\n    if (this.validPwd()) {\r\n      const password = this.pwd1;\r\n      this.pwd1 = '';\r\n      this.pwd2 = '';\r\n      await this.messageService.startSpinner('Encrypting wallet...');\r\n      try {\r\n        this.wallet = await this.walletService.createEncryptedWallet(\r\n          this.mnemonic,\r\n          password,\r\n          this.passphrase,\r\n          this.importOption === 1 && this.hdImport\r\n        );\r\n      } finally {\r\n        this.messageService.stopSpinner();\r\n      }\r\n      this.mnemonic = '';\r\n      this.passphrase = '';\r\n      this.email = '';\r\n      this.password = '';\r\n      this.activePanel++;\r\n      if (document.body.offsetWidth >= 480) {\r\n        this.showTacos = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  validPwd(): boolean {\r\n    if (!this.inputValidationService.password(this.pwd1)) {\r\n      this.translate.get('MNEMONICIMPORTCOMPONENT.PASSWORDWEAK').subscribe(\r\n        (res: string) => this.messageService.addWarning(res, 10) // 'Password is too weak!'\r\n      );\r\n      return false;\r\n    } else if (this.pwd1 !== this.pwd2) {\r\n      this.translate.get('MNEMONICIMPORTCOMPONENT.NOMATCHPASSWORDS').subscribe(\r\n        (res: string) => this.messageService.addWarning(res, 10) // Passwords don't match!\r\n      );\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  calcStrength() {\r\n    this.pwdStrength = this.inputValidationService.passwordStrengthDisplay(\r\n      this.pwd1\r\n    );\r\n  }\r\n  export(): string {\r\n    return JSON.stringify(this.wallet.data);\r\n  }\r\n  showPkh(): string {\r\n    return this.wallet.pkh;\r\n  }\r\n  download() {\r\n    this.exportService.downloadWallet(this.wallet.data);\r\n    this.Downloaded = true;\r\n  }\r\n  async done() {\r\n    await this.messageService.startSpinner('Loading wallet...');\r\n    try {\r\n      await this.importService.importWalletFromObject(\r\n        this.wallet.data,\r\n        this.wallet.seed\r\n      );\r\n    } finally {\r\n      this.messageService.stopSpinner();\r\n    }\r\n    this.wallet = null;\r\n    if (this.walletService.wallet.implicitAccounts.length === 1 && this.walletService.wallet.implicitAccounts[0].originatedAccounts.length === 0) {\r\n      this.router.navigate([`/account/${this.walletService.wallet.implicitAccounts[0].address}`]);\r\n    } else {\r\n      this.router.navigate(['/accounts']);\r\n    }\r\n    this.translate\r\n      .get('MNEMONICIMPORTCOMPONENT.WALLETREADY')\r\n      .subscribe((res: string) => this.messageService.addSuccess(res));\r\n  }\r\n  /* Keystore handling */\r\n  importPreCheck(keyFile: string) {\r\n    this.typeCheckFile(keyFile);\r\n    if (this.importService.pwdRequired(keyFile)) {\r\n      this.walletJson = keyFile;\r\n    } else {\r\n      throw new Error('Unsupported wallet file');\r\n    }\r\n  }\r\n  typeCheckFile(keyFile: string) {\r\n    const obj = JSON.parse(keyFile);\r\n    // Required\r\n    try {\r\n      if (typeof obj.provider !== 'string') {\r\n        throw new Error('provider not a string!');\r\n      }\r\n      if (typeof obj.version !== 'number') {\r\n        throw new Error('version not a number!');\r\n      }\r\n      if (typeof obj.walletType !== 'number') {\r\n        throw new Error('walletType not a number!');\r\n      }\r\n      // Optional\r\n      if (obj.encryptedSeed && typeof obj.encryptedSeed !== 'string') {\r\n        throw new Error('encryptedSeed not a string!');\r\n      }\r\n      if (obj.pkh && typeof obj.pkh !== 'string') {\r\n        throw new Error('pkh not a string!');\r\n      }\r\n      if (obj.iv && typeof obj.iv !== 'string') {\r\n        throw new Error('iv not a string!');\r\n      }\r\n      if (obj.pk && typeof obj.pk !== 'string') {\r\n        throw new Error('pk not a string!');\r\n      }\r\n      if (obj.encryptedEntropy && typeof obj.encryptedEntropy !== 'string') {\r\n        throw new Error('encryptedEntropy not a string!');\r\n      }\r\n    } catch (e) {\r\n      this.messageService.addError(e);\r\n      throw e;\r\n    }\r\n  }\r\n  async checkImportPwd() {\r\n    if (this.pwd) {\r\n      await this.messageService.startSpinner('Importing wallet...');\r\n      try {\r\n        await this.import(this.walletJson, this.pwd);\r\n        this.pwd = '';\r\n      } finally {\r\n        this.messageService.stopSpinner();\r\n      }\r\n    } else {\r\n      this.messageService.addWarning('No password provided', 5);\r\n    }\r\n  }\r\n  async import(keyFile: string, pwd: string) {\r\n    this.typeCheckFile(keyFile);\r\n    await this.importService\r\n      .importWalletFromJson(keyFile, pwd)\r\n      .then((success: boolean) => {\r\n        if (success) {\r\n          if (this.walletService.wallet.implicitAccounts.length === 1 && this.walletService.wallet.implicitAccounts[0].originatedAccounts.length === 0) {\r\n            this.router.navigate([`/account/${this.walletService.wallet.implicitAccounts[0].address}`]);\r\n          } else {\r\n            this.router.navigate(['/accounts']);\r\n          }\r\n        } else {\r\n          console.log(success);\r\n          this.messageService.addError('Something went wrong');\r\n        }\r\n      }).catch((e) => {\r\n        this.messageService.addError(e);\r\n      });\r\n  }\r\n  handleFileInput(files: FileList) {\r\n    let fileToUpload = files.item(0);\r\n    if (!fileToUpload) {\r\n      return false;\r\n    } else if (!this.validateFile(fileToUpload.name)) {\r\n      let fileNotSupported = '';\r\n      this.translate\r\n        .get('IMPORTCOMPONENT.FILENOTSUPPORTED')\r\n        .subscribe((res: string) => (fileNotSupported = res));\r\n      this.messageService.add(fileNotSupported);\r\n\r\n      console.log('Selected file format is not supported');\r\n      fileToUpload = null;\r\n      this.walletJson = null;\r\n      return false;\r\n    } else {\r\n\r\n      const reader = new FileReader();\r\n      reader.readAsText(fileToUpload);\r\n      reader.onload = () => {\r\n        if (typeof reader.result === 'string') {\r\n          try {\r\n            this.importPreCheck(reader.result);\r\n          } catch (e) {\r\n            this.messageService.addError(e, 5);\r\n            this.walletJson = null;\r\n          }\r\n          if (this.walletJson) {\r\n            this.fileName = fileToUpload.name;\r\n          }\r\n        } else {\r\n          this.walletJson = null;\r\n          throw new Error('Not a string import');\r\n        }\r\n      };\r\n    }\r\n  }\r\n  validateFile(name: String) {\r\n    const ext = name.substring(name.lastIndexOf('.') + 1);\r\n    if (ext.toLowerCase() === 'tez' || ext.toLowerCase() === 'json') {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","<div class=\"kukai-card\">\r\n  <div *ngIf=\"activePanel === 0\">\r\n      <H1>Import wallet</H1>\r\n      <div class=\"import-options\">\r\n          <span [class.selected]=\"importOption===0\" (click)=\"importOption = 0\">Keystore File</span>\r\n          <span [class.selected]=\"importOption===1\" (click)=\"importOption = 1\">Seed Words</span>\r\n          <span [class.selected]=\"importOption===2\" (click)=\"importOption = 2\">Fundraiser</span>\r\n      </div>\r\n      <div class=\"grey-card menu\">\r\n        <ng-container *ngIf=\"importOption === 0\">\r\n            <p class=\"description bold\" style=\"font-size: 1rem\">\r\n                Import your wallet from an encrypted keystore file (.tez).\r\n            </p>\r\n            <input type=\"file\" (change)=\"handleFileInput($event.target.files)\" accept=\".tez\" id=\"file\" name=\"file\"\r\n                class=\"input-file\">\r\n            <label for=\"file\" class=\"input-file\" [class.loaded]=\"walletJson\"><span\r\n                    *ngIf=\"walletJson\">{{ fileName }}</span><span>Browse</span></label>\r\n            <div class=\"authenticate\" *ngIf=\"walletJson\">\r\n                <input type=\"password\" class=\"text\" autocomplete=\"current-password\" (keydown.enter)='checkImportPwd()' id=\"pwd\" [(ngModel)]=\"pwd\"\r\n                    placeholder=\"Password\">\r\n                </div>\r\n                <div class=\"buttons\">\r\n                  <a routerLink=\"/\">\r\n                      <button class=\"button back\">Back</button>\r\n                  </a>\r\n                  <button class=\"button next\" [class.disabled-button]=\"!walletJson || !pwd\" (click)='checkImportPwd()'>Import</button>\r\n              </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"importOption > 0\">\r\n            <p class=\"description faucet\" *ngIf=\"importOption === 2\"><span>Please make sure to first <a routerLink=\"/activate\">activate</a> your fundraiser wallet.</span></p>\r\n            <ng-container>\r\n                <small>The seed (12-24 words)</small>\r\n                <textarea class=\"text\" [(ngModel)]=\"mnemonic\" autocomplete=\"off\" [placeholder]=\"'Seed Words (required)'\"></textarea>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"importOption === 1\">\r\n                <small>If your seed words are protected by a passphrase, it needs to be entered here</small>\r\n                <input class=\"text\" type=\"password\" name=\"passphrase\" autocomplete=\"one-time-code\" [(ngModel)]=\"passphrase\" [placeholder]=\"'Passphrase (optional)'\">\r\n            </ng-container>\r\n            <ng-container *ngIf=\"importOption === 2\">\r\n                <small>The email used during the fundraiser</small>\r\n                <input class=\"text\" type=\"text\" [(ngModel)]=\"email\" [placeholder]=\"'Email (required)'\">\r\n                <small>The password you chose during the fundraiser</small>\r\n                <input class=\"text\" type=\"password\" name=\"tge-password\" autocomplete=\"one-time-code\" [(ngModel)]=\"password\" [placeholder]=\"'Password (required)'\">\r\n            </ng-container>\r\n            <ng-container>\r\n                <small *ngIf=\"importOption === 1\">{{ 'MNEMONICIMPORTCOMPONENT.INFOPKH' | translate }}</small>\r\n                <small *ngIf=\"importOption === 2\">{{ 'MNEMONICIMPORTCOMPONENT.INFOPKHICO' | translate }}</small>\r\n                <input type=\"text\" class=\"text\" [(ngModel)]=\"pkh\" [placeholder]=\"'tz1... (recomended)'\">\r\n            </ng-container>\r\n            <div class=\"radios\" *ngIf=\"importOption === 1\">\r\n                <div>\r\n                    <input (change)=\"hdImport = !hdImport\" type=\"radio\" name=\"walletType\" value=\"legacy\" checked>\r\n                    <small>Legacy wallet</small>\r\n                </div>\r\n                <div>\r\n                    <input (change)=\"hdImport = !hdImport\" type=\"radio\" name=\"walletType\" value=\"hd\">\r\n                    <small>HD wallet</small>\r\n                </div>\r\n            </div>\r\n            <div class=\"buttons\">\r\n                <a routerLink=\"/\">\r\n                    <button class=\"button back\">Back</button>\r\n                </a>\r\n                <button class=\"button next\" (click)=\"retrieve()\">Import</button>\r\n            </div>\r\n        </ng-container>\r\n      </div>\r\n  </div>\r\n  <!-- Step 2 -->\r\n  <div *ngIf=\"activePanel==1\">\r\n      <H1>Set a password</H1>\r\n      <div class=\"grey-card\">\r\n        <p class=\"description bold blue\">This password will be used to create an encrypted keystore file.</p>\r\n        <p class=\"description\" style=\"margin-top: 1.25rem\">When performing operations that need to be signed with your secret key, this password will be required</p>\r\n        <input type=\"password\" style=\"margin-top: 2.5rem\" class=\"text\" autocomplete=\"new-password\" placeholder=\"{{ 'NEWWALLETCOMPONENT.PASSWORD' | translate }}\" [(ngModel)]=\"pwd1\" (keyup)=\"calcStrength()\">\r\n        <small class=\"grey\" style=\"margin-top: 0.5rem\"> {{ 'NEWWALLETCOMPONENT.PASSWORDSTRENGTH' | translate }}  {{ pwdStrength }}</small>\r\n        <input type=\"password\" style=\"margin-top: 1.5rem\" class=\"text\" autocomplete=\"new-password\" placeholder=\"{{ 'NEWWALLETCOMPONENT.CONFIRMPASSWORD' | translate }}\" [(ngModel)]=\"pwd2\">\r\n        <div class=\"buttons\" style=\"margin-top: 3rem\"><a routerLink=\"/\">\r\n                <button class=\"button back\">Cancel</button>\r\n            </a>\r\n            <button class=\"button next\" [class.disabled-button]=\"!pwd1\" (click)=\"setPwd()\">Next</button>\r\n        </div>\r\n      </div>\r\n  </div>\r\n  <!-- Step 3 -->\r\n  <div *ngIf=\"activePanel==2\">\r\n      <H1 style=\"background-color: #5963FF\">Wallet imported!</H1>\r\n      <div class=\"grey-card\">\r\n      <p class=\"description bold\">Your wallet is now set up and ready to be used.</p>\r\n      <p class=\"description\">Download your encrypted keystore file and import it when you want to access your wallet.</p>\r\n      <div class=\"whitebox final\">\r\n        <p class=\"description bold pkh\">Your public account address:&#10;&#13;{{ showPkh() }}</p>\r\n      </div>\r\n      <div class=\"buttons\" style=\"margin-top: 3rem\">\r\n        <button class=\"button next\" (click)=\"download()\">Download</button>\r\n        <button class=\"button next\" [class.disabled-button]=\"!Downloaded\" (click)=\"done()\">Open Wallet</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","<img class=\"add\" *ngIf=\"walletService.isHdWallet()\" src=\"../../../assets/img/add.svg\" (click)=\"openModal()\">\r\n\r\n<!-- The Modal -->\r\n<div *ngIf=\"modalOpen\" id=\"myModal\" class=\"kukai-modal\">\r\n  <!-- Modal content -->\r\n  <div class=\"km-content\">\r\n    <div class=\"x\" (click)=\"closeModal()\"><img src=\"../../../assets/img/x.svg\"></div>\r\n    <div class=\"km-header\">\r\n      <H1>Add a new account</H1>\r\n    </div>\r\n    <!-- Prepare delegation -->\r\n    <div class=\"km-body\">\r\n      <p>Add a new account to your HD wallet. Enter your password to confirm.</p>\r\n      <div class=\"row-group\" style=\"margin: 1.25rem 0 1.5rem;\">\r\n        <input #pwdInput [(ngModel)]=\"password\" class=\"text password\" autocomplete=\"current-password\" placeholder=\"Password\" type=\"password\" (input)=\"this.errorMsg = ''\" (change)=\"this.errorMsg = ''\">\r\n        <button  class=\"blue confirm\" (click)=\"addPkh()\">Confirm</button>\r\n      </div>\r\n      <span *ngIf=\"this.errorMsg\" class=\"danger margin\">{{ this.errorMsg }}</span>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit, ViewChild, TemplateRef, ChangeDetectorRef, ElementRef } from '@angular/core';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { HdWallet } from '../../services/wallet/wallet';\r\nimport { CoordinatorService } from '../../services/coordinator/coordinator.service';\r\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { MessageService } from '../../services/message/message.service';\r\n\r\n@Component({\r\n  selector: 'app-new-implicit',\r\n  templateUrl: './new-implicit.component.html',\r\n  styleUrls: ['./new-implicit.component.scss'],\r\n})\r\nexport class NewImplicitComponent implements OnInit {\r\n  @ViewChild('pwdInput') pwdView: ElementRef;\r\n  modalOpen = false;\r\n  password = '';\r\n  errorMsg = '';\r\n  modalRef1: BsModalRef;\r\n  constructor(\r\n    public walletService: WalletService,\r\n    private coordinatorService: CoordinatorService,\r\n    private modalService: BsModalService,\r\n    private messageService: MessageService,\r\n    private cdRef: ChangeDetectorRef\r\n  ) {}\r\n  openModal() {\r\n    if (this.openPkhSpot()) {\r\n      // hide body scrollbar\r\n      const scrollBarWidth = window.innerWidth - document.body.offsetWidth;\r\n      document.body.style.marginRight = scrollBarWidth.toString();\r\n      document.body.style.overflow = 'hidden';\r\n      this.clear();\r\n      this.modalOpen = true;\r\n      setTimeout(() => {\r\n        const inputElem = <HTMLInputElement>this.pwdView.nativeElement;\r\n        inputElem.focus();\r\n      }, 100);\r\n    } else {\r\n      this.messageService.addWarning('Can\\'t create additional accounts when an unused account already exists');\r\n    }\r\n  }\r\n  closeModal() {\r\n    // restore body scrollbar\r\n    document.body.style.marginRight = '';\r\n    document.body.style.overflow = '';\r\n    this.clear();\r\n    this.modalOpen = false;\r\n  }\r\n  ngOnInit(): void {}\r\n  async addPkh() {\r\n    if (this.openPkhSpot()) {\r\n      this.messageService.startSpinner('Creating new account');\r\n      const pkh = await this.walletService.incrementAccountIndex(this.password);\r\n      if (pkh) {\r\n        this.coordinatorService.start(pkh);\r\n        this.closeModal();\r\n      } else {\r\n        this.errorMsg = 'Wrong password!';\r\n      }\r\n      this.messageService.stopSpinner();\r\n    } else {\r\n      console.log('blocked!');\r\n    }\r\n  }\r\n  openPkhSpot(): boolean {\r\n    const counter = this.walletService.wallet.implicitAccounts[\r\n      this.walletService.wallet.implicitAccounts.length - 1\r\n    ].activitiesCounter;\r\n    const balance: number = this.walletService.wallet.implicitAccounts[\r\n      this.walletService.wallet.implicitAccounts.length - 1\r\n    ].balanceXTZ;\r\n    return (\r\n      this.walletService.wallet instanceof HdWallet &&\r\n      ((counter && counter > 0) || (balance !== null && balance > 0))\r\n    );\r\n  }\r\n  clear() {\r\n    this.password = '';\r\n    this.errorMsg = '';\r\n  }\r\n}\r\n","<div class=\"kukai-card\">\r\n  <span class=\"step-counter\">\r\n    {{ activePanel }}/4\r\n  </span>\r\n  <div *ngIf=\"activePanel==1\" (click)=\"hideBlur = false\">\r\n    <H1>Back up your seed</H1>\r\n    <p class=\"description\">When you create a new wallet, new Tezos seed words are generated. Your seed words are the master key of your wallet accounts and any value they hold.</p>\r\n    <div class=\"grey-card\">\r\n      <div class=\"whitebox\" (mouseout)=\"hideBlur = false\" (click)=\"$event.stopPropagation()\">{{ MNEMONIC.string }}</div>\r\n      <div *ngIf=\"!hideBlur\" class=\"seed-blur\" (click)=\"hideBlur = true ; $event.stopPropagation()\">\r\n        <span class=\"black\">Click here to reveal your seed words</span>\r\n      </div>\r\n      <p class=\"description red\" style=\"justify-content: center\">Make sure to back it up, write it down, and keep it incredibly safe.</p>\r\n      <div class=\"buttons\"><a routerLink=\"/\"><button class=\"button back\">Back</button></a><button class=\"button next\" (click)=\"verifyView()\">Next</button></div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"activePanel==2\">\r\n    <H1>Verify your seed</H1>\r\n    <div class=\"grey-card\">\r\n      <p class=\"description\">{{ formatVerifyDescription(MNEMONIC.verify[0] + 1) }}</p>\r\n      <progress max=\"{{ MNEMONIC.wordsToVerify }}\" value=\"{{ MNEMONIC.wordsToVerify - MNEMONIC.verify.length }}\"></progress>\r\n      <div *ngIf=\"MNEMONIC.verify.length\" class=\"word-verify\">\r\n        <div class=\"word-hint\">\r\n          <span class=\"word-index\">{{ indexFormat(MNEMONIC.verify[0] - 1) }}</span>\r\n          <span class=\"word-value\">{{ valueFormat(MNEMONIC.verify[0] - 1) }}</span>\r\n        </div>\r\n        <div class=\"word-input\">\r\n          <span class=\"word-index\"><ng-container *ngIf=\"MNEMONIC.verify.length\">Word {{ MNEMONIC.verify[0] + 1 }}</ng-container></span>\r\n          <input id=\"wordInput\" class=\"text\" type=\"text\" (input)=\"checkWord()\" (change)=\"checkWord()\" [(ngModel)]=\"wordInput\" [disabled]=\"!MNEMONIC.verify.length\" autofocus>\r\n        </div>\r\n        <div class=\"word-hint\">\r\n          <span class=\"word-index\">{{ indexFormat(MNEMONIC.verify[0] + 1) }}</span>\r\n          <span class=\"word-value\">{{ valueFormat(MNEMONIC.verify[0] + 1) }}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"buttons\"><a routerLink=\"/\"><button class=\"button back\">Cancel</button></a><button class=\"button next\" [class.disabled-button]=\"MNEMONIC.verify.length\" (click)=\"pwdView()\">Next</button></div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"activePanel==3\">\r\n    <H1>Set a password</H1>\r\n    <div class=\"grey-card\">\r\n      <p class=\"description bold blue\">This password will be used to create an encrypted keystore file.</p>\r\n      <p class=\"description\" style=\"margin-top: 1.25rem\">When performing operations that need to be signed with your secret key, this password will be required</p>\r\n      <input type=\"password\" style=\"margin-top: 2.5rem\" placeholder=\"{{ 'NEWWALLETCOMPONENT.PASSWORD' | translate }}\" class=\"text\" autocomplete=\"new-password\" [(ngModel)]=\"pwd1\" (keyup)=\"calcStrength()\">\r\n      <small class=\"grey\" style=\"margin-top: 0.5rem\"> {{ 'NEWWALLETCOMPONENT.PASSWORDSTRENGTH' | translate }}  {{ pwdStrength }}</small><BR>\r\n      <input type=\"password\" style=\"margin-top: 1.5rem\" placeholder=\"{{ 'NEWWALLETCOMPONENT.CONFIRMPASSWORD' | translate }}\" class=\"text\" autocomplete=\"new-password\" [(ngModel)]=\"pwd2\">\r\n      <div class=\"buttons\"><a routerLink=\"/\"><button class=\"button back\">Cancel</button></a><button class=\"button next\" [class.disabled-button]=\"!pwd1\" (click)=\"encryptWallet()\">Next</button></div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"activePanel==4\">\r\n    <H1 style=\"background-color: #5963FF\">Wallet created!</H1>\r\n    <div class=\"grey-card\">\r\n      <p class=\"description bold\">Your wallet is now set up and ready to be used.</p>\r\n      <p class=\"description\">Download your encrypted keystore file and import it when you want to access your wallet.</p>\r\n      <div class=\"whitebox final\">\r\n        <p class=\"description bold pkh\">Your public account address:&#10;&#13;{{ getPkh() }}</p>\r\n      </div>\r\n      <div class=\"buttons\">\r\n        <button class=\"button next\" (click)=\"download()\">Download</button>\r\n        <button class=\"button next\" [class.disabled-button]=\"!ekfDownloaded\" (click)=\"done()\">Open Wallet</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit, Input, HostBinding } from '@angular/core';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { ExportService } from '../../services/export/export.service';\r\nimport { ImportService } from '../../services/import/import.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Router } from '@angular/router';\r\n\r\n\r\n@Component({\r\n  selector: 'app-new-wallet',\r\n  templateUrl: './new-wallet.component.html',\r\n  styleUrls: ['./new-wallet.component.scss']\r\n})\r\nexport class NewWalletComponent implements OnInit {\r\n  wordInput: string;\r\n  @HostBinding('class.tacos') showTacos = false;\r\n  @Input() pwd1 = '';\r\n  @Input() pwd2 = '';\r\n  @Input() userMnemonic = '';\r\n  hideBlur = false;\r\n  pwdStrength = '';\r\n  ekfDownloaded = false;\r\n  activePanel = 0;\r\n  data: any;\r\n  seed: any;\r\n  pkh: string;\r\n  pk: string;\r\n  MNEMONIC: {\r\n    string: string,\r\n    array: string[],\r\n    verify: number[],\r\n    wordsToVerify: number\r\n  };\r\n  constructor(\r\n    private translate: TranslateService,\r\n    private walletService: WalletService,\r\n    private messageService: MessageService,\r\n    private exportService: ExportService,\r\n    private importService: ImportService,\r\n    private inputValidationService: InputValidationService,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.generateSeed();\r\n  }\r\n  generateSeed() {\r\n    const mnemonic = this.walletService.createNewWallet();\r\n    this.MNEMONIC = {\r\n      string: mnemonic,\r\n      array: mnemonic.split(' '),\r\n      verify: [],\r\n      wordsToVerify: 5\r\n    };\r\n    // shuffle\r\n    const mnemonicLength = this.MNEMONIC.array.length;\r\n    while (this.MNEMONIC.verify.length < this.MNEMONIC.wordsToVerify) {\r\n      const index = Math.floor(Math.random() * Math.floor(mnemonicLength));\r\n      if (!this.MNEMONIC.verify.includes(index)) {\r\n        this.MNEMONIC.verify.push(index);\r\n      }\r\n    }\r\n    this.MNEMONIC.verify.sort((a, b) => a - b);\r\n    this.activePanel++;\r\n  }\r\n  checkWord() {\r\n    this.wordInput = this.wordInput.toLowerCase().trim();\r\n    if (this.wordInput === this.MNEMONIC.array[this.MNEMONIC.verify[0]]) {\r\n      this.MNEMONIC.verify.shift();\r\n      this.wordInput = '';\r\n    }\r\n    if (!this.MNEMONIC.verify) {\r\n      // Remove focus from input box\r\n      document.getElementById('wordInput').blur();\r\n    }\r\n  }\r\n  formatVerifyDescription(index: number): string {\r\n    if (this.MNEMONIC.verify.length === 0) {\r\n      return 'Seed backup has been verified!';\r\n    }\r\n    switch (index) {\r\n      case 1:\r\n      case 21:\r\n        return `Fill in the ${index}st word to verify your seed backup`;\r\n      case 2:\r\n      case 22:\r\n        return `Fill in the ${index}nd word to verify your seed backup`;\r\n      case 3:\r\n      case 23:\r\n        return `Fill in the ${index}rd word to verify your seed backup`;\r\n      default:\r\n        return `Fill in the ${index}th word to verify your seed backup`;\r\n    }\r\n  }\r\n  indexFormat(index: number): string {\r\n    if (this.MNEMONIC.verify.length === 0) {\r\n      return '';\r\n    } else if (index < 0 || index >= this.MNEMONIC.array.length) {\r\n      return '';\r\n    } else {\r\n      return 'Word ' + (index + 1);\r\n    }\r\n  }\r\n  valueFormat(index: number): string {\r\n    if (this.MNEMONIC.verify.length === 0) {\r\n      return '';\r\n    } else if (index < 0 || index > this.MNEMONIC.array.length) {\r\n      return '';\r\n    } else {\r\n      return this.MNEMONIC.array[index];\r\n    }\r\n  }\r\n  verifyView() {\r\n    if (this.MNEMONIC.verify.length) {\r\n      this.activePanel++;\r\n    } else {\r\n      throw new Error('Unexpected verify array');\r\n    }\r\n  }\r\n  pwdView() {\r\n    this.activePanel++;\r\n    this.userMnemonic = '';\r\n  }\r\n\r\n  mnemonicMatch(): boolean {\r\n    return (this.MNEMONIC.string === this.userMnemonic);\r\n  }\r\n  async encryptWallet() {\r\n    if (this.validPwd()) {\r\n      this.messageService.startSpinner('Encrypting wallet...');\r\n      const pwd = this.pwd1;\r\n      this.pwd1 = '';\r\n      this.pwd2 = '';\r\n      const ans = await this.walletService.createEncryptedWallet(this.MNEMONIC.string, pwd, '', true);\r\n      this.seed = ans.seed;\r\n      this.data = ans.data;\r\n      this.pkh = ans.pkh;\r\n      this.pk = ans.pk;\r\n      this.MNEMONIC.string = '';\r\n      this.MNEMONIC.array = [];\r\n      this.MNEMONIC.verify = [];\r\n      this.activePanel++;\r\n      this.messageService.stopSpinner();\r\n      if (document.body.offsetWidth >= 480) {\r\n        this.showTacos = true;\r\n      }\r\n    }\r\n  }\r\n  validPwd(): boolean {\r\n    if (!this.inputValidationService.password(this.pwd1)) {\r\n      this.messageService.addWarning(this.translate.instant('MNEMONICIMPORTCOMPONENT.PASSWORDWEAK'), 5);\r\n      return false;\r\n    } else if (this.pwd1 !== this.pwd2) {\r\n      this.messageService.addWarning(this.translate.instant('MNEMONICIMPORTCOMPONENT.NOMATCHPASSWORDS'), 5);\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  calcStrength() {\r\n    this.pwdStrength = this.inputValidationService.passwordStrengthDisplay(this.pwd1);\r\n  }\r\n  async done() {\r\n    const seed = this.seed;\r\n    this.seed = null;\r\n    await this.importService.importWalletFromObject(this.data, seed);\r\n    this.walletService.storeWallet();\r\n    this.data = null;\r\n    this.messageService.addSuccess('Your new wallet is now set up and ready to use!');\r\n    this.router.navigate([`/account/${this.walletService.wallet.implicitAccounts[0].address}`]);\r\n  }\r\n  export(): string {\r\n    return JSON.stringify(this.data);\r\n  }\r\n  getPkh(): string {\r\n    return this.pkh;\r\n  }\r\n  download() {\r\n    this.exportService.downloadWallet(this.data);\r\n    this.ekfDownloaded = true;\r\n  }\r\n}\r\n","import { Component, OnInit, Input, EventEmitter, Output, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\n\r\n@Component({\r\n  selector: 'app-permission-request',\r\n  templateUrl: './permission-request.component.html',\r\n  styleUrls: ['./permission-request.component.scss']\r\n})\r\nexport class PermissionRequestComponent implements OnInit, OnChanges {\r\n  @Input() permissionRequest: any;\r\n  @Output() permissionResponse = new EventEmitter();\r\n  selectedAccount: string;\r\n  constructor(\r\n    public walletService: WalletService\r\n  ) { }\r\n  ngOnInit(): void {\r\n    if (this.walletService.wallet) {\r\n      this.selectedAccount = this.walletService.wallet.implicitAccounts[0].address;\r\n    }\r\n  }\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    console.log(changes);\r\n    if (this.permissionRequest) {\r\n      const scrollBarWidth = window.innerWidth - document.body.offsetWidth;\r\n      document.body.style.marginRight = scrollBarWidth.toString();\r\n      document.body.style.overflow = 'hidden';\r\n    }\r\n  }\r\n  rejectPermissions() {\r\n    this.permissionResponse.emit(null);\r\n    this.reset();\r\n  }\r\n  grantPermissions() {\r\n    console.log(this.selectedAccount);\r\n    const pk = this.walletService.wallet.getImplicitAccount(this.selectedAccount).pk;\r\n    this.permissionResponse.emit(pk);\r\n    this.reset();\r\n  }\r\n  reset() {\r\n    document.body.style.marginRight = '';\r\n    document.body.style.overflow = '';\r\n    this.permissionRequest = null;\r\n  }\r\n  scopeToText(scope: string) {\r\n    if (scope === 'sign') {\r\n      return 'Request arbitrary signing';\r\n    } else if (scope === 'operation_request') {\r\n      return 'Request operation signing';\r\n    }\r\n    return scope;\r\n  }\r\n}\r\n","<div *ngIf=\"permissionRequest\" id=\"myModal\" class=\"kukai-modal top\">\r\n  <!-- Modal content -->\r\n  <div class=\"km-content\">\r\n    <div class=\"x\" (click)=\"rejectPermissions()\"><img src=\"../../../assets/img/x.svg\"></div>\r\n    <div class=\"km-header\">\r\n      <H1>Permission Request</H1>\r\n    </div>\r\n    <!-- Request -->\r\n    <div class=\"km-body\">\r\n      <p>{{ permissionRequest.appMetadata.name }} wants the following permissions:</p>\r\n      <ul>\r\n        <li *ngFor=\"let scope of permissionRequest.scopes\">{{ scopeToText(scope) }}</li>\r\n      </ul>\r\n      <p>Select an account the permissions should be applied to:</p>\r\n      <select class=\"select-css\" [(ngModel)]=\"selectedAccount\">\r\n        <ng-container *ngFor=\"let acc of walletService.wallet.implicitAccounts\">\r\n          <option value=\"{{ acc.address }}\">{{ acc.pkh }}</option>\r\n        </ng-container>\r\n      </select>\r\n      <div class=\"row-group\" style=\"margin: 1.25rem 0 1.5rem;\">\r\n        <button  class=\"blue confirm\" (click)=\"grantPermissions()\">Approve</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","\r\n<button (click)=\"openModal()\">Scan QR code</button>\r\n<!-- The Modal -->\r\n<div *ngIf=\"modalOpen\" id=\"myModal\" class=\"kukai-modal\">\r\n  <!-- Modal content -->\r\n  <div class=\"km-content\">\r\n    <div class=\"x\" (click)=\"closeModal()\"><img src=\"../../../assets/img/x.svg\"></div>\r\n    <div class=\"km-header\">\r\n    </div>\r\n    <div class=\"km-body\">\r\n      <label>Scan QR code from dApp</label>\r\n      <div class=\"video-container\">\r\n        <video #videoPlayer>\r\n          Browser not supported\r\n        </video>\r\n        <p class=\"no-cam\" *ngIf=\"!qrScanner\">No camera detected</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit, ViewChild, TemplateRef, Input, ElementRef } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BeaconService } from '../../services/beacon/beacon.service';\r\nimport QrScanner from 'qr-scanner';\r\n@Component({\r\n  selector: 'app-qr-scanner',\r\n  templateUrl: './qr-scanner.component.html',\r\n  styleUrls: ['./qr-scanner.component.scss']\r\n})\r\nexport class QrScannerComponent implements OnInit {\r\n\r\n  constructor(\r\n    private beaconService: BeaconService\r\n  ) { }\r\n  @ViewChild('videoPlayer') videoplayer: ElementRef;\r\n  modalRef1: BsModalRef;\r\n  modalOpen = false;\r\n  qrScanner: QrScanner;\r\n  //videoSource: HTMLVideoElement\r\n  ngOnInit() {\r\n  }\r\n  openModal() {\r\n    // hide body scrollbar\r\n    const scrollBarWidth = window.innerWidth - document.body.offsetWidth;\r\n    document.body.style.marginRight = scrollBarWidth.toString();\r\n    document.body.style.overflow = 'hidden';\r\n    this.modalOpen = true;\r\n    this.scan();\r\n  }\r\n  async scan() {\r\n    console.log('1');\r\n    const hasCamera = await QrScanner.hasCamera();\r\n    if (hasCamera) {\r\n      QrScanner.WORKER_PATH = './assets/js/qr-scanner-worker.min.js';\r\n      this.qrScanner = new QrScanner(this.videoplayer.nativeElement, result => this.handleQrCode(result));\r\n      await this.qrScanner.start();\r\n    } else {\r\n      console.warn('no camera found');\r\n    }\r\n  }\r\n  handleQrCode(pairInfo: string) {\r\n    console.log('Pairing Info', pairInfo);\r\n    this.beaconService.addPeer(pairInfo);\r\n    this.closeModal();\r\n  }\r\n  closeModal() {\r\n    // restore body scrollbar\r\n    if (this.qrScanner) {\r\n      this.qrScanner.stop();\r\n    }\r\n    document.body.style.marginRight = '';\r\n    document.body.style.overflow = '';\r\n    this.modalOpen = false;\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, ViewChild, TemplateRef, Input } from '@angular/core';\r\n\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport * as QRCode from 'qrcode';\r\nimport { MessageService } from '../../services/message/message.service';\r\n\r\n\r\n\r\n@Component({\r\n    selector: 'app-receive',\r\n    templateUrl: './receive.component.html',\r\n    styleUrls: ['./receive.component.scss']\r\n})\r\nexport class ReceiveComponent implements OnInit {\r\n    @ViewChild('modal1') modal1: TemplateRef<any>;\r\n    @Input() activeAddress: String;\r\n    showReceiveFormat = {\r\n        btnOutline: true,\r\n        dropdownItem: false,\r\n    };\r\n    modalRef1: BsModalRef;\r\n    modalOpen = false;\r\n    constructor(\r\n        private modalService: BsModalService,\r\n        private messageService: MessageService\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n    }\r\n    openModal() {\r\n      // hide body scrollbar\r\n      const scrollBarWidth = window.innerWidth - document.body.offsetWidth;\r\n      document.body.style.marginRight = scrollBarWidth.toString();\r\n      document.body.style.overflow = 'hidden';\r\n      this.modalOpen = true;\r\n      setTimeout(() => {\r\n        this.getQR();\r\n      }, 100);\r\n    }\r\n    closeModal() {\r\n      // restore body scrollbar\r\n      document.body.style.marginRight = '';\r\n      document.body.style.overflow = '';\r\n      this.modalOpen = false;\r\n    }\r\n    getQR() {\r\n        QRCode.toCanvas(document.getElementById('canvas'), this.activeAddress, { errorCorrectionLevel: 'H' , scaleFactor: 2, color: { light: '#FCFCFC'}}, function (err, canvas) {\r\n            if (err) { throw err; }\r\n        });\r\n    }\r\n\r\n    open1(template1: TemplateRef<any>) {\r\n        if (this.activeAddress) {\r\n            this.modalRef1 = this.modalService.show(template1, { class: 'first' });  // modal-sm / modal-lg\r\n            setTimeout(() => {\r\n                this.getQR();\r\n            }, 100);\r\n        } else {\r\n            this.messageService.add('Select an address first by clicking on it!');\r\n        }\r\n    }\r\n\r\n}\r\n","\r\n<img class=\"qr-icon\" src=\"../../../assets/img/qr.svg\" (click)=\"openModal()\">\r\n<!-- The Modal -->\r\n<div *ngIf=\"modalOpen\" id=\"myModal\" class=\"kukai-modal\">\r\n  <!-- Modal content -->\r\n  <div class=\"km-content\">\r\n    <div class=\"x\" (click)=\"closeModal()\"><img src=\"../../../assets/img/x.svg\"></div>\r\n    <div class=\"km-header\">\r\n      <H1>{{ 'RECEIVECOMPONENT.RECEIVETEZ' | translate }}</H1>\r\n    </div>\r\n    <!-- Prepare delegation -->\r\n    <div class=\"km-body\">\r\n      <label>Your account QR code</label>\r\n      <center>\r\n        <canvas id='canvas'></canvas>\r\n      </center>\r\n      <span>{{ activeAddress }}</span>\r\n    </div>\r\n  </div>\r\n</div>","<button *ngIf=\"!beaconMode\" class=\"purple\" (click)=\"openModal()\">Send</button>\r\n\r\n<!-- The Modal -->\r\n<div *ngIf=\"modalOpen\" id=\"myModal\" class=\"kukai-modal\" [class.top]=\"beaconMode\">\r\n  <!-- Modal content -->\r\n  <div class=\"km-content\">\r\n    <div class=\"x\" (click)=\"closeModalAction()\"><img src=\"../../../assets/img/x.svg\"></div>\r\n    <div class=\"km-header\">\r\n      <H1 *ngIf=\"activeView === 0\">Send tez</H1>\r\n      <H1 *ngIf=\"activeView === 1\">Confirmation</H1>\r\n      <!--<span class=\"close\" (click)=\"modalOpen = false\" class=\"close\">&times;</span>-->\r\n      <button *ngIf=\"activeView === 0 && !(walletService.isLedgerWallet() || beaconMode)\" class=\"small multiple-destinations\" (click)=\"toggleDestination()\">\r\n        <ng-container *ngIf=\"!this.isMultipleDestinations\">Multiple transactions</ng-container>\r\n        <ng-container *ngIf=\"this.isMultipleDestinations\">Single transaction</ng-container>\r\n      </button>\r\n    </div>\r\n    <!-- Prepare transaction -->\r\n    <div class=\"km-body\" *ngIf=\"activeView === 0\">\r\n      <div class=\"amount\">\r\n        <input #amountInput class=\"input\" (input)=\"amountInputChange()\" class=\"custom-large\" placeholder=\"0.00\" [(ngModel)]=\"amount\"\r\n          (click)=\"sendMax = false;\" [style.font-size.rem]=\"dynSize()\"\r\n          [style.width.ch]=\"amount ? amount.length + 1 : 3.6\" [disabled]=\"isMultipleDestinations || (beaconMode && operationRequest.operationDetails[0].amount)\">\r\n        <span class=\"tez\">tez</span>\r\n      </div>\r\n      <div class=\"row-group\">\r\n        <button *ngIf=\"!(this.isMultipleDestinations || beaconMode)\" tabindex=-1 class=\"small\" [class.max]=\"sendMax\"\r\n          (click)=\"sendEntireBalance($event)\">Send Max</button>\r\n        <p *ngIf=\"this.isMultipleDestinations || beaconMode\"></p>\r\n        <p class=\"fee\">\r\n          <ng-container *ngIf=\"!getTotalBurn() ; else burn\">Fee: </ng-container>\r\n          <ng-template #burn>Fee & storage cost: </ng-template>\r\n          {{ getTotalCost(true) }}\r\n        </p>\r\n      </div>\r\n      <div class=\"group\">\r\n        <label>From address</label>\r\n        <p>{{ activeAccount.address }}</p>\r\n      </div>\r\n      <div *ngIf=\"!this.isMultipleDestinations\" class=\"group\">\r\n        <label style=\"justify-content: space-between; opacity: 1; color: rgba(44, 50, 58, 0.4)\"><span>Send to</span>\r\n          <select class=\"select-css\" [(ngModel)]=\"torusVerifier\" (ngModelChange)=\"verifierChange()\" [disabled]=\"beaconMode\">\r\n            <option value=\"\" selected>Tezos Address</option>\r\n            <option *ngFor=\"let key of torusService.verifierMapKeys\" value=\"{{key}}\">{{ torusService.verifierMap[key].name }} Account</option>\r\n          </select></label>\r\n        <input type=\"text\" class=\"text\" (input)=\"updateDefaultValues()\" (change)=\"validateReceiverAddress()\" [disabled]=\"beaconMode\"\r\n          [(ngModel)]=\"toPkh\">\r\n      </div>\r\n      <div *ngIf=\"beaconMode && parameters\">\r\n        <label style=\"color: #C83532; margin-top: 1rem\">This transaction will invoke a contract</label>\r\n      </div>\r\n      <ng-container *ngIf=\"torusVerifier\">\r\n        <p class=\"torus-details\" *ngIf=\"torusPendingLookup\">Loading address...</p>\r\n        <p class=\"torus-details\" *ngIf=\"!torusPendingLookup && torusLookupAddress\">{{ torusLookupAddress }}</p>\r\n      </ng-container>\r\n      <div *ngIf=\"this.isMultipleDestinations\" class=\"group\">\r\n        <label>Addresses and amounts <span class=\"batchInfo\">{{ batchSpace() }}</span></label>\r\n        <textarea type=\"text\" class=\"text\" (input)=\"updateDefaultValues()\" (change)=\"validateBatch()\" rows=\"3\"\r\n          [(ngModel)]=\"toMultipleDestinationsString\"\r\n          placeholder=\"address1 amount1 ; &#10;address2 amount2 ; &#10;address3 ...\"></textarea>\r\n      </div>\r\n      <div class=\"advanced\">\r\n        <small>Advanced</small>\r\n        <div class=\"switch-container\">\r\n          <label class=\"switch\">\r\n            <input type=\"checkbox\" [(ngModel)]=\"advancedForm\" tabindex=-1>\r\n            <span class=\"slider round\"></span>\r\n          </label><span class=\"switch-desc\">\r\n            <ng-container *ngIf=\"!advancedForm\">Off</ng-container>\r\n            <ng-container *ngIf=\"advancedForm\">On</ng-container>\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div *ngIf=\"advancedForm\" class=\"advanced-form\">\r\n        <div class=\"row-group\">\r\n          <div class=\"group\">\r\n            <label>Gas limit</label>\r\n            <input type=\"text\" class=\"text\" placeholder={{this.defaultTransactionParams.gas.toString()}}\r\n              [(ngModel)]=\"gas\">\r\n          </div>\r\n          <div class=\"group\">\r\n            <label>Fee</label>\r\n            <input type=\"text\" (input)=\"updateMaxAmount()\" (paste)=\"updateMaxAmount()\" class=\"text\"\r\n              placeholder={{this.defaultTransactionParams.fee.toString()}} [(ngModel)]=\"fee\">\r\n          </div>\r\n        </div>\r\n        <div class=\"row-group\">\r\n          <div class=\"group\">\r\n            <label>Storage limit</label>\r\n            <input type=\"text\" (input)=\"updateMaxAmount()\" (paste)=\"updateMaxAmount()\" class=\"text\"\r\n              placeholder={{this.defaultTransactionParams.storage.toString()}} [(ngModel)]=\"storage\">\r\n          </div>\r\n          <div class=\"group\">\r\n            <label>Max storage cost</label>\r\n            <input type=\"text\" class=\"text read-only\" [value]=\"burnAmount() ? burnAmount() : '0 tez'\" tabindex=-1\r\n              readonly>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <span *ngIf=\"formInvalid\" class=\"danger no-margin\">\r\n        {{ formInvalid }}\r\n      </span>\r\n      <button style=\"margin: 2.5rem 0 1.5rem;\" class=\"purple\" (click)=\"openModal2()\">Preview</button>\r\n    </div>\r\n    <!-- Confirm transaction -->\r\n    <div class=\"km-body\" *ngIf=\"activeView === 1\">\r\n      <!-- Single transaction -->\r\n      <div class=\"preview-top\">\r\n      <div class=\"preview-amount\">\r\n        <span class=\"section\">Send</span>\r\n        <span class=\"amount-tez\">{{ totalAmount() | number:'1.0-6' }} tez</span>\r\n        <span class=\"amount-usd\">{{ totalAmount() * walletService.wallet.XTZrate | number:'1.0-2' }} USD</span>\r\n        <span *ngIf=\"!isMultipleDestinations\" class=\"section\">To</span>\r\n      </div>\r\n      <img src=\"../../../assets/img/tezos-xtz-logo.svg\" style=\"height: 4.5rem; margin-right: 1rem\">\r\n      </div>\r\n      <ng-container *ngIf=\"!isMultipleDestinations\">\r\n        <span *ngIf=\"torusLookupId\" class=\"torus-to\"><img src=\"../../../assets/img/{{ torusVerifier }}-logo.svg\">\r\n          {{ torusLookupId }}</span>\r\n        <span class=\"single-to\">{{ transactions[0].to }}</span>\r\n        <p id=\"previewAttention\" *ngIf=\"torusLookupId\">{{ previewAttention() }}</p>\r\n        <div class=\"seperator\"></div>\r\n      </ng-container>\r\n      <ng-container *ngIf=\"isMultipleDestinations\">\r\n        <!-- Multiple transactions -->\r\n        <div class=\"seperator\"></div>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">{{ 'SENDCOMPONENT.TO' | translate }}</th>\r\n              <th scope=\"col\">{{ 'SENDCOMPONENT.AMOUNT' | translate }}</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr *ngFor=\"let transaction of showTransactions\">\r\n              <td><span *ngIf=\"transaction.storageLimit\">*</span>{{ transaction.to }}</td>\r\n              <td class=\"txAmount\">{{ transaction.amount | number:'1.0-6' }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <button style=\"margin-left: auto; margin: 0.5rem 0 1rem; height: 2rem;\" *ngIf='transactions.length > 2' type=\"button\"\r\n          class=\"show-more\" aria-label=\"More\" (click)=\"toggleTransactions()\">\r\n          <span aria-hidden=\"true\"> {{ showBtn }} </span>\r\n        </button>\r\n        <div class=\"seperator\"></div>\r\n      </ng-container>\r\n      <!-- Sender -->\r\n      <ng-container *ngIf=\"this.walletService.wallet.verifier\">\r\n        <!-- Torus -->\r\n        <div class=\"preview-row\">\r\n          <span>From</span><span><img src=\"../../../assets/img/{{ this.walletService.wallet.verifier }}-logo.svg\">\r\n            {{ this.walletService.wallet.displayName() }}\r\n          </span>\r\n        </div>\r\n        <div class=\"preview-row\">\r\n          <span>Address</span><span>{{ activeAccount.address }}</span>\r\n        </div>\r\n      </ng-container>\r\n      <ng-container *ngIf=\"!this.walletService.wallet.name\">\r\n        <!-- Other -->\r\n        <div class=\"preview-row\">\r\n          <span>From</span><span>{{ activeAccount.address }}</span>\r\n        </div>\r\n      </ng-container>\r\n      <div class=\"seperator\"></div>\r\n      <div class=\"preview-row\">\r\n        <span>Fee</span><span>{{ getTotalFee() | number:'1.0-6' }} tez</span>\r\n      </div>\r\n      <div *ngIf=\"getTotalBurn()\" class=\"preview-row\">\r\n        <span>Max storage cost</span><span>{{ getTotalBurn() | number:'1.0-6' }} tez</span>\r\n      </div>\r\n      <ng-container *ngIf=\"parameters\">\r\n        <p *ngIf=\"parameters?.entrypoint\" class=\"preview\">\r\n          Entrypoint  {{ parameters.entrypoint }}\r\n        </p>\r\n        <div class=\"tabs-container\">\r\n          <ul class=\"tabs\">\r\n            <li class=\"tab\" [class.active]=\"parametersFormat === 0\" (click)=\"setParametersFormat(0)\">Micheline</li>\r\n            <li class=\"tab\" [class.active]=\"parametersFormat === 1\" (click)=\"setParametersFormat(1)\">JSON</li>\r\n          </ul>\r\n        </div>\r\n        <textarea *ngIf=\"parameters\" style=\"width: 100%; font-size: 0.875rem\" rows=\"10\" readonly>{{ parametersTextboxDisplay() }}</textarea>\r\n      </ng-container>\r\n      <div class=\"seperator\"></div>\r\n      <div class=\"row-group\" style=\"margin: 1.25rem 0 1.5rem;\">\r\n        <input *ngIf=\"!walletService.isLedgerWallet() && !walletService.isTorusWallet()\" [(ngModel)]=\"password\"\r\n          autocomplete=\"current-password\" placeholder=\"Password\" class=\"text password\" type=\"password\"\r\n          (input)=\"this.pwdValid = ''\" (change)=\"this.pwdValid = ''\">\r\n        <button class=\"retry\" *ngIf=\"walletService.isLedgerWallet() && ledgerError; else elseBlock\"\r\n          (click)=\"ledgerRetry()\">Sign with Ledger</button>\r\n        <ng-template #elseBlock>\r\n          <button class=\"purple confirm\" (click)=\"inject()\"\r\n            [disabled]=\"walletService.isLedgerWallet() && (!sendResponse || !sendResponse.payload || !sendResponse.payload.signedOperation)\">\r\n            {{ walletService.isLedgerWallet() ? 'Broadcast' : 'Confirm'}}</button>\r\n        </ng-template>\r\n      </div>\r\n      <span *ngIf=\"this.pwdValid\" class=\"danger margin\">{{ this.pwdValid }}</span>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit, ViewEncapsulation, Input, ViewChild, ElementRef, Output, EventEmitter, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { KeyPair, DefaultTransactionParams } from '../../interfaces';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { CoordinatorService } from '../../services/coordinator/coordinator.service';\r\nimport { OperationService } from '../../services/operation/operation.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { LedgerService } from '../../services/ledger/ledger.service';\r\nimport { EstimateService } from '../../services/estimate/estimate.service';\r\nimport Big from 'big.js';\r\nimport { Constants } from '../../constants';\r\nimport { LedgerWallet, TorusWallet } from '../../services/wallet/wallet';\r\nimport { Account, ImplicitAccount, OriginatedAccount } from '../../services/wallet/wallet';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { TorusService } from '../../services/torus/torus.service';\r\nimport { LookupService } from '../../services/lookup/lookup.service';\r\nimport { emitMicheline, assertMichelsonData } from '@taquito/michel-codec';\r\n\r\ninterface SendData {\r\n  to: string;\r\n  amount: number;\r\n  gasLimit: number;\r\n  storageLimit: number;\r\n  parameters?: any;\r\n  meta?: {\r\n    alias: string;\r\n    verifier: string;\r\n    twitterId?: string;\r\n  };\r\n}\r\nconst zeroTxParams: DefaultTransactionParams = {\r\n  gas: 0,\r\n  storage: 0,\r\n  fee: 0,\r\n  burn: 0\r\n};\r\n@Component({\r\n  selector: 'app-send',\r\n  templateUrl: './send.component.html',\r\n  styleUrls: ['./send.component.scss']\r\n})\r\nexport class SendComponent implements OnInit, OnChanges {\r\n  costPerByte: string = this.estimateService.costPerByte;\r\n  // torus\r\n  torusVerifier = '';\r\n  torusPendingLookup = false;\r\n  torusLookupAddress = '';\r\n  torusLookupId = '';\r\n  torusTwitterId = '';\r\n  /* New variables */\r\n  modalOpen = false;\r\n  advancedForm = false;\r\n  sendMax = false;\r\n  /* old variables */\r\n  @Input() beaconMode = false;\r\n  @Input() operationRequest: any;\r\n  @Input() activeAccount: Account;\r\n  @Output() operationResponse = new EventEmitter();\r\n  @ViewChild('amountInput') amountInputView: ElementRef;\r\n  CONSTANTS = new Constants();\r\n  defaultTransactionParams: DefaultTransactionParams = zeroTxParams;\r\n\r\n  // Transaction variables\r\n  toPkh: string;\r\n  amount = '';\r\n  fee: string;\r\n  parameters: any;\r\n  micheline: { entrypoint: string, value: string };\r\n  parametersFormat = 0;\r\n  sendFee: string;\r\n  burnFee = 0;\r\n  gas = '';\r\n  storage = '';\r\n  isMultipleDestinations = false;\r\n  toMultipleDestinationsString = '';\r\n  toMultipleDestinations: SendData[] = [];\r\n  activeView = 0;\r\n  showTransactions: SendData[] = [];\r\n  simSemaphore = 0;\r\n  dom: Document;\r\n  implicitAccounts = null;\r\n  password: string;\r\n  pwdValid: string;\r\n  formInvalid = '';\r\n  sendResponse: any;\r\n  errorMessage = '';\r\n  latestSimError = '';\r\n  transactions: SendData[] = [];\r\n  prevEquiClass = '';\r\n  XTZrate = 0;\r\n  ledgerError = '';\r\n  showBtn = 'Show More';\r\n\r\n  constructor(\r\n    private translate: TranslateService,\r\n    private walletService: WalletService,\r\n    private operationService: OperationService,\r\n    private coordinatorService: CoordinatorService,\r\n    private inputValidationService: InputValidationService,\r\n    private ledgerService: LedgerService,\r\n    private estimateService: EstimateService,\r\n    private messageService: MessageService,\r\n    public torusService: TorusService,\r\n    private lookupService: LookupService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.walletService.wallet) {\r\n      console.log('init send');\r\n      this.init();\r\n    }\r\n  }\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    console.log(changes);\r\n    if (this.operationRequest && !this.walletService.isLedgerWallet()) {\r\n      console.log('Beacon payload to send', this.operationRequest);\r\n      if (this.operationRequest.operationDetails[0].kind === 'transaction') {\r\n        this.openModal();\r\n        if (this.operationRequest.operationDetails[0].destination) {\r\n          this.toPkh = this.operationRequest.operationDetails[0].destination;\r\n        } else {\r\n          console.warn('No destination');\r\n        }\r\n        if (this.operationRequest.operationDetails[0].amount) {\r\n          this.amount = Big(this.operationRequest.operationDetails[0].amount).div(1000000).toString();\r\n        }\r\n        if (this.operationRequest.operationDetails[0].parameters) {\r\n          this.parameters = this.operationRequest.operationDetails[0].parameters;\r\n        }\r\n        this.activeAccountChange();\r\n      }\r\n    } else {\r\n      this.operationResponse.emit(null);\r\n    }\r\n  }\r\n  init() {\r\n    if (!this.activeAccount) {\r\n      this.activeAccount = this.walletService.wallet.implicitAccounts[0];\r\n    }\r\n    console.log(this.activeAccount.address);\r\n    this.implicitAccounts = this.walletService.wallet.implicitAccounts;\r\n  }\r\n  /* Modal 2 */\r\n  openModal() {\r\n    // hide body scrollbar\r\n    const scrollBarWidth = window.innerWidth - document.body.offsetWidth;\r\n    document.body.style.marginRight = scrollBarWidth.toString();\r\n    document.body.style.overflow = 'hidden';\r\n    console.log('open modal');\r\n    this.modalOpen = true;\r\n    if (this.walletService.wallet) {\r\n      if (!this.activeAccount) {\r\n        this.activeAccount = this.implicitAccounts[0];\r\n      }\r\n      this.clearForm();\r\n      if (window.innerWidth > 1300) {\r\n        setTimeout(() => {\r\n          const inputElem = <HTMLInputElement>this.amountInputView.nativeElement;\r\n          inputElem.focus();\r\n        }, 100);\r\n      }\r\n      this.estimateService.preLoadData(this.activeAccount.pkh, this.activeAccount.pk);\r\n    }\r\n  }\r\n  async openModal2() {\r\n    if (!this.simSemaphore && !this.torusPendingLookup) {\r\n      this.formInvalid = this.checkInput(true);\r\n      if (!this.formInvalid) {\r\n        if (!this.amount) { this.amount = '0'; }\r\n        let clearFee = false;\r\n        if (!this.fee) {\r\n          this.fee = this.defaultTransactionParams.fee.toString();\r\n          clearFee = true;\r\n        }\r\n        this.prepTransactions();\r\n        this.formInvalid = this.checkBalance();\r\n        if (!this.formInvalid) {\r\n          this.activeView++;\r\n          if (this.walletService.isLedgerWallet()) {\r\n            this.messageService.startSpinner('Preparing transaction...');\r\n            const keys = await this.walletService.getKeys('');\r\n            if (keys) {\r\n              await this.sendTransaction(keys);\r\n            } else {\r\n              this.messageService.stopSpinner();\r\n            }\r\n          }\r\n        } else if (clearFee) {\r\n          this.fee = '';\r\n        }\r\n      }\r\n    }\r\n  }\r\n  async ledgerRetry() {\r\n    this.ledgerError = '';\r\n    this.messageService.startSpinner('Preparing transaction...');\r\n    const keys = await this.walletService.getKeys('');\r\n    if (keys) {\r\n      await this.sendTransaction(keys);\r\n    } else {\r\n      this.messageService.stopSpinner();\r\n    }\r\n  }\r\n  async inject() {\r\n    if (this.walletService.isLedgerWallet()) {\r\n      this.broadCastLedgerTransaction();\r\n      this.sendResponse = null;\r\n      this.closeModal();\r\n    } else {\r\n      const pwd = this.password;\r\n      this.password = '';\r\n      this.messageService.startSpinner('Signing transaction...');\r\n      let keys;\r\n      try {\r\n        keys = await this.walletService.getKeys(pwd, this.activeAccount.pkh);\r\n      } catch {\r\n        this.messageService.stopSpinner();\r\n      }\r\n      if (keys) {\r\n        this.pwdValid = '';\r\n        this.messageService.startSpinner('Sending transaction...');\r\n        this.sendTransaction(keys);\r\n        this.closeModal();\r\n      } else {\r\n        this.messageService.stopSpinner();\r\n        if (this.walletService.wallet instanceof TorusWallet) {\r\n          this.pwdValid = `Authorization failed`;\r\n        } else {\r\n          this.pwdValid = this.translate.instant('SENDCOMPONENT.WRONGPASSWORD');  // 'Wrong password!';\r\n        }\r\n      }\r\n    }\r\n  }\r\n  closeModalAction() {\r\n    this.closeModal();\r\n    this.operationResponse.emit(null);\r\n  }\r\n  closeModal() {\r\n    // restore body scrollbar\r\n    document.body.style.marginRight = '';\r\n    document.body.style.overflow = '';\r\n    this.activeView = 0;\r\n    this.modalOpen = false;\r\n    this.clearForm();\r\n  }\r\n  showAccountBalance() {\r\n    const accountBalance = Big(this.activeAccount.balanceXTZ).div(1000000).toString();\r\n    return this.numberWithCommas(accountBalance) + ' XTZ';\r\n  }\r\n  numberWithCommas(x: string) {\r\n    const parts: Array<string> = x.split('.');\r\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n    return parts.join('.');\r\n  }\r\n  sendEntireBalance(event: Event) {\r\n    event.stopPropagation();\r\n    this.sendMax = true;\r\n    this.checkMaxAmount();\r\n  }\r\n  checkMaxAmount() {\r\n    if (this.sendMax) {\r\n      const max = this.maxToSend(this.activeAccount);\r\n      if (max.length && max.slice(0, 1) !== '-') {\r\n        this.amount = max;\r\n      } else {\r\n        this.amount = '0';\r\n      }\r\n    }\r\n  }\r\n  updateMaxAmount() {\r\n    if (this.sendMax) {\r\n      const max = this.maxToSend(this.activeAccount);\r\n      let maxAmount = '0';\r\n      if (max.length && max.slice(0, 1) !== '-') {\r\n        maxAmount = max;\r\n      }\r\n      if (this.amount !== maxAmount) {\r\n        this.amount = maxAmount;\r\n      }\r\n    }\r\n  }\r\n  maxToSend(account: Account): string {\r\n    if (account && (account instanceof ImplicitAccount)) {\r\n      let accountBalance = Big(account.balanceXTZ).div(1000000);\r\n      accountBalance = accountBalance.minus(this.fee && Number(this.fee) ? Number(this.fee) : this.defaultTransactionParams.fee);\r\n      if (!this.isMultipleDestinations) {\r\n        accountBalance = accountBalance.minus(this.storage && Number(this.storage) ? Number(Big(this.storage).times(this.costPerByte).div('1000000')) : this.defaultTransactionParams.burn);\r\n      } else {\r\n        accountBalance = accountBalance.minus(this.defaultTransactionParams.burn);\r\n      }\r\n      accountBalance = accountBalance.minus(0.000001); // dust\r\n      return accountBalance.toString();\r\n    } else {\r\n      return Big(account.balanceXTZ).div(1000000).toString();\r\n    }\r\n  }\r\n  prepTransactions(finalCheck = false): boolean {\r\n    if (!this.checkInput(finalCheck)) {\r\n      if (!this.toMultipleDestinationsString) { this.toMultipleDestinationsString = ''; }\r\n      if (this.isMultipleDestinations) {\r\n        this.transactions = this.toMultipleDestinations;\r\n        this.showTransactions = [];\r\n        if (this.transactions.length > 1) {\r\n          this.showTransactions.push(this.transactions[0], this.transactions[1]);\r\n        } else {\r\n          this.showTransactions.push(this.transactions[0]);\r\n        }\r\n      } else {\r\n        const gasLimit: number = this.gas ? Number(this.gas) : this.defaultTransactionParams.gas;\r\n        const storageLimit: number = this.storage ? Number(this.storage) : this.defaultTransactionParams.storage;\r\n        const toAddress = !this.torusVerifier ? this.toPkh : this.torusLookupAddress;\r\n        const parameters = this.parameters ? this.parameters : undefined;\r\n        this.transactions = [{ to: toAddress, amount: Number(this.amount), gasLimit, storageLimit, parameters }];\r\n        if (this.torusLookupId) {\r\n          this.transactions[0].meta = { alias: this.torusLookupId, verifier: this.torusVerifier, twitterId: (this.torusVerifier === 'twitter') ? this.torusTwitterId : undefined };\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  async sendTransaction(keys: KeyPair) {\r\n    let amount = this.amount;\r\n    let fee = this.fee;\r\n    if (!this.walletService.isLedgerWallet()) {\r\n      this.toPkh = '';\r\n      this.amount = '';\r\n      this.fee = '';\r\n      this.gas = '';\r\n      this.storage = '';\r\n      this.toMultipleDestinationsString = '';\r\n      this.toMultipleDestinations = [];\r\n      this.showTransactions = [];\r\n    }\r\n    if (!amount) { amount = '0'; }\r\n    if (!fee) { fee = '0'; }\r\n    this.operationService.transfer(this.activeAccount.address, this.transactions, Number(fee), keys).subscribe(\r\n      async (ans: any) => {\r\n        this.sendResponse = ans;\r\n        if (ans.success === true) {\r\n          console.log('Transaction successful ', ans);\r\n          if (ans.payload.opHash) {\r\n            this.operationResponse.emit(ans.payload.opHash);\r\n            this.messageService.stopSpinner();\r\n            const metadata = { transactions: this.transactions, opHash: ans.payload.opHash };\r\n            this.coordinatorService.boost(this.activeAccount.address, metadata);\r\n            if (this.transactions[0].meta) {\r\n              this.torusNotification(this.transactions[0]);\r\n            }\r\n            for (const transaction of this.transactions) {\r\n              if (this.walletService.addressExists(transaction.to)) {\r\n                this.coordinatorService.boost(transaction.to);\r\n              }\r\n            }\r\n          } else if (this.walletService.wallet instanceof LedgerWallet) {\r\n            await this.requestLedgerSignature();\r\n          }\r\n        } else {\r\n          this.messageService.stopSpinner();\r\n          console.log('Transaction error id ', ans.payload.msg);\r\n          this.messageService.addError(ans.payload.msg, 0);\r\n        }\r\n      },\r\n      err => {\r\n        this.messageService.stopSpinner();\r\n        console.log('Error Message ', JSON.stringify(err));\r\n        if (this.walletService.isLedgerWallet()) {\r\n          this.messageService.addError('Failed to create transaction', 0);\r\n        }\r\n      },\r\n    );\r\n  }\r\n  async requestLedgerSignature() {\r\n    if (this.walletService.wallet instanceof LedgerWallet) {\r\n      await this.messageService.startSpinner('Waiting for Ledger signature...');\r\n      try {\r\n        const op = this.sendResponse.payload.unsignedOperation;\r\n        const signature = await this.ledgerService.signOperation(op, this.walletService.wallet.implicitAccounts[0].derivationPath);\r\n        if (signature) {\r\n          const signedOp = op + signature;\r\n          this.sendResponse.payload.signedOperation = signedOp;\r\n        } else {\r\n          this.ledgerError = 'Failed to sign transaction';\r\n        }\r\n      } finally {\r\n        this.messageService.stopSpinner();\r\n      }\r\n    }\r\n  }\r\n\r\n  async broadCastLedgerTransaction() {\r\n    this.operationService.broadcast(this.sendResponse.payload.signedOperation).subscribe(\r\n      ((ans: any) => {\r\n        this.sendResponse = ans;\r\n        if (ans.success && this.activeAccount) {\r\n          const metadata = { transactions: this.transactions, opHash: ans.payload.opHash };\r\n          if (this.transactions[0].meta) {\r\n            this.torusNotification(this.transactions[0]);\r\n          }\r\n          this.coordinatorService.boost(this.activeAccount.address, metadata);\r\n          if (this.walletService.addressExists(this.transactions[0].to)) {\r\n            this.coordinatorService.boost(this.transactions[0].to);\r\n          }\r\n        } else {\r\n          this.messageService.addError(this.sendResponse.payload.msg, 0);\r\n        }\r\n        console.log('ans: ' + JSON.stringify(ans));\r\n      })\r\n    );\r\n  }\r\n  toggleDestination() {\r\n    this.defaultTransactionParams = zeroTxParams;\r\n    this.sendMax = false;\r\n    this.prevEquiClass = '';\r\n    this.isMultipleDestinations = !this.isMultipleDestinations;\r\n    this.transactions = [];\r\n    this.toMultipleDestinationsString = '';\r\n    this.formInvalid = '';\r\n    this.toPkh = '';\r\n    this.amount = '';\r\n    this.fee = '';\r\n    this.gas = '';\r\n    this.storage = '';\r\n    this.clearTorus();\r\n    this.updateDefaultValues();\r\n  }\r\n  burnAmount(): string {\r\n    const burn = this.storage ? Number(Big(this.storage).times(this.costPerByte).div(1000000)) : this.defaultTransactionParams.burn;\r\n    if (burn) {\r\n      return burn + ' tez';\r\n    }\r\n    return '';\r\n  }\r\n  clearForm() {\r\n    this.toPkh = '';\r\n    this.amount = '';\r\n    this.fee = '';\r\n    this.gas = '';\r\n    this.storage = '';\r\n    this.advancedForm = false;\r\n    this.sendMax = false;\r\n    this.toMultipleDestinationsString = '';\r\n    this.toMultipleDestinations = [];\r\n    this.isMultipleDestinations = false;\r\n    this.showTransactions = [];\r\n    this.password = '';\r\n    this.pwdValid = '';\r\n    this.formInvalid = '';\r\n    this.sendResponse = null;\r\n    this.ledgerError = '';\r\n    this.showBtn = 'Show More';\r\n    this.defaultTransactionParams = zeroTxParams;\r\n    this.prevEquiClass = '';\r\n    this.latestSimError = '';\r\n    this.clearTorus();\r\n    this.parameters = null;\r\n    this.micheline = null;\r\n    this.parametersFormat = 0;\r\n  }\r\n\r\n  checkInput(finalCheck = false): string {\r\n    let result: any;\r\n    if (this.isMultipleDestinations) {\r\n      result = this.invalidInputMultiple(finalCheck);\r\n    } else {\r\n      result = this.invalidInputSingle(finalCheck);\r\n    }\r\n    if (!result && this.latestSimError) {\r\n      result = this.latestSimError;\r\n    }\r\n    return result;\r\n  }\r\n  checkBalance() {\r\n    if (this.transactions.length > 0) {\r\n      if (this.activeAccount && (this.activeAccount instanceof ImplicitAccount)) {\r\n        const max = Big(this.maxToSend(this.activeAccount)).plus(0.000001);\r\n        let amount = Big(0);\r\n        for (const tx of this.transactions) {\r\n          amount = amount.plus(Big(tx.amount));\r\n        }\r\n        if (amount.gt(max)) {\r\n          return this.translate.instant('SENDCOMPONENT.TOOHIGHFEEORAMOUNT');\r\n        }\r\n      } else if (this.activeAccount && (this.activeAccount instanceof OriginatedAccount)) {\r\n        const maxKt = Big(this.maxToSend(this.activeAccount));\r\n        const maxTz = Big(this.maxToSend(this.walletService.wallet.getImplicitAccount(this.activeAccount.pkh))).plus(0.000001);\r\n        let amount = Big(0);\r\n        for (const tx of this.transactions) {\r\n          amount = amount.plus(Big(tx.amount));\r\n        }\r\n        if (amount.gt(maxKt)) {\r\n          return this.translate.instant('SENDCOMPONENT.TOOHIGHAMOUNT');\r\n        } else if ((new Big('0')).gt(maxTz)) {\r\n          return this.translate.instant('SENDCOMPONENT.TOOHIGHFEE');\r\n        }\r\n      }\r\n    }\r\n    return '';\r\n  }\r\n  amountInputChange() {\r\n    if (this.beaconMode) {\r\n      this.updateDefaultValues();\r\n    }\r\n  }\r\n  async activeAccountChange() {\r\n    await this.estimateService.preLoadData(this.activeAccount.pkh, this.activeAccount.pk);\r\n    this.updateDefaultValues();\r\n  }\r\n  updateDefaultValues() {\r\n    if (!this.torusVerifier) {\r\n      this.estimateFees();\r\n      if (this.isMultipleDestinations) {\r\n        this.amount = this.totalAmount().toString();\r\n      }\r\n    }\r\n  }\r\n  async estimateFees() {\r\n    const prevSimError = this.latestSimError;\r\n    this.latestSimError = '';\r\n    if (this.prepTransactions()) {\r\n      const equiClass = this.equiClass(this.activeAccount.address, this.transactions);\r\n      if (this.prevEquiClass !== equiClass || this.parameters || this.beaconMode) {\r\n        console.log('simulate');\r\n        this.latestSimError = '';\r\n        this.prevEquiClass = equiClass;\r\n        this.simSemaphore++; // Put lock on 'Preview and 'Send max'\r\n        const callback = (res) => {\r\n          if (res) {\r\n            if (res.error) {\r\n              this.formInvalid = res.error;\r\n              this.latestSimError = res.error;\r\n            } else {\r\n              this.defaultTransactionParams = res;\r\n              this.formInvalid = '';\r\n              this.latestSimError = '';\r\n              this.updateMaxAmount();\r\n            }\r\n          }\r\n          this.simSemaphore--;\r\n        };\r\n        console.log('simulate...');\r\n        this.estimateService.estimate(JSON.parse(JSON.stringify(this.transactions)), this.activeAccount.address, callback);\r\n      } else {\r\n        this.latestSimError = prevSimError;\r\n        this.formInvalid = this.latestSimError;\r\n      }\r\n    } else {\r\n      this.latestSimError = prevSimError;\r\n      if (this.isMultipleDestinations ? !this.toMultipleDestinationsString : !this.toPkh) {\r\n        this.defaultTransactionParams = zeroTxParams;\r\n        this.updateMaxAmount();\r\n        this.prevEquiClass = '';\r\n      }\r\n    }\r\n  }\r\n  // prevent redundant estimations\r\n  equiClass(sender: string, transactions: SendData[]): string {\r\n    let data = sender;\r\n    for (const tx of transactions) {\r\n      data += tx.to;\r\n    }\r\n    return data;\r\n  }\r\n  batchSpace(txs = 0) {\r\n    if (this.isMultipleDestinations && this.defaultTransactionParams.customLimits && this.defaultTransactionParams.customLimits.length) {\r\n      const numberOfTxs = txs ? txs : this.defaultTransactionParams.customLimits.length;\r\n      const txsLimit = 294 + (this.defaultTransactionParams.reveal ? 0 : 2); // Max transactions in a batch is 296 (294 with a reveal)\r\n      return !txs ? this.numberWithCommas(numberOfTxs + ' / ' + txsLimit) : numberOfTxs <= txsLimit;\r\n\r\n    }\r\n    return !txs ? '' : true;\r\n  }\r\n  recieverIsKT() {\r\n    return (this.inputValidationService.address(this.toPkh) && this.toPkh.slice(0, 2) === 'KT');\r\n  }\r\n  senderIsKT() {\r\n    return (this.activeAccount && (this.activeAccount instanceof OriginatedAccount));\r\n  }\r\n  validateReceiverAddress() {\r\n    if (!this.torusVerifier) {\r\n      if (!this.inputValidationService.address(this.toPkh) && this.toPkh !== '') {\r\n        this.formInvalid = this.translate.instant('SENDCOMPONENT.INVALIDRECEIVERADDRESS');\r\n      } else if (!this.latestSimError) {\r\n        this.formInvalid = ''; // clear error\r\n      }\r\n    } else { // Torus\r\n      this.torusLookupAddress = '';\r\n      /*if (this.torusVerifier === 'google' && !this.inputValidationService.email(this.toPkh) && this.toPkh !== '') {\r\n        this.formInvalid = 'Invalid Google account';\r\n      } else if (this.torusVerifier === 'reddit' && !this.inputValidationService.redditAccount(this.toPkh) && this.toPkh !== '') {\r\n        this.formInvalid = 'Invalid Reddit account';*/\r\n      if (this.torusService.verifierMapKeys.includes(this.torusVerifier)) {\r\n        if (!this.inputValidationService.torusAccount(this.toPkh, this.torusVerifier) && this.toPkh !== '') {\r\n          switch (this.torusVerifier) {\r\n            case 'google':\r\n              this.formInvalid = 'Invalid Google email address';\r\n              break;\r\n            case 'reddit':\r\n              this.formInvalid = 'Invalid Reddit username';\r\n              break;\r\n            case 'twitter':\r\n              this.formInvalid = 'Twitter username begins with \"@\"';\r\n              break;\r\n            default:\r\n              this.formInvalid = 'Unhandled verifier';\r\n          }\r\n        } else {\r\n          if (!this.latestSimError) {\r\n            this.formInvalid = ''; // clear error\r\n          }\r\n          this.torusLookup();\r\n        }\r\n      } else {\r\n        this.formInvalid = 'Unrecognized verifier';\r\n      }\r\n    }\r\n  }\r\n  validateBatch() {\r\n    this.formInvalid = this.checkInput();\r\n  }\r\n  invalidInputSingle(finalCheck: boolean): string {\r\n    if (!this.inputValidationService.address(this.activeAccount.address)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDSENDERADDRESS');\r\n    } else if (!this.inputValidationService.fee(this.fee)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDFEE');\r\n    } else if (this.parameters) {\r\n      console.log('parameters', this.parameters);\r\n      try {\r\n        if (!this.parameters.value ||\r\n          !this.parameters.entrypoint) {\r\n          throw new Error('entrypoint and value expected');\r\n        }\r\n        assertMichelsonData(this.parameters.value);\r\n        const res = emitMicheline(this.parameters.value, { indent: '  ', newline: '\\n' });\r\n        this.micheline = { entrypoint: this.parameters.entrypoint, value: res };\r\n      } catch (e) {\r\n        console.log(e);\r\n        if (this.beaconMode) {\r\n          this.formInvalid = e;\r\n        }\r\n        return e;\r\n      }\r\n    }\r\n    return this.checkReceiverAndAmount(this.toPkh, this.amount, finalCheck);\r\n  }\r\n  checkReceiverAndAmount(toPkh: string, amount: string, finalCheck: boolean): string {\r\n    if (!this.torusVerifier && (!this.inputValidationService.address(toPkh) || toPkh === this.activeAccount.address)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDRECEIVERADDRESS');\r\n    } else if (this.torusVerifier\r\n      && (!this.inputValidationService.torusAccount(this.toPkh, this.torusVerifier) || this.torusLookupAddress === this.activeAccount.address)) {\r\n      return 'Invalid recipient';\r\n    } else if (!this.inputValidationService.amount(amount) ||\r\n      (finalCheck && ((amount === '0' || amount === '') && toPkh.slice(0, 3) !== 'KT1'))) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDAMOUNT');\r\n    } else if (!this.inputValidationService.gas(this.gas)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDGASLIMIT');\r\n    } else if (!this.inputValidationService.storage(this.storage)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDSTORAGELIMIT');\r\n    }\r\n    return '';\r\n  }\r\n\r\n  // Checking toMultipleDestinationsString and building up toMultipleDestinations[to: string, amount: number]\r\n  invalidInputMultiple(finalCheck = false): string {\r\n    if (!this.inputValidationService.address(this.activeAccount.address)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDSENDERADDRESS');\r\n    } else if (!this.inputValidationService.fee(this.fee)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDFEE');\r\n    }\r\n    this.toMultipleDestinations = [];\r\n    const toMultipleDestinationsArray = this.toMultipleDestinationsString.split(';');\r\n    if (toMultipleDestinationsArray.length === 1 && toMultipleDestinationsArray[0].trim() === '') {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDRECEIVERADDRESS');\r\n    }\r\n    let validationError = '';\r\n    toMultipleDestinationsArray.forEach((item, index) => {\r\n      toMultipleDestinationsArray[index] = item.trim();\r\n      if (toMultipleDestinationsArray[index] !== '') {\r\n        const singleSendDataArray = toMultipleDestinationsArray[index].split(' ');\r\n        if (singleSendDataArray.length === 2) {\r\n          const singleSendDataCheckresult = this.checkReceiverAndAmount(singleSendDataArray[0], singleSendDataArray[1], finalCheck);\r\n          if (singleSendDataCheckresult === '') {\r\n            const gasLimit = this.gas ? Number(this.gas) : this.defaultTransactionParams.customLimits &&\r\n              this.defaultTransactionParams.customLimits.length > index ?\r\n              this.defaultTransactionParams.customLimits[index].gasLimit : this.defaultTransactionParams.gas;\r\n            const storageLimit = this.storage ? Number(this.storage) : this.defaultTransactionParams.customLimits &&\r\n              this.defaultTransactionParams.customLimits.length > index ?\r\n              this.defaultTransactionParams.customLimits[index].storageLimit : this.defaultTransactionParams.storage;\r\n            this.toMultipleDestinations.push({ to: singleSendDataArray[0], amount: Number(singleSendDataArray[1]), gasLimit, storageLimit });\r\n          } else {\r\n            this.toMultipleDestinations = [];\r\n            validationError = singleSendDataCheckresult + '. Transaction ' + (index + 1);\r\n          }\r\n        } else if (singleSendDataArray.length === 1) {\r\n          validationError = this.translate.instant('SENDCOMPONENT.NOADDRESSORAMOUNT') + ' Transaction ' + (index + 1);\r\n        } else {\r\n          validationError = 'Expected semicolon after transaction ' + (index + 1);\r\n        }\r\n      }\r\n    });\r\n    if (!validationError && finalCheck && !this.batchSpace(this.toMultipleDestinations.length)) {\r\n      validationError = this.translate.instant('SENDCOMPONENT.TRANSACTIONSOVERFLOW');\r\n    }\r\n    return validationError;\r\n  }\r\n\r\n  totalAmount(): number {\r\n    let totalSent = Big(0);\r\n    for (const tx of this.transactions) {\r\n      totalSent = totalSent.add(tx.amount);\r\n    }\r\n    return Number(totalSent);\r\n  }\r\n  getTotalCost(display: boolean = false): string {\r\n    const totalFee = Big(this.getTotalFee()).plus(Big(this.getTotalBurn())).toString();\r\n    if (display && totalFee === '0') {\r\n      return '-';\r\n    }\r\n    return totalFee;\r\n  }\r\n  getTotalFee(): number {\r\n    if (this.fee !== '' && Number(this.fee)) {\r\n      return Number(this.fee);\r\n    }\r\n    return Number(this.defaultTransactionParams.fee);\r\n  }\r\n  getTotalBurn(): number {\r\n    if (this.storage !== '' && Number(this.storage)) {\r\n      return Number(Big(this.storage).mul(this.transactions.length).times(this.costPerByte).div(1000000).toString());\r\n    }\r\n    return Number(Big(this.defaultTransactionParams.burn));\r\n  }\r\n  toggleTransactions() {\r\n    if (this.showTransactions.length === 2) {\r\n      this.showTransactions = this.transactions;\r\n      this.showBtn = 'Show Less';\r\n    } else {\r\n      this.showTransactions = [];\r\n      this.showTransactions.push(this.transactions[0], this.transactions[1]);\r\n      this.showBtn = 'Show More';\r\n    }\r\n  }\r\n  dynSize(): string {\r\n    const size = this.amount ? this.amount.length : 0;\r\n    if (size < 7) {\r\n      return '5';\r\n    } else if (size < 9) {\r\n      return '4';\r\n    } else if (size < 12) {\r\n      return '3';\r\n    } else if (size < 17) {\r\n      return '2';\r\n    }\r\n    return '1.5';\r\n  }\r\n  async verifierChange() {\r\n    this.torusLookupAddress = '';\r\n    console.log('Verifier: ' + this.torusVerifier);\r\n    this.validateReceiverAddress();\r\n    // resimulate?\r\n  }\r\n  async torusLookup() {\r\n    if (!this.torusService.verifierMapKeys.includes(this.torusVerifier)) {\r\n      this.formInvalid = 'Invalid verifier';\r\n      console.log(this.torusService.verifierMapKeys);\r\n      console.log(this.torusVerifier);\r\n    } else if (this.toPkh) {\r\n      this.torusPendingLookup = true;\r\n      this.torusLookupId = this.toPkh;\r\n      const { pkh, twitterId } = await this.torusService.lookupPkh(this.torusVerifier, this.toPkh).catch(e => {\r\n        console.error(e);\r\n        this.formInvalid = e;\r\n        return '';\r\n      });\r\n      this.torusPendingLookup = false;\r\n      if (pkh) {\r\n        this.torusLookupAddress = pkh;\r\n        this.torusTwitterId = twitterId ? twitterId : '';\r\n        this.estimateFees();\r\n        console.log('Torus address', pkh);\r\n      } else {\r\n        this.torusLookupAddress = '';\r\n      }\r\n    }\r\n  }\r\n  torusReady(): boolean {\r\n    return (!this.torusPendingLookup && this.torusLookupAddress !== '');\r\n  }\r\n  clearTorus() {\r\n    this.torusVerifier = '';\r\n    this.torusPendingLookup = false;\r\n    this.torusLookupAddress = '';\r\n    this.torusLookupId = '';\r\n    this.torusTwitterId = '';\r\n  }\r\n  async torusNotification(transaction: SendData) {\r\n    if (transaction.meta) {\r\n      if (transaction.meta.verifier === 'google') {\r\n        this.messageService.emailNotify(transaction.meta.alias, transaction.amount.toString());\r\n        this.lookupService.add(transaction.to, transaction.meta.alias, 2);\r\n      } else if (transaction.meta.verifier === 'reddit') {\r\n        this.messageService.redditNotify(transaction.meta.alias, transaction.amount.toString());\r\n        this.lookupService.add(transaction.to, transaction.meta.alias, 3);\r\n      } else if (transaction.meta.verifier === 'twitter') {\r\n        this.messageService.twitterNotify(transaction.meta.twitterId, transaction.meta.alias, transaction.amount.toString());\r\n        this.lookupService.add(transaction.to, transaction.meta.alias, 4);\r\n      }\r\n    }\r\n  }\r\n  previewAttention(): string {\r\n    if (this.torusLookupId) {\r\n      if (new Big(this.totalAmount()).gt('50')) {\r\n        let recipientKind = '';\r\n        switch (this.torusVerifier) {\r\n          case 'google':\r\n            recipientKind = 'Google account email address';\r\n            break;\r\n          case 'reddit':\r\n            recipientKind = 'Reddit username';\r\n            break;\r\n          case 'twitter':\r\n            recipientKind = 'Twitter handle';\r\n            break;\r\n          default:\r\n            recipientKind = 'information';\r\n        }\r\n        return `Carefully review the recipient's ${recipientKind}! Spelling mistakes can lead to permanent loss of the transferred funds.`;\r\n      }\r\n    }\r\n    return '';\r\n  }\r\n  parametersTextboxDisplay(): string {\r\n    return !this.parametersFormat ? this.micheline.value : JSON.stringify(this.parameters.value, null, 2);\r\n  }\r\n  setParametersFormat(id: number) {\r\n    this.parametersFormat = id;\r\n  }\r\n}\r\n","import { Component, OnInit, HostListener } from '@angular/core';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { BeaconService } from '../../services/beacon/beacon.service';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { Router } from '@angular/router';\r\nimport { SlicePipe } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-settings',\r\n  templateUrl: './settings.component.html',\r\n  styleUrls: ['./settings.component.scss']\r\n})\r\nexport class SettingsComponent implements OnInit {\r\n  implicitAccounts = [];\r\n  wideAccounts = false;\r\n  constructor(\r\n    public beaconService: BeaconService,\r\n    private messageService: MessageService,\r\n    private walletService: WalletService,\r\n    private router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    if (this.walletService.wallet) {\r\n      this.implicitAccounts = this.walletService.wallet.getImplicitAccounts();\r\n      this.beaconService.syncBeaconState();\r\n      this.onResize();\r\n    } else {\r\n      this.router.navigate(['']);\r\n    }\r\n  }\r\n  accountAvailable(pkh: string): boolean {\r\n    const index = this.implicitAccounts.findIndex((impAcc: any) => impAcc.pkh === pkh);\r\n    if (index === -1) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  @HostListener('window:resize')\r\n  onResize() {\r\n    this.wideAccounts = (window.innerWidth > 600);\r\n  }\r\n  formatAddress(address: string) {\r\n    if (this.wideAccounts) {\r\n      return address;\r\n    } else {\r\n      return address.slice(0, 6) + '...' + address.slice(-4);\r\n    }\r\n  }\r\n}\r\n","<app-header [settings]=true></app-header>\r\n<div class=\"settings\">\r\n  <H3>Connect with dApps</H3>\r\n  <div class=\"seperator\"></div>\r\n  <div class=\"handler\">\r\n    <div>\r\n      <h4>Scan a QR code</h4>\r\n      <p>Connect to dApps on <u>another device</u> by scanning a QR code.</p>\r\n    </div>\r\n    <div>\r\n      <app-qr-scanner></app-qr-scanner>\r\n    </div>\r\n  </div>\r\n  <H3>Peers</H3>\r\n  <table *ngIf=\"beaconService.peers.length\">\r\n    <thead>\r\n      <tr>\r\n        <th>Name</th>\r\n        <th>Relay server</th>\r\n        <th><span (click)=\"beaconService.removePeers()\">Remove&nbsp;all</span></th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor=\"let peer of beaconService.peers; index as i\">\r\n        <td>{{ peer.name }}</td>\r\n        <td>{{ peer.relayServer }}</td>\r\n        <td (click)=\"beaconService.removePeer(i)\"><img (click)=\"beaconService.removePeer(i)\" src=\"../../../assets/img/cross.svg\"></td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <H3>Permissions</H3>\r\n  <table *ngIf=\"beaconService.permissions.length\">\r\n    <thead>\r\n      <tr>\r\n        <th>Name</th>\r\n        <th>Address</th>\r\n        <th><span (click)=\"beaconService.removePermissions()\">Remove&nbsp;all</span></th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor=\"let permission of beaconService.permissions; index as i\"\r\n        [class.inactive]=\"!accountAvailable(permission.address)\">\r\n        <td>{{ permission.appMetadata.name }}</td>\r\n        <td>{{ formatAddress(permission.address) }}</td>\r\n        <td><img (click)=\"beaconService.removePermission(i)\" src=\"../../../assets/img/cross.svg\"></td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MessageService } from '../../services/message/message.service';\r\n\r\n@Component({\r\n  selector: 'app-spinner',\r\n  templateUrl: './spinner.component.html',\r\n  styleUrls: ['./spinner.component.scss']\r\n})\r\nexport class SpinnerComponent implements OnInit {\r\n\r\n  constructor(public messageService: MessageService) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n}\r\n","<div *ngIf=\"messageService.spinnerOn\" class=\"spinner-wrapper\">\r\n    <div class=\"container\">\r\n        <div class=\"row\">\r\n            <div id=\"loader\">\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"loading\">{{ messageService.spinnerText }}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { DeeplinkService } from '../../services/deeplink/deeplink.service';\r\nimport 'rxjs/add/operator/filter';\r\nimport { Location } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-start',\r\n  templateUrl: './start.component.html',\r\n  styleUrls: ['./start.component.scss']\r\n})\r\nexport class StartComponent implements OnInit {\r\n  constructor(\r\n    private walletService: WalletService,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private deeplinkService: DeeplinkService,\r\n    private location: Location,\r\n  ) {\r\n  }\r\n  animationActive = true;\r\n\r\n  async ngOnInit() {\r\n    this.route.queryParams\r\n      .filter(params => params.type)\r\n      .subscribe(params => {\r\n        this.deeplinkService.set(params);\r\n        this.location.replaceState('');\r\n      }\r\n    );\r\n    if (this.walletService.wallet) {\r\n      this.router.navigate(['/accounts']);\r\n    }\r\n  }\r\n}\r\n","<div id=\"wrapper\">\r\n  <div>\r\n    <div class=\"top-container\">\r\n      <div class=\"logo-holder\">\r\n        <object class=\"logo\" data=\"../../../assets/img/logo-start.svg\" type=\"image/svg+xml\"></object>\r\n        <p>Kukai is a Tezos web wallet based on three principles: Security, Community and Reliability.</p>\r\n      </div>\r\n      <div id=\"mobile-menu-container\">\r\n        <a routerLink=\"/import/\" class=\"menu-item\">\r\n          <div class=\"content\">\r\n            <H1>Import wallet</H1>\r\n            <div class=\"icon\">\r\n              <img src=\"../../../assets/img/import-wallet.svg\">\r\n            </div>\r\n          </div>\r\n        </a>\r\n        <a routerLink=\"/new-wallet/\" class=\"menu-item\">\r\n          <div class=\"content\">\r\n            <H1>New wallet</H1>\r\n            <div class=\"icon\">\r\n              <img src=\"../../../assets/img/new-wallet.svg\">\r\n            </div>\r\n          </div>\r\n        </a>\r\n        <a routerLink=\"/connect-ledger/\" class=\"menu-item\">\r\n          <div class=\"content\">\r\n            <H1>Connect Ledger</H1>\r\n            <div class=\"icon\">\r\n              <img src=\"../../../assets/img/ledger-wallet.svg\">\r\n            </div>\r\n          </div>\r\n        </a>\r\n        <a routerLink=\"/direct-auth/\" class=\"menu-item\">\r\n          <div class=\"content\">\r\n            <H1>DirectAuth</H1>\r\n            <div class=\"icon\">\r\n              <img src=\"../../../assets/img/circle.svg\">\r\n            </div>\r\n          </div>\r\n        </a>\r\n      </div>\r\n      <div class=\"monk-holder\" [class.animationActive]=\"animationActive\">\r\n        <object class=\"monk\" data=\"../../../assets/img/monk.svg\" type=\"image/svg+xml\"></object>\r\n        <object class=\"monk-shadow\" data=\"../../../assets/img/shadow.svg\" type=\"image/svg+xml\"></object>\r\n      </div>\r\n    </div>\r\n    <div id=\"menu-container\">\r\n      <a routerLink=\"/import/\" class=\"menu-item\">\r\n        <div class=\"icon\">\r\n          <img src=\"../../../assets/img/import-wallet.svg\">\r\n        </div>\r\n        <div class=\"content\">\r\n          <H1>Import wallet</H1>\r\n          <p>Import an existing wallet using your encrypted keystore file, seed words or fundraiser credentials</p>\r\n        </div>\r\n      </a>\r\n      <a routerLink=\"/new-wallet/\" class=\"menu-item\">\r\n        <div class=\"icon\">\r\n          <img src=\"../../../assets/img/new-wallet.svg\">\r\n        </div>\r\n        <div class=\"content\">\r\n          <H1>New wallet</H1>\r\n          <p>Create a new HD wallet on the Tezos blockchain and safely record your seed words to backup your accounts</p>\r\n        </div>\r\n      </a>\r\n      <a routerLink=\"/connect-ledger/\" class=\"menu-item\">\r\n        <div class=\"icon\">\r\n          <img src=\"../../../assets/img/ledger-wallet.svg\">\r\n        </div>\r\n        <div class=\"content\">\r\n          <H1>Connect Ledger</H1>\r\n          <p>Keep your private keys safely on your Ledger device and use Kukai to access your wallet</p>\r\n        </div>\r\n      </a>\r\n      <a routerLink=\"/direct-auth/\" class=\"menu-item\">\r\n        <div class=\"icon\">\r\n          <img src=\"../../../assets/img/circle.svg\">\r\n        </div>\r\n        <div class=\"content\">\r\n          <H1>DirectAuth</H1>\r\n          <p>One-Click login with your Google, Reddit or Twitter account</p>\r\n        </div>\r\n      </a>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"bottom-container\">\r\n  <img class=\"blue-wave\" src=\"../../../assets/img/blue-wave.svg\">\r\n  <div></div>\r\n</div>","<div>\r\n  <div class=\"top\">\r\n    <a routerLink=\"/\" class=\"logo\"><img id=\"logo\" src=\"../../../assets/img/kukai-logo.svg\"></a>\r\n  </div>\r\n  <div class=\"main\">\r\n    <div class=\"main-top\">\r\n      <h1>DirectAuth</h1>\r\n      <p>Your Tezos wallet in one-click. <a class=\"learn-more\" target=\"_blank\" href=\"https://docs.kukai.app/learn-kukai/direct-auth\">Learn more</a></p>\r\n    </div>\r\n    <div class=\"main-mid\">\r\n      <p class=\"signup\">Sign up / in with</p>\r\n      <div class=\"login-options\">\r\n        <div *ngFor=\"let key of torusService.verifierMapKeys\" (click)=\"torusLogin(key)\" class=\"login-option\" (mouseover)=\"activeLogin = key\">\r\n          <ng-container *ngIf=\"key === activeLogin || mobile(); then color else grey\"></ng-container>\r\n          <ng-template #color><img class=\"login-logo color\" src=\"../../../assets/img/torus-login/{{ key }}-color.svg\"></ng-template>\r\n          <ng-template #grey><img class=\"login-logo grey\" src=\"../../../assets/img/torus-login/{{ key }}-grey.svg\"></ng-template>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"main-bottom\">\r\n      <p>The following sign-ins involve a third party authenticator: Twitter</p>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"torus-bg\"><img src=\"../../../assets/img/torus-bg.svg\"></div>","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { TorusService } from '../../services/torus/torus.service';\r\nimport { ImportService } from '../../services/import/import.service';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { Router } from '@angular/router';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\n\r\n@Component({\r\n  selector: 'app-torus',\r\n  templateUrl: './torus.component.html',\r\n  styleUrls: ['./torus.component.scss']\r\n})\r\nexport class TorusComponent implements OnInit {\r\n  activeLogin = 'google';\r\n  constructor(\r\n    private walletService: WalletService,\r\n    public torusService: TorusService,\r\n    private importService: ImportService,\r\n    private messageService: MessageService,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.torusService.initTorus();\r\n  }\r\n  async torusLogin(verifier: string) {\r\n    await this.messageService.startSpinner('Loading wallet...');\r\n    const { keyPair, userInfo } = await this.torusService.loginTorus(verifier).catch(async (e) =>\r\n      await this.messageService.stopSpinner()\r\n    );\r\n    console.log('login done');\r\n    if (keyPair) {\r\n      await this.importService\r\n        .importWalletFromPk(keyPair.pk, '', { verifier: userInfo.typeOfLogin, id: userInfo.verifierId, name: userInfo.name })\r\n        .then((success: boolean) => {\r\n          if (success) {\r\n            console.log('success');\r\n            if (this.walletService.wallet.implicitAccounts.length === 1 && this.walletService.wallet.implicitAccounts[0].originatedAccounts.length === 0) {\r\n              console.log('single address');\r\n              this.router.navigate([`/account/${this.walletService.wallet.implicitAccounts[0].address}`]);\r\n            } else {\r\n              this.router.navigate(['/accounts']);\r\n            }\r\n            this.messageService.stopSpinner();\r\n          } else {\r\n            this.messageService.addError('Torus import failed');\r\n            this.messageService.stopSpinner();\r\n          }\r\n        });\r\n    } else {\r\n      await this.messageService.stopSpinner();\r\n    }\r\n  }\r\n  mobile(): boolean {\r\n    return (window.innerWidth < 480);\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { WalletClient, BeaconMessageType, PermissionScope, PermissionResponseInput, P2PPairingRequest, BeaconErrorType, BeaconResponseInputMessage, BeaconMessage, OperationResponseInput } from '@airgap/beacon-sdk';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { Constants } from '../../constants';\r\nimport { Account, ImplicitAccount, OriginatedAccount } from '../../services/wallet/wallet';\r\nimport { Location } from '@angular/common';\r\nimport { BeaconService } from '../../services/beacon/beacon.service';\r\nimport { DeeplinkService } from '../../services/deeplink/deeplink.service';\r\nimport { emitMicheline, assertMichelsonData } from '@taquito/michel-codec';\r\n\r\n@Component({\r\n  selector: 'app-uri-handler',\r\n  templateUrl: './uri-handler.component.html',\r\n  styleUrls: ['./uri-handler.component.scss']\r\n})\r\nexport class UriHandlerComponent implements OnInit {\r\n  CONSTANTS = new Constants();\r\n  permissionRequest: PermissionResponseInput = null;\r\n  operationRequest: any = null;\r\n  activeAccount: Account;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    public messageService: MessageService,\r\n    public walletService: WalletService,\r\n    private location: Location,\r\n    private beaconService: BeaconService,\r\n    private deeplinkService: DeeplinkService\r\n  ) { }\r\n  ngOnInit(): void {\r\n    if (this.walletService.wallet) {\r\n      this.init();\r\n    }\r\n  }\r\n  async init() {\r\n    const pairingString = this.deeplinkService.popPairingJson();\r\n    if (pairingString) {\r\n      console.log(pairingString);\r\n      this.beaconService.preNotifyPairing(pairingString);\r\n    }\r\n    await this.connectApp().catch((error) => console.error('connect error', error));\r\n    if (pairingString) {\r\n      await this.beaconService.client.isConnected;\r\n      this.beaconService.addPeer(pairingString);\r\n    }\r\n  }\r\n  /* https://docs.walletbeacon.io/beacon/03.getting-started-wallet.html#setup */\r\n  connectApp = async (): Promise<void> => {\r\n    if (!this.beaconService.client) {\r\n      this.beaconService.client = new WalletClient({ name: 'Kukai' });\r\n    }\r\n    await this.beaconService.client.init(); // Establish P2P connection\r\n    this.beaconService.client\r\n      .connect(async (message: any) => {\r\n        console.log('### beacon message', message);\r\n        if (message.network.type !== this.CONSTANTS.NET.NETWORK) {\r\n          console.warn(`Rejecting Beacon message because of network. Expected ${this.CONSTANTS.NET.NETWORK} instead of ${message.network.type}`);\r\n          await this.beaconService.rejectOnNetwork(message);\r\n        } else if (!this.permissionRequest && !this.operationRequest) {\r\n          if (message.type === BeaconMessageType.PermissionRequest) {\r\n            console.log('## permission request');\r\n            message.scopes = message.scopes.filter((scope: PermissionScope) => [PermissionScope.OPERATION_REQUEST, PermissionScope.SIGN].includes(scope));\r\n            if (message.scopes.length) {\r\n              if (this.walletService.wallet) {\r\n                this.permissionRequest = message;\r\n              } else {\r\n                console.warn('No wallet found');\r\n                await this.beaconService.rejectOnSourceAddress(message);\r\n              }\r\n            } else {\r\n              console.warn('No valid scope');\r\n            }\r\n          } else if (message.type === BeaconMessageType.OperationRequest) {\r\n            if (await this.isSupportedOperationRequest(message)) {\r\n              console.log('supported operation request');\r\n              this.operationRequest = message;\r\n            }\r\n            console.log(message);\r\n          } else {\r\n            console.warn(message);\r\n          }\r\n        }\r\n      })\r\n      .catch((error) => console.error('connect error', error));\r\n  }\r\n  async isSupportedOperationRequest(message: any): Promise<boolean> {\r\n    if (!this.walletService.wallet || !this.walletService.wallet.getImplicitAccount(message.sourceAddress)) {\r\n      console.warn('Source address not recogized');\r\n      await this.beaconService.rejectOnSourceAddress(message);\r\n      return false;\r\n    } else if (message.operationDetails.length > 1) {\r\n      console.warn('Multiple operations currently not supported in requests');\r\n      await this.beaconService.rejectOnTooManyOps(message);\r\n      return false;\r\n    }\r\n\r\n    if (message.operationDetails[0].kind === 'transaction') {\r\n      if (message.operationDetails[0].destination &&\r\n        message.operationDetails[0].parameters &&\r\n        this.walletService.wallet.getAccount(message.operationDetails[0].destination)) {\r\n        console.warn('Invocation of user controlled contract is disabled');\r\n        await this.beaconService.rejectOnPermission(message);\r\n        return false;\r\n      } else if (this.invalidParameters(message.operationDetails[0].parameters)) {\r\n        await this.beaconService.rejectOnParameters(message);\r\n        return false;\r\n      }\r\n    } else if (message.operationDetails[0].kind === 'delegation') {\r\n      if (!message.operationDetails[0].delegate) {\r\n        console.warn('Invalid delegate');\r\n        await this.beaconService.rejectOnUnknown(message);\r\n      }\r\n    } else {\r\n      console.warn('Unsupported operation kind');\r\n      await this.beaconService.rejectOnUnknown(message);\r\n      return false;\r\n    }\r\n    this.activeAccount = this.walletService.wallet.getImplicitAccount(message.sourceAddress);\r\n    return true;\r\n  }\r\n  invalidParameters(parameters: any): boolean {\r\n    try {\r\n      if (parameters) {\r\n        if (!parameters.value ||\r\n          !parameters.entrypoint) {\r\n          throw new Error('entrypoint and value expected');\r\n        }\r\n        assertMichelsonData(parameters.value);\r\n      }\r\n      return false;\r\n    } catch (e) {\r\n      return true;\r\n    }\r\n  }\r\n  /* operation request handling */\r\n  async operationResponse(opHash: any) {\r\n    if (!opHash) {\r\n      await this.beaconService.rejectOnUserAbort(this.operationRequest);\r\n    } else {\r\n      const response: OperationResponseInput = {\r\n        type: BeaconMessageType.OperationResponse,\r\n        transactionHash: opHash,\r\n        id: this.operationRequest.id\r\n      };\r\n      await this.beaconService.client.respond(response);\r\n      console.log(response);\r\n    }\r\n    console.log(this.operationRequest);\r\n    this.operationRequest = null;\r\n  }\r\n  /* permission handling */\r\n  async permissionResponse(publicKey: string) {\r\n    if (!publicKey) {\r\n      await this.beaconService.rejectOnUserAbort(this.permissionRequest);\r\n    } else {\r\n      await this.beaconService.approvePermissionRequest(this.permissionRequest, publicKey);\r\n      this.beaconService.syncBeaconState();\r\n    }\r\n    this.permissionRequest = null;\r\n  }\r\n}\r\n","<div>\r\n  <app-send (operationResponse)=\"operationResponse($event)\" [beaconMode]=true [operationRequest]=operationRequest\r\n    [activeAccount]=activeAccount></app-send>\r\n  <app-delegate (operationResponse)=\"operationResponse($event)\" [beaconMode]=true [operationRequest]=operationRequest\r\n    [activeAccount]=activeAccount></app-delegate>\r\n  <app-permission-request (permissionResponse)=\"permissionResponse($event)\" [permissionRequest]=\"permissionRequest\">\r\n  </app-permission-request>\r\n</div>","interface Net {\r\n    NAME: string;\r\n    NETWORK: string;\r\n    CSI?: { // Conseil Server Info\r\n        url: string;\r\n        apiKey: string;\r\n    };\r\n    NODE_URL: string;\r\n    BLOCK_EXPLORER_URL: string;\r\n}\r\nexport class Constants {\r\n    // Select Testnet or Mainnet\r\n    readonly NET: Net = this.delphinet();\r\n\r\n    private mainnet(): Net {\r\n        return {\r\n            NAME: 'Mainnet',\r\n            NETWORK: 'mainnet',\r\n            CSI: {\r\n                url: 'https://conseil-prod.cryptonomic-infra.tech',\r\n                apiKey: 'klassare'\r\n            },\r\n            NODE_URL: 'https://mainnet-tezos.giganode.io',\r\n            BLOCK_EXPLORER_URL: 'https://tzkt.io'\r\n        };\r\n    }\r\n    private carthagenet(): Net {\r\n        return {\r\n            NAME: 'Testnet / Carthage',\r\n            NETWORK: 'carthagenet',\r\n            CSI: {\r\n                url: 'https://conseil-dev.cryptonomic-infra.tech',\r\n                apiKey: 'klassare'\r\n            },\r\n            NODE_URL: 'https://testnet-tezos.giganode.io',\r\n            BLOCK_EXPLORER_URL: 'https://carthage.tzkt.io'\r\n        };\r\n    }\r\n    private delphinet(): Net {\r\n      return {\r\n          NAME: 'Testnet / Delphi',\r\n          NETWORK: 'delphinet',\r\n          NODE_URL: 'https://delphinet-tezos.giganode.io/',\r\n          BLOCK_EXPLORER_URL: 'https://delphi.tzkt.io'\r\n      };\r\n  }\r\n}\r\n","export interface KeyPair {\r\n    sk: string|null;\r\n    pk: string|null;\r\n    pkh: string;\r\n}\r\nexport interface Wallet {\r\n  seed: null|string;\r\n  salt: null|string;\r\n  pk?: string;\r\n  encryptionVersion: number|null;\r\n  type: WalletType;\r\n  balance: Balance;\r\n  XTZrate: number | null;\r\n  accounts: Account[];\r\n  derivationPath?: string;\r\n}\r\nexport interface Account {\r\n  pkh: string|null;\r\n  delegate: string;\r\n  balance: Balance;\r\n  numberOfActivites: number;\r\n  activities: Activity[];\r\n}\r\nexport interface Activity {\r\n  hash: string;\r\n  block: string;\r\n  source: string;\r\n  destination: string;\r\n  amount: number;\r\n  fee: number;\r\n  timestamp: null|Date;\r\n  type: string;\r\n}\r\nexport interface Balance {\r\n  balanceXTZ: number | null;\r\n  pendingXTZ: number | null;\r\n  balanceFiat: number | null;\r\n  pendingFiat: number | null;\r\n}\r\nexport enum WalletType {\r\n  FullWallet,\r\n  ViewOnlyWallet,\r\n  ObserverWallet,\r\n  LedgerWallet,\r\n  HdWallet\r\n}\r\nexport interface Baker {\r\n  baker_name: string;\r\n  image: string;\r\n  rolls: number;\r\n  identity: string;\r\n  vote: string;\r\n  vote2: string;\r\n  // vote: []\r\n}\r\nexport interface Vote {\r\n  voting_period: string;\r\n  period_kind: PeriodKind;\r\n  proposal_hash: string[];\r\n  proposal_alias: string[];\r\n  votes: number[];\r\n  operation: string[];\r\n}\r\nexport interface Period {\r\n  amendment: string;\r\n  period: number;\r\n  period_kind: string;\r\n  proposal_hash: string[];\r\n  proposal_alias: string[];\r\n  start_level: number;\r\n  end_level: number;\r\n  level: number;\r\n  progress: number;\r\n  remaining: number;\r\n}\r\nexport interface ParticipationPerPeriod {\r\n  proposal?: [{\r\n    hash: string;\r\n    alias: string;\r\n    count: number;\r\n    votes: number;\r\n  }];\r\n  unused_count: number;\r\n  total_count: number;\r\n  unused_votes: number;\r\n  total_votes: number;\r\n}\r\nexport interface Ballot {\r\n  proposal: string;\r\n  nb_yay: number;\r\n  nb_nay: number;\r\n  nb_pass: number;\r\n  vote_yay: number;\r\n  vote_nay: number;\r\n  vote_pass: number;\r\n}\r\nexport enum PeriodKind {\r\n  Proposal,\r\n  Exploration,\r\n  Testing,\r\n  Promotion\r\n}\r\nexport interface DefaultTransactionParams {\r\n  gas: number;\r\n  storage: number;\r\n  fee: number;\r\n  burn: number;\r\n  reveal?: boolean;\r\n  customLimits?: {\r\n    gasLimit: number;\r\n    storageLimit: number;\r\n  }[];\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { BAKERSLIST } from '../../data/bakers-list';\r\n\r\n@Pipe({\r\n    name: 'delegatorName'\r\n})\r\nexport class DelegatorNamePipe implements PipeTransform {\r\n    transform(pkh: string): string {\r\n        if (!pkh) {\r\n            return '';\r\n        }\r\n        const index = BAKERSLIST.findIndex(b => b.identity === pkh);\r\n        if (index !== -1) {\r\n            return BAKERSLIST[index].baker_name;\r\n        } else {\r\n            return pkh;\r\n        }\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n/*\r\n    Informs users on most common errors\r\n    RPC errors doc: http://tezos.gitlab.io/mainnet/api/errors.html\r\n*/\r\n\r\n@Pipe({\r\n  name: 'errorHandling',\r\n})\r\nexport class ErrorHandlingPipe implements PipeTransform {\r\n  ERROR_LIST = [\r\n    {\r\n      msg: 'A fatal assertion failed',\r\n      id: 'proto.alpha.assertion',\r\n    },\r\n    {\r\n      msg: 'The block\\'s proof-of-work stamp is insufficient',\r\n      id: 'proto.alpha.baking.insufficient_proof_of_work',\r\n    },\r\n    {\r\n      msg: 'A block was not signed with the expected private key.',\r\n      id: 'proto.alpha.baking.invalid_block_signature',\r\n    },\r\n    {\r\n      msg: 'The gap of fitness is out of bounds',\r\n      id: 'proto.alpha.baking.invalid_fitness_gap',\r\n    },\r\n    {\r\n      msg: 'The block\\'s signature is invalid',\r\n      id: 'proto.alpha.baking.invalid_signature',\r\n    },\r\n    {\r\n      msg:\r\n        'The block timestamp is before the first slot for this baker at this level',\r\n      id: 'proto.alpha.baking.timestamp_too_early',\r\n    },\r\n    {\r\n      msg: 'The operation is signed by a delegate without endorsement rights.',\r\n      id: 'proto.alpha.baking.unexpected_endorsement',\r\n    },\r\n    {\r\n      msg: 'A double-baking evidence is inconsistent (two distinct delegates)',\r\n      id: 'proto.alpha.block.inconsistent_double_baking_evidence',\r\n    },\r\n    {\r\n      msg:\r\n        'A double-endorsement evidence is inconsistent (two distinct delegates)',\r\n      id: 'proto.alpha.block.inconsistent_double_endorsement_evidence',\r\n    },\r\n    {\r\n      msg: 'The block header has invalid commitment.',\r\n      id: 'proto.alpha.block.invalid_commitment',\r\n    },\r\n    {\r\n      msg: 'A double-baking evidence is inconsistent (two distinct level)',\r\n      id: 'proto.alpha.block.invalid_double_baking_evidence',\r\n    },\r\n    {\r\n      msg: 'A double-endorsement evidence is malformed',\r\n      id: 'proto.alpha.block.invalid_double_endorsement_evidence',\r\n    },\r\n    {\r\n      msg: 'A manager operation should not contain more than one revelation',\r\n      id: 'proto.alpha.block.multiple_revelation',\r\n    },\r\n    {\r\n      msg: 'A double-baking evidence is outdated.',\r\n      id: 'proto.alpha.block.outdated_double_baking_evidence',\r\n    },\r\n    {\r\n      msg: 'A double-endorsement evidence is outdated.',\r\n      id: 'proto.alpha.block.outdated_double_endorsement_evidence',\r\n    },\r\n    {\r\n      msg: 'A double-baking evidence is in the future',\r\n      id: 'proto.alpha.block.too_early_double_baking_evidence',\r\n    },\r\n    {\r\n      msg: 'A double-endorsement evidence is in the future',\r\n      id: 'proto.alpha.block.too_early_double_endorsement_evidence',\r\n    },\r\n    {\r\n      msg: 'A double-baking evidence is unrequired',\r\n      id: 'proto.alpha.block.unrequired_double_baking_evidence',\r\n    },\r\n    {\r\n      msg: 'A double-endorsement evidence is unrequired',\r\n      id: 'proto.alpha.block.unrequired_double_endorsement_evidence',\r\n    },\r\n    {\r\n      msg: 'Unexpected JSON object.',\r\n      id: 'proto.alpha.context.failed_to_decode_parameter',\r\n    },\r\n    {\r\n      msg: 'The protocol parameters are not valid JSON.',\r\n      id: 'proto.alpha.context.failed_to_parse_parameter',\r\n    },\r\n    {\r\n      msg:\r\n        'An error that should never happen unless something has been deleted or corrupted in the database.',\r\n      id: 'proto.alpha.context.storage_error',\r\n    },\r\n    {\r\n      msg: 'An operation tried to spend more tokens than the contract has',\r\n      id: 'proto.alpha.contract.balance_too_low',\r\n    },\r\n    {\r\n      msg: 'The storage fee is higher than the contract balance',\r\n      id: 'proto.alpha.contract.cannot_pay_storage_fee',\r\n    },\r\n    {\r\n      msg: 'An operation assumed a contract counter in the future',\r\n      id: 'proto.alpha.contract.counter_in_the_future',\r\n    },\r\n    {\r\n      msg: 'An operation assumed a contract counter in the past',\r\n      id: 'proto.alpha.contract.counter_in_the_past',\r\n    },\r\n    {\r\n      msg: 'Forbidden to credit 0 to a contract without code.',\r\n      id: 'proto.alpha.contract.empty_transaction',\r\n    },\r\n    {\r\n      msg: 'Unexpected contract storage error',\r\n      id: 'proto.alpha.contract.failure',\r\n    },\r\n    {\r\n      msg: 'A malformed contract notation was given to an RPC or in a script.',\r\n      id: 'proto.alpha.contract.invalid_contract_notation',\r\n    },\r\n    {\r\n      msg: 'Change is not enough to consume a roll.',\r\n      id: 'proto.alpha.contract.manager.consume_roll_change',\r\n    },\r\n    {\r\n      msg:\r\n        'A revealed manager public key is inconsistent with the announced hash',\r\n      id: 'proto.alpha.contract.manager.inconsistent_hash',\r\n    },\r\n    {\r\n      msg:\r\n        'A provided manager public key is different with the public key stored in the contract',\r\n      id: 'proto.alpha.contract.manager.inconsistent_public_key',\r\n    },\r\n    {\r\n      msg: 'Delegate has no roll.',\r\n      id: 'proto.alpha.contract.manager.no_roll_for_delegate',\r\n    },\r\n    {\r\n      msg:\r\n        'A snapshot of the rolls distribution does not exist for this cycle.',\r\n      id: 'proto.alpha.contract.manager.no_roll_snapshot_for_cycle',\r\n    },\r\n    {\r\n      msg: 'A contract cannot be delegated to an unregistered delegate',\r\n      id: 'proto.alpha.contract.manager.unregistered_delegate',\r\n    },\r\n    {\r\n      msg:\r\n        'A contract handle is not present in the context (either it never was or it has been destroyed)',\r\n      id: 'proto.alpha.contract.non_existing_contract',\r\n    },\r\n    {\r\n      msg: 'One tried to revealed twice a manager public key',\r\n      id: 'proto.alpha.contract.previously_revealed_key',\r\n    },\r\n    {\r\n      msg:\r\n        'One tried to apply a manager operation without revealing the manager public key',\r\n      id: 'proto.alpha.contract.unrevealed_key',\r\n    },\r\n    {\r\n      msg: 'An operation tried to spend tokens from an unspendable contract',\r\n      id: 'proto.alpha.contract.unspendable_contract',\r\n    },\r\n    {\r\n      msg: 'Useless delegate reactivation',\r\n      id: 'proto.alpha.delegate.already_active',\r\n    },\r\n    {\r\n      msg: 'Cannot freeze deposit when the balance is too low',\r\n      id: 'proto.alpha.delegate.balance_too_low_for_deposit',\r\n    },\r\n    {\r\n      msg: 'Cannot register a delegate when its implicit account is empty',\r\n      id: 'proto.alpha.delegate.empty_delegate_account',\r\n    },\r\n    {\r\n      msg: 'Tried to unregister a delegate',\r\n      id: 'proto.alpha.delegate.no_deletion',\r\n    },\r\n    {\r\n      msg: 'Contract already delegated to the given delegate',\r\n      id: 'proto.alpha.delegate.unchanged',\r\n    },\r\n    {\r\n      msg: 'Proposal lists cannot be empty.',\r\n      id: 'proto.alpha.empty_proposal',\r\n    },\r\n    {\r\n      msg:\r\n        'The sum of gas consumed by all the operations in the block exceeds the hard gas limit per block',\r\n      id: 'proto.alpha.gas_exhausted.block',\r\n    },\r\n    {\r\n      msg:\r\n        'Gas limit was not high enough to deserialize the transaction parameters or origination script code or initial storage, making the operation impossible to parse within the provided gas bounds.',\r\n      id: 'proto.alpha.gas_exhausted.init_deserialize',\r\n    },\r\n    {\r\n      msg:\r\n        'A script or one of its callee took more time than the operation said it would',\r\n      id: 'proto.alpha.gas_exhausted.operation',\r\n    },\r\n    {\r\n      msg: 'A transaction tried to exceed the hard limit on gas',\r\n      id: 'proto.alpha.gas_limit_too_high',\r\n    },\r\n    {\r\n      msg: 'No manager operations are allowed on an empty implicit contract.',\r\n      id: 'proto.alpha.implicit.empty_implicit_contract',\r\n    },\r\n    {\r\n      msg: 'Emptying an implicit delegated account is not allowed.',\r\n      id: 'proto.alpha.implicit.empty_implicit_delegated_contract',\r\n    },\r\n    {\r\n      msg:\r\n        'The number of endorsements must be non-negative and at most the endosers_per_block constant.',\r\n      id: 'proto.alpha.incorrect_number_of_endorsements',\r\n    },\r\n    {\r\n      msg: 'Block priority must be non-negative.',\r\n      id: 'proto.alpha.incorrect_priority',\r\n    },\r\n    {\r\n      msg: 'An internal operation was emitted twice by a script',\r\n      id: 'proto.alpha.internal_operation_replay',\r\n    },\r\n    {\r\n      msg: 'A compile-time constant was invalid for its expected form.',\r\n      id: 'proto.alpha.invalidSyntacticConstantError',\r\n    },\r\n    {\r\n      msg: 'Negative multiple of periods are not allowed.',\r\n      id: 'proto.alpha.invalid_arg',\r\n    },\r\n    {\r\n      msg:\r\n        'Could not deserialize some piece of data from its binary representation',\r\n      id: 'proto.alpha.invalid_binary_format',\r\n    },\r\n    {\r\n      msg: 'Fitness representation should be exactly 8 bytes long.',\r\n      id: 'proto.alpha.invalid_fitness',\r\n    },\r\n    {\r\n      msg: 'Ballot provided for a proposal that is not the current one.',\r\n      id: 'proto.alpha.invalid_proposal',\r\n    },\r\n    {\r\n      msg: 'Period is negative.',\r\n      id: 'proto.alpha.malformed_period',\r\n    },\r\n    {\r\n      msg:\r\n        'Either no parameter was supplied to a contract with a non-unit parameter type, a non-unit parameter was passed to an account, or a parameter was supplied of the wrong type',\r\n      id: 'proto.alpha.michelson_v1.bad_contract_parameter',\r\n    },\r\n    {\r\n      msg: 'Unexpected stack at the end of a lambda or script.',\r\n      id: 'proto.alpha.michelson_v1.bad_return',\r\n    },\r\n    {\r\n      msg: 'The stack has an unexpected length or contents.',\r\n      id: 'proto.alpha.michelson_v1.bad_stack',\r\n    },\r\n    {\r\n      msg:\r\n        'The type of a stack item is unexpected (this error is always accompanied by a more precise one).',\r\n      id: 'proto.alpha.michelson_v1.bad_stack_item',\r\n    },\r\n    {\r\n      msg: 'The error was too big to be serialized with the provided gas',\r\n      id: 'proto.alpha.michelson_v1.cannot_serialize_error',\r\n    },\r\n    {\r\n      msg:\r\n        'Argument of FAILWITH was too big to be serialized with the provided gas',\r\n      id: 'proto.alpha.michelson_v1.cannot_serialize_failure',\r\n    },\r\n    {\r\n      msg:\r\n        'Execution trace with stacks was to big to be serialized with the provided gas',\r\n      id: 'proto.alpha.michelson_v1.cannot_serialize_log',\r\n    },\r\n    {\r\n      msg:\r\n        'The returned storage was too big to be serialized with the provided gas',\r\n      id: 'proto.alpha.michelson_v1.cannot_serialize_storage',\r\n    },\r\n    {\r\n      msg:\r\n        'A non comparable type was used in a place where only comparable types are accepted.',\r\n      id: 'proto.alpha.michelson_v1.comparable_type_expected',\r\n    },\r\n    {\r\n      msg:\r\n        'A deprecated instruction usage is disallowed in newly created contracts',\r\n      id: 'proto.alpha.michelson_v1.deprecated_instruction',\r\n    },\r\n    {\r\n      msg: 'Two entrypoints have the same name.',\r\n      id: 'proto.alpha.michelson_v1.duplicate_entrypoint',\r\n    },\r\n    {\r\n      msg: 'Map literals cannot contain duplicated keys',\r\n      id: 'proto.alpha.michelson_v1.duplicate_map_keys',\r\n    },\r\n    {\r\n      msg: 'When parsing script, a field was found more than once',\r\n      id: 'proto.alpha.michelson_v1.duplicate_script_field',\r\n    },\r\n    {\r\n      msg:\r\n        'Set literals cannot contain duplicate elements, but a duplicae was found while parsing.',\r\n      id: 'proto.alpha.michelson_v1.duplicate_set_values_in_literal',\r\n    },\r\n    {\r\n      msg: 'An entrypoint name exceeds the maximum length of 31 characters.',\r\n      id: 'proto.alpha.michelson_v1.entrypoint_name_too_long',\r\n    },\r\n    {\r\n      msg: 'There is non trivial garbage code after a FAIL instruction.',\r\n      id: 'proto.alpha.michelson_v1.fail_not_in_tail_position',\r\n    },\r\n    {\r\n      msg:\r\n        'The toplevel error thrown when trying to parse a type expression (always followed by more precise errors).',\r\n      id: 'proto.alpha.michelson_v1.ill_formed_type',\r\n    },\r\n    {\r\n      msg:\r\n        'The toplevel error thrown when trying to typecheck a contract code against given input, output and storage types (always followed by more precise errors).',\r\n      id: 'proto.alpha.michelson_v1.ill_typed_contract',\r\n    },\r\n    {\r\n      msg:\r\n        'The toplevel error thrown when trying to typecheck a data expression against a given type (always followed by more precise errors).',\r\n      id: 'proto.alpha.michelson_v1.ill_typed_data',\r\n    },\r\n    {\r\n      msg: 'The annotations on two types could not be merged',\r\n      id: 'proto.alpha.michelson_v1.inconsistent_annotations',\r\n    },\r\n    {\r\n      msg:\r\n        'The specified field does not match the field annotation in the type',\r\n      id: 'proto.alpha.michelson_v1.inconsistent_field_annotations',\r\n    },\r\n    {\r\n      msg:\r\n        'A stack was of an unexpected length (this error is always in the context of a located error).',\r\n      id: 'proto.alpha.michelson_v1.inconsistent_stack_lengths',\r\n    },\r\n    {\r\n      msg: 'The two types contain annotations that do not match',\r\n      id: 'proto.alpha.michelson_v1.inconsistent_type_annotations',\r\n    },\r\n    {\r\n      msg:\r\n        'This is the basic type clash error, that appears in several places where the equality of two types have to be proven, it is always accompanied with another error that provides more context.',\r\n      id: 'proto.alpha.michelson_v1.inconsistent_types',\r\n    },\r\n    {\r\n      msg:\r\n        'In a script or data expression, a primitive was applied to an unsupported number of arguments.',\r\n      id: 'proto.alpha.michelson_v1.invalid_arity',\r\n    },\r\n    {\r\n      msg:\r\n        'A script or data expression references a big_map that does not exist or assumes a wrong type for an existing big_map.',\r\n      id: 'proto.alpha.michelson_v1.invalid_big_map',\r\n    },\r\n    {\r\n      msg: 'A data expression was invalid for its expected type.',\r\n      id: 'proto.alpha.michelson_v1.invalid_constant',\r\n    },\r\n    {\r\n      msg:\r\n        'A script or data expression references a contract that does not exist or assumes a wrong type for an existing contract.',\r\n      id: 'proto.alpha.michelson_v1.invalid_contract',\r\n    },\r\n    {\r\n      msg:\r\n        'In a script or data expression, an expression was of the wrong kind (for instance a string where only a primitive applications can appear).',\r\n      id: 'proto.alpha.michelson_v1.invalid_expression_kind',\r\n    },\r\n    {\r\n      msg:\r\n        'The body of an ITER instruction must result in the same stack type as before the ITER.',\r\n      id: 'proto.alpha.michelson_v1.invalid_iter_body',\r\n    },\r\n    {\r\n      msg:\r\n        'FAIL cannot be the only instruction in the body. The propper type of the return list cannot be inferred.',\r\n      id: 'proto.alpha.michelson_v1.invalid_map_block_fail',\r\n    },\r\n    {\r\n      msg: 'The body of a map block did not match the expected type',\r\n      id: 'proto.alpha.michelson_v1.invalid_map_body',\r\n    },\r\n    {\r\n      msg: 'In a script or data expression, a primitive was unknown.',\r\n      id: 'proto.alpha.michelson_v1.invalid_primitive',\r\n    },\r\n    {\r\n      msg:\r\n        'In a script or data expression, a primitive name is unknown or has a wrong case.',\r\n      id: 'proto.alpha.michelson_v1.invalid_primitive_name',\r\n    },\r\n    {\r\n      msg:\r\n        'In a script or data expression, a primitive name is neither uppercase, lowercase or capitalized.',\r\n      id: 'proto.alpha.michelson_v1.invalid_primitive_name_case',\r\n    },\r\n    {\r\n      msg:\r\n        'In a script or data expression, a primitive was of the wrong namespace.',\r\n      id: 'proto.alpha.michelson_v1.invalid_primitive_namespace',\r\n    },\r\n    {\r\n      msg: 'When parsing script, a field was expected, but not provided',\r\n      id: 'proto.alpha.michelson_v1.missing_script_field',\r\n    },\r\n    {\r\n      msg: 'An entrypoint was not found when calling a contract.',\r\n      id: 'proto.alpha.michelson_v1.no_such_entrypoint',\r\n    },\r\n    {\r\n      msg: 'Toplevel error for all runtime script errors',\r\n      id: 'proto.alpha.michelson_v1.runtime_error',\r\n    },\r\n    {\r\n      msg: 'A FAIL instruction was reached due to the detection of an overflow',\r\n      id: 'proto.alpha.michelson_v1.script_overflow',\r\n    },\r\n    {\r\n      msg: 'A FAILWITH instruction was reached',\r\n      id: 'proto.alpha.michelson_v1.script_rejected',\r\n    },\r\n    {\r\n      msg: 'A SELF instruction was encountered in a lambda expression.',\r\n      id: 'proto.alpha.michelson_v1.self_in_lambda',\r\n    },\r\n    {\r\n      msg: 'An instruction generated a type larger than the limit.',\r\n      id: 'proto.alpha.michelson_v1.type_too_large',\r\n    },\r\n    {\r\n      msg:\r\n        'A binary operation is called on operands of types over which it is not defined.',\r\n      id: 'proto.alpha.michelson_v1.undefined_binop',\r\n    },\r\n    {\r\n      msg:\r\n        'A unary operation is called on an operand of type over which it is not defined.',\r\n      id: 'proto.alpha.michelson_v1.undefined_unop',\r\n    },\r\n    {\r\n      msg: 'A node in the syntax tree was impropperly annotated',\r\n      id: 'proto.alpha.michelson_v1.unexpected_annotation',\r\n    },\r\n    {\r\n      msg:\r\n        'When parsing script, a big_map type was found in a position where it could end up stored inside a big_map, which is forbidden for now.',\r\n      id: 'proto.alpha.michelson_v1.unexpected_bigmap',\r\n    },\r\n    {\r\n      msg:\r\n        'When parsing script, a contract type was found in the storage or parameter field.',\r\n      id: 'proto.alpha.michelson_v1.unexpected_contract',\r\n    },\r\n    {\r\n      msg:\r\n        'When parsing script, an operation type was found in the storage or parameter field.',\r\n      id: 'proto.alpha.michelson_v1.unexpected_operation',\r\n    },\r\n    {\r\n      msg: 'Annotations of the same kind must be grouped',\r\n      id: 'proto.alpha.michelson_v1.ungrouped_annotations',\r\n    },\r\n    {\r\n      msg: 'In a script or data expression, a primitive was unknown.',\r\n      id: 'proto.alpha.michelson_v1.unknown_primitive_name',\r\n    },\r\n    {\r\n      msg:\r\n        'At the join point at the end of two code branches the stacks have inconsistent lengths or contents.',\r\n      id: 'proto.alpha.michelson_v1.unmatched_branches',\r\n    },\r\n    {\r\n      msg: 'Map keys must be in strictly increasing order',\r\n      id: 'proto.alpha.michelson_v1.unordered_map_literal',\r\n    },\r\n    {\r\n      msg: 'Set values must be in strictly increasing order',\r\n      id: 'proto.alpha.michelson_v1.unordered_set_literal',\r\n    },\r\n    {\r\n      msg: 'An entrypoint in the contract is not reachable.',\r\n      id: 'proto.alpha.michelson_v1.unreachable_entrypoint',\r\n    },\r\n    {\r\n      msg: 'Duplicated revelation for a nonce.',\r\n      id: 'proto.alpha.nonce.previously_revealed',\r\n    },\r\n    {\r\n      msg: 'Nonce revelation happens before cycle end',\r\n      id: 'proto.alpha.nonce.too_early_revelation',\r\n    },\r\n    {\r\n      msg: 'Nonce revelation happens too late',\r\n      id: 'proto.alpha.nonce.too_late_revelation',\r\n    },\r\n    {\r\n      msg: 'The provided nonce is inconsistent with the committed nonce hash.',\r\n      id: 'proto.alpha.nonce.unexpected',\r\n    },\r\n    {\r\n      msg: 'The operation is ill-formed or for another protocol version',\r\n      id: 'proto.alpha.operation.cannot_parse',\r\n    },\r\n    {\r\n      msg: 'Two endorsements received from same delegate',\r\n      id: 'proto.alpha.operation.duplicate_endorsement',\r\n    },\r\n    {\r\n      msg:\r\n        'The given key and secret do not correspond to any existing preallocated contract',\r\n      id: 'proto.alpha.operation.invalid_activation',\r\n    },\r\n    {\r\n      msg:\r\n        'The level of an endorsement is inconsistent with the provided block hash.',\r\n      id: 'proto.alpha.operation.invalid_endorsement_level',\r\n    },\r\n    {\r\n      msg:\r\n        'The operation signature is ill-formed or has been made with the wrong public key',\r\n      id: 'proto.alpha.operation.invalid_signature',\r\n    },\r\n    {\r\n      msg:\r\n        'The operation is of a kind that must be signed, but the signature is missing',\r\n      id: 'proto.alpha.operation.missing_signature',\r\n    },\r\n    {\r\n      msg:\r\n        'The block being validated does not include the required minimum number of endorsements for this priority.',\r\n      id: 'proto.alpha.operation.not_enought_endorsements_for_priority',\r\n    },\r\n    {\r\n      msg:\r\n        'Trying to include an endorsement in a block that is not the successor of the endorsed one',\r\n      id: 'proto.alpha.operation.wrong_endorsement_predecessor',\r\n    },\r\n    {\r\n      msg:\r\n        'Trying to onclude a proposal or ballot meant for another voting period',\r\n      id: 'proto.alpha.operation.wrong_voting_period',\r\n    },\r\n    {\r\n      msg: 'The requested seed is not available',\r\n      id: 'proto.alpha.seed.unknown_seed',\r\n    },\r\n    {\r\n      msg:\r\n        'A script or one of its callee wrote more bytes than the operation said it would',\r\n      id: 'proto.alpha.storage_exhausted.operation',\r\n    },\r\n    {\r\n      msg: 'A transaction tried to exceed the hard limit on storage',\r\n      id: 'proto.alpha.storage_limit_too_high',\r\n    },\r\n    {\r\n      msg: 'An addition of two tez amounts overflowed',\r\n      id: 'proto.alpha.tez.addition_overflow',\r\n    },\r\n    {\r\n      msg: 'Multiplication of a tez amount by a non positive integer',\r\n      id: 'proto.alpha.tez.invalid_divisor',\r\n    },\r\n    {\r\n      msg: 'A multiplication of a tez amount by an integer overflowed',\r\n      id: 'proto.alpha.tez.multiplication_overflow',\r\n    },\r\n    {\r\n      msg: 'Multiplication of a tez amount by a negative integer',\r\n      id: 'proto.alpha.tez.negative_multiplicator',\r\n    },\r\n    {\r\n      msg: 'An subtraction of two tez amounts underflowed',\r\n      id: 'proto.alpha.tez.subtraction_underflow',\r\n    },\r\n    {\r\n      msg: 'Overflow when adding timestamps.',\r\n      id: 'proto.alpha.timestamp_add',\r\n    },\r\n    {\r\n      msg: 'Substracting timestamps resulted in negative period.',\r\n      id: 'proto.alpha.timestamp_sub',\r\n    },\r\n    {\r\n      msg:\r\n        'A transaction exceeded the hard limit of internal operations it can emit',\r\n      id: 'proto.alpha.too_many_internal_operations',\r\n    },\r\n    {\r\n      msg: 'The delegate reached the maximum number of allowed proposals.',\r\n      id: 'proto.alpha.too_many_proposals',\r\n    },\r\n    {\r\n      msg:\r\n        'The delegate provided for the ballot is not in the voting listings.',\r\n      id: 'proto.alpha.unauthorized_ballot',\r\n    },\r\n    {\r\n      msg:\r\n        'The delegate provided for the proposal is not in the voting listings.',\r\n      id: 'proto.alpha.unauthorized_proposal',\r\n    },\r\n    {\r\n      msg:\r\n        'An origination was attemped out of the scope of a manager operation',\r\n      id: 'proto.alpha.undefined_operation_nonce',\r\n    },\r\n    {\r\n      msg: 'Ballot recorded outside of a voting period.',\r\n      id: 'proto.alpha.unexpected_ballot',\r\n    },\r\n    {\r\n      msg: 'Level must be non-negative.',\r\n      id: 'proto.alpha.unexpected_level',\r\n    },\r\n    {\r\n      msg: 'Nonce length is incorrect.',\r\n      id: 'proto.alpha.unexpected_nonce_length',\r\n    },\r\n    {\r\n      msg: 'Proposal recorded outside of a proposal period.',\r\n      id: 'proto.alpha.unexpected_proposal',\r\n    },\r\n    {\r\n      msg: 'Block locator is invalid.',\r\n      id: 'node.bootstrap_pipeline.invalid_locator',\r\n    },\r\n    {\r\n      msg: 'Block locator is too short.',\r\n      id: 'node.bootstrap_pipeline.too_short_locator',\r\n    },\r\n    {\r\n      msg: 'IO error: connection with a peer is closed.',\r\n      id: 'node.p2p_io_scheduler.connection_closed',\r\n    },\r\n    {\r\n      msg: 'Fail to connect with a peer: a connection is already established.',\r\n      id: 'node.p2p_pool.connected',\r\n    },\r\n    {\r\n      msg: 'Connection was refused.',\r\n      id: 'node.p2p_pool.connection_refused',\r\n    },\r\n    {\r\n      msg: 'The peer identity you tried to connect is banned.',\r\n      id: 'node.p2p_pool.peer_banned',\r\n    },\r\n    {\r\n      msg: 'Fail to connect with a peer: a connection is already pending.',\r\n      id: 'node.p2p_pool.pending_connection',\r\n    },\r\n    {\r\n      msg: 'The address you tried to connect is banned.',\r\n      id: 'node.p2p_pool.point_banned',\r\n    },\r\n    {\r\n      msg: 'Node is in private mode.',\r\n      id: 'node.p2p_pool.private_mode',\r\n    },\r\n    {\r\n      msg: 'Connection to peer was rejected by us.',\r\n      id: 'node.p2p_pool.rejected',\r\n    },\r\n    {\r\n      msg: 'Too many connections.',\r\n      id: 'node.p2p_pool.too_many_connections',\r\n    },\r\n    {\r\n      msg: 'An error occurred while deciphering.',\r\n      id: 'node.p2p_socket.decipher_error',\r\n    },\r\n    {\r\n      msg: 'An error occurred while decoding.',\r\n      id: 'node.p2p_socket.decoding_error',\r\n    },\r\n    {\r\n      msg: 'An error occurred while encoding.',\r\n      id: 'node.p2p_socket.encoding_error',\r\n    },\r\n    {\r\n      msg: 'Rejected peer connection: invalid authentication.',\r\n      id: 'node.p2p_socket.invalid_auth',\r\n    },\r\n    {\r\n      msg: 'Size of chunks is not valid.',\r\n      id: 'node.p2p_socket.invalid_chunks_size',\r\n    },\r\n    {\r\n      msg: 'The size of the message to be written is invalid.',\r\n      id: 'node.p2p_socket.invalid_message_size',\r\n    },\r\n    {\r\n      msg: 'Remote peer is actually yourself.',\r\n      id: 'node.p2p_socket.myself',\r\n    },\r\n    {\r\n      msg: 'Remote peer cannot be authenticated: not enough proof of work.',\r\n      id: 'node.p2p_socket.not_enough_proof_of_work',\r\n    },\r\n    {\r\n      msg:\r\n        'Rejected peer connection: The peer rejected the socket connection by Nack with a list of alternative peers.',\r\n      id: 'node.p2p_socket.rejected_by_nack',\r\n    },\r\n    {\r\n      msg:\r\n        'Rejected peer connection: rejected socket connection as we have no common network protocol with the peer.',\r\n      id: 'node.p2p_socket.rejected_no_common_protocol',\r\n    },\r\n    {\r\n      msg: 'Rejected peer connection: rejected socket connection.',\r\n      id: 'node.p2p_socket.rejected_socket_connection',\r\n    },\r\n    {\r\n      msg: 'Rejecting peer connection with motive.',\r\n      id: 'node.p2p_socket.rejecting_incoming',\r\n    },\r\n    {\r\n      msg: 'Known invalid block found in the peer\\'s chain',\r\n      id: 'node.peer_validator.known_invalid',\r\n    },\r\n    {\r\n      msg: 'Unknown ancestor block found in the peer\\'s chain',\r\n      id: 'node.peer_validator.unknown_ancestor',\r\n    },\r\n    {\r\n      msg: 'The block was annotated with a time too far in the future.',\r\n      id: 'node.prevalidation.future_block_header',\r\n    },\r\n    {\r\n      msg: 'The operation size is bigger than allowed.',\r\n      id: 'node.prevalidation.oversized_operation',\r\n    },\r\n    {\r\n      msg:\r\n        'Raised when an operation has not been parsed correctly during prevalidation.',\r\n      id: 'node.prevalidation.parse_error',\r\n    },\r\n    {\r\n      msg: 'The prevalidation context is full.',\r\n      id: 'node.prevalidation.too_many_operations',\r\n    },\r\n    {\r\n      msg: 'Invalid protocol.',\r\n      id: 'node.protocol_validator.invalid_protocol',\r\n    },\r\n    {\r\n      msg:\r\n        'The data directory could not be read. This could be because it was generated with an old version of the tezos-node program. Deleting and regenerating this directory may fix the problem.',\r\n      id: 'node.state.bad_data_dir',\r\n    },\r\n    {\r\n      msg:\r\n        'When commiting the context of a block, the announced context hash was not the one computed at commit time.',\r\n      id: 'node.state.block.inconsistent_context_hash',\r\n    },\r\n    {\r\n      msg: 'The invalid block to be unmarked was not actually invalid.',\r\n      id: 'node.state.block_not_invalid',\r\n    },\r\n    {\r\n      msg:\r\n        'The chain identifier could not be found in the chain identifiers table.',\r\n      id: 'node.state.unknown_chain',\r\n    },\r\n    {\r\n      msg:\r\n        'The block belongs to a branch that is not compatible with the current checkpoint.',\r\n      id: 'node.validator.checkpoint_error',\r\n    },\r\n    {\r\n      msg: 'Attempted validation of a block from an inactive chain.',\r\n      id: 'node.validator.inactive_chain',\r\n    },\r\n    {\r\n      msg: 'Incorrect history mode switch.',\r\n      id: 'node_config_file.incorrect_history_mode_switch',\r\n    },\r\n    {\r\n      msg: 'Missing key in store',\r\n      id: 'raw_store.unknown',\r\n    },\r\n    {\r\n      msg:\r\n        'The provided list of operations is inconsistent with the block header.',\r\n      id: 'validator.inconsistent_operations_hash',\r\n    },\r\n    {\r\n      msg: 'Invalid block.',\r\n      id: 'validator.invalid_block',\r\n    },\r\n    {\r\n      msg: 'Missing test protocol when forking the test chain',\r\n      id: 'validator.missing_test_protocol',\r\n    },\r\n    {\r\n      msg: 'The protocol required for validating a block is missing.',\r\n      id: 'validator.unavailable_protocol',\r\n    },\r\n    {\r\n      msg: 'Failed to validate block using exteranl validation process.',\r\n      id: 'validator.validation_process_failed',\r\n    },\r\n    {\r\n      msg:\r\n        'An operation on a worker could not complete before it was shut down.',\r\n      id: 'worker.closed',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an annotation exceeded the maximum length (255).',\r\n      id: 'micheline.parse_error.annotation_exceeds_max_length',\r\n    },\r\n    {\r\n      msg:\r\n        'Tried to interpret an empty piece or Micheline source as a single expression.',\r\n      id: 'micheline.parse_error.empty_expression',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an extra semi colon or parenthesis was encountered.',\r\n      id: 'micheline.parse_error.extra_token',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, a sequence of bytes that is not valid UTF-8 was encountered.',\r\n      id: 'micheline.parse_error.invalid_utf8_sequence',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an expression was not aligned with its siblings of the same mother application or sequence.',\r\n      id: 'micheline.parse_error.misaligned_node',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, a number was not visually separated from its follower token, leading to misreadability.',\r\n      id: 'micheline.parse_error.missing_break_after_number',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, the length of a byte sequence (0x...) was not a multiple of two, leaving a trailing half byte.',\r\n      id: 'micheline.parse_error.odd_lengthed_bytes',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, a parenthesis or a brace was unclosed.',\r\n      id: 'micheline.parse_error.unclosed_token',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an unexpected escape sequence was encountered in a string.',\r\n      id: 'micheline.parse_error.undefined_escape_sequence',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an unexpected character was encountered.',\r\n      id: 'micheline.parse_error.unexpected_character',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an unexpected token was encountered.',\r\n      id: 'micheline.parse_error.unexpected_token',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, a commentX was not terminated.',\r\n      id: 'micheline.parse_error.unterminated_comment',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an integer was not terminated.',\r\n      id: 'micheline.parse_error.unterminated_integer',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, a string was not terminated.',\r\n      id: 'micheline.parse_error.unterminated_string',\r\n    },\r\n    {\r\n      msg: 'Wrong hash given',\r\n      id: 'Bad_hash',\r\n    },\r\n    {\r\n      msg: 'The context checkout failed using a given hash',\r\n      id: 'Block_validator_process.failed_to_checkout_context',\r\n    },\r\n    {\r\n      msg: 'Cannot reconstruct',\r\n      id: 'CannotReconstruct',\r\n    },\r\n    {\r\n      msg: 'Cannot find context corresponding to hash',\r\n      id: 'Context_not_found',\r\n    },\r\n    {\r\n      msg: 'The imported block is not the expected one.',\r\n      id: 'InconsistentImportedBlock',\r\n    },\r\n    {\r\n      msg: 'The operations given do not match their hashes.',\r\n      id: 'InconsistentOperationHashes',\r\n    },\r\n    {\r\n      msg: 'The data provided by the snapshot is inconsistent',\r\n      id: 'Inconsistent_snapshot_data',\r\n    },\r\n    {\r\n      msg: 'Error while opening snapshot file',\r\n      id: 'Inconsistent_snapshot_file',\r\n    },\r\n    {\r\n      msg: 'Invalid specification of block to import',\r\n      id: 'InvalidBlockSpecification',\r\n    },\r\n    {\r\n      msg: 'The version of the snapshot to import is not valid',\r\n      id: 'Invalid_snapshot_version',\r\n    },\r\n    {\r\n      msg: 'Mandatory data missing while reaching end of snapshot file.',\r\n      id: 'Missing_snapshot_data',\r\n    },\r\n    {\r\n      msg:\r\n        'RPC lookup failed. Block has been pruned and requested data deleted.',\r\n      id: 'RPC_context.Gone',\r\n    },\r\n    {\r\n      msg:\r\n        'RPC lookup failed. No RPC exists at the URL or the RPC tried to access non-existent data.',\r\n      id: 'RPC_context.Not_found',\r\n    },\r\n    {\r\n      msg: 'Internal error while restoring the context',\r\n      id: 'Restore_context_failure',\r\n    },\r\n    {\r\n      msg: 'The imported snapshot is malformed.',\r\n      id: 'SnapshotImportFailure',\r\n    },\r\n    {\r\n      msg: 'Failed to read file',\r\n      id: 'System_read_error',\r\n    },\r\n    {\r\n      msg: 'The validator failed because of a system error',\r\n      id: 'Validator_process.system_error_while_validating',\r\n    },\r\n    {\r\n      msg: 'Cannot write in file for context dump',\r\n      id: 'Writing_error',\r\n    },\r\n    {\r\n      msg: 'The block to export in the snapshot is not valid.',\r\n      id: 'WrongBlockExport',\r\n    },\r\n    {\r\n      msg: 'Wrong protocol hash',\r\n      id: 'WrongProtocolHash',\r\n    },\r\n    {\r\n      msg: 'Snapshot exports is not compatible with the current configuration.',\r\n      id: 'WrongSnapshotExport',\r\n    },\r\n    {\r\n      msg: 'A fatal assertion failed',\r\n      id: 'assertion',\r\n    },\r\n    {\r\n      msg: 'A promise was unexpectedly canceled',\r\n      id: 'canceled',\r\n    },\r\n    {\r\n      msg: 'A key has been provided with an invalid uri.',\r\n      id: 'cli.key.invalid_uri',\r\n    },\r\n    {\r\n      msg: 'The signer produced an invalid signature',\r\n      id: 'cli.signature_mismatch',\r\n    },\r\n    {\r\n      msg:\r\n        'A key has been provided with an unregistered scheme (no corresponding plugin)',\r\n      id: 'cli.unregistered_key_scheme',\r\n    },\r\n    {\r\n      msg:\r\n        'The byte sequence references a multisig counter that does not match the one currently stored in the given multisig contract',\r\n      id: 'client.alpha.Bad deserialized counter',\r\n    },\r\n    {\r\n      msg:\r\n        'When trying to deserialise an action from a sequence of bytes, we got an expression that does not correspond to a known multisig action',\r\n      id: 'client.alpha.actionDeserialisation',\r\n    },\r\n    {\r\n      msg:\r\n        'When trying to deserialise an action from a sequence of bytes, we got an action for another multisig contract',\r\n      id: 'client.alpha.badDeserializedContract',\r\n    },\r\n    {\r\n      msg: 'invalid duration in -endorsement-delay',\r\n      id: 'client.alpha.badEndorsementDelayArg',\r\n    },\r\n    {\r\n      msg: 'invalid priority in -max-priority',\r\n      id: 'client.alpha.badMaxPriorityArg',\r\n    },\r\n    {\r\n      msg: 'invalid duration in -max-waiting-time',\r\n      id: 'client.alpha.badMaxWaitingTimeArg',\r\n    },\r\n    {\r\n      msg: 'invalid fee threshold in -fee-threshold',\r\n      id: 'client.alpha.badMinimalFeesArg',\r\n    },\r\n    {\r\n      msg: 'invalid number of levels in -preserved-levels',\r\n      id: 'client.alpha.badPreservedLevelsArg',\r\n    },\r\n    {\r\n      msg: 'Invalid  notation in parameter.',\r\n      id: 'client.alpha.badTezArg',\r\n    },\r\n    {\r\n      msg:\r\n        'When trying to deserialise an action from a sequence of bytes, we got an error',\r\n      id: 'client.alpha.bytesDeserialisation',\r\n    },\r\n    {\r\n      msg:\r\n        'A multisig command has referenced a scriptless smart contract instead of a multisig smart contract.',\r\n      id: 'client.alpha.contractHasNoScript',\r\n    },\r\n    {\r\n      msg:\r\n        'A multisig command has referenced a smart contract without storage instead of a multisig smart contract.',\r\n      id: 'client.alpha.contractHasNoStorage',\r\n    },\r\n    {\r\n      msg:\r\n        'A multisig command has referenced a smart contract whose storage is of a different shape than the expected one.',\r\n      id: 'client.alpha.contractHasUnexpectedStorage',\r\n    },\r\n    {\r\n      msg:\r\n        'Attempt to get the code of a contract failed because it has nocode. No scriptless contract should remain.',\r\n      id: 'client.alpha.contractWithoutCode',\r\n    },\r\n    {\r\n      msg:\r\n        'A signature was given for a multisig contract that matched none of the public keys of the contract signers',\r\n      id: 'client.alpha.invalidSignature',\r\n    },\r\n    {\r\n      msg: 'A wrong number of arguments was provided to a macro',\r\n      id: 'client.alpha.michelson.macros.bas_arity',\r\n    },\r\n    {\r\n      msg: 'An macro expects a sequence, but a sequence was not provided',\r\n      id: 'client.alpha.michelson.macros.sequence_expected',\r\n    },\r\n    {\r\n      msg:\r\n        'A macro had an annotation, but no annotation was permitted on this macro.',\r\n      id: 'client.alpha.michelson.macros.unexpected_annotation',\r\n    },\r\n    {\r\n      msg: 'A multisig threshold should be a positive number',\r\n      id: 'client.alpha.nonPositiveThreshold',\r\n    },\r\n    {\r\n      msg:\r\n        'A multisig command has referenced a smart contract whose script is not one of the known multisig contract scripts.',\r\n      id: 'client.alpha.notASupportedMultisigContract',\r\n    },\r\n    {\r\n      msg:\r\n        'To run an action on a multisig contract, you should provide at least as many signatures as indicated by the threshold stored in the multisig contract.',\r\n      id: 'client.alpha.notEnoughSignatures',\r\n    },\r\n    {\r\n      msg:\r\n        'The given threshold is higher than the number of keys, this would lead to a frozen multisig contract',\r\n      id: 'client.alpha.thresholdTooHigh',\r\n    },\r\n    {\r\n      msg: 'Cannot recover from a corrupted context.',\r\n      id: 'context.non_recoverable_context',\r\n    },\r\n    {\r\n      msg: '<gf>context_dump.read.cannot_open',\r\n    },\r\n    {\r\n      msg: '<gf>context_dump.read.suspicious',\r\n    },\r\n    {\r\n      msg: '<gf>context_dump.write.cannot_open',\r\n    },\r\n    {\r\n      msg: 'Exception safely wrapped in an error',\r\n      id: 'failure',\r\n    },\r\n    {\r\n      msg: 'Activation of an Internal Event SINK with an URI failed',\r\n      id: 'internal-event-activation-error',\r\n    },\r\n    {\r\n      msg: 'The raw context extraction depth argument must be positive.',\r\n      id: 'raw_context.invalid_depth',\r\n    },\r\n    {\r\n      msg: 'No protocol was registered with the requested hash.',\r\n      id: 'registered_protocol.unregistered_protocol',\r\n    },\r\n    {\r\n      msg: 'The fetch of a Operation_hash has been canceled',\r\n      id: 'requester.Operation_hash.fetch_canceled',\r\n    },\r\n    {\r\n      msg: 'The fetch of a Operation_hash has timed out',\r\n      id: 'requester.Operation_hash.fetch_timeout',\r\n    },\r\n    {\r\n      msg: 'Some Operation_hash is missing from the requester',\r\n      id: 'requester.Operation_hash.missing',\r\n    },\r\n    {\r\n      msg: 'The fetch of a Protocol_hash has been canceled',\r\n      id: 'requester.Protocol_hash.fetch_canceled',\r\n    },\r\n    {\r\n      msg: 'The fetch of a Protocol_hash has timed out',\r\n      id: 'requester.Protocol_hash.fetch_timeout',\r\n    },\r\n    {\r\n      msg: 'Some Protocol_hash is missing from the requester',\r\n      id: 'requester.Protocol_hash.missing',\r\n    },\r\n    {\r\n      msg: 'The fetch of a block_hash has been canceled',\r\n      id: 'requester.block_hash.fetch_canceled',\r\n    },\r\n    {\r\n      msg: 'The fetch of a block_hash has timed out',\r\n      id: 'requester.block_hash.fetch_timeout',\r\n    },\r\n    {\r\n      msg: 'Some block_hash is missing from the requester',\r\n      id: 'requester.block_hash.missing',\r\n    },\r\n    {\r\n      msg: 'The fetch of a operation_hashes has been canceled',\r\n      id: 'requester.operation_hashes.fetch_canceled',\r\n    },\r\n    {\r\n      msg: 'The fetch of a operation_hashes has timed out',\r\n      id: 'requester.operation_hashes.fetch_timeout',\r\n    },\r\n    {\r\n      msg: 'Some operation_hashes is missing from the requester',\r\n      id: 'requester.operation_hashes.missing',\r\n    },\r\n    {\r\n      msg: 'The fetch of a operations has been canceled',\r\n      id: 'requester.operations.fetch_canceled',\r\n    },\r\n    {\r\n      msg: 'The fetch of a operations has timed out',\r\n      id: 'requester.operations.fetch_timeout',\r\n    },\r\n    {\r\n      msg: 'Some operations is missing from the requester',\r\n      id: 'requester.operations.missing',\r\n    },\r\n    {\r\n      msg: 'Error while decoding a remote signer message',\r\n      id: 'signer.decoding_error',\r\n    },\r\n    {\r\n      msg: 'Error while encoding a remote signer message',\r\n      id: 'signer.encoding_error',\r\n    },\r\n    {\r\n      msg: 'Block not found',\r\n      id: 'state.block.contents_not_found',\r\n    },\r\n    {\r\n      msg: 'Block not found',\r\n      id: 'state.block.not_found',\r\n    },\r\n    {\r\n      msg: 'Unix System_info failure',\r\n      id: 'unix.system_info',\r\n    },\r\n    {\r\n      msg: 'An unhandled unix exception',\r\n      id: 'unix_error',\r\n    },\r\n    {\r\n      msg: 'Canceled',\r\n      id: 'utils.Canceled',\r\n    },\r\n    {\r\n      msg: 'Timeout',\r\n      id: 'utils.Timeout',\r\n    },\r\n    {\r\n      msg: 'Fee exceeded hard cap!',\r\n      id: 'TooHighFee'\r\n    }\r\n  ];\r\n  transform(errorId: string, withObj?: any): any {\r\n    const protocol = errorId.match(/[0-9]{3}-P\\w{7}/g);\r\n    if (protocol && protocol[0]) {\r\n      errorId = errorId.replace(protocol[0], 'alpha');\r\n    }\r\n    let errorMessage = '';\r\n    const index = this.ERROR_LIST.findIndex((s) => s.id === errorId);\r\n    console.log('##### ' + index);\r\n    if (errorId === 'proto.alpha.michelson_v1.script_rejected' && withObj && (withObj.string !== undefined || withObj.args)) {\r\n      if (withObj.string) {\r\n        errorMessage = this.ERROR_LIST[index].msg + ' > ' + withObj.string;\r\n      } else {\r\n        errorMessage = this.ERROR_LIST[index].msg + ' ' + JSON.stringify(withObj);\r\n      }\r\n      console.log(withObj);\r\n    } else if (index !== -1) {\r\n      errorMessage = this.ERROR_LIST[index].msg;\r\n    } else {\r\n      if (\r\n        errorId.indexOf('branch refused (Error:') !== -1 &&\r\n        errorId.indexOf('already used for contract') !== -1\r\n      ) {\r\n        errorMessage =\r\n          'Counter error: Another operation in mempool is blocking your operation. Wait for it to be included in a block or pruned from mempool (up to 60 minutes).';\r\n      } else {\r\n        errorMessage = 'Unrecognized error: ' + errorId;\r\n      }\r\n    }\r\n    return errorMessage;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { TranslateService } from '@ngx-translate/core';  // Multiple instances created ?\r\nimport { timeout } from 'rxjs/operators';\r\n\r\n@Pipe({\r\n    name: 'timeAgo',\r\n    pure: true  // if false pipe will be called at each changes - necessary for translation - is there a better way?\r\n})\r\nexport class TimeAgoPipe implements PipeTransform {\r\n    constructor(\r\n        private translate: TranslateService\r\n    ) {}\r\n    transform(timestamp: number): string {\r\n        let result: string;\r\n\r\n        let secTmp = '';\r\n        let secsTmp = '';\r\n        let mnTmp = '';\r\n        let mnsTmp = '';\r\n        let hrTmp = '';\r\n        let hrsTmp = '';\r\n        let dayTmp = '';\r\n        let daysTmp = '';\r\n        let monthTmp = '';\r\n        let monthsTmp = '';\r\n        let yearTmp = '';\r\n        let yearsTmp = '';\r\n\r\n        secTmp = this.translate.instant('TIMEAGOPIPE.SEC');\r\n        // console.log('loaded? ' + secTmp);\r\n        secsTmp = secTmp;\r\n        mnTmp = this.translate.instant('TIMEAGOPIPE.MINUTE');\r\n        mnsTmp = mnTmp;\r\n        hrTmp = this.translate.instant('TIMEAGOPIPE.HOUR');\r\n        hrsTmp = this.translate.instant('TIMEAGOPIPE.HOURS');\r\n        dayTmp = this.translate.instant('TIMEAGOPIPE.DAY');\r\n        daysTmp = this.translate.instant('TIMEAGOPIPE.DAYS');\r\n        monthTmp = this.translate.instant('TIMEAGOPIPE.MONTH');\r\n        monthsTmp = this.translate.instant('TIMEAGOPIPE.MONTHS');\r\n        yearTmp = this.translate.instant('TIMEAGOPIPE.YEAR');\r\n        yearsTmp = this.translate.instant('TIMEAGOPIPE.YEARS');\r\n        // Tranforming from String to Date format\r\n\r\n        // current time\r\n        const now = new Date().getTime();\r\n\r\n        // time since transaction was made in seconds\r\n        const delta = (now - timestamp) / 1000;\r\n\r\n        // If transaction has just been broadcasted then dateString will be null in the first few seconds (prevalidation stage)\r\n        if (delta < 20 ) {\r\n            return this.translate.instant('TIMEAGOPIPE.JUSTNOW');\r\n            // 'just now';\r\n        }\r\n\r\n        // Return interval format in seconds, hours or days\r\n        if (delta < 60) {  // Sent in last minute\r\n            // result = Math.floor(delta) + ' sec ';\r\n            result = Math.round(Math.floor(delta) / 10) * 10 + ' ' + secTmp + ' ';\r\n        } else if (delta < 120) {  // Sent in last hour: 1h = 3600 sec -> displays seconds\r\n            // result = Math.floor(delta / 60) + ' mn ';\r\n            result = Math.floor(delta / 60) + ' ' + mnTmp + ' ';\r\n\r\n            // Adds seconds details if there's a remainder in 'delta % 60'\r\n            if (Math.floor(delta % 60) !== 0) {\r\n                // result = result + Math.floor(delta % 60) + ' sec ';\r\n                result = result + Math.round(Math.floor(delta % 60) / 10) * 10 + ' ' + secTmp + ' ';\r\n            }\r\n        } else if (delta < 86400) {  // Sent on last day: 1d = 86400 sec -> displays hours and seconds\r\n            result = String(Math.floor(delta / 3600));\r\n\r\n            // Adds suffix hr or hrs depending on 'delta / 3600' value\r\n            // result = Math.floor(delta / 3600) > 1 ? result + ' hrs ' : result + ' hr ';\r\n            result = Math.floor(delta / 3600) > 1 ? result + ' ' + hrsTmp + ' ' : result + ' ' + hrTmp + ' ';\r\n\r\n            // Adds minutes details if there's a remainder in 'delta % 3600'\r\n            if (Math.floor((delta % 3600) / 60) !== 0) {\r\n                result = result + String(Math.floor((delta % 3600) / 60)) + ' ' + mnTmp + ' ';\r\n                // result = result + String(Math.floor((delta % 3600) / 60)) + ' mn ';\r\n                // result = Math.floor((delta % 3600) / 60) > 1 ? result + ' mns ' : result + ' mn '; // there's no plural in mn\r\n            }\r\n        } else if (delta < 2592000) {  // Sent on last month: 1m = 2592000 sec (30 days) -> displays days and hours\r\n            result = String(Math.floor(delta / 86400));\r\n\r\n            // Adds suffix day or days depending on 'delta / 86400' value\r\n            result = Math.floor(delta / 86400) > 1 ? result + ' ' + daysTmp + ' ' : result + ' ' + dayTmp + ' ';\r\n            // result = Math.floor(delta / 86400) > 1 ? result + ' days ' : result + ' day ';\r\n\r\n            // Adds hours details if there's a remainder in 'delta % 86400'\r\n            if (Math.floor((delta % 86400) / 3600) !== 0) {\r\n                result = result + String(Math.floor((delta % 86400) / 3600));\r\n\r\n                // Adds suffix hr or hrs depending on '(delta % 86400) / 3600' value\r\n                result = Math.floor((delta % 86400) / 3600) > 1 ? result + ' ' + hrsTmp + ' ' : result + ' ' + hrTmp + ' ';\r\n                // result = Math.floor((delta % 86400) / 3600) > 1 ? result + ' hrs ' : result + ' hr ';\r\n            }\r\n        } else if (delta < 31536000) {  // Sent on last year: 1y = 31536000 sec (365 days) -> displays months and days\r\n            result = String(Math.floor(delta / 2592000));\r\n\r\n            // Adds suffix month or months depending on 'delta / 2592000' value\r\n            result = Math.floor(delta / 2592000) > 1 ? result + ' ' + monthsTmp + ' ' : result + ' ' + monthTmp + ' ';\r\n            // result = Math.floor(delta / 2592000) > 1 ? result + ' months ' : result + ' month ';\r\n\r\n            // Adds days details if there's a remainder in 'delta / 2592000'\r\n            if (Math.floor((delta % 2592000) / 86400) !== 0) {\r\n                result = result + String(Math.floor((delta % 2592000) / 86400));\r\n\r\n                // Adds suffix day or days depending on '(delta % 2592000) / 86400' value\r\n                result = Math.floor((delta % 2592000) / 86400) > 1 ? result + ' ' + daysTmp + ' ' : result + ' ' + dayTmp + ' ';\r\n                // result = Math.floor((delta % 2592000) / 86400) > 1 ? result + ' days ' : result + ' day ';\r\n            }\r\n\r\n        } else {  // Sent more than one year ago -> displays years and months\r\n            result = String(Math.floor(delta / 31536000));\r\n\r\n            // Adds suffix year or years depending on 'delta / 31536000' value\r\n            result = Math.floor(delta / 31536000) > 1 ? result + ' ' + yearsTmp + ' ' : result + ' ' + yearTmp + ' ';\r\n            // result = Math.floor(delta / 31536000) > 1 ? result + ' years ' : result + ' year ';\r\n\r\n            // Adds months details if there's a remainder in 'delta / 31536000' which is more then 1\r\n            if (Math.floor((delta % 31536000) / 2592000) !== 0) {\r\n                result = result + String(Math.floor((delta % 31536000) / 2592000));\r\n\r\n                // Adds suffix month or months depending on '(delta % 31536000) / 2592000' value\r\n                result = Math.floor((delta % 31536000) / 2592000) > 1 ? result + ' ' + monthsTmp + ' ' : result + ' ' + monthTmp + ' ';\r\n                // result = Math.floor((delta % 31536000) / 2592000) > 1 ? result + ' months ' : result + ' month ';\r\n            }\r\n\r\n        }\r\n\r\n        // const agoTmp = this.translate.instant('TIMEAGOPIPE.AGO');  // not working\r\n        const agoTmp = this.translate.instant('TIMEAGOPIPE.AGO');\r\n\r\n        result = result + agoTmp;\r\n        // console.log('in time-ago return result: ', result);  // working but View not updated when language is changed and pipe is pure\r\n        return result;\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    name: 'truncate'\r\n})\r\nexport class TruncatePipe implements PipeTransform {\r\n    transform(value?: string, args?: number, endTrail?: boolean): string {\r\n        const limit = args ? args : 3;\r\n        const trail = '...';\r\n\r\n        let returnString;\r\n\r\n        if (endTrail && value.length > limit) {\r\n            const endTrailstring = value.slice(-limit);\r\n            returnString = value.substring(0, limit) + trail + endTrailstring;\r\n\r\n            return returnString;\r\n        } else {\r\n            return value.length > limit ? value.substring(0, limit) + trail : value;\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { WalletService } from '../wallet/wallet.service';\r\nimport { of, Observable, from as fromPromise } from 'rxjs';\r\nimport { flatMap } from 'rxjs/operators';\r\nimport { Activity, Account } from '../wallet/wallet';\r\nimport { MessageService } from '../message/message.service';\r\nimport { LookupService } from '../lookup/lookup.service';\r\nimport { IndexerService } from '../indexer/indexer.service';\r\n\r\n@Injectable()\r\nexport class ActivityService {\r\n  maxTransactions = 10;\r\n  constructor(\r\n    private walletService: WalletService,\r\n    private messageService: MessageService,\r\n    private lookupService: LookupService,\r\n    private indexerService: IndexerService\r\n  ) {}\r\n  updateTransactions(pkh): Observable<any> {\r\n    try {\r\n      const account = this.walletService.wallet.getAccount(pkh);\r\n      return this.getTransactonsCounter(account).pipe(\r\n        flatMap((ans: any) => {\r\n          return of(ans);\r\n        })\r\n      );\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n  getTransactonsCounter(account): Observable<any> {\r\n    return fromPromise(this.indexerService.accountInfo(account.address)).pipe(\r\n      flatMap((counter) => {\r\n        if (account.activitiesCounter !== counter) {\r\n          return this.getAllTransactions(account, counter);\r\n        } else {\r\n          return of({\r\n            upToDate: true,\r\n          });\r\n        }\r\n      })\r\n    );\r\n  }\r\n  getAllTransactions(account, counter): Observable<any> {\r\n    return fromPromise(this.indexerService.getOperations(account.address)).pipe(\r\n      flatMap((ans) => {\r\n        if (Array.isArray(ans)) {\r\n          const oldActivities = account.activities;\r\n          account.activities = ans;\r\n          const oldActivitiesCounter = account.activitiesCounter;\r\n          account.activitiesCounter = counter;\r\n          console.log(oldActivitiesCounter + ' # ' + counter);\r\n          this.walletService.storeWallet();\r\n          if (oldActivitiesCounter !== -1) { // Exclude inital loading\r\n            this.promptNewActivities(account, oldActivities, ans);\r\n          } else {\r\n            console.log('# Excluded ' + counter);\r\n          }\r\n          for (const activity of ans) {\r\n            const counterParty = this.getCounterparty(activity, account, false);\r\n            this.lookupService.check(counterParty);\r\n          }\r\n        } else {\r\n          console.log('#');\r\n          console.log(ans);\r\n        }\r\n        return of({\r\n          upToDate: false\r\n        });\r\n      })\r\n    );\r\n  }\r\n  promptNewActivities(account: Account, oldActivities: Activity[], newActivities: Activity[]) {\r\n    for (const activity of newActivities) {\r\n      const index = oldActivities.findIndex((a) => a.hash === activity.hash);\r\n      if (index === -1 || (index !== -1 && oldActivities[index].status === 0)) {\r\n        if (activity.type === 'transaction') {\r\n          if (account.address === activity.source) {\r\n            this.messageService.addSuccess(account.shortAddress() + ': Sent ' + activity.amount / 1000000 + ' tez');\r\n          }\r\n          if (account.address === activity.destination) {\r\n            this.messageService.addSuccess(account.shortAddress() + ': Received ' + activity.amount / 1000000 + ' tez');\r\n          }\r\n        } else if (activity.type === 'delegation') {\r\n          this.messageService.addSuccess(account.shortAddress() + ': Delegate updated');\r\n        } else if (activity.type === 'origination') {\r\n          this.messageService.addSuccess(account.shortAddress() + ': Account originated');\r\n        } else if (activity.type === 'activation') {\r\n          this.messageService.addSuccess(account.shortAddress() + ': Account activated');\r\n        }\r\n      }\r\n    }\r\n  }\r\n  getCounterparty(transaction: any, account: Account, withLookup = true): string {\r\n    let counterParty = '';\r\n    if (transaction.type === 'delegation') {\r\n      if (transaction.destination) {\r\n        counterParty = transaction.destination;\r\n      } else {\r\n        counterParty =  ''; // User has undelegated\r\n      }\r\n    } else if (transaction.type === 'transaction') {\r\n      if (account.address === transaction.source) {\r\n        counterParty =  transaction.destination; // to\r\n      } else {\r\n        counterParty =  transaction.source; // from\r\n      }\r\n    } else if (transaction.type === 'origination') {\r\n      if (account.address === transaction.source) {\r\n        counterParty =  transaction.destination;\r\n      } else {\r\n        counterParty =  transaction.source;\r\n      }\r\n    } else {\r\n      counterParty =  '';\r\n    }\r\n    if (withLookup) {\r\n      counterParty = this.lookupService.resolve(counterParty);\r\n    }\r\n    return counterParty;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { TranslateService } from '@ngx-translate/core';  // Multiple instances created ?\r\n\r\nimport { WalletService } from '../wallet/wallet.service';\r\nimport { MessageService } from '../message/message.service';\r\nimport { TzrateService } from '../tzrate/tzrate.service';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { Account } from '../wallet/wallet';\r\nimport { isNullOrUndefined } from 'util';\r\n\r\n@Injectable()\r\nexport class BalanceService {\r\n  constructor(\r\n    private translate: TranslateService,\r\n    private walletService: WalletService,\r\n    private messageService: MessageService,\r\n    private tzrateService: TzrateService,\r\n    private operationService: OperationService\r\n  ) { }\r\n\r\n  getBalanceAll() {\r\n    for (const account of this.walletService.wallet.getAccounts()) {\r\n      this.getAccountBalance(account);\r\n    }\r\n  }\r\n  getAccountBalance(account: Account) {\r\n    console.log('for ' + account.address);\r\n    this.operationService.getBalance(account.address)\r\n      .subscribe((ans: any) => {\r\n        if (ans.success) {\r\n          this.updateAccountBalance(account, Number(ans.payload.balance));\r\n        } else {\r\n          console.log('Balance Error: ' + JSON.stringify(ans.payload.msg));\r\n        }\r\n      });\r\n  }\r\n  updateAccountBalance(account: Account, newBalance: number) {\r\n    if (account.balanceXTZ === null || account.balanceXTZ === undefined || newBalance !== account.balanceXTZ) {\r\n      account.balanceXTZ = newBalance;\r\n      this.updateTotalBalance();\r\n      this.tzrateService.updateFiatBalances();\r\n      this.walletService.storeWallet();\r\n    }\r\n  }\r\n  updateTotalBalance() {\r\n    let balance = 0;\r\n    let change = false;\r\n    for (const account of this.walletService.wallet.getAccounts()) {\r\n      if (!(account.balanceXTZ === null || account.balanceXTZ === undefined)) {\r\n        balance = balance + Number(account.balanceXTZ);\r\n        change = true;\r\n      }\r\n    }\r\n    if (change) {\r\n      this.walletService.wallet.totalBalanceXTZ = balance;\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { WalletClient, BeaconMessageType, PermissionScope, PermissionResponseInput, P2PPairingRequest, BeaconErrorType, BeaconResponseInputMessage, BeaconMessage, OperationResponseInput, BEACON_VERSION, ErrorResponse } from '@airgap/beacon-sdk';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BeaconService {\r\n  client = null;\r\n  peers = [];\r\n  permissions = [];\r\n  constructor(\r\n    private messageService: MessageService\r\n  ) {\r\n    console.log('### BEACON SERVICE ###');\r\n  }\r\n  correspondingResponseType: Record<string, string> = {\r\n    'permission_request': 'permission_response',\r\n    'operation_request': 'operation_response',\r\n    'sign_payload_request': 'sign_payload_response',\r\n    'broadcast_request': 'broadcast_response'\r\n  };\r\n  preNotifyPairing(pairInfoJson: string) {\r\n    const pairInfo: P2PPairingRequest = JSON.parse(pairInfoJson);\r\n    const peersJson = localStorage.getItem('beacon:communication-peers');\r\n    let newPublicKey = true;\r\n    if (peersJson) {\r\n      const peers = JSON.parse(peersJson);\r\n      if (peers && peers.length > 0 && pairInfo.publicKey) {\r\n        for (const peer of peers) {\r\n          if (peer.publicKey && peer.publicKey === pairInfo.publicKey) {\r\n            newPublicKey = false;\r\n            console.log('Existing public key found!');\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (newPublicKey) {\r\n      this.messageService.add(`Pairing with ${pairInfo.name}...`);\r\n    }\r\n  }\r\n  async addPeer(pairInfoJson: string) {\r\n    const pairInfo: P2PPairingRequest = JSON.parse(pairInfoJson);\r\n    console.log('PairInfo', pairInfo);\r\n    await this.client.addPeer(pairInfo);\r\n  }\r\n  async syncBeaconState() {\r\n    this.peers = await this.getPeers();\r\n    this.permissions = await this.getPermissions();\r\n  }\r\n  async removePeers() {\r\n    await this.client.removeAllPeers();\r\n    await this.client.removeAllAppMetadata();\r\n    this.syncBeaconState();\r\n  }\r\n  async removePeer(index: number) {\r\n    const pairInfo: P2PPairingRequest = this.peers[index];\r\n    await this.client.removePeer(pairInfo);\r\n    await this.client.removeAppMetadata(pairInfo.publicKey);\r\n    this.syncBeaconState();\r\n  }\r\n  async removePermissions() {\r\n    await this.client.removeAllPermissions();\r\n    this.syncBeaconState();\r\n  }\r\n  async removePermission(index: number) {\r\n    await this.client.removePermission(this.permissions[index].accountIdentifier);\r\n    this.syncBeaconState();\r\n  }\r\n  async getPeers(): Promise<any> {\r\n    return await this.client.getPeers();\r\n  }\r\n  async getPermissions(): Promise<any> {\r\n    return await this.client.getPermissions();\r\n  }\r\n  async rejectOnPermission(message: any) {\r\n    await this.respondWithError(BeaconErrorType.NOT_GRANTED_ERROR, message);\r\n  }\r\n  async rejectOnNetwork(message: any) {\r\n    await this.respondWithError(BeaconErrorType.NETWORK_NOT_SUPPORTED, message);\r\n  }\r\n  async rejectOnUserAbort(message: any) {\r\n    await this.respondWithError(BeaconErrorType.ABORTED_ERROR, message);\r\n  }\r\n  async rejectOnSourceAddress(message: any) {\r\n    await this.respondWithError(BeaconErrorType.NO_PRIVATE_KEY_FOUND_ERROR, message);\r\n  }\r\n  async rejectOnTooManyOps(message: any) {\r\n    await this.respondWithError(BeaconErrorType.TOO_MANY_OPERATIONS, message);\r\n  }\r\n  async rejectOnUnknown(message: any) {\r\n    await this.respondWithError(BeaconErrorType.UNKNOWN_ERROR, message);\r\n  }\r\n  async rejectOnParameters(message: any) {\r\n    await this.respondWithError(BeaconErrorType.PARAMETERS_INVALID_ERROR, message);\r\n  }\r\n  async respondWithError(errorType: BeaconErrorType, requestMessage: any) {\r\n    if (requestMessage) {\r\n      const response: ErrorResponse = {\r\n        type: BeaconMessageType.Error,\r\n        errorType,\r\n        version: BEACON_VERSION,\r\n        id: requestMessage.id,\r\n        senderId: await this.client.beaconId\r\n      };\r\n      await this.client.respond(response);\r\n    }\r\n  }\r\n  async approvePermissionRequest(message: any, publicKey: string) {\r\n    const response: PermissionResponseInput = {\r\n      type: BeaconMessageType.PermissionResponse,\r\n      network: message.network,\r\n      scopes: message.scopes,\r\n      id: message.id,\r\n      publicKey: publicKey\r\n    };\r\n    await this.client.respond(response);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivityService } from '../activity/activity.service';\r\nimport { TzrateService } from '../tzrate/tzrate.service';\r\nimport { BalanceService } from '../balance/balance.service';\r\nimport { WalletService } from '../wallet/wallet.service';\r\nimport { DelegateService } from '../delegate/delegate.service';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { ErrorHandlingPipe } from '../../pipes/error-handling.pipe';\r\nimport { Account } from '../wallet/wallet';\r\nimport Big from 'big.js';\r\n\r\nexport interface ScheduleData {\r\n  pkh: string;\r\n  state: State;\r\n  interval: any;\r\n  stateCounter: number;\r\n}\r\nenum State {\r\n  UpToDate,\r\n  Wait,\r\n  Updating,\r\n}\r\n\r\n@Injectable()\r\nexport class CoordinatorService {\r\n  scheduler: Map<string, any> = new Map<string, any>(); // pkh + delay\r\n  defaultDelayActivity = 30000; // 30s\r\n  shortDelayActivity = 5000; // 5s\r\n  tzrateInterval: any;\r\n  defaultDelayPrice = 300000; // 300s\r\n  accounts: Account[];\r\n  constructor(\r\n    private activityService: ActivityService,\r\n    private tzrateService: TzrateService,\r\n    private walletService: WalletService,\r\n    private balanceService: BalanceService,\r\n    private delegateService: DelegateService,\r\n    private operationService: OperationService,\r\n    private errorHandlingPipe: ErrorHandlingPipe\r\n  ) {}\r\n  startAll() {\r\n    if (this.walletService.wallet) {\r\n      this.accounts = this.walletService.wallet.getAccounts();\r\n      for (let i = 0; i < this.accounts.length; i++) {\r\n        this.start(this.accounts[i].address);\r\n      }\r\n      this.startXTZ();\r\n    } else {\r\n      console.log('no wallet found');\r\n    }\r\n  }\r\n  startXTZ() {\r\n    if (!this.tzrateInterval) {\r\n      console.log('Start scheduler XTZ');\r\n      this.tzrateService.getTzrate();\r\n      this.tzrateInterval = setInterval(\r\n        () => this.tzrateService.getTzrate(),\r\n        this.defaultDelayPrice\r\n      );\r\n    }\r\n  }\r\n  async start(pkh: string) {\r\n    if (pkh && !this.scheduler.get(pkh)) {\r\n      this.accounts = this.walletService.wallet.getAccounts();\r\n      console.log('Start scheduler ' + this.scheduler.size + ' ' + pkh);\r\n      const scheduleData: ScheduleData = {\r\n        pkh: pkh,\r\n        state: State.UpToDate,\r\n        interval: setInterval(\r\n          () => this.update(pkh),\r\n          this.defaultDelayActivity\r\n        ),\r\n        stateCounter: 0,\r\n      };\r\n      this.scheduler.set(pkh, scheduleData);\r\n      this.update(pkh);\r\n      this.updateAccountData(pkh);\r\n    }\r\n  }\r\n  async boost(pkh: string, metadata: any = null) {\r\n    // Expect action\r\n    console.log('boost ' + pkh);\r\n    if (this.walletService.addressExists(pkh)) {\r\n      if (metadata) {\r\n        this.addUnconfirmedOperations(pkh, metadata);\r\n      }\r\n      if (!this.scheduler.get(pkh)) {\r\n        await this.start(pkh);\r\n      }\r\n      if (this.scheduler.get(pkh).state !== State.Wait) {\r\n        this.changeState(pkh, State.Wait);\r\n        this.update(pkh);\r\n        const counter = this.scheduler.get(pkh).stateCounter;\r\n        setTimeout(() => {\r\n          // Failsafe\r\n          if (\r\n            this.scheduler &&\r\n            this.scheduler.get(pkh).stateCounter === counter\r\n          ) {\r\n            console.log('Timeout from wait state');\r\n            this.changeState(pkh, State.UpToDate);\r\n          }\r\n        }, 150000);\r\n      }\r\n    }\r\n  }\r\n  async update(pkh) {\r\n    this.setDelay(pkh, this.defaultDelayActivity);\r\n    this.activityService.updateTransactions(pkh).subscribe(\r\n      (ans: any) => {\r\n        switch (this.scheduler.get(pkh) ? this.scheduler.get(pkh).state : -1) {\r\n          case State.UpToDate: {\r\n            if (!ans.upToDate) {\r\n              this.changeState(pkh, State.Updating);\r\n            }\r\n            break;\r\n          }\r\n          case State.Wait: {\r\n            if (!ans.upToDate) {\r\n              this.changeState(pkh, State.Updating);\r\n            } else {\r\n              this.setDelay(pkh, this.shortDelayActivity);\r\n            }\r\n            break;\r\n          }\r\n          case State.Updating: {\r\n            if (ans.upToDate) {\r\n              this.changeState(pkh, State.UpToDate);\r\n            } else {\r\n              this.setDelay(pkh, this.shortDelayActivity);\r\n            }\r\n            break;\r\n          }\r\n          default: {\r\n            console.log('No state found!');\r\n            break;\r\n          }\r\n        }\r\n        const acc = this.walletService.wallet.getAccount(pkh);\r\n        if (acc && acc.activities.length) {\r\n          const latestActivity = acc.activities[0];\r\n          if (latestActivity.status === 0) {\r\n            const age = new Date().getTime() - new Date(latestActivity.timestamp).getTime();\r\n            if (age > 360000) {\r\n              acc.activities.shift();\r\n            }\r\n          }\r\n        }\r\n      },\r\n      err => console.log('Error in update(): ' + JSON.stringify(err)),\r\n      () => {\r\n        console.log(`account[${this.accounts.findIndex((a) => a.address === pkh)}][${\r\n          typeof this.scheduler.get(pkh).state !== 'undefined' ? this.scheduler.get(pkh).state : '*'}]: <<`);\r\n      }\r\n    );\r\n  }\r\n  changeState(pkh: string, newState: State) {\r\n    const scheduleData: ScheduleData = this.scheduler.get(pkh);\r\n    scheduleData.state = newState;\r\n    if (newState === State.UpToDate || newState === State.Updating) {\r\n      this.updateAccountData(pkh);\r\n    }\r\n    if (newState === State.Wait || newState === State.Updating) {\r\n      clearInterval(scheduleData.interval);\r\n      scheduleData.interval = setInterval(\r\n        () => this.update(pkh),\r\n        this.shortDelayActivity\r\n      );\r\n    }\r\n    scheduleData.stateCounter++;\r\n    this.scheduler.set(pkh, scheduleData);\r\n  }\r\n  setDelay(pkh: string, time: number) {\r\n    const scheduleData: ScheduleData = this.scheduler.get(pkh);\r\n    if (scheduleData.interval) {\r\n      clearInterval(scheduleData.interval);\r\n    }\r\n    scheduleData.interval = setInterval(() => this.update(pkh), time);\r\n    this.scheduler.set(pkh, scheduleData);\r\n  }\r\n  stopAll() {\r\n    if (this.walletService.wallet) {\r\n      console.log('Stop all schedulers');\r\n      for (\r\n        let i = 0;\r\n        i < this.accounts.length;\r\n        i++\r\n      ) {\r\n        this.stop(this.accounts[i].address);\r\n      }\r\n      clearInterval(this.tzrateInterval);\r\n      this.tzrateInterval = null;\r\n    }\r\n  }\r\n  async stop(pkh) {\r\n    console.log(\r\n      'Stop scheduler ' + this.accounts.findIndex((a) => a.address === pkh)\r\n    );\r\n    clearInterval(this.scheduler.get(pkh).interval);\r\n    this.scheduler.get(pkh).interval = null;\r\n    this.scheduler.delete(pkh);\r\n  }\r\n  updateAccountData(pkh: string) {\r\n    // Maybe also check for originations to account?\r\n    console.log('update account data for ' + pkh);\r\n    this.operationService.getAccount(pkh).subscribe((ans: any) => {\r\n      if (ans.success) {\r\n        this.balanceService.updateAccountBalance(\r\n          this.walletService.wallet.getAccount(pkh),\r\n          Number(ans.payload.balance)\r\n        );\r\n        const acc = this.walletService.wallet.getAccount(pkh);\r\n        this.delegateService.handleDelegateResponse(acc, ans.payload.delegate);\r\n      } else {\r\n        console.log('updateAccountData -> getAccount failed ', ans.payload.msg);\r\n      }\r\n    });\r\n  }\r\n  addUnconfirmedOperations(from: string, metadata: any) {\r\n    if (metadata.transactions) {\r\n      console.log('Unconfirmed transactions:');\r\n      console.log(metadata.transactions);\r\n      for (const op of metadata.transactions) {\r\n        const transaction = {\r\n          type: 'transaction',\r\n          status: 0,\r\n          amount: Big(op.amount).times(1000000).toString(),\r\n          fee: null,\r\n          source: from,\r\n          destination: op.to,\r\n          hash: metadata.opHash,\r\n          block: null,\r\n          timestamp: new Date().getTime()\r\n        };\r\n        let account = this.walletService.wallet.getAccount(from);\r\n        account.activities.unshift(transaction);\r\n        account = this.walletService.wallet.getAccount(op.to);\r\n        if (account) {\r\n          account.activities.unshift(transaction);\r\n        }\r\n      }\r\n    } else if (metadata.delegate !== undefined) {\r\n      const delegation = {\r\n        type: 'delegation',\r\n        status: 0,\r\n        amount: null,\r\n        fee: null,\r\n        source: from,\r\n        destination: metadata.delegate,\r\n        hash: metadata.opHash,\r\n        block: null,\r\n        timestamp: new Date().getTime()\r\n      };\r\n      const account = this.walletService.wallet.getAccount(from);\r\n      account.activities.unshift(delegation);\r\n    } else {\r\n      console.log('Unknown metadata');\r\n      console.log(metadata);\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Params } from '@angular/router';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { MessageService } from '../../services/message/message.service';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DeeplinkService {\r\n  private pairingJson = '';\r\n  constructor(\r\n    private operationService: OperationService,\r\n    private walletService: WalletService,\r\n    private messageService: MessageService\r\n  ) { }\r\n  set(params: Params) {\r\n    console.log(params);\r\n    this.pairingJson = this.extractPairingJson(params);\r\n    if (this.pairingJson && !this.walletService.wallet) {\r\n      this.messageService.addWarning('Access your wallet to complete the pairing');\r\n    }\r\n    console.log(this.pairingJson);\r\n  }\r\n  extractPairingJson(params: Params): string {\r\n    if (params.type === 'tzip10' && params.data) {\r\n      try {\r\n        return this.operationService.b58cdecode(params.data, '').toString();\r\n      } catch (e) {\r\n        return '';\r\n      }\r\n    }\r\n    return '';\r\n  }\r\n  popPairingJson(): string {\r\n    const pairingJson = this.pairingJson;\r\n    this.pairingJson = '';\r\n    return pairingJson;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { WalletService } from '../wallet/wallet.service';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { Account } from '../wallet/wallet';\r\n\r\n@Injectable()\r\nexport class DelegateService {\r\n  constructor(\r\n    private walletService: WalletService,\r\n    private operationService: OperationService\r\n  ) {}\r\n  getDelegates() {\r\n    if (\r\n      this.walletService.wallet &&\r\n      this.walletService.wallet.implicitAccounts\r\n    ) {\r\n      for (const account of this.walletService.wallet.getAccounts()) {\r\n        this.getDelegate(account);\r\n      }\r\n    }\r\n  }\r\n  getDelegate(account: Account) {\r\n    this.operationService.getDelegate(account.address).subscribe(\r\n      (data: any) => {\r\n        if (data.success) {\r\n          this.handleDelegateResponse(account, data.payload.delegate);\r\n        }\r\n      },\r\n      (err) => console.log(JSON.stringify(err))\r\n    );\r\n  }\r\n  handleDelegateResponse(account: Account, data: any) {\r\n    if (data) {\r\n      if (account.delegate !== data) {\r\n        account.delegate = data;\r\n        this.walletService.storeWallet();\r\n      } else {\r\n        console.log('delegate for ' + account.address + ' up to date');\r\n      }\r\n    } else {\r\n      if (account.delegate !== '') {\r\n        account.delegate = '';\r\n        this.walletService.storeWallet();\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport * as pbkdf2 from 'pbkdf2';\r\nimport * as AES from 'aes-js';\r\nimport * as scrypt from 'scryptsy';\r\nimport * as cryptob from 'crypto-browserify';\r\nimport * as forge from 'node-forge';\r\nimport { rejects } from 'assert';\r\ndeclare const Buffer;\r\n@Injectable()\r\nexport class EncryptionService {\r\n  constructor() { }\r\n  async encrypt(plaintext: any, password: string, version: number, salt: string = null): Promise<any> {\r\n    if (version === 1) {\r\n      throw new Error('Encryption version no longer supported');\r\n    } else if (version === 2) {\r\n      return this.encrypt_v2(plaintext, password);\r\n    } else if (version === 3) {\r\n      return this.encrypt_v2(plaintext, password, salt);\r\n    } else {\r\n      throw new Error('Unrecognized encryption format');\r\n    }\r\n  }\r\n  async decrypt(chiphertext: string, password: string, salt: string, version: number): Promise<any> {\r\n    if (version === 1) {\r\n      return this.decrypt_v1(chiphertext, password, salt);\r\n    } else if (version === 2 || version === 3) {\r\n      return this.decrypt_v2(chiphertext, password, salt);\r\n    } else {\r\n      throw new Error('Unrecognized encryption format');\r\n    }\r\n  }\r\n  // Version 1\r\n  async encrypt_v1(plaintext: any, password: string, salt: string): Promise<string> {\r\n    return new Promise(resolve => {\r\n      try {\r\n        if (!password || !salt) {\r\n          throw new Error('Missing password or salt');\r\n        }\r\n        pbkdf2.pbkdf2(password, salt, 10000, 32, 'sha512', (err, key) => {\r\n          if (err) {\r\n            throw (err);\r\n          }\r\n          const aesCtr = new AES.ModeOfOperation.ctr(key);\r\n          let chiphertext = aesCtr.encrypt(plaintext);\r\n          chiphertext = AES.utils.hex.fromBytes(chiphertext);\r\n          resolve(chiphertext);\r\n        });\r\n      } catch (e) {\r\n        console.warn(e);\r\n        resolve('');\r\n      }\r\n    });\r\n  }\r\n  async decrypt_v1(chiphertext: string, password: string, salt: string): Promise<any> {\r\n    return new Promise(resolve => {\r\n      try {\r\n        if (!password || !salt) {\r\n          throw new Error('Missing password or salt');\r\n        }\r\n        pbkdf2.pbkdf2(password, salt, 10000, 32, 'sha512', (err, key) => {\r\n          if (err) {\r\n            throw (err);\r\n          }\r\n          chiphertext = AES.utils.hex.toBytes(chiphertext);\r\n          const aesCtr = new AES.ModeOfOperation.ctr(key);\r\n          const plaintext = aesCtr.decrypt(chiphertext);\r\n          resolve(plaintext);\r\n        });\r\n      } catch (e) {\r\n        resolve('');\r\n      }\r\n    });\r\n  }\r\n  // Version 2\r\n  async encrypt_v2(plaintext: Buffer, password: string, salt?: string): Promise<any> {\r\n    if (!password) {\r\n      throw new Error('Missing password');\r\n    }\r\n    let salty;\r\n    if (salt) {\r\n      salty = new Buffer(salt, 'hex');\r\n    } else {\r\n      salty = cryptob.randomBytes(16);\r\n    }\r\n    const key = await scrypt.async(password, salty, 65536, 8, 1, 32);\r\n    const cipher: any = forge.cipher.createCipher('AES-GCM', key.toString('binary'));\r\n    cipher.start({\r\n      iv: salty,\r\n    });\r\n    const byteStringBuffer = forge.util.createBuffer(plaintext.toString('binary'), 'utf-8');\r\n    cipher.update(byteStringBuffer);\r\n    cipher.finish();\r\n    const chiphertext = cipher.output.toHex() + '==' + cipher.mode.tag.toHex();\r\n    return { chiphertext: chiphertext, iv: salty.toString('hex') };\r\n  }\r\n  async decrypt_v2(chipher: string, password: string, salt: string): Promise<string> {\r\n    try {\r\n      if (!password || !salt) {\r\n        throw new Error('Missing password or salt');\r\n      }\r\n      const parts = chipher.split('==');\r\n      const chiphertext = parts[0];\r\n      const tag = parts[1];\r\n      const key = await scrypt.async(password, new Buffer(salt, 'hex'), 65536, 8, 1, 32);\r\n      const decipher: any = forge.cipher.createDecipher('AES-GCM', key.toString('binary'));\r\n      decipher.start({\r\n        iv: new Buffer(salt, 'hex'),\r\n        tag: forge.util.createBuffer((new Buffer(tag, 'hex')).toString('binary'), 'utf-8'), // authentication tag from encryption\r\n      });\r\n      decipher.update(forge.util.createBuffer((new Buffer(chiphertext, 'hex')).toString('binary'), 'utf-8'));\r\n      const pass = decipher.finish();\r\n      if (pass) {\r\n        return new Buffer(decipher.output.toHex(), 'hex');\r\n      } else {\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      return null;\r\n    }\r\n  }\r\n  bumpIV(salt: string, bumps: number) {\r\n    if (bumps > 255) {\r\n      throw new Error('Invalid incremention');\r\n    }\r\n    const buf = new Buffer(salt, 'hex');\r\n    buf[13] = (buf[13] + 1) % 256;\r\n    return buf.toString('hex');\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { flatMap, catchError } from 'rxjs/operators';\r\nimport { of, Observable } from 'rxjs';\r\nimport { DefaultTransactionParams } from '../../interfaces';\r\nimport Big from 'big.js';\r\n\r\nconst httpOptions = { headers: { 'Content-Type': 'application/json' } };\r\nconst hardGasLimit = 1040000;\r\nconst hardStorageLimit = 60000;\r\n@Injectable()\r\nexport class EstimateService {\r\n  readonly costPerByte = '250';\r\n  readonly revealGasLimit = 1000;\r\n  queue = [];\r\n  CONSTANTS = this.operationService.CONSTANTS;\r\n  nodeURL = this.CONSTANTS.NET.NODE_URL;\r\n  pkh: string;\r\n  pk: string;\r\n  hash: string;\r\n  chainId: string;\r\n  manager: string;\r\n  counter: number;\r\n  constructor(\r\n    private http: HttpClient,\r\n    private operationService: OperationService\r\n  ) { }\r\n  init(hash: string, chainId: string, counter: number, manager: string, pk: string, pkh: string) {\r\n    this.hash = hash;\r\n    this.chainId = chainId;\r\n    this.counter = counter;\r\n    this.manager = manager;\r\n    this.pk = pk;\r\n    this.pkh = pkh;\r\n  }\r\n  async preLoadData(pkh: string, pk: string) {\r\n    this.pkh = pkh;\r\n    this.pk = pk;\r\n    await Promise.all([this.operationService.getHeader().toPromise(), this.getCounter(pkh), this.getManager(pkh)]).then(req => {\r\n      if (req[0] && req[1] && (req[2]) || req[2] === null) {\r\n        this.init(req[0].hash, req[0].chain_id, req[1], req[2], pk, pkh);\r\n      }\r\n    });\r\n    console.log('Ready for estimate!');\r\n  }\r\n  async estimate(transactions: any, from: string, callback) {\r\n    this.queue.push({ transactions, from, callback });\r\n    if (this.queue.length === 1) {\r\n      while (this.queue.length > 0) {\r\n        while (this.queue.length > 1) {\r\n          this.queue[0].callback(null);\r\n          this.queue.shift();\r\n        }\r\n        let retry = false;\r\n        for (let i = 0; i < 1 || retry && i < 2; i++) {\r\n          await this._estimate(this.queue[0].transactions, this.queue[0].from).then((res) => {\r\n            this.queue[0].callback(res);\r\n          }).catch(async (error) => {\r\n            if (error.message && error.message === 'An operation assumed a contract counter in the past' && !retry) {\r\n              console.log('Update counter');\r\n              await this.preLoadData(this.pkh, this.pk);\r\n              retry = true;\r\n            } else {\r\n              this.queue[0].callback({ error });\r\n            }\r\n          });\r\n        }\r\n        this.queue.shift();\r\n      }\r\n    }\r\n  }\r\n  private async _estimate(transactions: any, from: string): Promise<any> {\r\n    const extraGas = 80;\r\n    if (!this.hash) { return null; }\r\n    const simulation = {\r\n      fee: 0,\r\n      gasLimit: hardGasLimit,\r\n      storageLimit: hardStorageLimit\r\n    };\r\n    for (const tx of transactions) {\r\n      if (!tx.amount) {\r\n        tx.amount = 0;\r\n      }\r\n      if (tx.to.slice(0, 3) !== 'KT1') {\r\n        tx.amount = 0.000001;\r\n      }\r\n      tx.gasLimit = simulation.gasLimit;\r\n      tx.storageLimit = simulation.storageLimit;\r\n    }\r\n    if (this.hash && this.counter && (this.manager || this.manager === null)) {\r\n      const op = this.operationService.createTransactionObject(this.hash, this.counter, this.manager, transactions,\r\n        this.pkh, this.pk, from, simulation.fee);\r\n      const result = await this.simulate(op).toPromise().catch(\r\n        e => {\r\n          console.warn(e);\r\n          return null;\r\n        }\r\n      );\r\n      if (result && result.contents) {\r\n        let reveal = false;\r\n        const limits = [];\r\n        for (const content of result.contents) {\r\n          if (content.kind === 'reveal') {\r\n            reveal = true;\r\n          } else {\r\n            if (content.kind === 'transaction' && content.metadata.operation_result.status === 'applied') {\r\n              const { gasUsage, storageUsage } = this.getOpUsage(content);\r\n              limits.push({ gasLimit: gasUsage + extraGas, storageLimit: storageUsage });\r\n            } else {\r\n              return null;\r\n            }\r\n          }\r\n        }\r\n        return await this.operationService.localForge(op).pipe(flatMap(fop => {\r\n          const bytes = (fop.length / 2) + 64;\r\n          const gas = this.averageGasLimit(limits);\r\n          const storage = this.averageStorageLimit(limits);\r\n          const dtp: DefaultTransactionParams = { customLimits: limits, fee: this.recommendFee(limits, reveal, bytes), burn: this.burnFee(limits), gas, storage, reveal };\r\n          console.log(JSON.stringify(dtp));\r\n          return of(dtp);\r\n        })).toPromise();\r\n      } else if (typeof result.success === 'boolean' && result.success === false) {\r\n        console.log(result);\r\n        throw new Error(result.payload.msg);\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  getOpUsage(content: any): { gasUsage: number, storageUsage: number } {\r\n    let gasUsage = 0;\r\n    let burn = Big(0);\r\n    if (content.source && content.source === this.pkh) {\r\n      burn = burn.minus(content.amount ? content.amount : '0');\r\n      burn = burn.minus(content.fee ? content.fee : '0');\r\n    }\r\n    if (content.destination && content.destination === this.pkh) {\r\n      burn = burn.plus(content.amount ? content.amount : '0');\r\n    }\r\n    if (content.metadata.operation_result.balance_updates) {\r\n      for (const balanceUpdate of content.metadata.operation_result.balance_updates) {\r\n        if (balanceUpdate.contract === this.pkh) {\r\n          burn = burn.minus(balanceUpdate.change);\r\n        }\r\n      }\r\n    }\r\n    if (content.metadata.balance_updates) {\r\n      for (const balanceUpdate of content.metadata.balance_updates) {\r\n        if (balanceUpdate.contract === this.pkh) {\r\n          burn = burn.minus(balanceUpdate.change);\r\n        }\r\n      }\r\n    }\r\n    gasUsage += content.metadata.operation_result.consumed_gas ? Number(content.metadata.operation_result.consumed_gas) : 0;\r\n    if (content.metadata.internal_operation_results) {\r\n      for (const internalResult of content.metadata.internal_operation_results) {\r\n        if (internalResult.result) {\r\n          if (internalResult.result.consumed_gas) {\r\n            gasUsage += internalResult.result && internalResult.result.consumed_gas ? Number(internalResult.result.consumed_gas) : 0;\r\n          }\r\n          if (internalResult.result.balance_updates) {\r\n            for (const balanceUpdate of internalResult.result.balance_updates) {\r\n              if (balanceUpdate.contract === this.pkh && balanceUpdate.change.slice(0, 1) === '-') {\r\n                burn = burn.minus(balanceUpdate.change);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const storageUsage = Math.round(burn / Number(this.costPerByte));\r\n    if (gasUsage < 0 || gasUsage > hardGasLimit || storageUsage < 0 || storageUsage > hardStorageLimit) {\r\n      throw new Error('InvalidUsageCalculation');\r\n    }\r\n    return { gasUsage, storageUsage };\r\n  }\r\n  /*\r\n    Need to be updated when fee market appear or default behavior for bakers changes\r\n  */\r\n  recommendFee(limits: any, reveal: boolean, bytes: number): number {\r\n    const minimalFee = 100;\r\n    const feePerByte = 1;\r\n    const feePerGasUnit = 0.1;\r\n    let gasUnits = 0;\r\n    let numberOfOperations = 0;\r\n    if (reveal) {\r\n      gasUnits += this.revealGasLimit;\r\n      numberOfOperations++;\r\n    }\r\n    for (const data of limits) {\r\n      gasUnits += data.gasLimit;\r\n      numberOfOperations++;\r\n    }\r\n    bytes += 10 * numberOfOperations; // add 10 extra bytes for variation in amount & fee\r\n    return Number(Big(Math.ceil(minimalFee + (feePerByte * bytes) + (feePerGasUnit * gasUnits))).div(1000000).toString());\r\n  }\r\n  averageGasLimit(limits: any): number {\r\n    let totalGasLimit = 0;\r\n    for (const data of limits) {\r\n      totalGasLimit += data.gasLimit;\r\n    }\r\n    return Math.ceil(totalGasLimit / limits.length);\r\n  }\r\n  averageStorageLimit(limits: any): number {\r\n    let totalStorageLimit = 0;\r\n    for (const data of limits) {\r\n      totalStorageLimit += data.storageLimit;\r\n    }\r\n    return Math.ceil(totalStorageLimit / limits.length);\r\n  }\r\n  burnFee(limits: any): number {\r\n    let totalStorageLimit = Big(0);\r\n    for (const data of limits) {\r\n      totalStorageLimit = totalStorageLimit.plus(data.storageLimit);\r\n    }\r\n    return Number(Big(totalStorageLimit).times(this.costPerByte).div('1000000').toString());\r\n  }\r\n  simulate(op: any): Observable<any> {\r\n    op.signature = 'edsigtXomBKi5CTRf5cjATJWSyaRvhfYNHqSUGrn4SdbYRcGwQrUGjzEfQDTuqHhuA8b2d8NarZjz8TRf65WkpQmo423BtomS8Q';\r\n    return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/scripts/run_operation',\r\n      { operation: op, chain_id: this.chainId }, httpOptions).pipe(flatMap(res => {\r\n        this.operationService.checkApplied([res]);\r\n        return of(res);\r\n      })).pipe(catchError(err => this.operationService.errHandler(err)));\r\n  }\r\n  private async getCounter(pkh: string): Promise<number> {\r\n    return fetch(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + pkh + '/counter', {}).then(response => {\r\n      return response.json();\r\n    });\r\n  }\r\n  private async getManager(pkh: string): Promise<string> {\r\n    return fetch(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + pkh + '/manager_key', {}).then(response => {\r\n      return response.json();\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { saveAs } from 'file-saver';\r\n\r\n@Injectable()\r\nexport class ExportService {\r\n\r\n  constructor(\r\n  ) { }\r\n  downloadWallet(data: any) {\r\n    const blob = new Blob([JSON.stringify(data, null, 4)], { type: 'application/json' });\r\n    let filename = 'wallet.tez';\r\n    if (data.walletType === 1) {\r\n      filename = 'view-only_wallet.tez';\r\n    } else if (data.walletType === 2) {\r\n      filename = 'observer_wallet.tez';\r\n    } else if (data.walletType === 3) {\r\n      filename = 'ledger_wallet.tez';\r\n    } else if (data.walletType === 4) {\r\n      filename = 'hd-wallet.tez';\r\n    }\r\n    saveAs(blob, filename);\r\n  }\r\n\r\n  downloadOperationData(hex: string, signed: boolean) {\r\n    const data = {\r\n      hex: hex,\r\n      signed: signed\r\n    };\r\n    let filename;\r\n    if (signed) {\r\n      filename = 'signed.tzop';\r\n    } else {\r\n      filename = 'unsigned.tzop';\r\n    }\r\n    const blob = new Blob([JSON.stringify(data, null, 4)], { type: 'application/json' });\r\n    saveAs(blob, filename);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { WalletType, KeyPair } from './../../interfaces';\r\nimport { WalletService } from '../wallet/wallet.service';\r\nimport { CoordinatorService } from '../coordinator/coordinator.service';\r\nimport {\r\n  LegacyWalletV1,\r\n  LegacyWalletV2,\r\n  LegacyWalletV3,\r\n  HdWallet,\r\n  LedgerWallet,\r\n  TorusWallet\r\n} from '../wallet/wallet';\r\nimport { hd, utils } from '@tezos-core-tools/crypto-utils';\r\nimport { EncryptionService } from '../encryption/encryption.service';\r\nimport { TorusService } from '../torus/torus.service';\r\nimport { IndexerService } from '../indexer/indexer.service';\r\n\r\n@Injectable()\r\nexport class ImportService {\r\n  constructor(\r\n    private walletService: WalletService,\r\n    private coordinatorService: CoordinatorService,\r\n    private indexerService: IndexerService,\r\n    private encryptionService: EncryptionService,\r\n    private torusService: TorusService,\r\n  ) { }\r\n  pwdRequired(json: string) {\r\n    const walletData = JSON.parse(json);\r\n    if (walletData.provider !== 'Kukai') {\r\n      throw new Error(`Unsupported wallet format`);\r\n    }\r\n    if (walletData.walletType === 0 || walletData.walletType === 4) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  async importWalletFromJson(json: any, pwd: string): Promise<boolean> {\r\n    // From file\r\n    let seed;\r\n    let walletData;\r\n    try {\r\n      walletData = JSON.parse(json);\r\n      if (walletData.walletType === 4 && walletData.version === 3) {\r\n        //hd\r\n        seed = await this.encryptionService.decrypt(\r\n          walletData.encryptedSeed,\r\n          pwd,\r\n          walletData.iv,\r\n          3\r\n        );\r\n      } else if (walletData.walletType === 0) {\r\n        if (walletData.version === 1) {\r\n          console.log('v1');\r\n          seed = await this.encryptionService.decrypt(\r\n            walletData.encryptedSeed,\r\n            pwd,\r\n            walletData.pkh.slice(3, 19),\r\n            1\r\n          );\r\n          if (utils.seedToKeyPair(seed).pkh !== walletData.pkh) {\r\n            seed = '';\r\n          }\r\n        } else if (walletData.version === 2 || walletData.version === 3) {\r\n          seed = await this.encryptionService.decrypt(\r\n            walletData.encryptedSeed,\r\n            pwd,\r\n            walletData.iv,\r\n            walletData.version\r\n          );\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      throw new Error('Failed to decrypt keystore file');\r\n    }\r\n    if (seed) {\r\n      return this.importWalletFromObject(walletData, seed).then(\r\n        (ans) => {\r\n          return ans;\r\n        },\r\n        (e) => {\r\n          console.error(e);\r\n          throw new Error('Failed to fetch account(s). Please check your connection.');\r\n        }\r\n      );\r\n    } else {\r\n      throw new Error('Wrong password');\r\n    }\r\n  }\r\n  async importWalletFromObject(data: any, seed: any): Promise<boolean> {\r\n    this.coordinatorService.stopAll();\r\n    if (data.walletType === 4 && data.version === 3) {\r\n      // HD\r\n      this.walletService.wallet = new HdWallet(\r\n        data.iv,\r\n        data.encryptedSeed,\r\n        data.encryptedEntropy\r\n      );\r\n    } else if (data.walletType === 0) {\r\n      if (data.version === 3) {\r\n        this.walletService.wallet = new LegacyWalletV3(\r\n          data.iv,\r\n          data.encryptedSeed,\r\n          data.encryptedEntropy\r\n        );\r\n      } else if (data.version === 2) {\r\n        this.walletService.wallet = new LegacyWalletV2(\r\n          data.iv,\r\n          data.encryptedSeed\r\n        );\r\n      } else if (data.version === 1) {\r\n        this.walletService.wallet = new LegacyWalletV1(\r\n          data.pkh.slice(3, 19),\r\n          data.encryptedSeed\r\n        );\r\n      } else {\r\n        throw new Error('Unsupported wallet file');\r\n      }\r\n    } else {\r\n      throw new Error('Unsupported wallet file');\r\n    }\r\n    let keys: KeyPair;\r\n    if (seed.length === 32) {\r\n      keys = utils.seedToKeyPair(seed);\r\n    } else if (seed.length === 64) {\r\n      keys = hd.keyPairFromAccountIndex(seed, 0);\r\n    } else {\r\n      throw new Error('Invalid seed length');\r\n    }\r\n    this.walletService.initStorage();\r\n    if (this.walletService.wallet instanceof HdWallet) {\r\n      let index = 0;\r\n      let counter = 1;\r\n      while (counter) {\r\n        keys = hd.keyPairFromAccountIndex(seed, index);\r\n        counter = await this.indexerService\r\n          .accountInfo(keys.pkh);\r\n        if (counter || index === 0) {\r\n          this.walletService.addImplicitAccount(\r\n            keys.pk,\r\n            index++\r\n          );\r\n          await this.findContracts(keys.pkh);\r\n        }\r\n      }\r\n      this.walletService.wallet.index = index;\r\n    } else {\r\n      this.walletService.addImplicitAccount(keys.pk);\r\n      await this.findContracts(keys.pkh);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  async importWalletFromPk(pk: string, derivationPath: string, verifierDetails: any = null): Promise<boolean> {\r\n    this.coordinatorService.stopAll();\r\n    if (derivationPath) {\r\n      return this.ledgerImport(pk, derivationPath);\r\n    } else if (verifierDetails) {\r\n      return this.torusImport(pk, verifierDetails);\r\n    }\r\n  }\r\n  async ledgerImport(pk: string, derivationPath: string) {\r\n    try {\r\n      this.walletService.initStorage();\r\n      this.walletService.wallet = new LedgerWallet();\r\n      this.walletService.addImplicitAccount(pk, derivationPath);\r\n      await this.findContracts(this.walletService.wallet.implicitAccounts[0].pkh);\r\n      return true;\r\n    } catch (err) {\r\n      console.warn(err);\r\n      this.walletService.clearWallet();\r\n      return false;\r\n    }\r\n  }\r\n  async torusImport(pk: string, verifierDetails: any) {\r\n    try {\r\n      this.walletService.initStorage();\r\n      this.walletService.wallet = new TorusWallet(verifierDetails.verifier, verifierDetails.id, verifierDetails.name);\r\n      if (verifierDetails.verifier === 'twitter') {\r\n        this.updateTwitterName(verifierDetails.id);\r\n      }\r\n      this.walletService.addImplicitAccount(pk);\r\n      return true;\r\n    } catch (err) {\r\n      console.warn(err);\r\n      this.walletService.clearWallet();\r\n      return false;\r\n    }\r\n  }\r\n  async updateTwitterName(verifierId: string) {\r\n    const twitterId = verifierId.split('|')[1];\r\n    const { username } = await this.torusService.twitterLookup(undefined, twitterId);\r\n    if (username && this.walletService.wallet instanceof TorusWallet) {\r\n      this.walletService.wallet.name = '@' + username;\r\n    }\r\n  }\r\n  async findContracts(pkh: string) {\r\n    const addresses = await this.indexerService.getContractAddresses(pkh);\r\n    for (const KT of addresses) {\r\n      console.log('Found KT: ' + KT);\r\n      this.walletService.addOriginatedAccount(KT, pkh);\r\n    }\r\n    this.walletService.storeWallet();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Constants } from '../../../constants';\r\nimport { of, Observable, from as fromPromise } from 'rxjs';\r\nimport { flatMap } from 'rxjs/operators';\r\nimport { ConseilDataClient, ConseilQueryBuilder, ConseilSortDirection, ConseilOperator } from 'conseiljs';\r\nimport { Indexer } from '../indexer.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ConseilService implements Indexer {\r\n  CONSTANTS: any;\r\n  conseilServer: any;\r\n  platform: string;\r\n  network: string;\r\n  constructor(\r\n  ) {\r\n    this.CONSTANTS = new Constants();\r\n    this.conseilServer = this.CONSTANTS.NET.CSI;\r\n    this.network = this.CONSTANTS.NET.NETWORK;\r\n    this.platform = 'tezos';\r\n  }\r\n  async getContractAddresses(pkh: string, currentAddress: string = pkh): Promise<any> {\r\n    const entity = 'operations';\r\n    let query = ConseilQueryBuilder.blankQuery();\r\n    query = ConseilQueryBuilder.addFields(query, 'originated_contracts');\r\n    query = ConseilQueryBuilder.addPredicate(query, 'kind', ConseilOperator.EQ, ['origination'], false);\r\n    query = ConseilQueryBuilder.addPredicate(query, 'source', ConseilOperator.EQ, [currentAddress], false);\r\n    query = ConseilQueryBuilder.addPredicate(query, 'status', ConseilOperator.EQ, ['applied'], false);\r\n    query = ConseilQueryBuilder.addOrdering(query, 'block_level', ConseilSortDirection.DESC);\r\n    query = ConseilQueryBuilder.setLimit(query, 100);\r\n    const results = await ConseilDataClient.executeEntityQuery(this.conseilServer, this.platform, this.network, entity, query);\r\n    let addresses = [];\r\n    for (const result of results) {\r\n      addresses.push(result.originated_contracts);\r\n    }\r\n    for (const address of addresses) { // Needed to find accounts originated from other originated accounts\r\n      const childAddresses = await this.getContractAddresses(pkh, address);\r\n      addresses = addresses.concat(childAddresses);\r\n    }\r\n    return addresses;\r\n  }\r\n  accountInfo(address: string): Promise<any> {\r\n    const entity = 'accounts';\r\n    let query = ConseilQueryBuilder.blankQuery();\r\n    query = ConseilQueryBuilder.addFields(query, 'block_level');\r\n    query = ConseilQueryBuilder.addPredicate(query, 'account_id', ConseilOperator.EQ, [address], false);\r\n    query = ConseilQueryBuilder.setLimit(query, 1);\r\n    return fromPromise(ConseilDataClient.executeEntityQuery(this.conseilServer, this.platform, this.network, entity, query)).pipe(flatMap((result) => {\r\n      if (result[0]) {\r\n        return of(result[0].block_level);\r\n      } else {\r\n        return of(0);\r\n      }\r\n    })).toPromise();\r\n  }\r\n  getOperations(pkh: string): Promise<any> {\r\n    const entity = 'operations';\r\n    let sendQuery = ConseilQueryBuilder.blankQuery();\r\n    sendQuery = ConseilQueryBuilder.addFields(sendQuery, 'kind', 'block_hash', 'operation_group_hash', 'timestamp', 'originated_contracts', 'source', 'destination', 'amount', 'delegate');\r\n    sendQuery = ConseilQueryBuilder.addPredicate(sendQuery, 'kind', ConseilOperator.IN, ['transaction', 'origination', 'delegation'], false);\r\n    sendQuery = ConseilQueryBuilder.addPredicate(sendQuery, 'source', ConseilOperator.EQ, [pkh], false);\r\n    sendQuery = ConseilQueryBuilder.addPredicate(sendQuery, 'status', ConseilOperator.EQ, ['applied'], false);\r\n    sendQuery = ConseilQueryBuilder.addOrdering(sendQuery, 'block_level', ConseilSortDirection.DESC);\r\n    sendQuery = ConseilQueryBuilder.setLimit(sendQuery, 10);\r\n\r\n    let receiveQuery = ConseilQueryBuilder.blankQuery();\r\n    receiveQuery = ConseilQueryBuilder.addFields(receiveQuery, 'kind', 'block_hash', 'operation_group_hash', 'timestamp', 'source', 'destination', 'amount');\r\n    receiveQuery = ConseilQueryBuilder.addPredicate(receiveQuery, 'kind', ConseilOperator.IN, ['transaction', 'origination'], false);\r\n    receiveQuery = ConseilQueryBuilder.addPredicate(receiveQuery, 'destination', ConseilOperator.EQ, [pkh], false);\r\n    receiveQuery = ConseilQueryBuilder.addPredicate(receiveQuery, 'status', ConseilOperator.EQ, ['applied'], false);\r\n    receiveQuery = ConseilQueryBuilder.addOrdering(receiveQuery, 'block_level', ConseilSortDirection.DESC);\r\n    receiveQuery = ConseilQueryBuilder.setLimit(receiveQuery, 10);\r\n\r\n    return fromPromise(ConseilDataClient.executeEntityQuery(this.conseilServer, this.platform, this.network, entity, sendQuery)).pipe(flatMap((sendResult) => {\r\n      sendResult = this.formatTx(sendResult);\r\n      return fromPromise(ConseilDataClient.executeEntityQuery(this.conseilServer, this.platform, this.network, entity, receiveQuery)).pipe(flatMap((receiveResult) => {\r\n        receiveResult = this.formatTx(receiveResult);\r\n        const transactions = sendResult.concat(receiveResult).sort((a, b) => b['timestamp'] - a['timestamp']);\r\n        console.log('ADDRESS GET ' + pkh);\r\n        console.log(transactions);\r\n        return of(transactions);\r\n      }));\r\n    })).toPromise();\r\n  }\r\n  private formatTx(input: any): any {\r\n    const output = [];\r\n    for (const tx of input) {\r\n      if (tx.kind !== 'transaction' || tx.amount > 0) {\r\n        let destination = tx.destination;\r\n        if (tx.kind === 'origination') {\r\n          destination = tx.originated_contracts;\r\n        } else if (tx.kind === 'delegation') {\r\n          destination = tx.delegate;\r\n        }\r\n        output.push(\r\n          {\r\n            type: tx.kind,\r\n            block: tx.block_hash,\r\n            status: 1,\r\n            amount: tx.amount,\r\n            source: tx.source,\r\n            destination: destination,\r\n            hash: tx.operation_group_hash,\r\n            timestamp: tx.timestamp\r\n          }\r\n        );\r\n      }\r\n    }\r\n    return output;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ConseilService } from './conseil/conseil.service';\r\nimport { TzktService } from './tzkt/tzkt.service';\r\nimport { Constants } from '../../constants';\r\n\r\nexport interface Indexer {\r\n  getContractAddresses(pkh: string): Promise<any>;\r\n  accountInfo(address: string): Promise<any>;\r\n  getOperations(address: string): Promise<any>;\r\n}\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class IndexerService {\r\n  private selectedIndexerService: Indexer;\r\n  constructor() {\r\n    const constants = new Constants();\r\n    this.selectedIndexerService = constants.NET.CSI ? new ConseilService : new TzktService;\r\n  }\r\n  async getContractAddresses(address: string): Promise<any> {\r\n    return this.selectedIndexerService.getContractAddresses(address);\r\n  }\r\n  async accountInfo(address: string): Promise<any> {\r\n    return this.selectedIndexerService.accountInfo(address);\r\n  }\r\n  async getOperations(address: string): Promise<any> {\r\n    return this.selectedIndexerService.getOperations(address);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Constants } from '../../../constants';\r\nimport { Indexer } from '../indexer.service';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TzktService implements Indexer {\r\n  CONSTANTS: any;\r\n  network = '';\r\n  constructor() {\r\n    this.CONSTANTS = new Constants();\r\n    this.network = this.CONSTANTS.NET.network !== 'mainnet' ? '.' + this.CONSTANTS.NET.NETWORK.slice(0, -3) : '';\r\n  }\r\n  async getContractAddresses(pkh: string): Promise<any> {\r\n    return fetch(`https://api${this.network}.tzkt.io/v1/operations/originations?contractManager=${pkh}`)\r\n      .then(response => response.json())\r\n      .then(data => data.map((op: any) => {\r\n        return op.originatedContract.kind === 'delegator_contract' ? op.originatedContract.address : '';\r\n      }).filter((address: string) => address.length));\r\n  }\r\n  async accountInfo(address: string): Promise<string> {\r\n    return fetch(`https://api${this.network}.tzkt.io/v1/accounts/${address}`)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        if (data.lastActivity) {\r\n          return data.lastActivity;\r\n        } else {\r\n          return 0;\r\n        }\r\n      });\r\n  }\r\n\r\n  async getOperations(address: string): Promise<any> {\r\n    const ops = await fetch(`https://api${this.network}.tzkt.io/v1/accounts/${address}/operations?limit=10&type=delegation,origination,transaction`)\r\n      .then(response => response.json())\r\n      .then(data => data.map(op => {\r\n        if (!op.hasInternals) {\r\n          let destination = '';\r\n          let amount = '0';\r\n          switch (op.type) {\r\n            case 'transaction':\r\n              destination = op.target.address;\r\n              amount = op.amount.toString();\r\n              break;\r\n            case 'delegation':\r\n              destination = op.newDelegate ? op.newDelegate.address : '';\r\n              amount = '0';\r\n              break;\r\n            case 'origination':\r\n              destination = op.originatedContract.address;\r\n              if (op.contractBalance) {\r\n                amount = op.contractBalance.toString();\r\n              }\r\n              break;\r\n            default:\r\n              console.log(`Ignoring kind ${op.type}`);\r\n          }\r\n          return {\r\n            type: op.type,\r\n            block: op.block,\r\n            status: 1,\r\n            amount,\r\n            source: op.sender.address,\r\n            destination,\r\n            hash: op.hash,\r\n            timestamp: (new Date(op.timestamp)).getTime()\r\n          };\r\n        }\r\n      }).filter(obj => obj));\r\n    return ops;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { utils, hd } from '@tezos-core-tools/crypto-utils';\r\nimport * as zxcvbn from 'zxcvbn';\r\n\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n@Injectable()\r\nexport class InputValidationService {\r\n\r\n  constructor(\r\n    private operationService: OperationService,\r\n    private translate: TranslateService\r\n  ) { }\r\n  /*\r\n    Input validations\r\n  */\r\n  mnemonics(mnemonics: string): boolean {\r\n    return this.operationService.validMnemonic(mnemonics);\r\n  }\r\n  password(password: string): boolean {\r\n    return (zxcvbn(password).score === 4);\r\n  }\r\n  passwordStrengthDisplay(password: string): string {\r\n    if (!password) {\r\n      return '';\r\n    }\r\n    switch (zxcvbn(password).score) {\r\n      case 0: {\r\n        return this.translate.instant('INPUTVALIDATIONCOMPONENT.CATASTROPHIC');  // 'Catastrophic!'\r\n      } case 1: {\r\n        return this.translate.instant('INPUTVALIDATIONCOMPONENT.VERYWEAK');  // 'Very weak!'\r\n      } case 2: {\r\n        return this.translate.instant('INPUTVALIDATIONCOMPONENT.WEAK');  // 'Weak!'\r\n      } case 3: {\r\n        return this.translate.instant('INPUTVALIDATIONCOMPONENT.WEAK');  // 'Weak!'\r\n      } case 4: {\r\n        return this.translate.instant('INPUTVALIDATIONCOMPONENT.STRONG');  // 'Strong!'\r\n      } default: {\r\n        return '';\r\n      }\r\n    }\r\n  }\r\n  address(address: string): Boolean {\r\n    return this.operationService.validAddress(address);\r\n  }\r\n  torusAccount(verifierId: string, loginType: string): Boolean {\r\n    switch (loginType) {\r\n      case 'google':\r\n        return this.email(verifierId);\r\n      case 'reddit':\r\n        return this.redditAccount(verifierId);\r\n      case 'twitter':\r\n        return this.twitterAccount(verifierId);\r\n      default:\r\n        return false;\r\n    }\r\n\r\n  }\r\n  redditAccount(username: string) {\r\n    // Letters, numbers, dashes, and underscores only\r\n    // Username must be between 3 and 20 characters\r\n    const re = /^[0-9a-zA-Z\\-\\_]{3,20}$/;\r\n    return re.test(username);\r\n  }\r\n  email(email: string): Boolean {\r\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(email);\r\n  }\r\n  twitterAccount(username: string) {\r\n    // The only characters you can use are uppercase and lowercase letters, numbers, and the underscore character ( _ ).\r\n    const re = /^\\@{1}[0-9a-zA-Z\\_]{1,15}$/;\r\n    return re.test(username);\r\n  }\r\n  twitterId(id: string) {\r\n    const re = /^[0-9]+$/;\r\n    return re.test(id);\r\n  }\r\n  passphrase(passphrase: string): Boolean {\r\n    return true;\r\n  }\r\n  amount(amount: string): Boolean {\r\n    if (amount === '' || amount === '0') { // default value / zero\r\n      return true;\r\n    } else if (Number(amount) && amount.match(/^(0|[1-9][0-9]{0,8})(\\.[0-9]{1,6}){0,1}$/g)) { // Positive number\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  fee(fee: string): Boolean {\r\n    return this.amount(fee); // same as amount\r\n  }\r\n  gas(amount: string): Boolean {\r\n    if (amount === '' || amount === '0') { // default value / zero\r\n      return true;\r\n    } else if (Number(amount) && 0 < Number(amount) && Number(amount) % 1 === 0) { // Positive integer\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  storage(amount: string) {\r\n    return this.gas(amount);\r\n  }\r\n  code(code: string): Boolean {\r\n    if (code && code.length === 40 && code.match(/^[0-9a-f]*$/g)) { // 40 hex chars\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  derivationPath(path: string): Boolean {\r\n    const m = path.match(/^44\\'\\/1729(\\'\\/[0-9]+)+\\'$/g);\r\n    if (m || path === '44\\'/1729\\'') {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  operationRaw(hex: string): Boolean {\r\n    if (hex && hex.match(/^[a-f0-9]*$/)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport 'babel-polyfill';\r\nimport TransportU2F from '@ledgerhq/hw-transport-u2f';\r\nimport Tezos from '@obsidiansystems/hw-app-xtz';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { MessageService } from '../message/message.service';\r\n\r\n@Injectable()\r\nexport class LedgerService {\r\n  transport: any;\r\n  errorMessage = 'U2F browser support is needed for Ledger. Please use Chrome, Opera ' +\r\n    'or Firefox with a U2F extension. Also make sure you\\'re on an HTTPS connection';\r\n  constructor(\r\n    private operationService: OperationService,\r\n    private messageService: MessageService\r\n  ) {}\r\n  async setTransport() {\r\n    if (!this.transport) {\r\n      console.log('Trying to use U2F for transport...');\r\n      try {\r\n        this.transport = await TransportU2F.create();\r\n        console.log('Transport is now set to use U2F!');\r\n      } catch (e) {\r\n        console.log('Couldn\\'t use U2F for transport!');\r\n      }\r\n    }\r\n  }\r\n  async transportCheck() {\r\n    if (!this.transport) {\r\n      await this.setTransport();\r\n    }\r\n    if (!this.transport) {\r\n      this.messageService.addError(this.errorMessage);\r\n    }\r\n  }\r\n  async getPublicAddress(path: string) {\r\n    await this.transportCheck();\r\n    const xtz = new Tezos(this.transport);\r\n    console.log(path);\r\n    const result = await xtz.getAddress(path, true)\r\n      .catch(e => {\r\n        if (e.message) {\r\n          this.messageService.addError(e.message);\r\n        } else {\r\n          this.messageService.addError(e);\r\n        }\r\n        throw e;\r\n      });\r\n    const pk = this.operationService.hex2pk(result.publicKey);\r\n    return pk;\r\n  }\r\n  async signOperation(op: string, path: string) {\r\n    await this.transportCheck();\r\n    const xtz = new Tezos(this.transport);\r\n    console.log(path);\r\n    const toSign = '03' + op;\r\n    if (toSign.length > 512) {\r\n      this.messageService.addError('Operation is too big for Ledger to sign (' + toSign.length / 2 + ' > 256 bytes)', 0);\r\n      throw new Error('LedgerSignError');\r\n    }\r\n    const result = await xtz.signOperation(path, toSign)\r\n      .catch(e => {\r\n        this.messageService.addError(e, 0);\r\n      });\r\n    console.log(JSON.stringify(result));\r\n    if (result && result.signature) {\r\n      return result.signature;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { OperationService } from '../../services/operation/operation.service';\r\nimport { TorusService } from '../../services/torus/torus.service';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\n\r\nenum LookupType { // ordered in priority\r\n  AddressBook,\r\n  TezosDomains,\r\n  Google,\r\n  Reddit,\r\n  Twitter\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LookupService {\r\n  public records: { address: string, data: { name: string, lookupType: LookupType }[]}[] = [];\r\n  private pendingLookups: Record<string, boolean> = {};\r\n  constructor(\r\n    private operationService: OperationService,\r\n    private torusService: TorusService,\r\n    private walletService: WalletService,\r\n    private inputValidationService: InputValidationService\r\n  ) {\r\n    this.initCheck();\r\n  }\r\n  initCheck() {\r\n    if (!this.records.length &&\r\n      this.walletService.wallet &&\r\n      this.walletService.wallet.lookups.length) {\r\n        console.log('### Loading lookups from memory');\r\n        this.records = this.walletService.wallet.lookups;\r\n      }\r\n  }\r\n  add(address: string, name: string, lookupType: LookupType) {\r\n    console.log('#name', name);\r\n    const { x, y } = this.index(address, lookupType);\r\n    if (x !== -1) {\r\n      if (y === -1) {\r\n        this.records[x].data.push({ name, lookupType });\r\n      }\r\n    } else {\r\n      this.records.push({ address, data: [{ name, lookupType }]});\r\n    }\r\n    this.walletService.wallet.lookups = this.records;\r\n    this.walletService.storeWallet();\r\n  }\r\n  clear() {\r\n    this.records = [];\r\n    this.pendingLookups = {};\r\n  }\r\n  mark(address: string) {\r\n    const { x, y } = this.indexTop(address);\r\n    if (x === -1) {\r\n      this.records.push({ address, data: []});\r\n    }\r\n    this.walletService.storeWallet();\r\n  }\r\n  async check(address: string) {\r\n    this.initCheck();\r\n    if (address && address.slice(0, 3) === 'tz2') {\r\n      const { x } = this.index(address, 0);\r\n      if (!this.pendingLookups[address] && x === -1) {\r\n        this.pendingLookups[address] = true;\r\n        this.operationService.torusKeyLookup(address).subscribe(async (ans: any) => {\r\n          if (ans) {\r\n          if (\r\n            ans.result &&\r\n            ans.result.Verifiers\r\n          ) {\r\n            const keys = Object.keys(ans.result.Verifiers);\r\n            const verifierMap = this.torusService.verifierMap;\r\n            for (const key of keys) {\r\n              if (key === verifierMap['google'].verifier) {\r\n                this.add(address, ans.result.Verifiers[verifierMap['google'].verifier][0], LookupType.Google);\r\n              } else if (key === verifierMap['reddit'].verifier) {\r\n                this.add(address, ans.result.Verifiers[verifierMap['reddit'].verifier][0], LookupType.Reddit);\r\n              } else if (key === verifierMap['twitter'].verifier) {\r\n                const verifierId = ans.result.Verifiers[verifierMap['twitter'].verifier][0];\r\n                const verifierArray = verifierId.split('|');\r\n                if (verifierArray[0] === 'twitter' && this.inputValidationService.twitterId(verifierArray[1])) {\r\n                  const twitterId = verifierArray[1];\r\n                  const { username } = await this.torusService.twitterLookup(undefined, twitterId);\r\n                  if (username) {\r\n                    this.add(address, '@' + username, LookupType.Twitter);\r\n                  }\r\n                }\r\n              } else {\r\n                console.log('Unhandled verifier result', ans);\r\n              }\r\n            }\r\n            this.pendingLookups[address] = false;\r\n          } else if (!ans.noReveal) {\r\n            this.mark(address);\r\n          }\r\n          // Do nothing if tz2 haven't revealed pk\r\n        }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  torusEntryExist(address: string): boolean {\r\n    const record = this.records[address];\r\n    if (record) {\r\n      for (const entry of record) {\r\n        if (entry.lookupType > 1) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  index(address: string, lookupType: LookupType) {\r\n    let [x, y] = Array(2).fill(-1);\r\n    for (let i = 0; i < this.records.length; i++) {\r\n      if (this.records[i].address === address) {\r\n        x = i;\r\n        for (let j = 0; j < this.records[i].data.length; j++) {\r\n          if (this.records[i].data[j].lookupType === lookupType) {\r\n            y = j;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return { x, y };\r\n  }\r\n  indexTop(address: string) {\r\n    let [x, y] = Array(2).fill(-1);\r\n    for (let i = 0; i < this.records.length; i++) {\r\n      if (this.records[i].address === address) {\r\n        x = i;\r\n        for (let j = 0; j < this.records[i].data.length; j++) {\r\n          if (this.records[i].data[j].lookupType < y || y === -1) {\r\n            y = j;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return { x, y };\r\n  }\r\n  resolve(address: string): any {\r\n    this.initCheck();\r\n    const { x, y } = this.indexTop(address);\r\n    if (x !== -1 && y !== -1) {\r\n      return { name: this.records[x].data[y].name, lookupType: this.records[x].data[y].lookupType, address };\r\n    }\r\n    return { address };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class MessageService {\r\n  spinnerOn = false;\r\n  spinnerText = '';\r\n  messages: any[] = [];\r\n  defaultTime = 10;\r\n  add(message: string, seconds: number = this.defaultTime) {\r\n    const type = 'info';\r\n    console.log(type + ': ' + message);\r\n    this.messages.push({\r\n      type: type,\r\n      msg: message,\r\n      timeout: seconds * 1000\r\n    });\r\n  }\r\n  addError(message: string, seconds: number = this.defaultTime) {\r\n    const type = 'danger';\r\n    console.log(type + ': ' + message);\r\n    this.messages.push({\r\n      type: type,\r\n      msg: message,\r\n      timeout: seconds * 1000\r\n    });\r\n  }\r\n  addWarning(message: string, seconds: number = this.defaultTime) {\r\n    const type = 'warning';\r\n    console.log(type + ': ' + message);\r\n    this.messages.push({\r\n      type: type,\r\n      msg: message,\r\n      timeout: seconds * 1000\r\n    });\r\n  }\r\n  addSuccess(message: string, seconds: number = this.defaultTime) {\r\n    const type = 'success';\r\n    console.log(type + ': ' + message);\r\n    this.messages.push({\r\n      type: type,\r\n      msg: message,\r\n      timeout: seconds * 1000\r\n    });\r\n  }\r\n  emailNotify(email: string, amount: string) {\r\n    console.log(email);\r\n    const type = 'success';\r\n    this.messages.push({\r\n      type: type,\r\n      timeout: 0,\r\n      msg: 'email',\r\n      email,\r\n      amount\r\n    });\r\n  }\r\n  redditNotify(username: string, amount: string) {\r\n    console.log(username);\r\n    const type = 'success';\r\n    this.messages.push({\r\n      type: type,\r\n      timeout: 0,\r\n      msg: 'Reddit',\r\n      username,\r\n      amount\r\n    });\r\n  }\r\n  twitterNotify(twitterId: string, handler: string, amount: string) {\r\n    console.log(twitterId);\r\n    const type = 'success';\r\n    this.messages.push({\r\n      type: type,\r\n      timeout: 0,\r\n      msg: 'Twitter',\r\n      twitterId,\r\n      handler,\r\n      amount\r\n    });\r\n  }\r\n  clear() {\r\n    this.messages = [];\r\n  }\r\n  async startSpinner(text: string = '') {\r\n    this.spinnerText = text;\r\n    this.spinnerOn = true;\r\n  }\r\n  async stopSpinner() {\r\n    this.spinnerText = '';\r\n    this.spinnerOn = false;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { of, Observable, from as fromPromise } from 'rxjs';\r\nimport { catchError, flatMap } from 'rxjs/operators';\r\nimport { Buffer } from 'buffer';\r\nimport * as libs from 'libsodium-wrappers';\r\nimport * as Bs58check from 'bs58check';\r\nimport * as bip39 from 'bip39';\r\nimport Big from 'big.js';\r\nimport { localForger } from '@taquito/local-forging';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Constants } from '../../constants';\r\nimport { ErrorHandlingPipe } from '../../pipes/error-handling.pipe';\r\nimport * as elliptic from 'elliptic';\r\nimport {instantiateSecp256k1, hexToBin, binToHex} from '@bitauth/libauth';\r\n\r\nconst httpOptions = { headers: { 'Content-Type': 'application/json' } };\r\n\r\nexport interface KeyPair {\r\n  sk: string | null;\r\n  pk: string | null;\r\n  pkh: string;\r\n}\r\n@Injectable()\r\nexport class OperationService {\r\n  CONSTANTS = new Constants();\r\n  nodeURL = this.CONSTANTS.NET.NODE_URL;\r\n  prefix = {\r\n    tz1: new Uint8Array([6, 161, 159]),\r\n    tz2: new Uint8Array([6, 161, 161]),\r\n    tz3: new Uint8Array([6, 161, 164]),\r\n    edpk: new Uint8Array([13, 15, 37, 217]),\r\n    sppk: new Uint8Array([3, 254, 226, 86]),\r\n    edsk: new Uint8Array([43, 246, 78, 7]),\r\n    spsk: new Uint8Array([17, 162, 224, 201]),\r\n    edsig: new Uint8Array([9, 245, 205, 134, 18]),\r\n    spsig: new Uint8Array([13, 115, 101, 19, 63]),\r\n    sig: new Uint8Array([4, 130, 43]),\r\n    o: new Uint8Array([5, 116]),\r\n    B: new Uint8Array([1, 52]),\r\n    TZ: new Uint8Array([3, 99, 29]),\r\n    KT: new Uint8Array([2, 90, 121])\r\n  };\r\n  microTez = new Big(1000000);\r\n  feeHardCap = 10; //tez\r\n  constructor(\r\n    private http: HttpClient,\r\n    private translate: TranslateService,\r\n    private errorHandlingPipe: ErrorHandlingPipe\r\n  ) { }\r\n  /*\r\n    Returns an observable for the activation of an ICO identity\r\n  */\r\n  activate(pkh: string, secret: string): Observable<any> {\r\n    return this.getHeader()\r\n      .pipe(flatMap((header: any) => {\r\n        const fop: any = {\r\n          branch: header.hash,\r\n          contents: [{\r\n            kind: 'activate_account',\r\n            pkh: pkh,\r\n            secret: secret\r\n          }]\r\n        };\r\n        return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/forge/operations', fop)\r\n          .pipe(flatMap((opbytes: any) => {\r\n            const sopbytes: string = opbytes + Array(129).join('0');\r\n            fop.protocol = header.protocol;\r\n            fop.signature = 'edsigtXomBKi5CTRf5cjATJWSyaRvhfYNHqSUGrn4SdbYRcGwQrUGjzEfQDTuqHhuA8b2d8NarZjz8TRf65WkpQmo423BtomS8Q';\r\n            return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/preapply/operations', [fop])\r\n              .pipe(flatMap((preApplyResult: any) => {\r\n                console.log(JSON.stringify(preApplyResult));\r\n                return this.http.post(this.nodeURL + '/injection/operation',\r\n                  JSON.stringify(sopbytes), httpOptions)\r\n                  .pipe(flatMap((final: any) => {\r\n                    return this.opCheck(final);\r\n                  }));\r\n              }));\r\n          }));\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  opCheck(final: any, newPkh: string = null): Observable<any> {\r\n    if (typeof (final) === 'string' && final.length === 51) {\r\n      return of(\r\n        {\r\n          success: true,\r\n          payload: {\r\n            opHash: final,\r\n            newPkh: newPkh\r\n          }\r\n        });\r\n    } else {\r\n      return of(\r\n        {\r\n          success: false,\r\n          payload: {\r\n            opHash: null,\r\n            msg: final\r\n          }\r\n        });\r\n    }\r\n  }\r\n  /*\r\n    Returns an observable for the origination of new accounts.\r\n  */\r\n  originate(pkh: string, amount: number, fee: number = 0, keys: KeyPair): Observable<any> {\r\n    return this.getHeader()\r\n      .pipe(flatMap((header: any) => {\r\n        return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + keys.pkh + '/counter', {})\r\n          .pipe(flatMap((actions: number) => {\r\n            return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + keys.pkh + '/manager_key', {})\r\n              .pipe(flatMap((manager: any) => {\r\n                if (fee >= this.feeHardCap) {\r\n                  throw new Error('TooHighFee');\r\n                }\r\n                let counter: number = Number(actions);\r\n                const script = this.getManagerScript(keys.pkh);\r\n                const fop: any = {\r\n                  branch: header.hash,\r\n                  contents: [\r\n                    {\r\n                      kind: 'origination',\r\n                      source: keys.pkh,\r\n                      fee: this.microTez.times(fee).toString(),\r\n                      counter: (++counter).toString(),\r\n                      gas_limit: '15678',\r\n                      storage_limit: '509',\r\n                      balance: this.microTez.times(amount).toString(),\r\n                      script: script\r\n                    }\r\n                  ]\r\n                };\r\n                if (manager === null) {\r\n                  fop.contents[1] = fop.contents[0];\r\n                  fop.contents[0] = {\r\n                    kind: 'reveal',\r\n                    source: keys.pkh,\r\n                    fee: '0',\r\n                    counter: (counter).toString(),\r\n                    gas_limit: '1000',\r\n                    storage_limit: '0',\r\n                    public_key: keys.pk\r\n                  };\r\n                  fop.contents[1].counter = (Number(fop.contents[1].counter) + 1).toString();\r\n                }\r\n                return this.operation(fop, header, keys, true);\r\n              }));\r\n          }));\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  /*\r\n    Returns an observable for the transaction of tez.\r\n  */\r\n  transfer(from: string, transactions: any, fee: number, keys: KeyPair): Observable<any> {\r\n    return this.getHeader()\r\n      .pipe(flatMap((header: any) => {\r\n        return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + keys.pkh + '/counter', {})\r\n          .pipe(flatMap((actions: any) => {\r\n            return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + keys.pkh + '/manager_key', {})\r\n              .pipe(flatMap((manager: any) => {\r\n                if (fee >= this.feeHardCap) {\r\n                  throw new Error('TooHighFee');\r\n                }\r\n                const counter: number = Number(actions);\r\n                const fop = this.createTransactionObject(header.hash, counter, manager, transactions, keys.pkh, keys.pk, from, fee);\r\n                return this.operation(fop, header, keys);\r\n              }));\r\n          }));\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  createTransactionObject(hash: string, counter: number, manager: string, transactions: any,\r\n    pkh: string, pk: string, from: string, fee: number): any {\r\n    const fop: any = {\r\n      branch: hash,\r\n      contents: []\r\n    };\r\n    if (manager === null) { // Reveal\r\n      fop.contents.push({\r\n        kind: 'reveal',\r\n        source: pkh,\r\n        fee: '0',\r\n        counter: (++counter).toString(),\r\n        gas_limit: '1000',\r\n        storage_limit: '0',\r\n        public_key: pk\r\n      });\r\n    }\r\n    for (let i = 0; i < transactions.length; i++) {\r\n      const currentFee = i === transactions.length - 1 ? this.microTez.times(fee).toString() : '0';\r\n      const gasLimit = transactions[i].gasLimit.toString();\r\n      const storageLimit = transactions[i].storageLimit.toString();\r\n      if (from.slice(0, 2) === 'tz') {\r\n        const transactionOp: any = {\r\n          kind: 'transaction',\r\n          source: from,\r\n          fee: currentFee,\r\n          counter: (++counter).toString(),\r\n          gas_limit: gasLimit,\r\n          storage_limit: storageLimit,\r\n          amount: this.microTez.times(transactions[i].amount).toString(),\r\n          destination: transactions[i].to,\r\n        };\r\n        if (transactions.length === 1 && transactions[i].parameters) {\r\n          transactionOp.parameters = transactions[i].parameters;\r\n        }\r\n        fop.contents.push(transactionOp);\r\n      } else if (from.slice(0, 2) === 'KT') {\r\n        if (transactions[i].to.slice(0, 2) === 'tz') {\r\n          const managerTransaction = this.getContractPkhTransaction(transactions[i].to, this.microTez.times(transactions[i].amount).toString());\r\n          fop.contents.push({\r\n            kind: 'transaction',\r\n            source: pkh,\r\n            fee: currentFee,\r\n            counter: (++counter).toString(),\r\n            gas_limit: gasLimit,\r\n            storage_limit: storageLimit,\r\n            amount: '0',\r\n            destination: from,\r\n            parameters: managerTransaction\r\n          });\r\n        } else if (transactions[i].to.slice(0, 2) === 'KT') {\r\n          const managerTransaction = this.getContractKtTransaction(transactions[i].to, this.microTez.times(transactions[i].amount).toString());\r\n          fop.contents.push({\r\n            kind: 'transaction',\r\n            source: pkh,\r\n            fee: currentFee,\r\n            counter: (++counter).toString(),\r\n            gas_limit: gasLimit,\r\n            storage_limit: storageLimit,\r\n            amount: '0',\r\n            destination: from,\r\n            parameters: managerTransaction\r\n          });\r\n        }\r\n      }\r\n    }\r\n    return fop;\r\n  }\r\n  /*\r\n    Returns an observable for the delegation of baking rights.\r\n  */\r\n  delegate(from: string, to: string, fee: number = 0, keys: KeyPair): Observable<any> {\r\n    return this.getHeader()\r\n      .pipe(flatMap((header: any) => {\r\n        return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + keys.pkh + '/counter', {})\r\n          .pipe(flatMap((actions: any) => {\r\n            return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + keys.pkh + '/manager_key', {})\r\n              .pipe(flatMap((manager: any) => {\r\n                if (fee >= this.feeHardCap) {\r\n                  throw new Error('TooHighFee');\r\n                }\r\n                let counter: number = Number(actions);\r\n                let delegationOp: any;\r\n                if (from.slice(0, 2) === 'tz') {\r\n                  delegationOp = {\r\n                    kind: 'delegation',\r\n                    source: from,\r\n                    fee: this.microTez.times(fee).toString(),\r\n                    counter: (++counter).toString(),\r\n                    gas_limit: '1000',\r\n                    storage_limit: '0',\r\n                  };\r\n                  if (to !== '') {\r\n                    delegationOp.delegate = to;\r\n                  }\r\n                } else if (from.slice(0, 2) === 'KT') {\r\n                  delegationOp = {\r\n                    kind: 'transaction',\r\n                    source: keys.pkh,\r\n                    fee: this.microTez.times(fee).toString(),\r\n                    counter: (++counter).toString(),\r\n                    gas_limit: '4380',\r\n                    storage_limit: '0',\r\n                    amount: '0',\r\n                    destination: from,\r\n                    parameters: (to !== '') ? this.getContractDelegation(to) : this.getContractUnDelegation()\r\n                  };\r\n                }\r\n                const fop: any = {\r\n                  branch: header.hash,\r\n                  contents: [\r\n                    delegationOp\r\n                  ]\r\n                };\r\n                if (manager === null) {\r\n                  fop.contents[1] = fop.contents[0];\r\n                  fop.contents[0] = {\r\n                    kind: 'reveal',\r\n                    source: keys.pkh,\r\n                    fee: '0',\r\n                    counter: (counter).toString(),\r\n                    gas_limit: '1000',\r\n                    storage_limit: '0',\r\n                    public_key: keys.pk\r\n                  };\r\n                  fop.contents[1].counter = (Number(fop.contents[1].counter) + 1).toString();\r\n                }\r\n                return this.operation(fop, header, keys);\r\n              }));\r\n          }));\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  /*\r\n  Help function for operations\r\n  */\r\n  operation(fop: any, header: any, keys: KeyPair, origination: boolean = false): Observable<any> {\r\n    console.log('fop to send: ' + JSON.stringify(fop));\r\n    return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/forge/operations', fop)\r\n      .pipe(flatMap((opbytes: any) => {\r\n        return this.localForge(fop)\r\n          .pipe(flatMap((localOpbytes: string) => {\r\n            if (opbytes !== localOpbytes) {\r\n              throw new Error('ValidationError');\r\n            }\r\n            if (!keys.sk) {\r\n              fop.signature = 'edsigtXomBKi5CTRf5cjATJWSyaRvhfYNHqSUGrn4SdbYRcGwQrUGjzEfQDTuqHhuA8b2d8NarZjz8TRf65WkpQmo423BtomS8Q';\r\n              return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/scripts/run_operation', { operation: fop, chain_id: header.chain_id })\r\n                .pipe(flatMap((applied: any) => {\r\n                  console.log('applied: ' + JSON.stringify(applied));\r\n                  this.checkApplied([applied]);\r\n                  return of(\r\n                    {\r\n                      success: true,\r\n                      payload: {\r\n                        unsignedOperation: opbytes\r\n                      }\r\n                    });\r\n                }));\r\n            } else {\r\n              fop.protocol = header.protocol;\r\n              const signed = this.sign(opbytes, keys.sk);\r\n              const sopbytes = signed.sbytes;\r\n              fop.signature = signed.edsig;\r\n              return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/preapply/operations', [fop])\r\n                .pipe(flatMap((applied: any) => {\r\n                  console.log('applied: ' + JSON.stringify(applied));\r\n                  this.checkApplied(applied);\r\n                  console.log('sop: ' + sopbytes);\r\n                  return this.http.post(this.nodeURL + '/injection/operation', JSON.stringify(sopbytes), httpOptions)\r\n                    .pipe(flatMap((final: any) => {\r\n                      let newPkh = null;\r\n                      if (origination) {\r\n                        newPkh = applied[0].contents[fop.contents.length - 1].\r\n                          metadata.operation_result.originated_contracts[0];\r\n                      }\r\n                      return this.opCheck(final, newPkh);\r\n                    }));\r\n                }));\r\n            }\r\n          }));\r\n      }));\r\n  }\r\n  /*\r\n    Broadcast a signed operation to the network\r\n  */\r\n  broadcast(sopbytes: string): Observable<any> {\r\n    let fop: any;\r\n    try {\r\n      const opbytes = sopbytes.slice(0, sopbytes.length - 128);\r\n      const edsig = this.sig2edsig(sopbytes.slice(sopbytes.length - 128));\r\n      fop = this.decodeOpBytes(opbytes);\r\n      fop.signature = edsig;\r\n    } catch (e) {\r\n      return this.errHandler('Invalid bytes');\r\n    }\r\n    return this.getHeader().pipe(flatMap((header: any) => {\r\n      fop.protocol = header.protocol;\r\n      return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/preapply/operations', [fop])\r\n        .pipe(flatMap((parsed: any) => {\r\n          let newPkh = null;\r\n          for (let i = 0; i < parsed[0].contents.length; i++) {\r\n            if (parsed[0].contents[i].kind === 'origination') {\r\n              newPkh = parsed[0].contents[i].metadata.operation_result.originated_contracts[0];\r\n            }\r\n          }\r\n          return this.http.post(this.nodeURL + '/injection/operation', JSON.stringify(sopbytes), httpOptions)\r\n            .pipe(flatMap((final: any) => {\r\n              return this.opCheck(final, newPkh);\r\n            }));\r\n        }));\r\n    })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  torusKeyLookup(tz2address: string): Observable<any> {\r\n    // Make it into Promise\r\n    // Zero padding\r\n    if (tz2address.length !== 36 || tz2address.slice(0, 3) !== 'tz2') {\r\n      throw new Error('InvalidTorusAddress');\r\n    }\r\n    return this.http.get(this.nodeURL + `/chains/main/blocks/head/context/contracts/${tz2address}/manager_key`, {})\r\n      .pipe(flatMap((manager: any) => {\r\n        if (manager === null) {\r\n          return of({noReveal: true});\r\n        } else {\r\n          return fromPromise(this.decompress(manager)).pipe(flatMap((pk: any) => {\r\n            const torusReq = {\r\n              jsonrpc: '2.0',\r\n              method: 'KeyLookupRequest',\r\n              id: 10,\r\n              params: {\r\n                pub_key_X: pk.X,\r\n                pub_key_Y: pk.Y\r\n              }\r\n            };\r\n            const url = this.CONSTANTS.NET.NETWORK === 'mainnet' ? 'https://torus-19.torusnode.com/jrpc' : 'https://teal-15-1.torusnode.com/jrpc';\r\n            return this.http.post(url, JSON.stringify(torusReq), httpOptions)\r\n            .pipe(flatMap((ans: any) => {\r\n              try {\r\n                if (ans.result.PublicKey.X === pk.X &&\r\n                    ans.result.PublicKey.Y === pk.Y) {\r\n                    return of(ans);\r\n                  } else {\r\n                    return of(null);\r\n                  }\r\n              } catch {\r\n                return of(null);\r\n              }\r\n            }));\r\n          }));\r\n        }\r\n      }));\r\n  }\r\n  checkApplied(applied: any) {\r\n    for (let i = 0; i < applied[0].contents.length; i++) {\r\n      if (applied[0].contents[i].metadata.operation_result.status !== 'applied') {\r\n        console.log('throw error ->');\r\n        if (applied[0].contents[i].metadata.operation_result.errors) {\r\n          console.log('Error in operation_result');\r\n          throw applied[0].contents[i].metadata.operation_result.errors[\r\n            applied[0].contents[i].metadata.operation_result.errors.length - 1\r\n          ];\r\n        } else if (applied[0].contents[i].metadata.internal_operation_results &&\r\n          applied[0].contents[i].metadata.internal_operation_results[0].result.errors) {\r\n            console.log('Error in internal_operation_results');\r\n            throw applied[0].contents[i].metadata.internal_operation_results[0].result.errors[\r\n              applied[0].contents[i].metadata.internal_operation_results[0].result.errors.length - 1\r\n          ];\r\n        } else {\r\n          throw new Error('Uncatched error in preapply');\r\n        }\r\n      }\r\n    }\r\n  }\r\n  errHandler(error: any): Observable<any> {\r\n    console.log(JSON.stringify(error));\r\n    if (error.error && error.error[0]) {\r\n      error = error.error[0];\r\n    }\r\n    if (error.message) {\r\n      error = this.errorHandlingPipe.transform(error.message);\r\n    } else if (error.id) {\r\n      if (error.with) {\r\n        error = this.errorHandlingPipe.transform(error.id, error.with);\r\n      } else if (error.id === 'failure' && error.msg) {\r\n        error = this.errorHandlingPipe.transform(error.msg);\r\n      }  else {\r\n        error = this.errorHandlingPipe.transform(error.id);\r\n      }\r\n    } else if (error.statusText) {\r\n      error = error.statusText;\r\n    } else {\r\n      error = 'Unrecogized error';\r\n      console.warn('Error not categorized', error);\r\n    }\r\n    return of(\r\n      {\r\n        success: false,\r\n        payload: {\r\n          msg: error\r\n        }\r\n      }\r\n    );\r\n  }\r\n  // Local forge with Taquito\r\n  localForge(operation: any): Observable<string> {\r\n    return fromPromise(localForger.forge(operation)).pipe(flatMap((localForgedBytes: string) => {\r\n      return of(localForgedBytes);\r\n    }));\r\n  }\r\n  getHeader(): Observable<any> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/header');\r\n  }\r\n  getBalance(pkh: string): Observable<any> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + pkh + '/balance')\r\n      .pipe(flatMap((balance: any) => {\r\n        return of(\r\n          {\r\n            success: true,\r\n            payload: {\r\n              balance: balance\r\n            }\r\n          }\r\n        );\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  getDelegate(pkh: string): Observable<any> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + pkh)\r\n      .pipe(flatMap((contract: any) => {\r\n        let delegate = '';\r\n        if (contract.delegate) {\r\n          delegate = contract.delegate;\r\n        }\r\n        return of(\r\n          {\r\n            success: true,\r\n            payload: {\r\n              delegate: delegate\r\n            }\r\n          }\r\n        );\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  getVotingRights(): Observable<any> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/votes/listings')\r\n      .pipe(flatMap((listings: any) => {\r\n        return of(\r\n          {\r\n            success: true,\r\n            payload: listings\r\n          }\r\n        );\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  isRevealed(pkh: string): Observable<boolean> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + pkh + '/manager_key', {})\r\n      .pipe(flatMap((manager: any) => {\r\n        if (manager === null) {\r\n          return of(false);\r\n        } else {\r\n          return of(true);\r\n        }\r\n      }\r\n      )).pipe(catchError(err => {\r\n        return of(true);\r\n      })); // conservative action\r\n  }\r\n  getAccount(pkh: string): Observable<any> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + pkh)\r\n      .pipe(flatMap((contract: any) => {\r\n        let delegate = '';\r\n        if (contract.delegate) {\r\n          delegate = contract.delegate;\r\n        }\r\n        return of(\r\n          {\r\n            success: true,\r\n            payload: {\r\n              balance: contract.balance,\r\n              manager: contract.manager,\r\n              delegate: delegate,\r\n              counter: contract.counter\r\n            }\r\n          }\r\n        );\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  getVerifiedOpBytes(operationLevel, operationHash, pkh, pk): Observable<string> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/' + operationLevel + '/operation_hashes', {})\r\n      .pipe(flatMap((opHashes: any) => {\r\n        const opIndex = opHashes[3].findIndex(a => a === operationHash);\r\n        return this.http.get(this.nodeURL + '/chains/main/blocks/' + operationLevel + '/operations', {})\r\n          .pipe(flatMap((op: any) => {\r\n            let ans = '';\r\n            op = op[3][opIndex];\r\n            const sig = op.signature;\r\n            delete op.chain_id;\r\n            delete op.signature;\r\n            delete op.hash;\r\n            delete op.protocol;\r\n            for (let i = 0; i < op.contents.length; i++) {\r\n              delete op.contents[i].metadata;\r\n              if (op.contents[i].managerPubkey) { // Fix for mainnet\r\n                op.contents[i].manager_pubkey = op.contents[i].managerPubkey;\r\n                delete op.contents[i].managerPubkey;\r\n              }\r\n            }\r\n            return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/forge/operations', op)\r\n              .pipe(flatMap((opBytes: any) => {\r\n                if (this.pk2pkh(pk) === pkh) {\r\n                  if (this.verify(opBytes, sig, pk)) {\r\n                    ans = opBytes + this.buf2hex(this.b58cdecode(sig, this.prefix.sig));\r\n                  } else {\r\n                    throw new Error('InvalidSignature');\r\n                  }\r\n                } else {\r\n                  throw new Error('InvalidPublicKey');\r\n                }\r\n                return of(ans);\r\n              }));\r\n          }));\r\n      }));\r\n  }\r\n  createKTaddress(sopBytes: string): string {\r\n    const hash = libs.crypto_generichash(32, this.hex2buf(sopBytes));\r\n    const index = new Uint8Array([0, 0, 0, 0]);\r\n    const hash2 = libs.crypto_generichash(20, this.mergebuf(index, hash));\r\n    return this.b58cencode(hash2, this.prefix.KT);\r\n  }\r\n  getConstants(): Observable<any> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/constants');\r\n  }\r\n  seed2keyPair(seed: Buffer): KeyPair {\r\n    if (!seed) {\r\n      throw new Error('NullSeed');\r\n    }\r\n    const keyPair = libs.crypto_sign_seed_keypair(seed);\r\n    return {\r\n      sk: this.b58cencode(keyPair.privateKey, this.prefix.edsk),\r\n      pk: this.b58cencode(keyPair.publicKey, this.prefix.edpk),\r\n      pkh: this.b58cencode(libs.crypto_generichash(20, keyPair.publicKey), this.prefix.tz1)\r\n    };\r\n  }\r\n  mnemonic2seed(mnemonic: string, passphrase: string = '') {\r\n    if (!this.validMnemonic(mnemonic)) {\r\n      throw new Error('InvalidMnemonic');\r\n    }\r\n    return (bip39.mnemonicToSeedSync(mnemonic, passphrase)).slice(0, 32);\r\n  }\r\n  mnemonic2entropy(mnemonic: string, passphrase: string = '') {\r\n    if (!this.validMnemonic(mnemonic)) {\r\n      throw new Error('InvalidMnemonic');\r\n    }\r\n    return bip39.mnemonicToEntropy(mnemonic);\r\n  }\r\n  validMnemonic(mnemonic: string) {\r\n    return bip39.validateMnemonic(mnemonic);\r\n  }\r\n  validAddress(address: string) {\r\n    try {\r\n      this.b58cdecode(address, this.prefix.tz1);\r\n      return true;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n  pk2pkh(pk: string): string {\r\n    if (pk.length === 54 && pk.slice(0, 4) === 'edpk') {\r\n      const pkDecoded = this.b58cdecode(pk, this.prefix.edpk);\r\n      return this.b58cencode(libs.crypto_generichash(20, pkDecoded), this.prefix.tz1);\r\n    } else if (pk.length === 55 && pk.slice(0, 4) === 'sppk') {\r\n      const pkDecoded = this.b58cdecode(pk, this.prefix.edpk);\r\n      return this.b58cencode(libs.crypto_generichash(20, pkDecoded), this.prefix.tz2);\r\n    }\r\n    throw new Error('Invalid public key');\r\n  }\r\n  spPrivKeyToKeyPair(secretKey: string) {\r\n    let sk;\r\n    if (secretKey.match(/^[0-9a-f]{64}$/g)) {\r\n      sk = this.b58cencode(this.hex2buf(secretKey), this.prefix.spsk);\r\n    } else if (secretKey.match(/^spsk[1-9a-km-zA-HJ-NP-Z]{50}$/g)) {\r\n      sk = secretKey;\r\n    } else {\r\n      throw new Error('Invalid private key');\r\n    }\r\n    const keyPair = (new elliptic.ec('secp256k1')).keyFromPrivate(\r\n      new Uint8Array(this.b58cdecode(sk, this.prefix.spsk))\r\n    );\r\n    const prefixVal = keyPair.getPublic().getY().toArray()[31] % 2 ? 3 : 2; // Y odd / even\r\n    const pad = new Array(32).fill(0); // Zero-padding\r\n    const publicKey = new Uint8Array(\r\n      [prefixVal].concat(pad.concat(keyPair.getPublic().getX().toArray()).slice(-32)\r\n      ));\r\n    const pk = this.b58cencode(publicKey, this.prefix.sppk);\r\n    const pkh = this.pk2pkh(pk);\r\n    return { sk, pk, pkh };\r\n  }\r\n  spPointsToPkh(pubX: string, pubY: string): string {\r\n    const key = (new elliptic.ec('secp256k1')).keyFromPublic({ x: pubX, y: pubY });\r\n    const prefixVal = key.getPublic().getY().toArray()[31] % 2 ? 3 : 2;\r\n    const pad = new Array(32).fill(0);\r\n    const publicKey = new Uint8Array(\r\n      [prefixVal].concat(pad.concat(key.getPublic().getX().toArray()).slice(-32)\r\n      ));\r\n    const pk = this.b58cencode(publicKey, this.prefix.sppk);\r\n    const pkh = this.pk2pkh(pk);\r\n    return pkh;\r\n  }\r\n  async decompress(pk: string): Promise<any> {\r\n    const decodedPk = this.b58cdecode(pk, this.prefix.sppk);\r\n    const hexPk = this.buf2hex(decodedPk);\r\n    const secp256k1 = await instantiateSecp256k1();\r\n    const compressed = hexToBin(hexPk);\r\n    const uncompressed = secp256k1.uncompressPublicKey(compressed);\r\n    const xy = binToHex(uncompressed).slice(2);\r\n    return {X: xy.slice(0, 64), Y: xy.slice(64, 128)};\r\n  }\r\n  hex2pk(hex: string): string {\r\n    return this.b58cencode(this.hex2buf(hex.slice(2, 66)), this.prefix.edpk);\r\n  }\r\n  hex2buf(hex) {\r\n    return new Uint8Array(hex.match(/[\\da-f]{2}/gi).map(function (h) {\r\n      return parseInt(h, 16);\r\n    }));\r\n  }\r\n  buf2hex(buffer) {\r\n    const byteArray = new Uint8Array(buffer), hexParts = [];\r\n    for (let i = 0; i < byteArray.length; i++) {\r\n      const hex = byteArray[i].toString(16);\r\n      const paddedHex = ('00' + hex).slice(-2);\r\n      hexParts.push(paddedHex);\r\n    }\r\n    return hexParts.join('');\r\n  }\r\n  b58cencode(payload: any, prefixx?: Uint8Array) {\r\n    const n = new Uint8Array(prefixx.length + payload.length);\r\n    n.set(prefixx);\r\n    n.set(payload, prefixx.length);\r\n    return Bs58check.encode(Buffer.from(this.buf2hex(n), 'hex'));\r\n  }\r\n  b58cdecode(enc, prefixx) {\r\n    let n = Bs58check.decode(enc);\r\n    n = n.slice(prefixx.length);\r\n    return n;\r\n  }\r\n  mergebuf(b, wm = new Uint8Array([3])) {\r\n    const r = new Uint8Array(wm.length + b.length);\r\n    r.set(wm);\r\n    r.set(b, wm.length);\r\n    return r;\r\n  }\r\n  sign(bytes, sk): any {\r\n    console.log(sk);\r\n    if (sk.slice(0, 4) === 'spsk') {\r\n      const hash = libs.crypto_generichash(32, this.mergebuf(this.hex2buf(bytes)));\r\n      const key = (new elliptic.ec('secp256k1')).keyFromPrivate(new Uint8Array(this.b58cdecode(sk, this.prefix.spsk)));\r\n      let sig = key.sign(hash, {canonical: true});\r\n      sig = new Uint8Array(sig.r.toArray().concat(sig.s.toArray()));\r\n      const spsig = this.b58cencode(sig, this.prefix.spsig);\r\n      const sbytes = bytes + this.buf2hex(sig);\r\n      return {\r\n        bytes: bytes,\r\n        sig: sig,\r\n        edsig: spsig,\r\n        sbytes: sbytes,\r\n      };\r\n    } else {\r\n      const hash = libs.crypto_generichash(32, this.mergebuf(this.hex2buf(bytes)));\r\n      const sig = libs.crypto_sign_detached(hash, this.b58cdecode(sk, this.prefix.edsk), 'uint8array');\r\n      const edsig = this.b58cencode(sig, this.prefix.edsig);\r\n      const sbytes = bytes + this.buf2hex(sig);\r\n      return {\r\n        bytes: bytes,\r\n        sig: sig,\r\n        edsig: edsig,\r\n        sbytes: sbytes,\r\n      };\r\n    }\r\n  }\r\n  verify(bytes: string, sig: string, pk: string): Boolean {\r\n    const hash = libs.crypto_generichash(32, this.mergebuf(this.hex2buf(bytes)));\r\n    const signature = this.b58cdecode(sig, this.prefix.sig);\r\n    const publicKey = this.b58cdecode(pk, this.prefix.edpk);\r\n    return libs.crypto_sign_verify_detached(signature, hash, publicKey);\r\n  }\r\n  sig2edsig(sig: string): any {\r\n    return this.b58cencode(this.hex2buf(sig), this.prefix.edsig);\r\n  }\r\n  /*\r\n    Binary decoding\r\n  */\r\n  decodeOpBytes(opbytes: string) {\r\n    // First 32 bytes = branch\r\n    const branch = this.b58cencode(this.hex2buf(opbytes.slice(0, 64)), this.prefix.B);\r\n    const contents = this.decodeContents(opbytes.slice(64));\r\n    return {\r\n      branch: branch,\r\n      contents: contents\r\n    };\r\n  }\r\n  decodeContents(content: string): any {\r\n    // Check tag\r\n    const tag = Number(this.hex2buf(content.slice(0, 2)));\r\n    switch (tag) {\r\n      case 4: {\r\n        return this.decodeActivateAccount(content.slice(2));\r\n      } case 107: {\r\n        return this.decodeReveal(content.slice(2));\r\n      } case 108: {\r\n        return this.decodeTransaction(content.slice(2));\r\n      } case 109: {\r\n        return this.decodeOrigination(content.slice(2));\r\n      } case 110: {\r\n        return this.decodeDelegation(content.slice(2));\r\n      } default: {\r\n        throw new Error('Unknown tag');\r\n      }\r\n    }\r\n  }\r\n  decodeActivateAccount(content: any): any { // Tag 4\r\n    const data: any = { kind: 'activate' };\r\n    data.pkh = this.b58cencode(this.hex2buf(content.slice(0, 40)), this.prefix.tz1);\r\n    data.secret = content.slice(40, 80);\r\n    return data;\r\n  }\r\n  decodeReveal(content: any): any { // Tag 7\r\n    let index = 0;\r\n    const op = this.decodeCommon({ kind: 'reveal' }, content);\r\n    if (op.rest.slice(index, index += 2) !== '00') {\r\n      throw new Error('TagErrorR1');\r\n    }\r\n    op.data.public_key = this.b58cencode(this.hex2buf(op.rest.slice(index, index += 64)), this.prefix.edpk);\r\n    if (op.rest.length === index) {\r\n      return [op.data];\r\n    } else {\r\n      return [op.data].concat(this.decodeContents(op.rest.slice(index)));\r\n    }\r\n  }\r\n  decodeTransaction(content: any): any { // Tag 8\r\n    let index = 0;\r\n    const op = this.decodeCommon({ kind: 'transaction' }, content);\r\n    const amount = this.zarithDecode(op.rest.slice(index));\r\n    op.data.amount = amount.value.toString();\r\n    op.data.destination = this.decodeContractId(op.rest.slice(index += amount.count * 2, index += 44));\r\n    if (op.rest.slice(index, index += 2) === 'ff') { // parameters?\r\n      if (op.rest.slice(index, index += 8) !== '02000000') {\r\n        throw new Error('UnsupportedTagT1');\r\n      }\r\n      const size = Number('0x' + op.rest.slice(index, index += 2));\r\n      const argument = op.rest.slice(index, index += size * 2);\r\n      if (argument.slice(0, 40) === '02000000' + (size - 5).toString(16) + '0320053d036d0743035d0100000024') {\r\n        const pkh = this.decodeString(argument.slice(40, 112));\r\n        if (argument.slice(112, 124) === '0346034e031b') { // KT delegate\r\n          op.data.parameters = this.getContractDelegation(pkh);\r\n        } else if (argument.slice(112, 126) === '031e0743036a00') { // KT to tz transaction\r\n          const amount2 = this.zarithDecodeInt(argument.slice(126, argument.length - 12));\r\n          if (argument.slice(argument.length - 12, argument.length) !== '034f034d031b') {\r\n            throw new Error('UnsupportedTagT4');\r\n          }\r\n          console.log(' Val: ' + amount2.value);\r\n          op.data.parameters = this.getContractPkhTransaction(pkh, amount2.value.toString());\r\n        } else {\r\n          throw new Error('UnsupportedTagT3');\r\n        }\r\n      } else if (argument.slice(0, 40) === '02000000' + (size - 5).toString(16) + '0320053d036d0743036e0100000024') { // KT to KT transaction\r\n        const kt = this.decodeString(argument.slice(40, 112));\r\n        if (argument.slice(112, 182) !== '0555036c0200000015072f02000000090200000004034f032702000000000743036a00') {\r\n        }\r\n        const amount2 = this.zarithDecodeInt(argument.slice(182));\r\n        if (argument.slice(184 + amount2.count * 2, 194 + amount2.count * 2) !== '4f034d031b') {\r\n          throw new Error('UnsupportedTagT6');\r\n        }\r\n        op.data.parameters = this.getContractKtTransaction(kt, amount2.value.toString());\r\n      } else {\r\n        throw new Error('UnsupportedTagT2');\r\n      }\r\n    }\r\n    if (op.rest.length === index) {\r\n      return [op.data];\r\n    } else {\r\n      return [op.data].concat(this.decodeContents(op.rest.slice(index)));\r\n    }\r\n  }\r\n  decodeOrigination(content: any): any { // Tag 9\r\n    let index = 0;\r\n    const op = this.decodeCommon({ kind: 'origination' }, content);\r\n    const balance = this.zarithDecode(op.rest.slice(index));\r\n    op.data.balance = balance.value.toString();\r\n    index += balance.count * 2;\r\n    if (op.rest.slice(index, index += 2) !== '00') { // delegate?\r\n      throw new Error('UnsupportedTagO1');\r\n    }\r\n    const managerScript = '000000c602000000c105000764085e036c055f036d0000000325646f046c000000082564656661756c740501035d050202000000950200000012020000000d03210316051f02000000020317072e020000006a0743036a00000313020000001e020000000403190325072c020000000002000000090200000004034f0327020000000b051f02000000020321034c031e03540348020000001e020000000403190325072c020000000002000000090200000004034f0327034f0326034202000000080320053d036d0342'; // manager script\r\n    if (op.rest.slice(index, index += managerScript.length) !== managerScript) {\r\n      throw new Error('InvalidManagerScript');\r\n    }\r\n    const storageDefinition = '0000001a0a00000015';\r\n    if (op.rest.slice(index, index += storageDefinition.length) !== storageDefinition) {\r\n      throw new Error('InvalidStorageDefinition');\r\n    }\r\n    op.data.script = this.getManagerScript(op.rest.slice(index, index += 42));\r\n    if (op.rest.length === index) {\r\n      return [op.data];\r\n    } else {\r\n      return [op.data].concat(this.decodeContents(op.rest.slice(index)));\r\n    }\r\n  }\r\n  decodeDelegation(content: any): any { // Tag 10\r\n    let index = 0;\r\n    const op = this.decodeCommon({ kind: 'delegation' }, content);\r\n    if (op.rest.slice(index, index += 2) === 'ff') {\r\n      op.data.delegate = this.decodePkh(op.rest.slice(index, index += 42));\r\n    } else if (op.rest.slice(index - 2, index) !== '00') {\r\n      throw new Error('TagErrorD1');\r\n    }\r\n    if (op.rest.length === index) {\r\n      return [op.data];\r\n    } else {\r\n      return [op.data].concat(this.decodeContents(op.rest.slice(index)));\r\n    }\r\n  }\r\n  decodeCommon(data: any, content: any): any {\r\n    let index = 0;\r\n    data.source = this.decodePkh(content.slice(index, index += 42));\r\n    // data.source = this.decodeContractId(content.slice(index, index += 44));\r\n    const fee = this.zarithDecode(content.slice(index));\r\n    data.fee = fee.value.toString();\r\n    const counter = this.zarithDecode(content.slice(index += fee.count * 2));\r\n    data.counter = counter.value.toString();\r\n    const gas_limit = this.zarithDecode(content.slice(index += counter.count * 2));\r\n    data.gas_limit = gas_limit.value.toString();\r\n    const storage_limit = this.zarithDecode(content.slice(index += gas_limit.count * 2));\r\n    data.storage_limit = storage_limit.value.toString();\r\n    const rest = content.slice(index += storage_limit.count * 2);\r\n    return {\r\n      data: data,\r\n      rest: rest\r\n    };\r\n  }\r\n  decodePkh(bytes: string): string {\r\n    if (bytes.slice(0, 2) === '00') {\r\n      return this.b58cencode(this.hex2buf(bytes.slice(2, 42)), this.prefix.tz1);\r\n    } else if (bytes.slice(0, 2) === '01') {\r\n      return this.b58cencode(this.hex2buf(bytes.slice(2, 42)), this.prefix.tz2);\r\n    } else if (bytes.slice(0, 2) === '02') {\r\n      return this.b58cencode(this.hex2buf(bytes.slice(2, 42)), this.prefix.tz3);\r\n    } else {\r\n      throw new Error('TagErrorPkh');\r\n    }\r\n  }\r\n  decodePk() {\r\n    return null;\r\n  }\r\n  decodeString(bytes: string): string {\r\n    return Buffer.from(this.hex2buf(bytes)).toString('utf-8');\r\n  }\r\n  zarithDecode(hex: string): any {\r\n    let count = 0;\r\n    let value = 0;\r\n    while (1) {\r\n      const byte = Number('0x' + hex.slice(0 + count * 2, 2 + count * 2));\r\n      value += ((byte & 127) * (128 ** count));\r\n      count++;\r\n      if ((byte & 128) !== 128) {\r\n        break;\r\n      }\r\n    }\r\n    return {\r\n      value: value,\r\n      count: count\r\n    };\r\n  }\r\n  zarithDecodeInt(hex: string): any {\r\n    let count = 0;\r\n    let value = Big(0);\r\n    while (1) {\r\n      const byte = Number('0x' + hex.slice(0 + count * 2, 2 + count * 2));\r\n      if (count === 0) {\r\n        value = Big(((byte & 63) * (128 ** count))).add(value);\r\n      } else {\r\n        value = Big(((byte & 127) * 2) >> 1).times(64 * 128 ** (count - 1)).add(value);\r\n      }\r\n      count++;\r\n      if ((byte & 128) !== 128) {\r\n        break;\r\n      }\r\n    }\r\n    return {\r\n      value: value,\r\n      count: count\r\n    };\r\n  }\r\n  decodeContractId(hex: string): string {\r\n    if (hex.slice(0, 2) === '00') {\r\n      return this.decodePkh(hex.slice(2, 44));\r\n    } else if (hex.slice(0, 2) === '01') {\r\n      return this.b58cencode(this.hex2buf(hex.slice(2, 42)), this.prefix.KT);\r\n    } else {\r\n      throw new Error('TagError');\r\n    }\r\n  }\r\n  /*\r\n    Output\r\n  */\r\n  fop2strings(fop: any): any {\r\n    const output: string[] = [];\r\n    for (let i = 0; i < fop.contents.length; i++) {\r\n      if (fop.contents[i].kind !== 'reveal') {\r\n        let typeTmp = '';\r\n        let sourceTmp = '';\r\n        typeTmp = this.translate.instant('OPERATIONSERVICE.TYPE');\r\n        sourceTmp = this.translate.instant('OPERATIONSERVICE.SOURCE');\r\n        output.push(typeTmp + ' ' + fop.contents[i].kind);\r\n        output.push(sourceTmp + ' ' + fop.contents[i].source);\r\n        if (fop.contents[i].kind === 'transaction') {\r\n          let destinationTmp = '';\r\n          let amountTmp = '';\r\n          destinationTmp = this.translate.instant('OPERATIONSERVICE.DESTINATION');\r\n          amountTmp = this.translate.instant('OPERATIONSERVICE.AMOUNT');\r\n          output.push(destinationTmp + ' ' + fop.contents[i].destination);\r\n          output.push(amountTmp + ' ' + Big(Number(fop.contents[i].amount)).div(this.microTez).toString() + ' tez');\r\n        } else if (fop.contents[i].kind === 'origination') {\r\n          let managerTmp = '';\r\n          let balanceTmp = '';\r\n          managerTmp = this.translate.instant('OPERATIONSERVICE.MANAGER');\r\n          balanceTmp = this.translate.instant('OPERATIONSERVICE.BALANCE');\r\n          // output.push(managerTmp + ' ' + fop.contents[i].managerPubkey);  // betanet\r\n          output.push(managerTmp + ' ' + fop.contents[i].manager_pubkey);  // zeronet\r\n          output.push(balanceTmp + ' ' + Big(Number(fop.contents[i].balance)).div(this.microTez).toString() + ' tez');\r\n        } else if (fop.contents[i].kind === 'delegation') {\r\n          let delegateTmp = '';\r\n          delegateTmp = this.translate.instant('OPERATIONSERVICE.DELEGATE');\r\n          output.push(delegateTmp + ' ' + fop.contents[i].delegate);\r\n          // output.push('Delegate: ' + fop.contents[i].delegate);\r\n        } else {\r\n          let tagNotSupportedTmp = '';\r\n          tagNotSupportedTmp = this.translate.instant('OPERATIONSERVICE.TAGNOTSUPPORTED');\r\n          throw new Error(tagNotSupportedTmp);\r\n        }\r\n\r\n        let feeTmp = '';\r\n        feeTmp = this.translate.instant('OPERATIONSERVICE.FEE');\r\n        output.push(feeTmp + ' ' + Big(Number(fop.contents[i].fee)).div(this.microTez).toString() + ' tez');\r\n        if (i + 1 < fop.contents.length) {\r\n          output.push('');\r\n        }\r\n      }\r\n    }\r\n    return output;\r\n  }\r\n  getContractDelegation(pkh: string) {\r\n    return {\r\n      entrypoint: 'do',\r\n      value:\r\n        [{ prim: 'DROP' },\r\n        {\r\n          prim: 'NIL',\r\n          args: [{ prim: 'operation' }]\r\n        },\r\n        {\r\n          prim: 'PUSH',\r\n          args:\r\n            [{ prim: 'key_hash' },\r\n            {\r\n              string: pkh\r\n            }]\r\n        },\r\n        { prim: 'SOME' }, { prim: 'SET_DELEGATE' },\r\n        { prim: 'CONS' }]\r\n    };\r\n  }\r\n  getContractUnDelegation() {\r\n    return {\r\n      entrypoint: 'do',\r\n      value:\r\n        [{ prim: 'DROP' },\r\n        {\r\n          prim: 'NIL',\r\n          args: [{ prim: 'operation' }],\r\n        }, {\r\n          prim: 'NONE',\r\n          args: [{ prim: 'key_hash' }],\r\n        },\r\n        { prim: 'SET_DELEGATE' },\r\n        { prim: 'CONS' }]\r\n    };\r\n  }\r\n  getContractPkhTransaction(to: string, amount: string) {\r\n    return {\r\n      entrypoint: 'do',\r\n      value:\r\n        [{ prim: 'DROP' },\r\n        { prim: 'NIL', args: [{ prim: 'operation' }] },\r\n        {\r\n          prim: 'PUSH',\r\n          args:\r\n            [{ prim: 'key_hash' },\r\n            {\r\n              string: to\r\n            }]\r\n        },\r\n        { prim: 'IMPLICIT_ACCOUNT' },\r\n        {\r\n          prim: 'PUSH',\r\n          args:\r\n            [{ prim: 'mutez' }, { 'int': amount }]\r\n        },\r\n        { prim: 'UNIT' }, { prim: 'TRANSFER_TOKENS' },\r\n        { prim: 'CONS' }]\r\n    };\r\n  }\r\n  getContractKtTransaction(to: string, amount: string) {\r\n    return {\r\n      entrypoint: 'do',\r\n      value: [{ prim: 'DROP' },\r\n      { prim: 'NIL', args: [{ prim: 'operation' }] },\r\n      {\r\n        prim: 'PUSH',\r\n        args:\r\n          [{ prim: 'address' },\r\n          { string: to }]\r\n      },\r\n      { prim: 'CONTRACT', args: [{ prim: 'unit' }] },\r\n      [{\r\n        prim: 'IF_NONE',\r\n        args:\r\n          [[[{ prim: 'UNIT' }, { prim: 'FAILWITH' }]],\r\n          []]\r\n      }],\r\n      {\r\n        prim: 'PUSH',\r\n        args: [{ prim: 'mutez' }, { 'int': amount }]\r\n      },\r\n      { prim: 'UNIT' }, { prim: 'TRANSFER_TOKENS' },\r\n      { prim: 'CONS' }]\r\n    };\r\n  }\r\n  getManagerScript(pkh: string) {\r\n    let pkHex: string;\r\n    if (pkh.slice(0, 2) === 'tz') {\r\n      pkHex = '00' + this.buf2hex(this.b58cdecode(pkh, this.prefix.tz1));\r\n    } else {\r\n      pkHex = pkh;\r\n    }\r\n    return {\r\n      code: [\r\n        {\r\n          prim: 'parameter',\r\n          args: [\r\n            {\r\n              prim: 'or',\r\n              args: [\r\n                {\r\n                  prim: 'lambda',\r\n                  args: [\r\n                    {\r\n                      prim: 'unit'\r\n                    },\r\n                    {\r\n                      prim: 'list',\r\n                      args: [\r\n                        {\r\n                          prim: 'operation'\r\n                        }\r\n                      ]\r\n                    }\r\n                  ],\r\n                  annots: [\r\n                    '%do'\r\n                  ]\r\n                },\r\n                {\r\n                  prim: 'unit',\r\n                  annots: [\r\n                    '%default'\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          prim: 'storage',\r\n          args: [\r\n            {\r\n              prim: 'key_hash'\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          prim: 'code',\r\n          args: [\r\n            [\r\n              [\r\n                [\r\n                  {\r\n                    prim: 'DUP'\r\n                  },\r\n                  {\r\n                    prim: 'CAR'\r\n                  },\r\n                  {\r\n                    prim: 'DIP',\r\n                    args: [\r\n                      [\r\n                        {\r\n                          prim: 'CDR'\r\n                        }\r\n                      ]\r\n                    ]\r\n                  }\r\n                ]\r\n              ],\r\n              {\r\n                prim: 'IF_LEFT',\r\n                args: [\r\n                  [\r\n                    {\r\n                      prim: 'PUSH',\r\n                      args: [\r\n                        {\r\n                          prim: 'mutez'\r\n                        },\r\n                        {\r\n                          'int': '0'\r\n                        }\r\n                      ]\r\n                    },\r\n                    {\r\n                      prim: 'AMOUNT'\r\n                    },\r\n                    [\r\n                      [\r\n                        {\r\n                          prim: 'COMPARE'\r\n                        },\r\n                        {\r\n                          prim: 'EQ'\r\n                        }\r\n                      ],\r\n                      {\r\n                        prim: 'IF',\r\n                        args: [\r\n                          [\r\n\r\n                          ],\r\n                          [\r\n                            [\r\n                              {\r\n                                prim: 'UNIT'\r\n                              },\r\n                              {\r\n                                prim: 'FAILWITH'\r\n                              }\r\n                            ]\r\n                          ]\r\n                        ]\r\n                      }\r\n                    ],\r\n                    [\r\n                      {\r\n                        prim: 'DIP',\r\n                        args: [\r\n                          [\r\n                            {\r\n                              prim: 'DUP'\r\n                            }\r\n                          ]\r\n                        ]\r\n                      },\r\n                      {\r\n                        prim: 'SWAP'\r\n                      }\r\n                    ],\r\n                    {\r\n                      prim: 'IMPLICIT_ACCOUNT'\r\n                    },\r\n                    {\r\n                      prim: 'ADDRESS'\r\n                    },\r\n                    {\r\n                      prim: 'SENDER'\r\n                    },\r\n                    [\r\n                      [\r\n                        {\r\n                          prim: 'COMPARE'\r\n                        },\r\n                        {\r\n                          prim: 'EQ'\r\n                        }\r\n                      ],\r\n                      {\r\n                        prim: 'IF',\r\n                        args: [\r\n                          [\r\n\r\n                          ],\r\n                          [\r\n                            [\r\n                              {\r\n                                prim: 'UNIT'\r\n                              },\r\n                              {\r\n                                prim: 'FAILWITH'\r\n                              }\r\n                            ]\r\n                          ]\r\n                        ]\r\n                      }\r\n                    ],\r\n                    {\r\n                      prim: 'UNIT'\r\n                    },\r\n                    {\r\n                      prim: 'EXEC'\r\n                    },\r\n                    {\r\n                      prim: 'PAIR'\r\n                    }\r\n                  ],\r\n                  [\r\n                    {\r\n                      prim: 'DROP'\r\n                    },\r\n                    {\r\n                      prim: 'NIL',\r\n                      args: [\r\n                        {\r\n                          prim: 'operation'\r\n                        }\r\n                      ]\r\n                    },\r\n                    {\r\n                      prim: 'PAIR'\r\n                    }\r\n                  ]\r\n                ]\r\n              }\r\n            ]\r\n          ]\r\n        }\r\n      ],\r\n      storage:\r\n        { bytes: pkHex }\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport DirectWebSdk from '@toruslabs/torus-direct-web-sdk';\r\nimport FetchNodeDetails from '@toruslabs/fetch-node-details';\r\nimport TorusUtils from '@toruslabs/torus.js';\r\nimport { OperationService } from '../../services/operation/operation.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { Constants } from '../../constants';\r\n\r\nconst GOOGLE = 'google';\r\nconst REDDIT = 'reddit';\r\nconst TWITTER = 'twitter';\r\nconst AUTH_DOMAIN = 'https://dev-0li4gssz.eu.auth0.com';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TorusService {\r\n  CONSTANTS = new Constants();\r\n  torus: any = null;\r\n  nodeDetails: { torusNodeEndpoints: String[], torusNodePub: any[] } = null;\r\n  public readonly verifierMap: any;\r\n  private readonly proxy: any;\r\n  verifierMaps = {\r\n    testnet: {\r\n      [GOOGLE]: {\r\n        name: 'Google',\r\n        typeOfLogin: 'google',\r\n        clientId: '952872982551-od475jfe3ach7dghacin634rbkcqhpll.apps.googleusercontent.com',\r\n        verifier: 'kukai-google',\r\n        caseSensitiveVerifierID: false\r\n      },\r\n      [REDDIT]: {\r\n        name: 'Reddit',\r\n        typeOfLogin: 'reddit',\r\n        clientId: 'H0nhRv1leU9pGQ',\r\n        verifier: 'tezos-reddit-testnet',\r\n        caseSensitiveVerifierID: false\r\n      },\r\n      [TWITTER]: {\r\n        name: 'Twitter',\r\n        typeOfLogin: 'twitter',\r\n        clientId: 'vKFgnaYZzKLUnhxnX5xqTqeMcumdVTz1',\r\n        verifier: 'tezos-twitter-test',\r\n        caseSensitiveVerifierID: false\r\n      }\r\n    },\r\n    mainnet: {\r\n      [GOOGLE]: {\r\n        name: 'Google',\r\n        typeOfLogin: 'google',\r\n        clientId: '952872982551-49mfvktoios59oj2kmiknlltfq9pvi6c.apps.googleusercontent.com',\r\n        verifier: 'tezos-google',\r\n        caseSensitiveVerifierID: false\r\n      },\r\n      [REDDIT]: {\r\n        name: 'Reddit',\r\n        typeOfLogin: 'reddit',\r\n        clientId: 'YivAW_t3iCp9QA',\r\n        verifier: 'tezos-reddit',\r\n        caseSensitiveVerifierID: false\r\n      },\r\n      [TWITTER]: {\r\n        name: 'Twitter',\r\n        typeOfLogin: 'twitter',\r\n        clientId: 'UJl5d4iHVgbrAaSlucXNf2F2uKlC0m25',\r\n        verifier: 'tezos-twitter',\r\n        caseSensitiveVerifierID: false\r\n      }\r\n    }\r\n  };\r\n  verifierMapKeys: any;\r\n  constructor(\r\n    private operationService: OperationService,\r\n    private inputValidationService: InputValidationService\r\n  ) {\r\n    if (this.CONSTANTS.NET.NETWORK === 'mainnet') {\r\n      this.verifierMap = this.verifierMaps.mainnet;\r\n      this.proxy = { address: '0x638646503746d5456209e33a2ff5e3226d698bea', network: 'mainnet' };\r\n    } else if (this.CONSTANTS.NET.NETWORK) {\r\n      this.verifierMap = this.verifierMaps.testnet;\r\n      this.proxy = { address: '0x4023d2a0D330bF11426B12C6144Cfb96B7fa6183', network: 'ropsten' };\r\n    }\r\n    this.verifierMapKeys = Object.keys(this.verifierMap);\r\n  }\r\n  async initTorus() {\r\n    if (!this.torus) {\r\n      try {\r\n        const torusdirectsdk = new DirectWebSdk({\r\n          baseUrl: `${location.origin}/serviceworker`,\r\n          enableLogging: !(this.proxy.network === 'mainnet'),\r\n          proxyContractAddress: this.proxy.address,\r\n          network: (this.proxy.network === 'mainnet') ? this.proxy.network : 'testnet',\r\n        });\r\n        await torusdirectsdk.init({ skipSw: false });\r\n        this.torus = torusdirectsdk;\r\n      } catch (error) {\r\n        console.error(error, 'oninit caught');\r\n      }\r\n    }\r\n  }\r\n  async lookupPkh(selectedVerifier: string, verifierId: string): Promise<any> {\r\n    const fetchNodeDetails = new FetchNodeDetails({ network: this.proxy.network, proxyAddress: this.proxy.address });\r\n    const torus = new TorusUtils();\r\n    const verifier = this.verifierMap[selectedVerifier].verifier;\r\n    if (!this.nodeDetails) {\r\n      const { torusNodeEndpoints, torusNodePub, torusIndexes } = await fetchNodeDetails.getNodeDetails();\r\n      this.nodeDetails = { torusNodeEndpoints, torusNodePub }; // Cache node details\r\n    }\r\n    let sanitizedVerifierId = verifierId;\r\n    if (!this.verifierMap[selectedVerifier].caseSensitiveVerifierID) {\r\n      sanitizedVerifierId = sanitizedVerifierId.toLocaleLowerCase();\r\n    }\r\n    let twitterId = '';\r\n    if (selectedVerifier === 'twitter') {\r\n      const username = sanitizedVerifierId.replace('@', '');\r\n      const { id } = await this.twitterLookup(username);\r\n      if (this.inputValidationService.twitterId(id)) {\r\n        sanitizedVerifierId = `twitter|${id}`;\r\n        twitterId = id;\r\n      } else {\r\n        throw new Error('Twitter handle not found');\r\n      }\r\n    }\r\n    const pk: any = await torus.getPublicAddress(this.nodeDetails.torusNodeEndpoints, this.nodeDetails.torusNodePub, { verifier, verifierId: sanitizedVerifierId }, true);\r\n    const pkh = this.operationService.spPointsToPkh(pk.X, pk.Y);\r\n    return { pkh, twitterId };\r\n  }\r\n  async twitterLookup(username?: string, id?: string) {\r\n    let req = {};\r\n    if ((id && username) || (!id && !username)) {\r\n      console.log({ username, id });\r\n      throw new Error('Invalid input');\r\n    } else if (id) {\r\n      req = { id };\r\n    } else {\r\n      req = { username: username.replace('@', '') };\r\n    }\r\n    return await fetch(`https://api.tezos.help/twitter-lookup/`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      referrerPolicy: 'no-referrer',\r\n      body: JSON.stringify(req)\r\n    }).then(\r\n      (ans) => {\r\n        return ans.json();\r\n      }\r\n    );\r\n  }\r\n  async loginTorus(selectedVerifier: string, verifierId = ''): Promise<any> {\r\n    try {\r\n      const jwtParams: any = this._loginToConnectionMap()[selectedVerifier] || {};\r\n      if (verifierId && selectedVerifier === GOOGLE) {\r\n        jwtParams.login_hint = verifierId;\r\n        console.log('login_hint: ' + verifierId);\r\n      }\r\n      const { typeOfLogin, clientId, verifier } = this.verifierMap[selectedVerifier];\r\n      const loginDetails = await this.torus.triggerLogin({\r\n        verifier,\r\n        typeOfLogin,\r\n        clientId,\r\n        jwtParams\r\n      });\r\n      const keyPair = this.operationService.spPrivKeyToKeyPair(loginDetails.privateKey);\r\n      console.log('DirectAuth KeyPair', keyPair);\r\n      return { keyPair, userInfo: loginDetails.userInfo };\r\n    } catch (e) {\r\n      console.error(e, 'login caught');\r\n      return { keyPair: null, userInfo: null };\r\n    }\r\n  }\r\n  async getTorusKeyPair(selectedVerifier: string, verifierId: string): Promise<any> {\r\n    const { keyPair } = await this.loginTorus(selectedVerifier, verifierId);\r\n    return keyPair;\r\n  }\r\n  _loginToConnectionMap = () => {\r\n    return {\r\n      [TWITTER]: {\r\n        domain: AUTH_DOMAIN,\r\n      }\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { WalletService } from '../wallet/wallet.service';\r\nimport { Constants } from '../../constants';\r\n\r\n@Injectable()\r\nexport class TzrateService {\r\n  public apiUrl = 'https://api.coingecko.com/api/v3/simple/price?ids=tezos&vs_currencies=usd';\r\n  private CONSTANTS = new Constants();\r\n  constructor(private http: HttpClient,\r\n    private walletService: WalletService) {\r\n  }\r\n\r\n  getTzrate() {\r\n    if (this.CONSTANTS.NET.NETWORK === 'mainnet') {\r\n      this.http.get(this.apiUrl).subscribe(\r\n        (price: any) => {\r\n          this.walletService.wallet.XTZrate = price.tezos.usd;\r\n          this.updateFiatBalances();\r\n        },\r\n        err => console.log('Failed to get xtz price: ' + JSON.stringify(err))\r\n      );\r\n    } else {\r\n      this.walletService.wallet.XTZrate = 0;\r\n      this.updateFiatBalances();\r\n    }\r\n  }\r\n  updateFiatBalances() {\r\n    const accounts = this.walletService.wallet.getAccounts();\r\n    let tot = 0;\r\n    let change = false;\r\n    for (const account of accounts) {\r\n      if (account.balanceXTZ !== null) {\r\n        account.balanceUSD =\r\n          Number(account.balanceXTZ / 1000000 * this.walletService.wallet.XTZrate);\r\n        tot += account.balanceUSD;\r\n        change = true;\r\n      }\r\n    }\r\n    if (change) {\r\n      this.walletService.wallet.totalBalanceUSD = Number(tot);\r\n      this.walletService.storeWallet();\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { KeyPair, WalletType } from './../../interfaces';\r\nimport {\r\n  WalletObject,\r\n  HdWallet,\r\n  FullWallet,\r\n  LegacyWalletV1,\r\n  LegacyWalletV2,\r\n  LegacyWalletV3,\r\n  ImplicitAccount,\r\n  LedgerWallet,\r\n  TorusWallet,\r\n  OriginatedAccount,\r\n} from './wallet';\r\nimport { EncryptionService } from '../encryption/encryption.service';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { TorusService } from '../torus/torus.service';\r\nimport { utils, hd } from '@tezos-core-tools/crypto-utils';\r\n@Injectable()\r\nexport class WalletService {\r\n  storeKey = `kukai-wallet`;\r\n  storageId = 0;\r\n  wallet: WalletObject;\r\n\r\n  constructor(\r\n    private encryptionService: EncryptionService,\r\n    private operationService: OperationService,\r\n    private torusService: TorusService\r\n  ) {}\r\n  /*\r\n    Wallet creation\r\n  */\r\n  createNewWallet(): string {\r\n    return utils.generateMnemonic(24);\r\n  }\r\n  async createEncryptedWallet(\r\n    mnemonic: string,\r\n    password: string,\r\n    passphrase: string = '',\r\n    hdSeed: boolean\r\n  ): Promise<any> {\r\n    const seed = utils.mnemonicToSeed(mnemonic, passphrase, hdSeed);\r\n    const entropy: Buffer = Buffer.from(utils.mnemonicToEntropy(mnemonic));\r\n    let keyPair: KeyPair;\r\n    if (!hdSeed) {\r\n      keyPair = this.operationService.seed2keyPair(seed);\r\n    } else {\r\n      keyPair = hd.keyPairFromAccountIndex(seed, 0);\r\n    }\r\n    const encrypted = await this.encryptionService.encrypt(seed, password, 3);\r\n    const encryptedSeed: string = encrypted.chiphertext;\r\n    const iv: string = encrypted.iv;\r\n    const iv2: string = this.encryptionService.bumpIV(iv, 1);\r\n    const encryptedEntropy: string = (await this.encryptionService.encrypt(\r\n      entropy,\r\n      password,\r\n      3,\r\n      iv2\r\n    )).chiphertext;\r\n    return {\r\n      data: this.exportKeyStoreInit(\r\n        hdSeed ? WalletType.HdWallet : WalletType.FullWallet,\r\n        encryptedSeed,\r\n        encryptedEntropy,\r\n        iv\r\n      ),\r\n      pkh: keyPair.pkh,\r\n      pk: keyPair.pk,\r\n      seed: seed,\r\n    };\r\n  }\r\n  async getKeys(pwd: string, pkh?: string): Promise<KeyPair> {\r\n    let seed;\r\n    if (this.wallet instanceof LegacyWalletV1) {\r\n      console.log('v1');\r\n      seed = await this.encryptionService.decrypt(\r\n        this.wallet.encryptedSeed,\r\n        pwd,\r\n        this.wallet.salt,\r\n        1\r\n      );\r\n      console.log('done');\r\n    } else if (this.wallet instanceof LegacyWalletV2) {\r\n      seed = await this.encryptionService.decrypt(\r\n        this.wallet.encryptedSeed,\r\n        pwd,\r\n        this.wallet.IV,\r\n        2\r\n      );\r\n    } else if (\r\n      this.wallet instanceof LegacyWalletV3 ||\r\n      this.wallet instanceof HdWallet\r\n    ) {\r\n      seed = await this.encryptionService.decrypt(\r\n        this.wallet.encryptedSeed,\r\n        pwd,\r\n        this.wallet.IV,\r\n        3\r\n      );\r\n    } else if (this.wallet instanceof LedgerWallet) {\r\n      console.log(this.wallet);\r\n      const keyPair: KeyPair = {\r\n        sk: null,\r\n        pk: this.wallet.implicitAccounts[0].pk,\r\n        pkh: this.wallet.implicitAccounts[0].pkh,\r\n      };\r\n      return keyPair;\r\n    } else if (this.wallet instanceof TorusWallet) {\r\n      console.log('torus id ' + this.wallet.id);\r\n      const keyPair = await this.torusService.getTorusKeyPair(this.wallet.verifier, this.wallet.id);\r\n      console.log(keyPair);\r\n      if (this.wallet.getImplicitAccount(keyPair.pkh)) {\r\n        return keyPair;\r\n      } else {\r\n        throw new Error('Signed with wrong account');\r\n      }\r\n      return null;\r\n    }  else {\r\n      return null;\r\n    }\r\n    if (!seed) {\r\n      return null;\r\n    }\r\n    if (this.wallet instanceof HdWallet) {\r\n      if (!pkh) {\r\n        throw new Error('No pkh provided');\r\n      }\r\n      const account = this.wallet.getImplicitAccount(pkh);\r\n      if (!account.derivationPath) {\r\n        throw new Error('No derivationPath found');\r\n      }\r\n      return hd.seedToKeyPair(seed, account.derivationPath);\r\n    } else if (this.wallet instanceof LegacyWalletV1) {\r\n      const keyPair = this.operationService.seed2keyPair(seed);\r\n      if (!keyPair.pkh || !pkh || keyPair.pkh !== pkh) {\r\n        return null;\r\n      } else {\r\n        return keyPair;\r\n      }\r\n    } else {\r\n      return this.operationService.seed2keyPair(seed);\r\n    }\r\n  }\r\n  async revealMnemonicPhrase(pwd: string): Promise<string> {\r\n    if (\r\n      this.wallet &&\r\n      (this.wallet instanceof HdWallet || this.wallet instanceof LegacyWalletV3)\r\n    ) {\r\n      const iv = this.encryptionService.bumpIV(this.wallet.IV, 1);\r\n      const entropy = await this.encryptionService.decrypt(\r\n        this.wallet.encryptedEntropy,\r\n        pwd,\r\n        iv,\r\n        3\r\n      );\r\n      if (entropy) {\r\n        return utils.entropyToMnemonic(entropy);\r\n      } else {\r\n        console.log('Invalid password');\r\n      }\r\n    }\r\n    return '';\r\n  }\r\n  addImplicitAccount(pk: string, derivationPath?: string | number) {\r\n    let pkh;\r\n    console.log(pk);\r\n    if (pk && pk.slice(0, 4) === 'sppk') {\r\n      pkh = this.operationService.pk2pkh(pk);\r\n    } else {\r\n      pkh = utils.pkToPkh(pk);\r\n    }\r\n    if (pkh) {\r\n      this.wallet.implicitAccounts.push(\r\n        new ImplicitAccount(pkh, pk, typeof derivationPath === 'number' ? `44'/1729'/${derivationPath}'/0'` : derivationPath)\r\n      );\r\n      console.log('Adding new implicit account...');\r\n      console.log(\r\n        this.wallet.implicitAccounts[this.wallet.implicitAccounts.length - 1]\r\n      );\r\n      this.storeWallet();\r\n    }\r\n  }\r\n  addOriginatedAccount(kt: string, manager: string) {\r\n    const implicitAccount = this.wallet.getImplicitAccount(manager);\r\n    if (implicitAccount) {\r\n      const origAcc = new OriginatedAccount(\r\n        kt,\r\n        implicitAccount.pkh,\r\n        implicitAccount.pk\r\n      );\r\n      implicitAccount.originatedAccounts.push(origAcc);\r\n      this.storeWallet();\r\n    } else {\r\n      console.warn(`Manager address $(manager) not found`);\r\n    }\r\n  }\r\n  /*addUnusedAccount(account: any) {\r\n    if (this.wallet instanceof HdWallet) {\r\n      this.wallet.unusedAccounts.push(account);\r\n    }\r\n  }*/\r\n  addressExists(address: string): boolean {\r\n    return (\r\n      this.wallet.getAccounts().findIndex((a) => a.address === address) !== -1\r\n    );\r\n  }\r\n  async incrementAccountIndex(password: string): Promise<string> {\r\n    if (this.wallet instanceof HdWallet) {\r\n      const seed = await this.encryptionService.decrypt(\r\n        this.wallet.encryptedSeed,\r\n        password,\r\n        this.wallet.IV,\r\n        3\r\n      );\r\n      if (seed) {\r\n        const keyPair: KeyPair = hd.seedToKeyPair(seed, `44'/1729'/${this.wallet.index}'/0'`);\r\n        this.addImplicitAccount(keyPair.pk, this.wallet.index);\r\n        this.wallet.index++;\r\n        this.storeWallet();\r\n        return keyPair.pkh;\r\n      } else {\r\n        return ''; // Wrong pwd\r\n      }\r\n    }\r\n  }\r\n  /*\r\n    Clear wallet data from browser\r\n  */\r\n  clearWallet() {\r\n    this.wallet = null;\r\n    this.storageId = 0;\r\n    localStorage.removeItem(this.storeKey);\r\n  }\r\n  /*\r\n  Used to decide wallet type\r\n  */\r\n  isFullWallet(): boolean {\r\n    return this.wallet instanceof FullWallet;\r\n  }\r\n  isViewOnlyWallet(): boolean {\r\n    return false;\r\n  }\r\n  isObserverWallet(): boolean {\r\n    return false;\r\n  }\r\n  isLedgerWallet(): boolean {\r\n    return this.wallet instanceof LedgerWallet;\r\n  }\r\n  isHdWallet(): boolean {\r\n    return this.wallet instanceof HdWallet;\r\n  }\r\n  isTorusWallet(): boolean {\r\n    return this.wallet instanceof TorusWallet;\r\n  }\r\n  exportKeyStoreInit(\r\n    type: WalletType,\r\n    encryptedSeed: string,\r\n    encryptedEntropy: string,\r\n    iv: string\r\n  ) {\r\n    const data: any = {\r\n      provider: 'Kukai',\r\n      version: 3.0,\r\n      walletType: type,\r\n      encryptedSeed,\r\n      encryptedEntropy,\r\n      iv,\r\n    };\r\n    return data;\r\n  }\r\n  /*\r\n    Read and write to localStorage\r\n  */\r\n  initStorage() {\r\n    this.storageId = Date.now();\r\n    localStorage.setItem(\r\n      this.storeKey,\r\n      JSON.stringify({ localStorageId: this.storageId })\r\n    );\r\n  }\r\n  storeWallet() {\r\n    const localStorageId = this.getLocalStorageId();\r\n    if (this.storageId && localStorageId && this.storageId === localStorageId) {\r\n      let type = 'unknown';\r\n      if (this.wallet instanceof HdWallet) {\r\n        type = 'HdWallet';\r\n      } else if (this.wallet instanceof LegacyWalletV1) {\r\n        type = 'LegacyWalletV1';\r\n      } else if (this.wallet instanceof LegacyWalletV2) {\r\n        type = 'LegacyWalletV2';\r\n      } else if (this.wallet instanceof LegacyWalletV3) {\r\n        type = 'LegacyWalletV3';\r\n      } else if (this.wallet instanceof LedgerWallet) {\r\n        type = 'LedgerWallet';\r\n      } else if (this.wallet instanceof TorusWallet) {\r\n        type = 'TorusWallet';\r\n      }\r\n      console.log('Type is ' + type);\r\n      localStorage.setItem(\r\n        this.storeKey,\r\n        JSON.stringify({ type, localStorageId: this.storageId, data: this.wallet })\r\n      );\r\n    } else {\r\n      console.log('Outdated storage id');\r\n    }\r\n  }\r\n  getLocalStorageId() {\r\n    const walletData = localStorage.getItem(this.storeKey);\r\n    if (walletData) {\r\n      const parsed = JSON.parse(walletData);\r\n      if (parsed && parsed.localStorageId) {\r\n        return parsed.localStorageId;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  loadStoredWallet() {\r\n    const walletData = localStorage.getItem(this.storeKey);\r\n    if (walletData && walletData !== 'undefined') {\r\n      const parsedWalletData = JSON.parse(walletData);\r\n      console.log(parsedWalletData);\r\n      if (parsedWalletData.type && parsedWalletData.data && parsedWalletData.localStorageId) {\r\n        this.storageId = parsedWalletData.localStorageId;\r\n        const wd = parsedWalletData.data;\r\n        this.deserializeStoredWallet(wd, parsedWalletData.type);\r\n        console.log(this.wallet);\r\n      } else {\r\n        console.log('couldnt load a wallet');\r\n        this.clearWallet();\r\n      }\r\n    } else {\r\n      console.log('couldnt load a wallet');\r\n      this.clearWallet();\r\n    }\r\n  }\r\n  deserializeStoredWallet(wd: any, type: string) {\r\n    switch (type) {\r\n      case 'HdWallet':\r\n        this.wallet = new HdWallet(\r\n          wd.IV,\r\n          wd.encryptedSeed,\r\n          wd.encryptedEntropy\r\n        );\r\n        if (this.wallet instanceof HdWallet) {\r\n          this.wallet.index = wd.index;\r\n        }\r\n        break;\r\n      case 'LegacyWalletV1':\r\n        this.wallet = new LegacyWalletV1(wd.salt, wd.encryptedSeed);\r\n        break;\r\n      case 'LegacyWalletV2':\r\n        this.wallet = new LegacyWalletV2(wd.IV, wd.encryptedSeed);\r\n        break;\r\n      case 'LegacyWalletV3':\r\n        this.wallet = new LegacyWalletV3(\r\n          wd.IV,\r\n          wd.encryptedSeed,\r\n          wd.encryptedEntropy\r\n        );\r\n        break;\r\n      case 'LedgerWallet':\r\n        this.wallet = new LedgerWallet();\r\n        break;\r\n      case 'TorusWallet':\r\n        this.wallet = new TorusWallet(wd.verifier, wd.id, wd.name);\r\n        this.torusService.initTorus();\r\n        break;\r\n      default:\r\n    }\r\n    this.wallet.XTZrate = wd.XTZrate;\r\n    this.wallet.totalBalanceUSD = wd.totalBalanceUSD;\r\n    this.wallet.totalBalanceXTZ = wd.totalBalanceXTZ;\r\n    if (wd.lookups) {\r\n      console.log('found', wd.lookups);\r\n      this.wallet.lookups = wd.lookups;\r\n    }\r\n    for (const implicit of wd.implicitAccounts) {\r\n      const impAcc: ImplicitAccount = new ImplicitAccount(\r\n        implicit.pkh,\r\n        implicit.pk,\r\n        implicit.derivationPath ? implicit.derivationPath : null\r\n      );\r\n      impAcc.balanceUSD = implicit.balanceUSD;\r\n      impAcc.balanceXTZ = implicit.balanceXTZ;\r\n      impAcc.delegate = implicit.delegate;\r\n      impAcc.activitiesCounter = implicit.activitiesCounter;\r\n      impAcc.activities = implicit.activities;\r\n      for (const originated of implicit.originatedAccounts) {\r\n        const origAcc = new OriginatedAccount(\r\n          originated.address,\r\n          impAcc.pkh,\r\n          impAcc.pk\r\n        );\r\n        origAcc.balanceUSD = originated.balanceUSD;\r\n        origAcc.balanceXTZ = originated.balanceXTZ;\r\n        origAcc.delegate = originated.delegate;\r\n        origAcc.activitiesCounter = originated.activitiesCounter;\r\n        origAcc.activities = originated.activities;\r\n        impAcc.originatedAccounts.push(origAcc);\r\n      }\r\n      this.wallet.implicitAccounts.push(impAcc);\r\n    }\r\n  }\r\n}\r\n","export type WalletObject =\r\n  LegacyWalletV1\r\n  | LegacyWalletV2\r\n  | LegacyWalletV3\r\n  | LedgerWallet\r\n  | HdWallet\r\n  | TorusWallet;\r\n\r\nexport class Wallet {\r\n  totalBalanceXTZ: number | null;\r\n  totalBalanceUSD: number | null;\r\n  XTZrate: number | null;\r\n  implicitAccounts: ImplicitAccount[];\r\n  lookups: any[];\r\n  constructor() {\r\n    this.totalBalanceXTZ = null;\r\n    this.totalBalanceUSD = null;\r\n    this.XTZrate = null;\r\n    this.implicitAccounts = [];\r\n    this.lookups = [];\r\n  }\r\n  getAccounts(): Account[] {\r\n    const accounts: Account[] = [];\r\n    if (this.implicitAccounts.length) {\r\n      for (const implicitAccount of this.implicitAccounts) {\r\n        accounts.push(implicitAccount);\r\n        if (implicitAccount.originatedAccounts.length) {\r\n          for (const originatedAccount of implicitAccount.originatedAccounts) {\r\n            accounts.push(originatedAccount);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return accounts;\r\n  }\r\n  getImplicitAccounts(): ImplicitAccount[] {\r\n    return this.implicitAccounts;\r\n  }\r\n  getAccount(address: string): Account {\r\n    if (this.implicitAccounts.length) {\r\n      for (const implicitAccount of this.implicitAccounts) {\r\n        if (implicitAccount.address === address) {\r\n          return implicitAccount;\r\n        }\r\n        if (implicitAccount.originatedAccounts.length) {\r\n          for (const originatedAccount of implicitAccount.originatedAccounts) {\r\n            if (originatedAccount.address === address) {\r\n              return originatedAccount;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  getImplicitAccount(pkh: string): ImplicitAccount {\r\n    if (this.implicitAccounts.length) {\r\n      for (const implicitAccount of this.implicitAccounts) {\r\n        if (implicitAccount.pkh === pkh) {\r\n          return implicitAccount;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\nexport class FullWallet extends Wallet {\r\n  encryptedSeed: string;\r\n  constructor(encryptedSeed: string) {\r\n    super();\r\n    this.encryptedSeed = encryptedSeed;\r\n  }\r\n}\r\n\r\nexport class LegacyWalletV1 extends FullWallet {\r\n  salt: string;\r\n  constructor(salt: string, encrypedSeed: string) {\r\n    super(encrypedSeed);\r\n    this.salt = salt;\r\n  }\r\n}\r\n\r\nexport class LegacyWalletV2 extends FullWallet {\r\n  IV: string;\r\n  constructor(IV: string, encryptedSeed: string) {\r\n    super(encryptedSeed);\r\n    this.IV = IV;\r\n  }\r\n}\r\n\r\nexport class LegacyWalletV3 extends FullWallet {\r\n  encryptedEntropy: string;\r\n  IV: string;\r\n  constructor(IV: string, encryptedSeed: string, encryptedEntropy: string) {\r\n    super(encryptedSeed);\r\n    this.IV = IV;\r\n    this.encryptedEntropy = encryptedEntropy;\r\n  }\r\n}\r\n\r\nexport class HdWallet extends FullWallet {\r\n  encryptedEntropy: string;\r\n  IV: string;\r\n  index: number;\r\n  constructor(IV: string, encryptedSeed: string, encryptedEntropy: string) {\r\n    super(encryptedSeed);\r\n    this.encryptedEntropy = encryptedEntropy;\r\n    this.IV = IV;\r\n    this.index = 0;\r\n  }\r\n}\r\n\r\nexport class TorusWallet extends Wallet {\r\n  verifier: string;\r\n  id: string;\r\n  name: string;\r\n  constructor(verifier: string, id: string, name: string) {\r\n    super();\r\n    this.verifier = verifier;\r\n    this.id = id;\r\n    this.name = name;\r\n  }\r\n  displayName() {\r\n    if (this.verifier === 'twitter') {\r\n      return this.name;\r\n    }\r\n    return this.id;\r\n  }\r\n}\r\nexport class LedgerWallet extends Wallet {\r\n  constructor() {\r\n    super();\r\n  }\r\n}\r\n\r\n// Accounts\r\n\r\nexport abstract class Account {\r\n  balanceXTZ: number | null;\r\n  balanceUSD: number | null;\r\n  delegate: string;\r\n  activitiesCounter: number;\r\n  activities: Activity[];\r\n  pkh: string;\r\n  pk: string;\r\n  address: string;\r\n  constructor(pkh: string, pk: string, address: string) {\r\n    this.balanceXTZ = null;\r\n    this.balanceUSD = null;\r\n    this.delegate = '';\r\n    this.activitiesCounter = -1;\r\n    this.activities = [];\r\n    this.pkh = pkh;\r\n    this.pk = pk;\r\n    this.address = address;\r\n  }\r\n  public abstract isImplicit(): boolean;\r\n  shortAddress(): string {\r\n    return this.address.slice(0, 7) + '...' + this.address.slice(-4);\r\n  }\r\n}\r\n\r\nexport class ImplicitAccount extends Account {\r\n  originatedAccounts: OriginatedAccount[];\r\n  derivationPath?: string;\r\n  constructor(pkh: string, pk: string, derivationPath?: string) {\r\n    super(pkh, pk, pkh);\r\n    this.originatedAccounts = [];\r\n    if (derivationPath) {\r\n      this.derivationPath = derivationPath;\r\n    }\r\n  }\r\n  isImplicit(): boolean {\r\n    return true;\r\n  }\r\n}\r\n\r\nexport class OriginatedAccount extends Account {\r\n  constructor(ktAddress: string, managerPkh: string, managerPk: string) {\r\n    super(managerPkh, managerPk, ktAddress);\r\n  }\r\n  isImplicit(): boolean {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport class Activity {\r\n  type: string;\r\n  block: string;\r\n  status: number; // 0: unconfirmed, 1: confirmed, -1: failed\r\n  amount: number;\r\n  source: string;\r\n  fee: number;\r\n  destination: string;\r\n  hash: string;\r\n  timestamp: number | null;\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  templateUrl: '404.component.html',\r\n  styleUrls: ['./error.scss']\r\n})\r\nexport class P404Component {\r\n\r\n  constructor() { }\r\n\r\n}\r\n","<div id=\"error\" class=\"app flex-row align-items-center\">\r\n  <div class=\"container\">\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-md-6\">\r\n        <div class=\"logo-container\">\r\n          <a class=\"logo\" routerLink=\"/\">\r\n            <img src=\"../../../assets/img/kukai-logo.svg\">\r\n          </a>\r\n        </div>\r\n        <div class=\"clearfix mt-5\">\r\n          <h1 class=\"float-left display-3 mr-4\">404</h1>\r\n          <h4 class=\"pt-3\">Oops! You're lost.</h4>\r\n          <p>The page you are looking for was not found.</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  templateUrl: '500.component.html',\r\n  styleUrls: ['./error.scss']\r\n})\r\nexport class P500Component {\r\n\r\n  constructor() { }\r\n\r\n}\r\n","<div id=\"error\" class=\"app flex-row align-items-center\" style=\"height: 100vh;\">\r\n  <div class=\"container\">\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-md-6\">\r\n        <div class=\"logo-container\">\r\n          <a class=\"logo\" routerLink=\"/\">\r\n            <img src=\"../../../assets/img/kukai-logo.svg\">\r\n          </a>\r\n        </div>\r\n        <div class=\"clearfix mt-5\">\r\n          <h1 class=\"float-left display-3 mr-4\">500</h1>\r\n          <h4 class=\"pt-3\">Houston, we have a problem!</h4>\r\n          <p>The page you are looking for is temporarily unavailable.</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","export const BAKERSLIST: any = [\r\n     {\r\n        baker_name: '888 XTZ',\r\n        identity: 'tz1WBfwbT66FC6BTLexc2BoyCCBM9LG7pnVW',\r\n        image: 'assets/img/bakers/888xtz.png'\r\n     },\r\n     {\r\n        baker_name: 'AirBie',\r\n        identity: 'tz1iLbZZ9uoRuVJCrZ9ZwiJMpfzhy3c67mav',\r\n        image: 'assets/img/bakers/airbie.png'\r\n     },\r\n     {\r\n        baker_name: 'Airfoil',\r\n        identity: 'tz1gk3TDbU7cJuiBRMhwQXVvgDnjsxuWhcEA',\r\n        image: 'assets/img/bakers/airfoil2.png'\r\n     },\r\n     {\r\n        baker_name: 'At James',\r\n        identity: 'tz3e75hU4EhDU3ukyJueh5v6UvEHzGwkg3yC',\r\n        image: 'assets/img/bakers/atjames.png'\r\n     },\r\n     {\r\n        baker_name: 'Bake Tz',\r\n        identity: 'tz1ei4WtWEMEJekSv8qDnu9PExG6Q8HgRGr3',\r\n        image: 'assets/img/bakers/bake_tz.png'\r\n     },\r\n     {\r\n        baker_name: 'Bake  For Me',\r\n        identity: 'tz1NRGxXV9h6SdNaZLcgmjuLx3hyy2f8YoGN',\r\n        image: 'assets/img/bakers/bake_tz_for_me.jpg'\r\n     },\r\n     {\r\n        baker_name: 'Bake\\'n\\'Rolls',\r\n        identity: 'tz1NortRftucvAkD1J58L32EhSVrQEWJCEnB',\r\n        image: 'assets/img/bakers/bake_n_rolls.png'\r\n     },\r\n     {\r\n        baker_name: 'Baked Tezos',\r\n        identity: 'tz1aRhFErGMgL57DYHMT1vYwv7PzsJN1chrk',\r\n        image: 'assets/img/bakers/baked_tezos.jpg'\r\n     },\r\n     {\r\n        baker_name: 'Bakemon',\r\n        identity: 'tz1Z1WwoqgRFbLE3YNdYRpCx44NSfiMJzeAG',\r\n        image: 'assets/img/bakers/bakemon.png'\r\n     },\r\n     {\r\n        baker_name: 'BakeMyStake',\r\n        identity: 'tz1NkFRjmkqqcGkAhqe78fdgemDNKXvL7Bod',\r\n        image: 'assets/img/bakers/bakeyourstake.png'\r\n      },\r\n    /*\r\n     {\r\n        baker_name: 'Baker Avenue',\r\n        identity: 'tz1YgNQBeLTgbwRb7QiyvHrx7hwN7AUbdqpB',        ote3: '',\r\n        image: 'assets/img/bakers/baker-avenue.png'\r\n    },\r\n    {\r\n        baker_name: 'BAKER-IL',\r\n        identity: 'tz1cYufsxHXJcvANhvS55h3aY32a9BAFB494',\r\n        image: 'assets/img/bakers/bakery-il.png'\r\n    },\r\n    */\r\n    {\r\n        baker_name: 'Baking Tacos',\r\n        identity: 'tz1RV1MBbZMR68tacosb7Mwj6LkbPSUS1er1',\r\n        image: 'assets/img/bakers/bakingtacos.png'\r\n    },\r\n    {\r\n        baker_name: 'Blockpower',\r\n        identity: 'tz1LmaFsWRkjr7QMCx5PtV6xTUz3AmEpKQiF',\r\n        image: 'assets/img/bakers/blockpowerstaking.png'\r\n    },\r\n    /*{\r\n          baker_name: 'Bitfinex',\r\n          identity: 'tz1KtGwriE7VuLwT3LwuvU9Nv4wAxP7XZ57d',\r\n          image: 'assets/img/bakers/bitfinex.png'\r\n    },*/\r\n    {\r\n        baker_name: 'BTFD',\r\n        identity: 'tz1d2EwsrmoCPmhNUjt7unCQ8a9RwVsVXEmd',\r\n        image: 'assets/img/bakers/btfd.png'\r\n    },\r\n    {\r\n        baker_name: 'Ceibo XTZ',\r\n        identity: 'tz3bEQoFCZEEfZMskefZ8q8e4eiHH1pssRax',\r\n        image: 'assets/img/bakers/ceiboxtz2.png'\r\n    },\r\n    {\r\n        baker_name: 'Coinbase',\r\n        identity: 'tz1irJKkXS2DBWkU1NnmFQx1c1L7pbGg4yhk',\r\n        image: 'assets/img/bakers/coinbase.png'\r\n    },\r\n    {\r\n        baker_name: 'Coinone',\r\n        identity: 'tz1SYq214SCBy9naR6cvycQsYcUGpBqQAE8d',\r\n        image: 'assets/img/bakers/coinone.png'\r\n    },\r\n    {\r\n        baker_name: 'Cryptium Labs',\r\n        identity: 'tz1eEnQhbwf6trb8Q8mPb2RaPkNk2rN7BKi8',\r\n        image: 'assets/img/bakers/cryptiumlabs3.png'\r\n    },\r\n    {\r\n        baker_name: 'Crypto Delegate',\r\n        identity: 'tz1Tnjaxk6tbAeC2TmMApPh8UsrEVQvhHvx5',\r\n        image: 'assets/img/bakers/cryptodelegate.png'\r\n    },\r\n    {\r\n        baker_name: 'Dash Master',\r\n        identity: 'tz1Lc87p6zRaDwzJs9kHvdpm7XzeWE8QTwVB',\r\n        image: 'assets/img/bakers/dashmaster.png'\r\n    },\r\n    {\r\n        baker_name: 'Delegated Capital',\r\n        identity: 'tz1ZRWFLgT9sz8iFi1VYWPfRYeUvUSFAaDao',\r\n        image: 'assets/img/bakers/delegatedcapital.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Elite Tezos',\r\n        identity: 'tz1W1f1JrE7VsqgpUpj1iiDobqP5TixgZhDk',\r\n        image: 'assets/img/bakers/elitetezos.jpg'\r\n    },\r\n    {\r\n        baker_name: 'EON',\r\n        identity: 'tz1PK8bNrfPbc73BtHH1A63jfU5UtbRFkvU4',\r\n        image: 'assets/img/bakers/eon.png'\r\n    },\r\n    {\r\n        baker_name: 'Everstake',\r\n        identity: 'tz1MXFrtZoaXckE41bjUCSjAjAap3AFDSr3N',\r\n        image: 'assets/img/bakers/everstake.png'\r\n    },\r\n    {\r\n        baker_name: 'Figment',\r\n        identity: 'tz1Scdr2HsZiQjc7bHMeBbmDRXYVvdhjJbBh',\r\n        image: 'assets/img/bakers/figment.png'\r\n    },\r\n    {\r\n        baker_name: 'First Block',\r\n        identity: 'tz1ZQppA6UerMz5CJtGvZmmB6z8L9syq7ixu',\r\n        image: 'assets/img/bakers/firstblock.jpeg'\r\n    },\r\n    {\r\n        baker_name: 'Flippin\\' tacos',\r\n        identity: 'tz1TzaNn7wSQSP5gYPXCnNzBCpyMiidCq1PX',\r\n        image: 'assets/img/bakers/flippintacos.png'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 1',\r\n        identity: 'tz3RDC3Jdn4j15J7bBHZd29EUee9gVB1CxD9',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 2',\r\n        identity: 'tz3bvNMQ95vfAYtG8193ymshqjSvmxiCUuR5',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 3',\r\n        identity: 'tz3RB4aoyjov4KEVRbuhvQ1CKJgBJMWhaeB8',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 4',\r\n        identity: 'tz3bTdwZinP8U1JmSweNzVKhmwafqWmFWRfk',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 5',\r\n        identity: 'tz3NExpXn9aPNZPorRE4SdjJ2RGrfbJgMAaV',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 6',\r\n        identity: 'tz3UoffC7FG7zfpmvmjUmUeAaHvzdcUvAj6r',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 7',\r\n        identity: 'tz3WMqdzXqRWXwyvj5Hp2H7QEepaUuS7vd9K',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 8',\r\n        identity: 'tz3VEZ4k6a4Wx42iyev6i2aVAptTRLEAivNN',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Fresh Tezos',\r\n        identity: 'tz1QLXqnfN51dkjeghXvKHkJfhvGiM5gK4tc',\r\n        image: 'assets/img/bakers/freshtezos.png'\r\n    },\r\n    {\r\n        baker_name: 'Gate.io',\r\n        identity: 'tz1NpWrAyDL9k2Lmnyxcgr9xuJakbBxdq7FB',\r\n        image: 'assets/img/bakers/gateio.png'\r\n    },\r\n    {\r\n        baker_name: 'Happy Tezos',\r\n        identity: 'tz1WCd2jm4uSt4vntk4vSuUWoZQGhLcDuR9q',\r\n        image: 'assets/img/bakers/happytezos.png'\r\n    },\r\n    {\r\n        baker_name: 'HashQuark',\r\n        identity: 'tz1KzSC1J9aBxKp7u8TUnpN8L7S65PBRkgdF',\r\n        image: 'assets/img/bakers/hashquark.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Hayek Lab',\r\n        identity: 'tz1SohptP53wDPZhzTWzDUFAUcWF6DMBpaJV',\r\n        image: 'assets/img/bakers/hayeklab2.png'\r\n    },\r\n    {\r\n        baker_name: 'Hot Stake',\r\n        identity: 'tz1Z3KCf8CLGAYfvVWPEr562jDDyWkwNF7sT',\r\n        image: 'assets/img/bakers/hotstake.png'\r\n    },\r\n    {\r\n        baker_name: 'Hyper Blocks Pro',\r\n        identity: 'tz1VHFxUuBhwopxC9YC9gm5s2MHBHLyCtvN1',\r\n        image: 'assets/img/bakers/hyperblocks2.png'\r\n    },\r\n    /*\r\n    {\r\n        baker_name: 'iBakeTezos',\r\n        identity: 'tz1dp3tScJZy8Go3byPdioSujgDi5CdemiuZ',\r\n        image: 'assets/img/bakers/ibaketezos.jpg'\r\n    },\r\n    */\r\n    {\r\n        baker_name: 'Illuminarean',\r\n        identity: 'tz1Ryat7ZuRapjGUgsPym9DuMGrTYYyDBJoq',\r\n        image: 'assets/img/bakers/illuminarean.png'\r\n    },\r\n    {\r\n        baker_name: 'Infinity Stones',\r\n        identity: 'tz1awXW7wuXy21c66vBudMXQVAPgRnqqwgTH',\r\n        image: 'assets/img/bakers/infinitystones.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Just a Baker',\r\n        identity: 'tz1ZTG13gkvouxSANka3HG3uys8C5gu3DPXZ',\r\n        image: 'assets/img/bakers/justabaker.png'\r\n    },\r\n    {\r\n        baker_name: 'Kraken 1',\r\n        identity: 'tz1bDXD6nNSrebqmAnnKKwnX1QdePSMCj4MX',\r\n        image: 'assets/img/bakers/kraken.png'\r\n    },\r\n    {\r\n        baker_name: 'Kraken 2',\r\n        identity: 'tz1NH4A2kRyFQUYhyi9aL8jrrySQUrCgNsX9',\r\n        image: 'assets/img/bakers/kraken.png'\r\n    },\r\n    {\r\n        baker_name: 'LetzBake!',\r\n        identity: 'tz1aqcYgG6NuViML5vdWhohHJBYxcDVLNUsE',\r\n        image: 'assets/img/bakers/letzbake.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Lucid Mining',\r\n        identity: 'tz1VmiY38m3y95HqQLjMwqnMS7sdMfGomzKi',\r\n        image: 'assets/img/bakers/lucidmining.png'\r\n    },\r\n    {\r\n        baker_name: 'My Tezos Baking',\r\n        identity: 'tz1d6Fx42mYgVFnHUW8T8A7WBfJ6nD9pVok8',\r\n        image: 'assets/img/bakers/mytezosbaking.png'\r\n    },\r\n    {\r\n        baker_name: 'Norn Delegate',\r\n        identity: 'tz1YdCPrYbksK7HCoYKDyzgfXwY16Fy9rrGa',\r\n        image: 'assets/img/bakers/norndelegate.png'\r\n    },\r\n    {\r\n        baker_name: ' Crypto Pool',\r\n        identity: 'tz1KtvGSYU5hdKD288a1koTBURWYuADJGrLE',\r\n        image: 'assets/img/bakers/ocryptopool.png'\r\n    },\r\n    {\r\n        baker_name: 'Own Block',\r\n        identity: 'tz1X1fpAZtwQk94QXUgZwfgsvkQgyc2KHp9d',\r\n        image: 'assets/img/bakers/ownblock.png'\r\n    },\r\n    {\r\n        baker_name: 'P2P Validator',\r\n        identity: 'tz1P2Po7YM526ughEsRbY4oR9zaUPDZjxFrb',\r\n        image: 'assets/img/bakers/p2pvalidator.png'\r\n    },\r\n    {\r\n        baker_name: 'PayTezos',\r\n        identity: 'tz1Ldzz6k1BHdhuKvAtMRX7h5kJSMHESMHLC',\r\n        image: 'assets/img/bakers/paytezos.png'\r\n    },\r\n    {\r\n        baker_name: 'Polychain Labs',\r\n        identity: 'tz1Yju7jmmsaUiG9qQLoYv35v5pHgnWoLWbt',\r\n        image: 'assets/img/bakers/polychain.png'\r\n    },\r\n    {\r\n        baker_name: 'Polychain Labs',\r\n        identity: 'tz2TSvNTh2epDMhZHrw73nV9piBX7kLZ9K9m',\r\n        image: 'assets/img/bakers/polychain.png'\r\n    },\r\n    {\r\n        baker_name: 'POS Bakerz',\r\n        identity: 'tz1Vyuu4EJ5Nym4JcrfRLnp3hpaq1DSEp1Ke',\r\n        image: 'assets/img/bakers/pos_bakerz.png'\r\n    },\r\n    {\r\n        baker_name: 'Shake \\'n Bake',\r\n        identity: 'tz1V4qCyvPKZ5UeqdH14HN42rxvNPQfc9UZg',\r\n        image: 'assets/img/bakers/shakenbake.png'\r\n    },\r\n    {\r\n        baker_name: 'Stack Tezos',\r\n        identity: 'tz1MDKr36woXfVtrtXfV1ppPJERxPcm2wU6V',\r\n        image: 'assets/img/bakers/stacktezos.png'\r\n    },\r\n    {\r\n        baker_name: 'Stake House',\r\n        identity: 'tz1V2FYediKBAEaTpXXJBSjuQpjkyCzrTSiE',\r\n        image: 'assets/img/bakers/stake_house.png'\r\n    },\r\n    {\r\n        baker_name: 'Staked',\r\n        identity: 'tz1RCFbB9GpALpsZtu6J58sb74dm8qe6XBzv',\r\n        image: 'assets/img/bakers/staked.png'\r\n    },\r\n    {\r\n        baker_name: 'Stakery',\r\n        identity: 'tz1go7f6mEQfT2xX2LuHAqgnRGN6c2zHPf5c',\r\n        image: 'assets/img/bakers/stakery.png'\r\n    },\r\n    {\r\n        baker_name: 'Staking Facilities',\r\n        identity: 'tz1WpeqFaBG9Jm73Dmgqamy8eF8NWLz9JCoY',\r\n        image: 'assets/img/bakers/stakingfacilities.png'\r\n    },\r\n    {\r\n        baker_name: 'Stir Delegate',\r\n        identity: 'tz1LH4L6XYT2JNPhvWYC4Zq3XEiGgEwzNRvo',\r\n        image: 'assets/img/bakers/stirdelegate.png'\r\n    },\r\n    {\r\n        baker_name: 'Tez Baker',\r\n        identity: 'tz1Lhf4J9Qxoe3DZ2nfe8FGDnvVj7oKjnMY6',\r\n        image: 'assets/img/bakers/tez_baker.png'\r\n    },\r\n    {\r\n        baker_name: 'Tez Mania',\r\n        identity: 'tz1MQJPGNMijnXnVoBENFz9rUhaPt3S7rWoz',\r\n        image: 'assets/img/bakers/tez_mania.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tez Milk',\r\n        identity: 'tz1bakeKFwqmtLBzghw8CFnqFvRxLj849Vfg',\r\n        image: 'assets/img/bakers/tez_milk.png'\r\n    },\r\n    {\r\n        baker_name: 'Tez Patisserie',\r\n        identity: 'tz1UUgPwikRHW1mEyVZfGYy6QaxrY6Y7WaG5',\r\n        image: 'assets/img/bakers/tez_patisserie.png'\r\n    },\r\n    {\r\n        baker_name: 'TEZ Rocket',\r\n        identity: 'tz1abTjX2tjtMdaq5VCzkDtBnMSCFPW2oRPa',\r\n        image: 'assets/img/bakers/tez_rocket.png'\r\n    },\r\n    {\r\n        baker_name: 'Tez Whale',\r\n        identity: 'tz1isXamBXpTUgbByQ6gXgZQg4GWNW7r6rKE',\r\n        image: 'assets/img/bakers/tez_whale.png'\r\n    },\r\n    {\r\n        baker_name: 'Tez-Baking',\r\n        identity: 'tz1LBEKXaxQbd5Gtzbc1ATCwc3pppu81aWGc',\r\n        image: 'assets/img/bakers/tezbaking.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezetetic',\r\n        identity: 'tz1VceyYUpq1gk5dtp6jXQRtCtY8hm5DKt72',\r\n        image: 'assets/img/bakers/tezetetic.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezmania',\r\n        identity: 'tz1MQJPGNMijnXnVoBENFz9rUhaPt3S7rWoz',\r\n        image: 'assets/img/bakers/tezmania.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezocracy',\r\n        identity: 'tz1TaLYBeGZD3yKVHQGBM857CcNnFFNceLYh',\r\n        image: 'assets/img/bakers/tezocracy.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Bakery',\r\n        identity: 'tz1fZ767VDbqx4DeKiFswPSHh513f51mKEUZ',\r\n        image: 'assets/img/bakers/tezos_bakery.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Berlin',\r\n        identity: 'tz1Y42aKCk53vMbaJNpf1hBg1rznGdBxHJ5C',\r\n        image: 'assets/img/bakers/tezos_berlin.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Capital',\r\n        identity: 'tz2PdGc7U5tiyqPgTSgqCDct94qd6ovQwP6u',\r\n        image: 'assets/img/bakers/tezos_capital.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Capital Legacy',\r\n        identity: 'tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ',\r\n        image: 'assets/img/bakers/tezos_capital_legacy.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Cat',\r\n        identity: 'tz1XXayQohB8XRXN7kMoHbf2NFwNiH3oMRQQ',\r\n        image: 'assets/img/bakers/tezos_cat.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Chef',\r\n        identity: 'tz1hThMBD8jQjFt78heuCnKxJnJtQo9Ao25X',\r\n        image: 'assets/img/bakers/tezos_chef.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Delegate EU',\r\n        identity: 'tz1YTyvABUyhE7JHpxMVBVqjZnZM4ofMrWKE',\r\n        image: 'assets/img/bakers/tezos_delegateEU.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos France',\r\n        identity: 'tz1U638Z3xWRiXDDKx2S125MCCaAeGDdA896',\r\n        image: 'assets/img/bakers/tezos_france.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos HODL',\r\n        identity: 'tz1WnfXMPaNTBmH7DBPwqCWs9cPDJdkGBTZ8',\r\n        image: 'assets/img/bakers/tezos_hodl.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Hot Bakery',\r\n        identity: 'tz1bLwpPfr3xqy1gWBF4sGvv8bLJyPHR11kx',\r\n        image: 'assets/img/bakers/tezos_hotbakery.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Istanbul',\r\n        identity: 'tz1Vm5cfHncKGBo7YvZfHc4mmudY4qpWzvSB',\r\n        image: 'assets/img/bakers/tezos_istanbul.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Kitchen',\r\n        identity: 'tz1Nn14BBsDULrPXtkM9UQeXaE4iqJhmqmK5',\r\n        image: 'assets/img/bakers/tezos_kitchen.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Korea',\r\n        identity: 'tz1PPUo28B8BroqmVCMMNDudG4ShA2bzicrU',\r\n        image: 'assets/img/bakers/tezos_korea.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Mars',\r\n        identity: 'tz1S1Aew75hMrPUymqenKfHo8FspppXKpW7h',\r\n        image: 'assets/img/bakers/tezos_mars.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Moon',\r\n        identity: 'tz1TgvirXEwVJPg1cCrxT9zFubdzw7Ng6Ke9',\r\n        image: 'assets/img/bakers/tezos_moon.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Ninja',\r\n        identity: 'tz1djEKk6j1FqigTgbRsunbnY9BB7qsn1aAQ',\r\n        image: 'assets/img/bakers/tezos_ninja.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Panda',\r\n        identity: 'tz1PeZx7FXy7QRuMREGXGxeipb24RsMMzUNe',\r\n        image: 'assets/img/bakers/tezos_panda.png'\r\n    },\r\n    /*\r\n    {\r\n        baker_name: 'Tezos Rio',\r\n        identity: 'tz1gfipKzYrNRT14oSNQJMCdRRsUtcbZoKsd',\r\n        image: 'assets/img/bakers/tezos_rio.png'\r\n    },\r\n    */\r\n    {\r\n        baker_name: 'Tezos Suisse',\r\n        identity: 'tz1hAYfexyzPGG6RhZZMpDvAHifubsbb6kgn',\r\n        image: 'assets/img/bakers/tezos_suisse.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Tacos',\r\n        identity: 'tz1bkKTY9Y3rTsHbpr2fbGUCRm736LLquQfM',\r\n        image: 'assets/img/bakers/tezos_tacos.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Tokyo',\r\n        identity: 'tz1VYQpZvjVhv1CdcENuCNWJQXu1TWBJ8KTD',\r\n        image: 'assets/img/bakers/tezos_tokyo.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Vote',\r\n        identity: 'tz1bHzftcTKZMTZgLLtnrXydCm6UEqf4ivca',\r\n        image: 'assets/img/bakers/tezos_vote.png'\r\n    },\r\n    {\r\n        baker_name: 'TezosBC',\r\n        identity: 'tz1QGZ3dD2YpRKZ4APeso6EXTeyCUUkw6MQC',\r\n        image: 'assets/img/bakers/tezosbc.png'\r\n    },\r\n    {\r\n        baker_name: 'TezosBr',\r\n        identity: 'tz1YKh8T79LAtWxX29N5VedCSmaZGw9LNVxQ',\r\n        image: 'assets/img/bakers/tezosbrazil.png'\r\n    },\r\n    {\r\n        baker_name: 'TezosRUs',\r\n        identity: 'tz1b9MYGrbN1NAxphLEsPPNT9JC7aNFc5nA4',\r\n        image: 'assets/img/bakers/tezosrus.jpg'\r\n    },\r\n    {\r\n        baker_name: 'TezosSEAsia',\r\n        identity: 'tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX',\r\n        image: 'assets/img/bakers/tezosseasia.jpg'\r\n    },\r\n    {\r\n        baker_name: 'TezoSteam',\r\n        identity: 'tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA',\r\n        image: 'assets/img/bakers/tezosteam2.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezry',\r\n        identity: 'tz1UJvHTgpVzcKWhTazGxVcn5wsHru5Gietg',\r\n        image: 'assets/img/bakers/tezry.png'\r\n    },\r\n    {\r\n        baker_name: 'TezTech Labs',\r\n        identity: 'tz1Vtimi84kLh9RANfRVX2JvYtP4NPCT1aFm',\r\n        image: 'assets/img/bakers/teztechlabs.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezz City',\r\n        identity: 'tz1Zcxkfa5jKrRbBThG765GP29bUCU3C4ok5',\r\n        image: 'assets/img/bakers/tezzcity.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezzieland',\r\n        identity: 'tz1fUjvVhJrHLZCbhPNvDRckxApqbkievJHN',\r\n        image: 'assets/img/bakers/tezzieland.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezzigator (HSM)',\r\n        identity: 'tz3adcvQaKXTCg12zbninqo3q8ptKKtDFTLv',\r\n        image: 'assets/img/bakers/tezzigator.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezzigator Legacy',\r\n        identity: 'tz1iZEKy4LaAjnTmn2RuGDf2iqdAQKnRi8kY',\r\n        image: 'assets/img/bakers/tezzigator.png'\r\n    },\r\n    {\r\n        baker_name: 'TZ Bake',\r\n        identity: 'tz1Zhv3RkfU2pHrmaiDyxp7kFZpZrUCu1CiF',\r\n        image: 'assets/img/bakers/tz_bake.png'\r\n    },\r\n    {\r\n        baker_name: 'Tz Bakery',\r\n        identity: 'tz1cX93Q3KsiTADpCC4f12TBvAmS5tw7CW19',\r\n        image: 'assets/img/bakers/tz_bakery.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tz Bank',\r\n        identity: 'tz1bkg7rynMXVcjomoe3diB4URfv8GU2GAcw',\r\n        image: 'assets/img/bakers/tz_bank.png'\r\n    },\r\n    {\r\n        baker_name: 'Tz Dutch',\r\n        identity: 'tz1PesW5khQNhy4revu2ETvMtWPtuVyH2XkZ',\r\n        image: 'assets/img/bakers/tz_dutch.png'\r\n    },\r\n    {\r\n        baker_name: 'Tz Envoy',\r\n        identity: 'tz1iJ4qgGTzyhaYEzd1RnC6duEkLBd1nzexh',\r\n        image: 'assets/img/bakers/tz_envoy.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tz Node',\r\n        identity: 'tz1Vd1rXpV8hTHbFXCXN3c3qzCsgcU5BZw1e',\r\n        image: 'assets/img/bakers/tz_node.png'\r\n    },\r\n    {\r\n        baker_name: 'TzBakeOven',\r\n        identity: 'tz1Yh1nLXfwqVpP8btykuRguu61n3veVmADa',\r\n        image: 'assets/img/bakers/tzbakeoven.gif'\r\n    },\r\n    {\r\n        baker_name: 'Tzscan',\r\n        identity: 'tz1LWub69XbTxdatJnBkm7caDQoybSgW4T3s',\r\n        image: 'assets/img/bakers/tzscan.png'\r\n    },\r\n    {\r\n        baker_name: 'Validators.com',\r\n        identity: 'tz1Pwgj6j55akKCyvTwwr9X4np1RskSXpQY4',\r\n        image: 'assets/img/bakers/validators.png'\r\n    },\r\n    {\r\n        baker_name: 'View Nodes',\r\n        identity: 'tz1aiYKXmSRckyJ9EybKmpVry373rfyngJU8',\r\n        image: 'assets/img/bakers/viewnodestezos.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Wetez Wallet',\r\n        identity: 'tz1iMAHAVpkCVegF9FLGWUpQQeiAHh4ffdLQ',\r\n        image: 'assets/img/bakers/wetez.jpg'\r\n    },\r\n    {\r\n        baker_name: 'XTZ Antipodes',\r\n        identity: 'tz1TcH4Nb3aHNDJ7CGZhU7jgAK1BkSP4Lxds',\r\n        image: 'assets/img/bakers/xtzantipodes.png'\r\n    },\r\n    {\r\n        baker_name: 'XTZ Baker',\r\n        identity: 'tz1ZKi4VrDMEQpypn2NTn9pPbZL3xLRkETLA',\r\n        image: 'assets/img/bakers/xtzbaker.png'\r\n    },\r\n    {\r\n        baker_name: 'XTZ Bakery',\r\n        identity: 'tz1P9GwUWeAyPoT3ZwBc6gWCTP9exEPaVU3w',\r\n        image: 'assets/img/bakers/xtzbakery.jpg'\r\n    },\r\n    {\r\n        baker_name: 'XTZ Delegate',\r\n        identity: 'tz1Xek93iSXXckyQ6aYLVS5Rr2tge2en7ZxS',\r\n        image: 'assets/img/bakers/xtzdelegate.png'\r\n    },\r\n    {\r\n        baker_name: 'XTZ Land',\r\n        identity: 'tz1Z1tMai15JWUWeN2PKL9faXXVPMuWamzJj',\r\n        image: 'assets/img/bakers/xtzland.png'\r\n    },\r\n    {\r\n        baker_name: 'XTZ Master',\r\n        identity: 'tz1KfEsrtDaA1sX7vdM4qmEPWuSytuqCDp5j',\r\n        image: 'assets/img/bakers/xtzmaster.png'\r\n    },\r\n    {\r\n        baker_name: 'You Loaf We Bake',\r\n        identity: 'tz1eZwq8b5cvE2bPKokatLkVMzkxz24z3Don',\r\n        image: 'assets/img/bakers/youloafwebake.png'\r\n    },\r\n    {\r\n        baker_name: 'Zednode',\r\n        identity: 'tz1L3vFD8mFzBaS8yLHFsd7qDJY1t276Dh8i',\r\n        image: 'assets/img/bakers/zednode.png'\r\n    }\r\n];\r\n","// The file contents for the current environment will overwrite these during build.\r\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\r\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\r\n// The list of which env maps to which file can be found in `.angular-cli.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n  window.console.log = function() {};\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"]}